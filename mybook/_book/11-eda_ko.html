<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko" xml:lang="ko"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>11&nbsp; 탐색적 데이터 분석 – 데이터로 이야기하기</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./12-ijalm_ko.html" rel="next">
<link href="./10-store_and_share_ko.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-b22ef3f334bfc3d7f06e555e13679c65.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "일치 없음",
    "search-matching-documents-text": "일치된 문서",
    "search-copy-link-title": "검색 링크 복사",
    "search-hide-matches-text": "추가 검색 결과 숨기기",
    "search-more-match-text": "추가 검색결과",
    "search-more-matches-text": "추가 검색결과",
    "search-clear-button-title": "제거",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "취소",
    "search-submit-button-title": "검색",
    "search-label": "검색"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="사이드바 전환" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./09-clean_and_prepare_ko.html">준비</a></li><li class="breadcrumb-item"><a href="./11-eda_ko.html"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">탐색적 데이터 분석</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="사이드바 전환" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="검색" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">데이터로 이야기하기</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/RohanAlexander/telling_stories/" title="소스 코드" class="quarto-navigation-tool px-1" aria-label="소스 코드"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="검색"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">서문</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-errata_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">오류 및 업데이트</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">기초</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-introduction_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">데이터로 이야기하기</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-drinking_from_a_fire_hose_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">소방 호스에서 마시기</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-workflow_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">재현 가능한 워크플로우</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">소통</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-writing_research_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">연구 작성</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-graphs_tables_maps_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">그래프, 표, 지도</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">획득</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-farm_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">측정, 인구 조사, 표본 추출</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-gather_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">API, 스크래핑, 파싱</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-hunt_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">실험 및 설문 조사</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">준비</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-clean_and_prepare_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">정리, 준비 및 테스트</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-store_and_share_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">저장 및 공유</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-eda_ko.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">탐색적 데이터 분석</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">모델링</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-ijalm_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">선형 모델</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-ijaglm_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">일반화 선형 모델</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-prediction_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">예측</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">적용</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-causality_from_obs_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">관찰 데이터에서 인과 관계</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-mrp_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">사후 층화 다단계 회귀</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-text_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">데이터로서의 텍스트</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-concluding_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">17-concluding_ko.html</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">부록</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-r_essentials_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">R 필수 사항</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-python_essentials_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Python 필수 사항</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-sql_essentials_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">SQL 필수</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-datasets_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">데이터셋</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-rmarkdown_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">R 마크다운</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25-papers_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">F</span>&nbsp; <span class="chapter-title">논문</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./26-deploy_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">G</span>&nbsp; <span class="chapter-title">생산</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./98-cocktails_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">H</span>&nbsp; <span class="chapter-title">칵테일</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./99-references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">목차</h2>
   
  <ul>
  <li><a href="#서론" id="toc-서론" class="nav-link active" data-scroll-target="#서론"><span class="header-section-number">11.1</span> 서론</a></li>
  <li><a href="#년-미국-인구-및-소득-데이터" id="toc-년-미국-인구-및-소득-데이터" class="nav-link" data-scroll-target="#년-미국-인구-및-소득-데이터"><span class="header-section-number">11.2</span> 1975년 미국 인구 및 소득 데이터</a></li>
  <li><a href="#결측-데이터" id="toc-결측-데이터" class="nav-link" data-scroll-target="#결측-데이터"><span class="header-section-number">11.3</span> 결측 데이터</a></li>
  <li><a href="#ttc-지하철-지연" id="toc-ttc-지하철-지연" class="nav-link" data-scroll-target="#ttc-지하철-지연"><span class="header-section-number">11.4</span> TTC 지하철 지연</a>
  <ul class="collapse">
  <li><a href="#개별-변수의-분포-및-속성" id="toc-개별-변수의-분포-및-속성" class="nav-link" data-scroll-target="#개별-변수의-분포-및-속성"><span class="header-section-number">11.4.1</span> 개별 변수의 분포 및 속성</a></li>
  <li><a href="#변수-간의-관계" id="toc-변수-간의-관계" class="nav-link" data-scroll-target="#변수-간의-관계"><span class="header-section-number">11.4.2</span> 변수 간의 관계</a></li>
  </ul></li>
  <li><a href="#런던-영국-에어비앤비-목록" id="toc-런던-영국-에어비앤비-목록" class="nav-link" data-scroll-target="#런던-영국-에어비앤비-목록"><span class="header-section-number">11.5</span> 런던, 영국 에어비앤비 목록</a>
  <ul class="collapse">
  <li><a href="#개별-변수의-분포-및-속성-1" id="toc-개별-변수의-분포-및-속성-1" class="nav-link" data-scroll-target="#개별-변수의-분포-및-속성-1"><span class="header-section-number">11.5.1</span> 개별 변수의 분포 및 속성</a></li>
  <li><a href="#변수-간의-관계-1" id="toc-변수-간의-관계-1" class="nav-link" data-scroll-target="#변수-간의-관계-1"><span class="header-section-number">11.5.2</span> 변수 간의 관계</a></li>
  </ul></li>
  <li><a href="#결론" id="toc-결론" class="nav-link" data-scroll-target="#결론"><span class="header-section-number">11.6</span> 결론</a></li>
  <li><a href="#연습-문제" id="toc-연습-문제" class="nav-link" data-scroll-target="#연습-문제"><span class="header-section-number">11.7</span> 연습 문제</a>
  <ul class="collapse">
  <li><a href="#연습" id="toc-연습" class="nav-link" data-scroll-target="#연습">연습</a></li>
  <li><a href="#퀴즈" id="toc-퀴즈" class="nav-link" data-scroll-target="#퀴즈">퀴즈</a></li>
  <li><a href="#수업-활동" id="toc-수업-활동" class="nav-link" data-scroll-target="#수업-활동">수업 활동</a></li>
  <li><a href="#과제" id="toc-과제" class="nav-link" data-scroll-target="#과제">과제</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/RohanAlexander/telling_stories/edit/main/11-eda_ko.qmd" class="toc-action"><i class="bi bi-github"></i>편집</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./09-clean_and_prepare_ko.html">준비</a></li><li class="breadcrumb-item"><a href="./11-eda_ko.html"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">탐색적 데이터 분석</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-exploratory-data-analysis" class="quarto-section-identifier"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">탐색적 데이터 분석</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><strong>선수 지식</strong></p>
<ul>
<li><em>데이터 분석의 미래</em>, <span class="citation" data-cites="tukey1962future">(<a href="#ref-tukey1962future" role="doc-biblioref">Tukey 1962</a>)</span>
<ul>
<li>20세기 통계학자 존 투키는 통계학에 많은 기여를 했습니다. 이 논문에서 “일반적인 고려 사항” 1부에 집중하세요. 이는 데이터를 통해 무언가를 배워야 하는 방식에 대해 시대를 앞서갔습니다.</li>
</ul></li>
<li><em>데이터 정리의 모범 사례</em>, <span class="citation" data-cites="bestpracticesindatacleaning">(<a href="#ref-bestpracticesindatacleaning" role="doc-biblioref">Osborne 2012</a>)</span>
<ul>
<li>이 문제에 대한 장 길이의 처리를 제공하는 6장 “결측 또는 불완전 데이터 처리”에 집중하세요.</li>
</ul></li>
<li><em>데이터 과학을 위한 R</em>, <span class="citation" data-cites="r4ds">(<a href="#ref-r4ds" role="doc-biblioref">Wickham, Çetinkaya-Rundel, 와/과 Grolemund [2016년] 2023</a>)</span>
<ul>
<li>자체 포함된 EDA 작업 예시를 제공하는 11장 “탐색적 데이터 분석”에 집중하세요.</li>
</ul></li>
<li><em>전체 게임</em>, <span class="citation" data-cites="hadleycodes">(<a href="#ref-hadleycodes" role="doc-biblioref">Wickham 2018</a>)</span>
<ul>
<li>자체 포함된 EDA 작업 예시를 제공하는 비디오입니다. 좋은 점 중 하나는 전문가가 실수를 하고 그것을 고치는 것을 볼 수 있다는 것입니다.</li>
</ul></li>
</ul>
<p><strong>핵심 개념 및 기술</strong></p>
<ul>
<li>탐색적 데이터 분석은 데이터를 살펴보고, 그래프, 표, 모델을 구성하여 새로운 데이터셋에 익숙해지는 과정입니다. 우리는 세 가지 측면을 이해하고자 합니다.
<ol type="1">
<li>각 개별 변수 자체;</li>
<li>다른 관련 변수의 맥락에서 각 개별 변수; 그리고</li>
<li>존재하지 않는 데이터.</li>
</ol></li>
<li>EDA 동안 우리는 데이터셋의 문제와 특징, 그리고 이것이 분석 결정에 어떻게 영향을 미칠 수 있는지 이해하고자 합니다. 우리는 특히 결측값과 이상치에 대해 우려합니다.</li>
</ul>
<p><strong>소프트웨어 및 패키지</strong></p>
<ul>
<li>Base R <span class="citation" data-cites="citeR">(<a href="#ref-citeR" role="doc-biblioref">R Core Team 2024</a>)</span></li>
<li><code>arrow</code> <span class="citation" data-cites="arrow">(<a href="#ref-arrow" role="doc-biblioref">Richardson 기타 2023</a>)</span></li>
<li><code>janitor</code> <span class="citation" data-cites="janitor">(<a href="#ref-janitor" role="doc-biblioref">Firke 2023</a>)</span></li>
<li><code>lubridate</code> <span class="citation" data-cites="GrolemundWickham2011">(<a href="#ref-GrolemundWickham2011" role="doc-biblioref">Grolemund 와/과 Wickham 2011</a>)</span></li>
<li><code>mice</code> <span class="citation" data-cites="mice">(<a href="#ref-mice" role="doc-biblioref">van Buuren 와/과 Groothuis-Oudshoorn 2011</a>)</span></li>
<li><code>modelsummary</code> <span class="citation" data-cites="citemodelsummary">(<a href="#ref-citemodelsummary" role="doc-biblioref">Arel-Bundock 2022</a>)</span></li>
<li><code>naniar</code> <span class="citation" data-cites="naniar">(<a href="#ref-naniar" role="doc-biblioref">Tierney 기타 2021</a>)</span></li>
<li><code>opendatatoronto</code> <span class="citation" data-cites="citeSharla">(<a href="#ref-citeSharla" role="doc-biblioref">Gelfand 2022</a>)</span></li>
<li><code>tidyverse</code> <span class="citation" data-cites="tidyverse">(<a href="#ref-tidyverse" role="doc-biblioref">Wickham 기타 2019</a>)</span></li>
<li><code>tinytable</code> <span class="citation" data-cites="tinytable">(<a href="#ref-tinytable" role="doc-biblioref">Arel-Bundock 2024</a>)</span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arrow)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mice)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modelsummary)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(naniar)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(opendatatoronto)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tinytable)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="서론" class="level2" data-number="11.1">
<h2 data-number="11.1" class="anchored" data-anchor-id="서론"><span class="header-section-number">11.1</span> 서론</h2>
<blockquote class="blockquote">
<p>데이터 분석의 미래는 큰 발전, 실제 어려움의 극복, 그리고 모든 과학 기술 분야에 대한 훌륭한 서비스 제공을 포함할 수 있습니다. 그럴까요? 그것은 우리에게 달려 있습니다. 비현실적인 가정, 임의의 기준, 실제와 무관한 추상적인 결과의 부드러운 길 대신 실제 문제의 험난한 길을 택하려는 우리의 의지에 달려 있습니다. 누가 이 도전에 나설까요?</p>
<p><span class="citation" data-cites="tukey1962future">Tukey (<a href="#ref-tukey1962future" role="doc-biblioref">1962</a>, p.&nbsp;64)</span>.</p>
</blockquote>
<p>탐색적 데이터 분석은 결코 끝나지 않습니다. 그것은 데이터를 탐색하고 익숙해지는 적극적인 과정입니다. 흙 속에 손을 넣은 농부처럼, 우리는 데이터의 모든 윤곽과 측면을 알아야 합니다. 우리는 그것이 어떻게 변하고, 무엇을 보여주고, 숨기고, 한계가 무엇인지 알아야 합니다. 탐색적 데이터 분석(EDA)은 이 작업을 수행하는 비구조화된 과정입니다.</p>
<p>EDA는 목적을 위한 수단입니다. 전체 논문, 특히 데이터 섹션에 정보를 제공하지만, 일반적으로 최종 논문에 포함되는 것은 아닙니다. 진행하는 방법은 별도의 Quarto 문서를 만드는 것입니다. 코드를 추가하고 즉석에서 간략한 메모를 추가하십시오. 이전 코드를 삭제하지 말고 계속 추가하십시오. 결국 데이터 탐색을 캡처하는 유용한 노트북을 만들게 될 것입니다. 이것은 후속 분석 및 모델링을 안내하는 문서가 될 것입니다.</p>
<p>EDA는 다양한 기술을 활용하며, EDA를 수행할 때 많은 옵션이 있습니다<span class="citation" data-cites="staniak2019landscape">(<a href="#ref-staniak2019landscape" role="doc-biblioref">Staniak 와/과 Biecek 2019</a>)</span>. 모든 도구를 고려해야 합니다. 데이터를 살펴보고 스크롤하십시오. 표, 플롯, 요약 통계, 심지어 일부 모델도 만드십시오. 핵심은 반복하고, 완벽하게 하기보다는 빠르게 움직이며, 데이터를 철저히 이해하는 것입니다. 흥미롭게도, 우리가 가지고 있는 데이터를 철저히 이해하는 것은 종종 우리가 가지고 있지 않은 것을 이해하는 데 도움이 됩니다.</p>
<p>우리는 다음 프로세스에 관심이 있습니다.</p>
<ul>
<li>개별 변수의 분포 및 속성을 이해합니다.</li>
<li>변수 간의 관계를 이해합니다.</li>
<li>존재하지 않는 것을 이해합니다.</li>
</ul>
<p>EDA를 수행하고 완료하는 데 필요한 올바른 프로세스나 단계는 없습니다. 대신, 관련 단계와 도구는 데이터와 관심 있는 질문에 따라 달라집니다. 따라서 이 장에서는 미국 주 인구, 토론토 지하철 지연, 런던 에어비앤비 목록을 포함한 다양한 EDA 예시를 통해 EDA 접근 방식을 설명합니다. 또한 <a href="#sec-farm-data를" class="quarto-xref"><span class="quarto-unresolved-ref">sec-farm-data를</span></a> 기반으로 결측 데이터로 돌아갑니다.</p>
</section>
<section id="년-미국-인구-및-소득-데이터" class="level2" data-number="11.2">
<h2 data-number="11.2" class="anchored" data-anchor-id="년-미국-인구-및-소득-데이터"><span class="header-section-number">11.2</span> 1975년 미국 인구 및 소득 데이터</h2>
<p>첫 번째 예시로 1975년 기준 미국 주 인구를 고려합니다. 이 데이터셋은 <code>state.x77</code>과 함께 R에 내장되어 있습니다. 데이터셋은 다음과 같습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>us_populations <span class="ot">&lt;-</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  state.x77 <span class="sc">|&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">state =</span> <span class="fu">rownames</span>(state.x77)) <span class="sc">|&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state, population, income)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>us_populations</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 50 × 3
   state       population income
   &lt;chr&gt;            &lt;dbl&gt;  &lt;dbl&gt;
 1 Alabama           3615   3624
 2 Alaska             365   6315
 3 Arizona           2212   4530
 4 Arkansas          2110   3378
 5 California       21198   5114
 6 Colorado          2541   4884
 7 Connecticut       3100   5348
 8 Delaware           579   4809
 9 Florida           8277   4815
10 Georgia           4931   4091
# ℹ 40 more rows</code></pre>
</div>
</div>
<p>데이터를 빠르게 파악하고 싶습니다. 첫 번째 단계는 <code>head()</code>와 <code>tail()</code>로 상단과 하단을 살펴보고, 무작위로 선택한 다음, <code>glimpse()</code>로 변수와 클래스에 집중하는 것입니다. 무작위 선택은 중요한 측면이며, <code>head()</code>를 사용할 때 무작위 선택도 빠르게 고려해야 합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>us_populations <span class="sc">|&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  state      population income
  &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt;
1 Alabama          3615   3624
2 Alaska            365   6315
3 Arizona          2212   4530
4 Arkansas         2110   3378
5 California      21198   5114
6 Colorado         2541   4884</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>us_populations <span class="sc">|&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tail</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  state         population income
  &lt;chr&gt;              &lt;dbl&gt;  &lt;dbl&gt;
1 Vermont              472   3907
2 Virginia            4981   4701
3 Washington          3559   4864
4 West Virginia       1799   3617
5 Wisconsin           4589   4468
6 Wyoming              376   4566</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>us_populations <span class="sc">|&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">6</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  state        population income
  &lt;chr&gt;             &lt;dbl&gt;  &lt;dbl&gt;
1 Rhode Island        931   4558
2 Montana             746   4347
3 Arizona            2212   4530
4 Idaho               813   4119
5 New Jersey         7333   5237
6 Connecticut        3100   5348</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>us_populations <span class="sc">|&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 50
Columns: 3
$ state      &lt;chr&gt; "Alabama", "Alaska", "Arizona", "Arkansas", "California", "…
$ population &lt;dbl&gt; 3615, 365, 2212, 2110, 21198, 2541, 3100, 579, 8277, 4931, …
$ income     &lt;dbl&gt; 3624, 6315, 4530, 3378, 5114, 4884, 5348, 4809, 4815, 4091,…</code></pre>
</div>
</div>
<p>그런 다음 base R의 <code>summary()</code>를 사용하여 숫자 변수의 최소값, 중앙값, 최대값과 같은 주요 요약 통계와 관측치 수에 관심이 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>us_populations <span class="sc">|&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    state             population        income    
 Length:50          Min.   :  365   Min.   :3098  
 Class :character   1st Qu.: 1080   1st Qu.:3993  
 Mode  :character   Median : 2838   Median :4519  
                    Mean   : 4246   Mean   :4436  
                    3rd Qu.: 4968   3rd Qu.:4814  
                    Max.   :21198   Max.   :6315  </code></pre>
</div>
</div>
<p>마지막으로, 이러한 주요 요약 통계의 한계에서의 동작을 이해하는 것이 특히 중요합니다. 특히, 한 가지 접근 방식은 일부 관측치를 무작위로 제거하고 그들에게 어떤 일이 발생하는지 비교하는 것입니다. 예를 들어, 어떤 관측치가 제거되었는지에 따라 다른 5개의 데이터셋을 무작위로 생성할 수 있습니다. 그런 다음 요약 통계를 비교할 수 있습니다. 그 중 어느 하나라도 특히 다르다면, 제거된 관측치를 살펴보고 높은 영향력을 가진 관측치가 포함되어 있는지 확인해야 합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>sample_means <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">seed =</span> <span class="fu">c</span>(), <span class="at">mean =</span> <span class="fu">c</span>(), <span class="at">states_ignored =</span> <span class="fu">c</span>())</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)) {</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set.seed</span>(i)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  dont_get <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">sample</span>(<span class="at">x =</span> state.name, <span class="at">size =</span> <span class="dv">5</span>))</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  sample_means <span class="ot">&lt;-</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    sample_means <span class="sc">|&gt;</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rbind</span>(<span class="fu">tibble</span>(</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">seed =</span> i,</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">mean =</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>        us_populations <span class="sc">|&gt;</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>(<span class="sc">!</span>state <span class="sc">%in%</span> dont_get) <span class="sc">|&gt;</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>          <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(population)) <span class="sc">|&gt;</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>          <span class="fu">pull</span>(),</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">states_ignored =</span> <span class="fu">str_c</span>(dont_get, <span class="at">collapse =</span> <span class="st">", "</span>)</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>sample_means <span class="sc">|&gt;</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">style_tt</span>(<span class="at">j =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">align =</span> <span class="st">"lrr"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_tt</span>(<span class="at">digits =</span> <span class="dv">0</span>, <span class="at">num_mark_big =</span> <span class="st">","</span>, <span class="at">num_fmt =</span> <span class="st">"decimal"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">"시드"</span>, <span class="st">"평균"</span>, <span class="st">"무시된 주"</span>))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-summarystatesrandom" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-summarystatesrandom-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;11.1: 다른 주를 무작위로 제거했을 때의 평균 인구 비교
</figcaption>
<div aria-describedby="tbl-summarystatesrandom-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_wezgja832rqy3q1fk8g5(i, j, css_id) {
          var table = document.getElementById("tinytable_wezgja832rqy3q1fk8g5");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_wezgja832rqy3q1fk8g5');
        // Find the row with data-row attribute matching i
        var targetRow = table.querySelector(`tr [data-row="${i}"]`).closest('tr');
        var newRow = table.insertRow(targetRow.rowIndex);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        newCell.setAttribute("data-col", "0");
        newCell.setAttribute("data-row", i - 1);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_wezgja832rqy3q1fk8g5(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_wezgja832rqy3q1fk8g5");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '5', j: 1 }, { i: '5', j: 2 },  ], css_id: 'tinytable_css_ie0o1fulx6susd4u6n7t',}, 
          { positions: [ { i: '1', j: 1 }, { i: '3', j: 1 }, { i: '4', j: 1 }, { i: '3', j: 2 }, { i: '2', j: 1 }, { i: '1', j: 2 }, { i: '2', j: 2 }, { i: '4', j: 2 },  ], css_id: 'tinytable_css_rx9hx8wcn4czqt8h0e1x',}, 
          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 },  ], css_id: 'tinytable_css_bpmqooerwqqq19hn1ncy',}, 
          { positions: [ { i: '5', j: 0 },  ], css_id: 'tinytable_css_yuyku2yctzojrzo94kag',}, 
          { positions: [ { i: '1', j: 0 }, { i: '2', j: 0 }, { i: '3', j: 0 }, { i: '4', j: 0 },  ], css_id: 'tinytable_css_uopmtv3qpta2o1vjn4s7',}, 
          { positions: [ { i: '0', j: 0 },  ], css_id: 'tinytable_css_16nstqgdgccr3kecdebf',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_wezgja832rqy3q1fk8g5(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_ie0o1fulx6susd4u6n7t, .table th.tinytable_css_ie0o1fulx6susd4u6n7t { text-align: right; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_rx9hx8wcn4czqt8h0e1x, .table th.tinytable_css_rx9hx8wcn4czqt8h0e1x { text-align: right; }
      .table td.tinytable_css_bpmqooerwqqq19hn1ncy, .table th.tinytable_css_bpmqooerwqqq19hn1ncy { text-align: right; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_yuyku2yctzojrzo94kag, .table th.tinytable_css_yuyku2yctzojrzo94kag { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_uopmtv3qpta2o1vjn4s7, .table th.tinytable_css_uopmtv3qpta2o1vjn4s7 { text-align: left; }
      .table td.tinytable_css_16nstqgdgccr3kecdebf, .table th.tinytable_css_16nstqgdgccr3kecdebf { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_wezgja832rqy3q1fk8g5" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">시드</th>
                <th scope="col" data-row="0" data-col="1">평균</th>
                <th scope="col" data-row="0" data-col="2">무시된 주</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">1</td>
                  <td data-row="1" data-col="1">4,469</td>
                  <td data-row="1" data-col="2">Arkansas, Rhode Island, Alabama, North Dakota, Minnesota</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">2</td>
                  <td data-row="2" data-col="1">4,027</td>
                  <td data-row="2" data-col="2">Massachusetts, Iowa, Colorado, West Virginia, New York</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">3</td>
                  <td data-row="3" data-col="1">4,086</td>
                  <td data-row="3" data-col="2">California, Idaho, Rhode Island, Oklahoma, South Carolina</td>
                </tr>
                <tr>
                  <td data-row="4" data-col="0">4</td>
                  <td data-row="4" data-col="1">4,391</td>
                  <td data-row="4" data-col="2">Hawaii, Arizona, Connecticut, Utah, New Jersey</td>
                </tr>
                <tr>
                  <td data-row="5" data-col="0">5</td>
                  <td data-row="5" data-col="1">4,340</td>
                  <td data-row="5" data-col="2">Alaska, Texas, Iowa, Hawaii, South Dakota</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
<p>미국 주 인구의 경우, 캘리포니아와 뉴욕과 같은 큰 주가 평균 추정치에 큰 영향을 미칠 것이라는 것을 알고 있습니다. <a href="#tbl-summarystatesrandom은" class="quarto-xref">표&nbsp;<span class="quarto-unresolved-ref">tbl-summarystatesrandom은</span></a> 이를 뒷받침하며, 시드 2와 3을 사용할 때 평균이 더 낮다는 것을 알 수 있습니다.</p>
</section>
<section id="결측-데이터" class="level2" data-number="11.3">
<h2 data-number="11.3" class="anchored" data-anchor-id="결측-데이터"><span class="header-section-number">11.3</span> 결측 데이터</h2>
<p>우리는 이 책 전체에서 특히 <a href="#sec-farm-data에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-farm-data에서</span></a> 결측 데이터에 대해 많이 논의했습니다. 여기서는 결측 데이터를 이해하는 것이 EDA의 중요한 초점이 되는 이유로 돌아갑니다. 결측 데이터를 발견하면(항상 어떤 종류의 결측 데이터가 있음) 어떤 유형의 결측을 다루고 있는지 확인하고자 합니다. <span class="citation" data-cites="gelmanhillvehtari2020">Gelman, Hill, 와/과 Vehtari (<a href="#ref-gelmanhillvehtari2020" role="doc-biblioref">2020</a>, p.&nbsp;323)</span>을 기반으로 데이터셋에서 결측된 것으로 보이는 관측치에 초점을 맞춰 세 가지 주요 결측 데이터 범주를 고려합니다.</p>
<ol type="1">
<li>완전히 무작위로 결측;</li>
<li>무작위로 결측; 그리고</li>
<li>무작위가 아닌 결측.</li>
</ol>
<p>데이터가 완전히 무작위로 결측(MCAR)될 때, 관측치는 데이터셋의 다른 변수(데이터셋에 있든 없든)와 독립적으로 결측됩니다. <a href="#sec-farm-data에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-farm-data에서</span></a> 논의했듯이, 데이터가 MCAR일 때는 요약 통계 및 추론에 대한 우려가 적지만, 데이터는 거의 MCAR이 아닙니다. 그렇다 하더라도 이를 확신하기는 어려울 것입니다. 그럼에도 불구하고 예시를 시뮬레이션할 수 있습니다. 예를 들어, 무작위로 선택된 세 주의 인구 데이터를 제거할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">853</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>remove_random_states <span class="ot">&lt;-</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample</span>(<span class="at">x =</span> state.name, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">replace =</span> <span class="cn">FALSE</span>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>us_states_MCAR <span class="ot">&lt;-</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  us_populations <span class="sc">|&gt;</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">population =</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">if_else</span>(state <span class="sc">%in%</span> remove_random_states, <span class="cn">NA_real_</span>, population)</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(us_states_MCAR)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    state             population        income    
 Length:50          Min.   :  365   Min.   :3098  
 Class :character   1st Qu.: 1174   1st Qu.:3993  
 Mode  :character   Median : 2861   Median :4519  
                    Mean   : 4308   Mean   :4436  
                    3rd Qu.: 4956   3rd Qu.:4814  
                    Max.   :21198   Max.   :6315  
                    NA's   :3                     </code></pre>
</div>
</div>
<p>관측치가 무작위로 결측(MAR)될 때, 데이터셋의 다른 변수와 관련된 방식으로 데이터셋에서 결측됩니다. 예를 들어, 소득과 성별이 정치 참여에 미치는 영향을 이해하는 데 관심이 있고, 이 세 변수에 대한 정보를 수집한다고 가정해 봅시다. 그러나 어떤 이유로 남성이 소득에 대한 질문에 응답할 가능성이 낮을 수 있습니다.</p>
<p>미국 주 데이터셋의 경우, 소득이 가장 높은 세 주에 대해 소득 관측치가 없도록 하여 MAR 데이터셋을 시뮬레이션할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>highest_income_states <span class="ot">&lt;-</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  us_populations <span class="sc">|&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(income, <span class="at">n =</span> <span class="dv">3</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(state)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>us_states_MAR <span class="ot">&lt;-</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  us_populations <span class="sc">|&gt;</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">population =</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_else</span>(state <span class="sc">%in%</span> highest_income_states, <span class="cn">NA_real_</span>, population)</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(us_states_MAR)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    state             population        income    
 Length:50          Min.   :  376   Min.   :3098  
 Class :character   1st Qu.: 1101   1st Qu.:3993  
 Mode  :character   Median : 2816   Median :4519  
                    Mean   : 4356   Mean   :4436  
                    3rd Qu.: 5147   3rd Qu.:4814  
                    Max.   :21198   Max.   :6315  
                    NA's   :3                     </code></pre>
</div>
</div>
<p>마지막으로 관측치가 무작위가 아닌 결측(MNAR)될 때, 데이터셋의 관측치는 관찰되지 않은 변수 또는 결측 변수 자체와 관련된 방식으로 데이터셋에서 결측됩니다. 예를 들어, 소득이 높은 응답자 또는 교육 수준이 높은 응답자(우리가 수집하지 않은 변수)가 소득을 기입할 가능성이 낮을 수 있습니다.</p>
<p>미국 주 데이터셋의 경우, 인구가 가장 높은 세 주에 대해 인구 관측치가 없도록 하여 MNAR 데이터셋을 시뮬레이션할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>highest_population_states <span class="ot">&lt;-</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  us_populations <span class="sc">|&gt;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(population, <span class="at">n =</span> <span class="dv">3</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(state)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>us_states_MNAR <span class="ot">&lt;-</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  us_populations <span class="sc">|&gt;</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">population =</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>           <span class="fu">if_else</span>(state <span class="sc">%in%</span> highest_population_states,</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>                   <span class="cn">NA_real_</span>,</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>                   population))</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>us_states_MNAR</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 50 × 3
   state       population income
   &lt;chr&gt;            &lt;dbl&gt;  &lt;dbl&gt;
 1 Alabama           3615   3624
 2 Alaska             365   6315
 3 Arizona           2212   4530
 4 Arkansas          2110   3378
 5 California          NA   5114
 6 Colorado          2541   4884
 7 Connecticut       3100   5348
 8 Delaware           579   4809
 9 Florida           8277   4815
10 Georgia           4931   4091
# ℹ 40 more rows</code></pre>
</div>
</div>
<p>최상의 접근 방식은 상황에 따라 다르지만, 일반적으로 우리는 선택의 함의를 더 잘 이해하기 위해 시뮬레이션을 사용하고자 합니다. 데이터 측면에서 우리는 결측된 관측치를 제거하거나 값을 입력할 수 있습니다. (모델 측면에서도 옵션이 있지만, 이 책의 범위를 벗어납니다.) 이러한 접근 방식은 나름의 장점이 있지만, 겸손하게 그리고 잘 전달되어야 합니다. 시뮬레이션 사용은 매우 중요합니다.</p>
<p>미국 주 데이터셋으로 돌아가서, 결측 데이터를 생성하고, 결측 데이터를 처리하는 몇 가지 일반적인 접근 방식을 고려하고, 각 주 및 전체 미국 평균 인구에 대한 암시된 값을 비교할 수 있습니다. 다음 옵션을 고려합니다.</p>
<ol type="1">
<li>결측 데이터가 있는 관측치를 삭제합니다.</li>
<li>결측 데이터가 없는 관측치의 평균을 대체합니다.</li>
<li>다중 대체를 사용합니다.</li>
</ol>
<p>결측 데이터가 있는 관측치를 삭제하려면 <code>mean()</code>을 사용할 수 있습니다. 기본적으로 계산에서 결측값을 제외합니다. 평균을 대체하려면 결측 데이터가 제거된 두 번째 데이터셋을 구성합니다. 그런 다음 인구 열의 평균을 계산하고, 원본 데이터셋의 결측값에 대체합니다. 다중 대체는 많은 잠재적 데이터셋을 생성하고, 추론을 수행한 다음, 잠재적으로 평균을 통해 그것들을 결합하는 것을 포함합니다<span class="citation" data-cites="gelmanandhill">(<a href="#ref-gelmanandhill" role="doc-biblioref">Gelman 와/과 Hill 2007</a>, p.&nbsp;542)</span>. <code>mice</code>의 <code>mice()</code>를 사용하여 다중 대체를 구현할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>multiple_imputation <span class="ot">&lt;-</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mice</span>(</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    us_states_MCAR,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">print =</span> <span class="cn">FALSE</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>mice_estimates <span class="ot">&lt;-</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">complete</span>(multiple_imputation) <span class="sc">|&gt;</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div id="tbl-imputationoptions" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-imputationoptions-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;11.2: 세 미국 주 및 전체 평균 인구에 대한 인구의 대체된 값 비교
</figcaption>
<div aria-describedby="tbl-imputationoptions-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_3rwsifk87i8cfdfph9bn(i, j, css_id) {
          var table = document.getElementById("tinytable_3rwsifk87i8cfdfph9bn");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_3rwsifk87i8cfdfph9bn');
        // Find the row with data-row attribute matching i
        var targetRow = table.querySelector(`tr [data-row="${i}"]`).closest('tr');
        var newRow = table.insertRow(targetRow.rowIndex);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        newCell.setAttribute("data-col", "0");
        newCell.setAttribute("data-row", i - 1);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_3rwsifk87i8cfdfph9bn(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_3rwsifk87i8cfdfph9bn");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '4', j: 4 },  ], css_id: 'tinytable_css_dqg39r60hsf2c5etr8uw',}, 
          { positions: [ { i: '1', j: 4 }, { i: '2', j: 4 }, { i: '3', j: 4 },  ], css_id: 'tinytable_css_t8gpuln5oi7oopzoydc7',}, 
          { positions: [ { i: '0', j: 4 },  ], css_id: 'tinytable_css_jpft1s75i57pahxxa4mq',}, 
          { positions: [ { i: '4', j: 1 }, { i: '4', j: 2 }, { i: '4', j: 3 },  ], css_id: 'tinytable_css_84nve0h0hi41tb0e950i',}, 
          { positions: [ { i: '3', j: 1 }, { i: '3', j: 2 }, { i: '1', j: 1 }, { i: '2', j: 1 }, { i: '2', j: 2 }, { i: '2', j: 3 }, { i: '3', j: 3 }, { i: '1', j: 2 }, { i: '1', j: 3 },  ], css_id: 'tinytable_css_xh7txxpzt4o29t6megnl',}, 
          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 },  ], css_id: 'tinytable_css_vc62mldw1zmvllc3clsq',}, 
          { positions: [ { i: '4', j: 0 },  ], css_id: 'tinytable_css_3xaqiyubgenb1kaeneod',}, 
          { positions: [ { i: '1', j: 0 }, { i: '2', j: 0 }, { i: '3', j: 0 },  ], css_id: 'tinytable_css_khx1j99wq7hzn63bbzwz',}, 
          { positions: [ { i: '0', j: 0 },  ], css_id: 'tinytable_css_po81133su72808zn5gab',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_3rwsifk87i8cfdfph9bn(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_dqg39r60hsf2c5etr8uw, .table th.tinytable_css_dqg39r60hsf2c5etr8uw { text-align: right; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_t8gpuln5oi7oopzoydc7, .table th.tinytable_css_t8gpuln5oi7oopzoydc7 { text-align: right; }
      .table td.tinytable_css_jpft1s75i57pahxxa4mq, .table th.tinytable_css_jpft1s75i57pahxxa4mq { text-align: right; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_84nve0h0hi41tb0e950i, .table th.tinytable_css_84nve0h0hi41tb0e950i { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_xh7txxpzt4o29t6megnl, .table th.tinytable_css_xh7txxpzt4o29t6megnl { text-align: center; }
      .table td.tinytable_css_vc62mldw1zmvllc3clsq, .table th.tinytable_css_vc62mldw1zmvllc3clsq { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_3xaqiyubgenb1kaeneod, .table th.tinytable_css_3xaqiyubgenb1kaeneod { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_khx1j99wq7hzn63bbzwz, .table th.tinytable_css_khx1j99wq7hzn63bbzwz { text-align: left; }
      .table td.tinytable_css_po81133su72808zn5gab, .table th.tinytable_css_po81133su72808zn5gab { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_3rwsifk87i8cfdfph9bn" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">관측치</th>
                <th scope="col" data-row="0" data-col="1">제거된 값</th>
                <th scope="col" data-row="0" data-col="2">평균 대체</th>
                <th scope="col" data-row="0" data-col="3">다중 대체</th>
                <th scope="col" data-row="0" data-col="4">실제 값</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">플로리다</td>
                  <td data-row="1" data-col="1">NA</td>
                  <td data-row="1" data-col="2">4,308</td>
                  <td data-row="1" data-col="3">11,197</td>
                  <td data-row="1" data-col="4">8,277</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">몬태나</td>
                  <td data-row="2" data-col="1">NA</td>
                  <td data-row="2" data-col="2">4,308</td>
                  <td data-row="2" data-col="3">4,589</td>
                  <td data-row="2" data-col="4">746</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">뉴햄프셔</td>
                  <td data-row="3" data-col="1">NA</td>
                  <td data-row="3" data-col="2">4,308</td>
                  <td data-row="3" data-col="3">813</td>
                  <td data-row="3" data-col="4">812</td>
                </tr>
                <tr>
                  <td data-row="4" data-col="0">전체</td>
                  <td data-row="4" data-col="1">4,308</td>
                  <td data-row="4" data-col="2">4,308</td>
                  <td data-row="4" data-col="3">4,382</td>
                  <td data-row="4" data-col="4">4,246</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
<p><a href="#tbl-imputationoptions는" class="quarto-xref">표&nbsp;<span class="quarto-unresolved-ref">tbl-imputationoptions는</span></a> 이러한 접근 방식 중 어느 것도 순진하게 적용되어서는 안 된다는 것을 분명히 합니다. 예를 들어, 플로리다의 인구는 8,277명이어야 합니다. 모든 주에 걸쳐 평균을 대체하면 4,308명으로 추정되고, 다중 대체는 11,197명으로 추정됩니다. 전자는 너무 낮고 후자는 너무 높습니다. 만약 대체가 답이라면, 다른 질문을 찾는 것이 더 나을 수 있습니다. 이것이 개인 정보의 공개를 제한하는 특정 상황을 위해 개발되었다는 점을 지적할 가치가 있습니다<span class="citation" data-cites="myboynick">(<a href="#ref-myboynick" role="doc-biblioref">Horton 와/과 Lipsitz 2001</a>)</span>.</p>
<p>결측 데이터를 보완할 수 있는 것은 아무것도 없습니다<span class="citation" data-cites="manskiwow">(<a href="#ref-manskiwow" role="doc-biblioref">Manski 2022</a>)</span>. 평균 또는 다중 대체를 기반으로 한 예측을 대체하는 것이 합리적인 조건은 흔하지 않으며, 이를 확인할 수 있는 능력은 더욱 드뭅니다. 무엇을 할지는 상황과 분석 목적에 따라 다릅니다. 우리가 가지고 있는 데이터의 일부를 제거하는 다양한 시나리오를 시뮬레이션하고, 접근 방식이 어떻게 다른지 평가하는 것이 우리가 직면하는 절충안을 더 잘 이해하는 데 도움이 될 수 있습니다. 어떤 선택을 하든(명확한 해결책은 거의 없음), 수행된 작업을 문서화하고 전달하고, 후속 추정치에 대한 다른 선택의 영향을 탐색하려고 노력하십시오. 우리는 우리가 가지고 있는 데이터의 일부를 제거하는 다양한 시나리오를 시뮬레이션하고, 접근 방식이 어떻게 다른지 평가하는 방식으로 진행할 것을 권장합니다.</p>
<p>마지막으로, 더 평범하지만 마찬가지로 중요한 것은 때때로 결측 데이터가 특정 값으로 변수에 인코딩된다는 것입니다. 예를 들어, R에는 “NA” 옵션이 있지만, 때로는 결측된 경우 숫자 데이터가 “-99” 또는 “9999999”와 같은 매우 큰 정수로 입력됩니다. <a href="#sec-hunt-data에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-hunt-data에서</span></a> 소개된 Nationscape 설문 조사 데이터셋의 경우, 세 가지 유형의 알려진 결측 데이터가 있습니다.</p>
<ul>
<li>“888”: “이 웨이브에서 질문되었지만, 이 응답자에게는 질문되지 않음”</li>
<li>“999”: “확실하지 않음, 모름”</li>
<li>“.”: 응답자가 건너뜀</li>
</ul>
<p>속하지 않는 것처럼 보이는 값을 명시적으로 찾고 조사하는 것은 항상 가치가 있습니다. 그래프와 표는 이 목적에 특히 유용합니다.</p>
</section>
<section id="ttc-지하철-지연" class="level2" data-number="11.4">
<h2 data-number="11.4" class="anchored" data-anchor-id="ttc-지하철-지연"><span class="header-section-number">11.4</span> TTC 지하철 지연</h2>
<p>EDA의 두 번째이자 더 복잡한 예시로, <a href="#sec-fire-hose에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-fire-hose에서</span></a> 소개된 <code>opendatatoronto</code>와 <code>tidyverse</code>를 사용하여 토론토 지하철 시스템에 대한 데이터를 얻고 탐색합니다. 우리는 발생한 지연을 파악하고자 합니다.</p>
<p>시작하려면 2021년 토론토 교통 위원회(TTC) 지하철 지연 데이터를 다운로드합니다. 데이터는 각 월별 별도의 시트가 있는 Excel 파일로 제공됩니다. 2021년에만 관심이 있으므로 해당 연도만 필터링한 다음 <code>opendatatoronto</code>의 <code>get_resource()</code>를 사용하여 다운로드하고 <code>bind_rows()</code>로 월을 결합합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>all_2021_ttc_data <span class="ot">&lt;-</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list_package_resources</span>(<span class="st">"996cfe8d-fb35-40ce-b569-698d51fc683b"</span>) <span class="sc">|&gt;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"ttc-subway-delay-data-2021"</span>) <span class="sc">|&gt;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_resource</span>() <span class="sc">|&gt;</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>() <span class="sc">|&gt;</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(all_2021_ttc_data, <span class="st">"all_2021_ttc_data.csv"</span>)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>all_2021_ttc_data</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 16,370 × 10
   date                time   day    station code  min_delay min_gap bound line 
   &lt;dttm&gt;              &lt;time&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
 1 2021-01-01 00:00:00 00:33  Friday BLOOR … MUPAA         0       0 N     YU   
 2 2021-01-01 00:00:00 00:39  Friday SHERBO… EUCO          5       9 E     BD   
 3 2021-01-01 00:00:00 01:07  Friday KENNED… EUCD          5       9 E     BD   
 4 2021-01-01 00:00:00 01:41  Friday ST CLA… MUIS          0       0 &lt;NA&gt;  YU   
 5 2021-01-01 00:00:00 02:04  Friday SHEPPA… MUIS          0       0 &lt;NA&gt;  YU   
 6 2021-01-01 00:00:00 02:35  Friday KENNED… MUIS          0       0 &lt;NA&gt;  BD   
 7 2021-01-01 00:00:00 02:39  Friday VAUGHA… MUIS          0       0 &lt;NA&gt;  YU   
 8 2021-01-01 00:00:00 06:00  Friday TORONT… MUO           0       0 &lt;NA&gt;  YU   
 9 2021-01-01 00:00:00 06:00  Friday TORONT… MUO           0       0 &lt;NA&gt;  SHP  
10 2021-01-01 00:00:00 06:00  Friday TORONT… MRO           0       0 &lt;NA&gt;  SRT  
# ℹ 16,360 more rows
# ℹ 1 more variable: vehicle &lt;dbl&gt;</code></pre>
</div>
</div>
<p>데이터셋에는 다양한 열이 있으며, 코드북을 다운로드하여 각 열에 대해 더 자세히 알아볼 수 있습니다. 각 지연의 원인이 코딩되어 있으므로 설명을 다운로드할 수도 있습니다. 관심 있는 변수 중 하나는 “min_delay”이며, 이는 지연 시간을 분 단위로 나타냅니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 데이터 코드북</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>delay_codebook <span class="ot">&lt;-</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list_package_resources</span>(</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"996cfe8d-fb35-40ce-b569-698d51fc683b"</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"ttc-subway-delay-data-readme"</span>) <span class="sc">|&gt;</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_resource</span>() <span class="sc">|&gt;</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(delay_codebook, <span class="st">"delay_codebook.csv"</span>)</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="co"># 지연 코드 설명</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>delay_codes <span class="ot">&lt;-</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list_package_resources</span>(</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"996cfe8d-fb35-40ce-b569-698d51fc683b"</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"ttc-subway-delay-codes"</span>) <span class="sc">|&gt;</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">get_resource</span>() <span class="sc">|&gt;</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(delay_codes, <span class="st">"delay_codes.csv"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>EDA를 수행하는 동안 데이터셋을 탐색하는 한 가지 방법은 없지만, 우리는 일반적으로 다음에 특히 관심이 있습니다.</p>
<ul>
<li>변수는 어떻게 보여야 합니까? 예를 들어, 그들의 클래스는 무엇이며, 값은 무엇이며, 이들의 분포는 어떻게 보입니까?</li>
<li>예상치 못한 데이터(예: 이상치) 측면에서 놀라운 측면과 예상했지만 없는 데이터(예: 결측 데이터) 측면에서 놀라운 측면은 무엇입니까?</li>
<li>분석 목표를 개발합니다. 예를 들어, 이 경우 역 및 시간과 같은 지연과 관련된 요인을 이해하는 것일 수 있습니다. 여기서 이러한 질문에 공식적으로 답하지는 않겠지만, 답변이 어떻게 보일지 탐색할 수 있습니다.</li>
</ul>
<p>진행하면서 모든 측면을 문서화하고 놀라운 점을 기록하는 것이 중요합니다. 모델링할 때 중요할 것이므로 우리가 수행한 단계와 가정을 기록하려고 합니다. 자연 과학에서는 이러한 유형의 연구 노트북이 법적 문서가 될 수도 있습니다<span class="citation" data-cites="nihtalk">(<a href="#ref-nihtalk" role="doc-biblioref">Ryan 2015</a>)</span>.</p>
<section id="개별-변수의-분포-및-속성" class="level3" data-number="11.4.1">
<h3 data-number="11.4.1" class="anchored" data-anchor-id="개별-변수의-분포-및-속성"><span class="header-section-number">11.4.1</span> 개별 변수의 분포 및 속성</h3>
<p>변수가 주장하는 바와 일치하는지 확인해야 합니다. 그렇지 않다면 무엇을 해야 할지 파악해야 합니다. 예를 들어, 변경해야 할까요, 아니면 제거해야 할까요? 변수의 클래스가 예상대로인지 확인하는 것도 중요합니다. 예를 들어, 요인이어야 하는 변수는 요인이고 문자여야 하는 변수는 문자입니다. 그리고 실수로 요인을 숫자로 처리하거나 그 반대로 처리하지 않도록 해야 합니다. 이를 수행하는 한 가지 방법은 <code>unique()</code>를 사용하는 것이고, 다른 방법은 <code>table()</code>을 사용하는 것입니다. 어떤 변수가 특정 클래스여야 하는지에 대한 보편적인 답은 없습니다. 왜냐하면 답은 맥락에 따라 다르기 때문입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(all_2021_ttc_data<span class="sc">$</span>day)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Friday"    "Saturday"  "Sunday"    "Monday"    "Tuesday"   "Wednesday"
[7] "Thursday" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(all_2021_ttc_data<span class="sc">$</span>line)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "YU"                     "BD"                     "SHP"                   
 [4] "SRT"                    "YU/BD"                  NA                      
 [7] "YONGE/UNIVERSITY/BLOOR" "YU / BD"                "YUS"                   
[10] "999"                    "SHEP"                   "36 FINCH WEST"         
[13] "YUS &amp; BD"               "YU &amp; BD LINES"          "35 JANE"               
[16] "52"                     "41 KEELE"               "YUS/BD"                </code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(all_2021_ttc_data<span class="sc">$</span>day)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   Friday    Monday  Saturday    Sunday  Thursday   Tuesday Wednesday 
     2600      2434      2073      1942      2425      2481      2415 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(all_2021_ttc_data<span class="sc">$</span>line)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
               35 JANE          36 FINCH WEST               41 KEELE 
                     1                      1                      1 
                    52                    999                     BD 
                     1                      1                   5734 
                  SHEP                    SHP                    SRT 
                     1                    657                    656 
YONGE/UNIVERSITY/BLOOR                     YU                YU / BD 
                     1                   8880                     17 
         YU &amp; BD LINES                  YU/BD                    YUS 
                     1                    346                     18 
              YUS &amp; BD                 YUS/BD 
                     1                      1 </code></pre>
</div>
</div>
<p>지하철 노선 측면에서 문제가 있을 가능성이 높습니다. 일부는 명확한 해결책이 있지만 전부는 아닙니다. 한 가지 옵션은 그것들을 삭제하는 것이지만, 이러한 오류가 관심 있는 것과 상관 관계가 있는지 여부를 고려해야 합니다. 그렇다면 중요한 정보를 삭제하는 것일 수 있습니다. 일반적으로 올바른 답은 없습니다. 왜냐하면 우리가 데이터를 무엇에 사용하는지에 따라 달라지기 때문입니다. 지금은 문제를 기록하고 EDA를 계속 진행한 다음 나중에 무엇을 할지 결정할 것입니다. 지금은 코드북을 기반으로 올바른 것으로 알려진 노선만 제거할 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>delay_codebook <span class="sc">|&gt;</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(field_name <span class="sc">==</span> <span class="st">"Line"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  field_name description                               example
  &lt;chr&gt;      &lt;chr&gt;                                     &lt;chr&gt;  
1 Line       TTC subway line i.e. YU, BD, SHP, and SRT YU     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>all_2021_ttc_data_filtered_lines <span class="ot">&lt;-</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  all_2021_ttc_data <span class="sc">|&gt;</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(line <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"YU"</span>, <span class="st">"BD"</span>, <span class="st">"SHP"</span>, <span class="st">"SRT"</span>))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>전체 경력이 결측 데이터를 이해하는 데 사용되며, 결측값의 존재 또는 부재는 분석을 괴롭힐 수 있습니다. 시작하려면 알려진-알 수 없는 값, 즉 각 변수에 대한 NA를 살펴볼 수 있습니다. 예를 들어, 변수별로 개수를 만들 수 있습니다.</p>
<p>이 경우 “bound”에 많은 결측값이 있고 “line”에 두 개가 있습니다. <a href="#sec-farm-data에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-farm-data에서</span></a> 논의했듯이, 이러한 알려진-알 수 없는 값에 대해 우리는 그것들이 무작위로 결측되었는지 여부에 관심이 있습니다. 이상적으로는 데이터가 그냥 누락되었다는 것을 보여주고 싶습니다. 그러나 이것은 가능성이 낮으므로 우리는 일반적으로 데이터가 결측된 방식에 대한 체계적인 것을 찾으려고 합니다.</p>
<p>때로는 데이터가 중복되는 경우가 있습니다. 이것을 알아차리지 못하면 우리의 분석은 일관되게 예상할 수 없는 방식으로 잘못될 것입니다. 중복된 행을 찾는 다양한 방법이 있지만, <code>janitor</code>의 <code>get_dupes()</code>는 특히 유용합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">get_dupes</span>(all_2021_ttc_data_filtered_lines)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 36 × 11
   date                time   day    station code  min_delay min_gap bound line 
   &lt;dttm&gt;              &lt;time&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
 1 2021-09-13 00:00:00 06:00  Monday TORONT… MRO           0       0 &lt;NA&gt;  SRT  
 2 2021-09-13 00:00:00 06:00  Monday TORONT… MRO           0       0 &lt;NA&gt;  SRT  
 3 2021-09-13 00:00:00 06:00  Monday TORONT… MRO           0       0 &lt;NA&gt;  SRT  
 4 2021-09-13 00:00:00 06:00  Monday TORONT… MUO           0       0 &lt;NA&gt;  SHP  
 5 2021-09-13 00:00:00 06:00  Monday TORONT… MUO           0       0 &lt;NA&gt;  SHP  
 6 2021-09-13 00:00:00 06:00  Monday TORONT… MUO           0       0 &lt;NA&gt;  SHP  
 7 2021-03-31 00:00:00 05:45  Wedne… DUNDAS… MUNCA         0       0 &lt;NA&gt;  BD   
 8 2021-03-31 00:00:00 05:45  Wedne… DUNDAS… MUNCA         0       0 &lt;NA&gt;  BD   
 9 2021-06-08 00:00:00 14:40  Tuesd… VAUGHA… MUNOA         3       6 S     YU   
10 2021-06-08 00:00:00 14:40  Tuesd… VAUGHA… MUNOA         3       6 S     YU   
# ℹ 26 more rows
# ℹ 2 more variables: vehicle &lt;dbl&gt;, dupe_count &lt;int&gt;</code></pre>
</div>
</div>
<p>이 데이터셋에는 많은 중복이 있습니다. 우리는 체계적인 문제가 있는지 여부에 관심이 있습니다. EDA 동안 데이터셋에 빠르게 익숙해지려고 노력한다는 점을 기억하면, 한 가지 방법은 이것을 나중에 다시 탐색할 문제로 플래그를 지정하고, 지금은 <code>distinct()</code>를 사용하여 중복을 제거하는 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>all_2021_ttc_data_no_dupes <span class="ot">&lt;-</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  all_2021_ttc_data_filtered_lines <span class="sc">|&gt;</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>역 이름에 많은 오류가 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>all_2021_ttc_data_no_dupes <span class="sc">|&gt;</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(station) <span class="sc">|&gt;</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(station, <span class="st">"WEST"</span>))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 17 × 2
   station                    n
   &lt;chr&gt;                  &lt;int&gt;
 1 DUNDAS WEST STATION      198
 2 EGLINTON WEST STATION    142
 3 FINCH WEST STATION       126
 4 FINCH WEST TO LAWRENCE     3
 5 FINCH WEST TO WILSON       1
 6 LAWRENCE WEST CENTRE       1
 7 LAWRENCE WEST STATION    127
 8 LAWRENCE WEST TO EGLIN     1
 9 SHEPPARD WEST - WILSON     1
10 SHEPPARD WEST STATION    210
11 SHEPPARD WEST TO LAWRE     3
12 SHEPPARD WEST TO ST CL     2
13 SHEPPARD WEST TO WILSO     7
14 ST CLAIR WEST STATION    205
15 ST CLAIR WEST TO ST AN     1
16 ST. CLAIR WEST TO KING     1
17 ST.CLAIR WEST TO ST.A      1</code></pre>
</div>
</div>
<p>“ST. CLAIR” 및 “ST. PATRICK”과 같은 이름을 처리하고 “WEST”가 포함된 역과 그렇지 않은 역을 구별하여 첫 단어 또는 처음 몇 단어만 가져와 혼란을 약간 정리할 수 있습니다. 다시 말하지만, 우리는 데이터를 파악하려고 노력하는 것이지, 여기서 구속력 있는 결정을 내리려는 것은 아닙니다. <code>stringr</code>의 <code>word()</code>를 사용하여 역 이름에서 특정 단어를 추출합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>all_2021_ttc_data_no_dupes <span class="ot">&lt;-</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  all_2021_ttc_data_no_dupes <span class="sc">|&gt;</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">station_clean =</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">case_when</span>(</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">str_starts</span>(station, <span class="st">"ST"</span>) <span class="sc">&amp;</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>          <span class="fu">str_detect</span>(station, <span class="st">"WEST"</span>) <span class="sc">~</span> <span class="fu">word</span>(station, <span class="dv">1</span>, <span class="dv">3</span>),</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">str_starts</span>(station, <span class="st">"ST"</span>) <span class="sc">~</span> <span class="fu">word</span>(station, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">str_detect</span>(station, <span class="st">"WEST"</span>) <span class="sc">~</span> <span class="fu">word</span>(station, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="fu">word</span>(station, <span class="dv">1</span>)</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>all_2021_ttc_data_no_dupes</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15,908 × 11
   date                time   day    station code  min_delay min_gap bound line 
   &lt;dttm&gt;              &lt;time&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
 1 2021-01-01 00:00:00 00:33  Friday BLOOR … MUPAA         0       0 N     YU   
 2 2021-01-01 00:00:00 00:39  Friday SHERBO… EUCO          5       9 E     BD   
 3 2021-01-01 00:00:00 01:07  Friday KENNED… EUCD          5       9 E     BD   
 4 2021-01-01 00:00:00 01:41  Friday ST CLA… MUIS          0       0 &lt;NA&gt;  YU   
 5 2021-01-01 00:00:00 02:04  Friday SHEPPA… MUIS          0       0 &lt;NA&gt;  YU   
 6 2021-01-01 00:00:00 02:35  Friday KENNED… MUIS          0       0 &lt;NA&gt;  BD   
 7 2021-01-01 00:00:00 02:39  Friday VAUGHA… MUIS          0       0 &lt;NA&gt;  YU   
 8 2021-01-01 00:00:00 06:00  Friday TORONT… MUO           0       0 &lt;NA&gt;  YU   
 9 2021-01-01 00:00:00 06:00  Friday TORONT… MUO           0       0 &lt;NA&gt;  SHP  
10 2021-01-01 00:00:00 06:00  Friday TORONT… MRO           0       0 &lt;NA&gt;  SRT  
# ℹ 15,898 more rows
# ℹ 2 more variables: vehicle &lt;dbl&gt;, station_clean &lt;chr&gt;</code></pre>
</div>
</div>
<p>데이터를 이해하려면 원본 상태로 봐야 하며, 이를 위해 막대 차트, 산점도, 선 그래프, 히스토그램을 자주 사용합니다. EDA 동안 우리는 그래프가 멋지게 보이는지보다는 가능한 한 빨리 데이터를 파악하는 데 더 관심이 있습니다. 관심 있는 결과 중 하나인 “min_delay”의 분포를 살펴보는 것으로 시작할 수 있습니다.</p>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>all_2021_ttc_data_no_dupes <span class="sc">|&gt;</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> min_delay)) <span class="sc">+</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>) <span class="sc">+</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"지연 (분)"</span>,</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"관측치 수"</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>all_2021_ttc_data_no_dupes <span class="sc">|&gt;</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> min_delay)) <span class="sc">+</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">30</span>) <span class="sc">+</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"지연 (분)"</span>,</span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"관측치 수"</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-delayhist" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-delayhist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-delayhist" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-delayhist-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-delayhist-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="11-eda_ko_files/figure-html/fig-delayhist-1.png" class="img-fluid figure-img" data-ref-parent="fig-delayhist" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-delayhist-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) 지연 분포
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-delayhist" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-delayhist-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-delayhist-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="11-eda_ko_files/figure-html/fig-delayhist-2.png" class="img-fluid figure-img" data-ref-parent="fig-delayhist" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-delayhist-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) 로그 스케일 사용
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-delayhist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;11.1: 지연 분포 (분 단위)
</figcaption>
</figure>
</div>
<p><a href="#fig-delayhist-1의" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-delayhist-1의</span></a> 거의 비어 있는 그래프는 이상치의 존재를 시사합니다. 무엇이 진행되고 있는지 이해하려고 노력하는 다양한 방법이 있지만, 한 가지 빠른 방법은 로그를 사용하는 것입니다. 0 값은 사라질 것으로 예상된다는 점을 기억하십시오(<a href="#fig-delayhist-2" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-delayhist-2</span></a>).</p>
<p>이 초기 탐색은 우리가 더 탐색하고 싶은 소수의 큰 지연이 있음을 시사합니다. 무슨 일이 일어나고 있는지 이해하기 위해 이 데이터셋을 “delay_codes”와 결합할 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>fix_organization_of_codes <span class="ot">&lt;-</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbind</span>(</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    delay_codes <span class="sc">|&gt;</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(sub_rmenu_code, code_description_3) <span class="sc">|&gt;</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">type =</span> <span class="st">"sub"</span>) <span class="sc">|&gt;</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rename</span>(</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">code =</span> sub_rmenu_code,</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">code_desc =</span> code_description_3</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>    delay_codes <span class="sc">|&gt;</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(srt_rmenu_code, code_description_7) <span class="sc">|&gt;</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">type =</span> <span class="st">"srt"</span>) <span class="sc">|&gt;</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rename</span>(</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">code =</span> srt_rmenu_code,</span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">code_desc =</span> code_description_7</span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>all_2021_ttc_data_no_dupes_with_explanation <span class="ot">&lt;-</span></span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>  all_2021_ttc_data_no_dupes <span class="sc">|&gt;</span></span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">type =</span> <span class="fu">if_else</span>(line <span class="sc">==</span> <span class="st">"SRT"</span>, <span class="st">"srt"</span>, <span class="st">"sub"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>    fix_organization_of_codes,</span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"type"</span>, <span class="st">"code"</span>)</span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a>all_2021_ttc_data_no_dupes_with_explanation <span class="sc">|&gt;</span></span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(station_clean, code, min_delay, code_desc) <span class="sc">|&gt;</span></span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>min_delay)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15,908 × 4
   station_clean code  min_delay code_desc                                  
   &lt;chr&gt;         &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;                                      
 1 MUSEUM        PUTTP       348 Traction Power Rail Related                
 2 EGLINTON      PUSTC       343 Signals - Track Circuit Problems           
 3 WOODBINE      MUO         312 Miscellaneous Other                        
 4 MCCOWAN       PRSL        275 Loop Related Failures                      
 5 SHEPPARD WEST PUTWZ       255 Work Zone Problems - Track                 
 6 ISLINGTON     MUPR1       207 Priority One - Train in Contact With Person
 7 SHEPPARD WEST MUPR1       191 Priority One - Train in Contact With Person
 8 ROYAL         SUAP        182 Assault / Patron Involved                  
 9 ROYAL         MUPR1       180 Priority One - Train in Contact With Person
10 SHEPPARD      MUPR1       171 Priority One - Train in Contact With Person
# ℹ 15,898 more rows</code></pre>
</div>
</div>
<p>여기서 348분 지연은 “견인 전력 레일 관련” 때문이었고, 343분 지연은 “신호 - 선로 회로 문제” 때문이었음을 알 수 있습니다.</p>
<p>우리가 찾고 있는 또 다른 것은 데이터의 다양한 그룹화입니다. 특히 하위 그룹에 소수의 관측치만 포함될 수 있는 경우입니다. 이는 우리의 분석이 그들에게 특히 영향을 받을 수 있기 때문입니다. 이를 수행하는 한 가지 빠른 방법은 관심 있는 변수, 예를 들어 “line”을 색상으로 사용하여 데이터를 그룹화하는 것입니다.</p>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>all_2021_ttc_data_no_dupes_with_explanation <span class="sc">|&gt;</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> min_delay,</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> ..density..,</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">fill =</span> line</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="st">"dodge"</span>,</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">bins =</span> <span class="dv">10</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>all_2021_ttc_data_no_dupes_with_explanation <span class="sc">|&gt;</span></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> min_delay, <span class="at">fill =</span> line),</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="st">"dodge"</span>,</span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">bins =</span> <span class="dv">10</span></span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-delaydensity" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-delaydensity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-delaydensity" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-delaydensity-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-delaydensity-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="11-eda_ko_files/figure-html/fig-delaydensity-1.png" class="img-fluid figure-img" data-ref-parent="fig-delaydensity" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-delaydensity-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) 밀도
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-delaydensity" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-delaydensity-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-delaydensity-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="11-eda_ko_files/figure-html/fig-delaydensity-2.png" class="img-fluid figure-img" data-ref-parent="fig-delaydensity" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-delaydensity-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) 빈도
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-delaydensity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;11.2: 지연 분포 (분 단위)
</figcaption>
</figure>
</div>
<p><a href="#fig-delaydensity-1은" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-delaydensity-1은</span></a> 밀도를 사용하여 분포를 더 비교할 수 있도록 하지만, 빈도의 차이도 알아야 합니다(<a href="#fig-delaydensity-2" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-delaydensity-2</span></a>). 이 경우 “SHP”와 “SRT”는 훨씬 더 작은 개수를 가집니다.</p>
<p>다른 변수로 그룹화하려면 패싯을 추가할 수 있습니다(<a href="#fig-delayfreqfacet" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-delayfreqfacet</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>all_2021_ttc_data_no_dupes_with_explanation <span class="sc">|&gt;</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> min_delay, <span class="at">fill =</span> line),</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="st">"dodge"</span>,</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">bins =</span> <span class="dv">10</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(day)) <span class="sc">+</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-delayfreqfacet" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-delayfreqfacet-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="11-eda_ko_files/figure-html/fig-delayfreqfacet-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-delayfreqfacet-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;11.3: 지연 분포의 빈도 (분 단위), 일별
</figcaption>
</figure>
</div>
</div>
</div>
<p>또한 평균 지연 및 노선별 상위 5개 역을 플로팅할 수도 있습니다(<a href="#fig-whatisthisagraphforants" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-whatisthisagraphforants</span></a>). 이는 “YU”의 “ZONE”이 무엇인지와 같이 후속 조치가 필요한 문제를 제기합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>all_2021_ttc_data_no_dupes_with_explanation <span class="sc">|&gt;</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_delay =</span> <span class="fu">mean</span>(min_delay), <span class="at">n_obs =</span> <span class="fu">n</span>(),</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">.by =</span> <span class="fu">c</span>(line, station_clean)) <span class="sc">|&gt;</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n_obs <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(line, <span class="sc">-</span>mean_delay) <span class="sc">|&gt;</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">.by =</span> line) <span class="sc">|&gt;</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(station_clean, mean_delay)) <span class="sc">+</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(line), <span class="at">scales =</span> <span class="st">"free_y"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-whatisthisagraphforants" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-whatisthisagraphforants-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="11-eda_ko_files/figure-html/fig-whatisthisagraphforants-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-whatisthisagraphforants-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;11.4: 평균 지연 및 노선별 상위 5개 역
</figcaption>
</figure>
</div>
</div>
</div>
<p><a href="#sec-clean-and-prepare에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-clean-and-prepare에서</span></a> 논의했듯이, 날짜는 문제가 발생하기 쉽기 때문에 작업하기 어려운 경우가 많습니다. 이러한 이유로 EDA 동안 날짜를 고려하는 것이 특히 중요합니다. 주별로 그래프를 만들어 연간 계절성이 있는지 확인할 수 있습니다. 날짜를 사용할 때 <code>lubridate</code>는 특히 유용합니다. 예를 들어, <code>week()</code>를 사용하여 주를 구성하여 주별 평균 지연(지연된 경우)을 살펴볼 수 있습니다(<a href="#fig-delaybyweek" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-delaybyweek</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>all_2021_ttc_data_no_dupes_with_explanation <span class="sc">|&gt;</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(min_delay <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">week =</span> <span class="fu">week</span>(date)) <span class="sc">|&gt;</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_delay =</span> <span class="fu">mean</span>(min_delay),</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">.by =</span> <span class="fu">c</span>(week, line)) <span class="sc">|&gt;</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(week, mean_delay, <span class="at">color =</span> line)) <span class="sc">+</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(line), <span class="at">scales =</span> <span class="st">"free_y"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-delaybyweek" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-delaybyweek-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="11-eda_ko_files/figure-html/fig-delaybyweek-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-delaybyweek-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;11.5: 토론토 지하철의 주별 평균 지연 (분 단위)
</figcaption>
</figure>
</div>
</div>
</div>
<p>이제 10분 이상 지연된 비율을 살펴보겠습니다(<a href="#fig-longdelaybyweek" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-longdelaybyweek</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>all_2021_ttc_data_no_dupes_with_explanation <span class="sc">|&gt;</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">week =</span> <span class="fu">week</span>(date)) <span class="sc">|&gt;</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">prop_delay =</span> <span class="fu">sum</span>(min_delay <span class="sc">&gt;</span> <span class="dv">10</span>) <span class="sc">/</span> <span class="fu">n</span>(),</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">.by =</span> <span class="fu">c</span>(week, line)) <span class="sc">|&gt;</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(week, prop_delay, <span class="at">color =</span> line)) <span class="sc">+</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(line), <span class="at">scales =</span> <span class="st">"free_y"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-longdelaybyweek" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-longdelaybyweek-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="11-eda_ko_files/figure-html/fig-longdelaybyweek-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-longdelaybyweek-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;11.6: 토론토 지하철의 주별 10분 이상 지연
</figcaption>
</figure>
</div>
</div>
</div>
<p>이러한 그림, 표 및 분석은 최종 논문에 포함되지 않을 수 있습니다. 대신, 데이터를 편안하게 다룰 수 있도록 해줍니다. 우리는 눈에 띄는 각 측면과 경고 및 함의 또는 다시 돌아올 측면을 기록합니다.</p>
</section>
<section id="변수-간의-관계" class="level3" data-number="11.4.2">
<h3 data-number="11.4.2" class="anchored" data-anchor-id="변수-간의-관계"><span class="header-section-number">11.4.2</span> 변수 간의 관계</h3>
<p>두 변수 간의 관계를 살펴보는 데도 관심이 있습니다. 이를 위해 그래프를 많이 활용할 것입니다. 다양한 상황에 적합한 유형은 <a href="#sec-static-communication에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-static-communication에서</span></a> 논의되었습니다. 산점도는 연속 변수에 특히 유용하며, 모델링의 좋은 전조입니다. 예를 들어, 지연과 간격(열차 간의 시간) 간의 관계에 관심이 있을 수 있습니다(<a href="#fig-delayvsgap" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-delayvsgap</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>all_2021_ttc_data_no_dupes_with_explanation <span class="sc">|&gt;</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> min_delay, <span class="at">y =</span> min_gap, <span class="at">alpha =</span> <span class="fl">0.1</span>)) <span class="sc">+</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-delayvsgap" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-delayvsgap-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="11-eda_ko_files/figure-html/fig-delayvsgap-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-delayvsgap-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;11.7: 2021년 토론토 지하철의 지연과 간격 간의 관계
</figcaption>
</figure>
</div>
</div>
</div>
<p>범주형 변수 간의 관계는 더 많은 작업이 필요하지만, 예를 들어 역별 지연 상위 5가지 원인을 살펴볼 수도 있습니다. 그들이 다른지, 그리고 어떤 차이가 어떻게 모델링될 수 있는지에 관심이 있을 수 있습니다(<a href="#fig-categorical" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-categorical</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>all_2021_ttc_data_no_dupes_with_explanation <span class="sc">|&gt;</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_delay =</span> <span class="fu">mean</span>(min_delay),</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">.by =</span> <span class="fu">c</span>(line, code_desc)) <span class="sc">|&gt;</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>mean_delay) <span class="sc">|&gt;</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="sc">|&gt;</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> code_desc, <span class="at">y =</span> mean_delay)) <span class="sc">+</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(line), <span class="at">scales =</span> <span class="st">"free_y"</span>, <span class="at">nrow =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-categorical" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-categorical-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="11-eda_ko_files/figure-html/fig-categorical-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-categorical-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;11.8: 2021년 토론토 지하철의 범주형 변수 간의 관계
</figcaption>
</figure>
</div>
</div>
</div>
<!-- ## 사례 연구 - 역사적 캐나다 선거 -->
<!-- https://twitter.com/semrasevi/status/1122889166008745985?s=21 -->
<!-- ```{r} -->
<!-- #| eval: false -->
<!-- #| include: true -->
<!-- <!-- library(tidyverse) -->
<!-- <!-- elections_data <- read_csv("inputs/federal_candidates-1.csv") -->
<!-- <!-- elections_data$Province |> table() -->
<!-- <!-- # 주 이름에 불일치가 있습니다. -->
<!-- <!-- elections_data$Province[elections_data$Province == "Québec"] <- "Quebec" -->
<!-- <!-- elections_data <- elections_data |> -->
<!-- <!--   filter(!is.na(Province)) -->
<!-- <!-- # 성별 확인 -->
<!-- <!-- elections_data$Gender |> table() -->
<!-- <!-- # 직업 확인 -->
<!-- <!-- elections_data$occupation |> table() -->
<!-- <!-- # 고유한 개수 확인 -->
<!-- <!-- elections_data$occupation |> unique() |> length() -->
<!-- <!-- # 정당 확인 -->
<!-- <!-- elections_data$party_short |> table() -->
<!-- <!-- elections_data$party_short |> unique() |> length() -->
<!-- <!-- # 현직 확인 -->
<!-- <!-- elections_data$incumbent_candidate |> table() -->
<!-- <!-- elections_data$party_short |> unique() |> length() -->
<!-- <!-- # 연도 추가 -->
<!-- <!-- elections_data <- -->
<!-- <!--   elections_data |>
<!-- <!--   mutate(year = year(edate)) -->
<!-- <!-- # 연도 카운터 추가 -->
<!-- <!-- elections_data <- -->
<!-- <!--   elections_data |>
<!-- <!--   mutate(counter = year - 1867) -->
<!-- <!-- #### 저장 #### -->
<!-- <!-- write_csv(elections_data, "outputs/elections.csv") -->
<!-- ``` -->
<!-- ```{r} -->
<!-- #| eval: false -->
<!-- #| include: true -->
<!-- <!-- library(lubridate) -->
<!-- <!-- library(tidyverse) -->
<!-- <!-- elections_data <- read_csv("outputs/elections.csv") -->
<!-- <!-- elections_data |> -->
<!-- <!--   ggplot(aes(x = edate)) + -->
<!-- <!--   geom_histogram() -->
<!-- <!-- elections_data |> -->
<!-- <!--   ggplot(aes(x = edate, y = Result, color = Gender)) + -->
<!-- <!--   geom_point() + -->
<!-- <!--   facet_wrap(vars(Province)) -->
<!-- <!-- elections_data |> -->
<!-- <!--   ggplot(aes(x = Province, fill = Gender)) + -->
<!-- <!--   geom_bar(position = "dodge") -->
<!-- <!-- # 우리는 1차 세계 대전을 발견했습니다! -->
<!-- ``` -->
<!-- ```{r} -->
<!-- #| eval: false -->
<!-- #| include: true -->
<!-- <!-- #### 작업 공간 설정 ### -->
<!-- <!-- library(broom) -->
<!-- <!-- library(tidyverse) -->
<!-- <!-- #### 데이터 읽기 #### -->
<!-- <!-- elections_data <- read_csv("outputs/elections.csv") -->
<!-- <!-- #### 모델 #### -->
<!-- <!-- # 성별만 -->
<!-- <!-- model1 <- lm(Result ~ Gender, data = elections_data) -->
<!-- <!-- tidy(model1) -->
<!-- <!-- # 성별 및 현직 -->
<!-- <!-- model2 <- lm(Result ~ Gender + incumbent_candidate, data = elections_data) -->
<!-- <!-- tidy(model2) -->
<!-- <!-- # 성별, 현직 및 주 -->
<!-- <!-- model3 <- lm(Result ~ Gender + incumbent_candidate + Province, data = elections_data) -->
<!-- <!-- tidy(model3) -->
<!-- <!-- # 성별, 현직, 주 및 연도 -->
<!-- <!-- model4 <- lm(Result ~ Gender + incumbent_candidate + Province + year, data = elections_data) -->
<!-- <!-- model5 <- lm(Result ~ Gender + incumbent_candidate + Province + year*Gender, data = elections_data) -->
<!-- <!-- tidy(model4) -->
<!-- <!-- tidy(model5) -->
<!-- <!-- # 연도를 매년 1씩 증가하는 카운터로 변경 -->
<!-- <!-- model6 <- lm(Result ~ Gender + incumbent_candidate + Province + counter + counter*Gender, data = elections_data) -->
<!-- <!-- tidy(model6) -->
<!-- ``` -->
</section>
</section>
<section id="런던-영국-에어비앤비-목록" class="level2" data-number="11.5">
<h2 data-number="11.5" class="anchored" data-anchor-id="런던-영국-에어비앤비-목록"><span class="header-section-number">11.5</span> 런던, 영국 에어비앤비 목록</h2>
<p>이 사례 연구에서는 2023년 3월 14일 기준 런던, 영국의 에어비앤비 목록을 살펴봅니다. 데이터셋은 <a href="http://insideairbnb.com">Inside Airbnb</a>에서 가져왔으며<span class="citation" data-cites="airbnbdata">(<a href="#ref-airbnbdata" role="doc-biblioref">Cox 2021</a>)</span>, 웹사이트에서 읽어들인 다음 로컬 사본을 저장할 것입니다. <code>read_csv()</code>에 데이터셋이 있는 링크를 제공하면 다운로드됩니다. 이는 출처가 명확하므로 재현성에 도움이 됩니다. 그러나 해당 링크는 언제든지 변경될 수 있으므로 장기적인 재현성과 Inside Airbnb 서버에 미치는 영향을 최소화하기 위해 데이터의 로컬 사본을 저장한 다음 이를 사용해야 합니다.</p>
<p>필요한 데이터셋을 얻으려면 Inside Airbnb <span class="math inline">\(\rightarrow\)</span> “데이터” <span class="math inline">\(\rightarrow\)</span> “데이터 가져오기”로 이동한 다음 런던으로 스크롤하십시오. 우리는 “목록 데이터셋”에 관심이 있으며, 오른쪽 클릭하여 필요한 URL을 가져옵니다(<a href="#fig-getairbnb" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-getairbnb</span></a>). Inside Airbnb는 제공하는 데이터를 업데이트하므로 사용 가능한 특정 데이터셋은 시간이 지남에 따라 변경될 것입니다.</p>
<div id="fig-getairbnb" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-getairbnb-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/11-inside_airbnb.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-getairbnb-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;11.9: Inside Airbnb에서 에어비앤비 데이터 가져오기
</figcaption>
</figure>
</div>
<p>원본 데이터셋은 우리의 것이 아니므로 서면 허가를 받지 않고는 공개해서는 안 됩니다. 예를 들어, 입력 폴더에 추가할 수 있지만, <a href="#sec-reproducible-workflows에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-reproducible-workflows에서</span></a> 다룬 “.gitignore” 항목을 사용하여 GitHub에 푸시하지 않도록 할 수 있습니다. <code>read_csv()</code>의 “guess_max” 옵션은 열 유형을 지정할 필요가 없도록 도와줍니다. 일반적으로 <code>read_csv()</code>는 처음 몇 행을 기반으로 열 유형을 추측합니다. 그러나 때로는 처음 몇 행이 오해의 소지가 있으므로 “guess_max”는 더 많은 행을 살펴보고 무슨 일이 일어나고 있는지 파악하도록 강제합니다. Inside Airbnb에서 복사한 URL을 URL 부분에 붙여넣으십시오. 다운로드되면 로컬 사본을 저장하십시오.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"http://data.insideairbnb.com/united-kingdom/england/"</span>,</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"london/2023-03-14/data/listings.csv.gz"</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>airbnb_data <span class="ot">&lt;-</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">file =</span> url,</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">guess_max =</span> <span class="dv">20000</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(airbnb_data, <span class="st">"airbnb_data.csv"</span>)</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>airbnb_data</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>스크립트를 실행하여 데이터를 탐색할 때 Inside Airbnb 서버에 매번 데이터를 요청하는 대신 데이터의 로컬 사본을 참조해야 합니다. 실수로 서비스를 과부하하지 않도록 서버 호출을 주석 처리하는 것도 고려할 가치가 있습니다.</p>
<p>다시, 이 파일 이름인 “airbnb_data.csv”를 “.gitignore” 파일에 추가하여 GitHub에 푸시되지 않도록 하십시오. 데이터셋의 크기는 우리가 피하고 싶은 복잡성을 야기할 것입니다.</p>
<p>원본 데이터셋은 우리의 것이 아니므로 보관해야 하지만, 100MB가 넘는 크기이므로 다루기 어렵습니다. 탐색 목적으로 선택된 변수를 사용하여 parquet 파일을 생성할 것입니다(변수 이름을 파악하기 위해 <code>names(airbnb_data)</code>를 사용하여 반복적인 방식으로 수행합니다).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_selected <span class="ot">&lt;-</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  airbnb_data <span class="sc">|&gt;</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>    host_id,</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>    host_response_time,</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>    host_is_superhost,</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>    host_total_listings_count,</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>    neighbourhood_cleansed,</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>    bathrooms,</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>    bedrooms,</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>    price,</span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>    number_of_reviews,</span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>    review_scores_rating,</span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>    review_scores_accuracy,</span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>    review_scores_value</span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a><span class="fu">write_parquet</span>(</span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> airbnb_data_selected, </span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">sink =</span> </span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"2023-03-14-london-airbnblistings-select_variables.parquet"</span></span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-24"><a href="#cb54-24" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(airbnb_data)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="개별-변수의-분포-및-속성-1" class="level3" data-number="11.5.1">
<h3 data-number="11.5.1" class="anchored" data-anchor-id="개별-변수의-분포-및-속성-1"><span class="header-section-number">11.5.1</span> 개별 변수의 분포 및 속성</h3>
<p>먼저 가격에 관심이 있을 수 있습니다. 현재는 문자이므로 숫자로 변환해야 합니다. 이것은 흔한 문제이며, 모두 NA로 변환되지 않도록 약간 주의해야 합니다. 가격 변수를 강제로 숫자로 만들면 “$”와 같이 숫자와 동등한 것이 불분명한 문자가 많기 때문에 NA로 변환됩니다. 먼저 해당 문자를 제거해야 합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_selected<span class="sc">$</span>price <span class="sc">|&gt;</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "$100.00" "$65.00"  "$132.00" "$100.00" "$120.00" "$43.00" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_selected<span class="sc">$</span>price <span class="sc">|&gt;</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">""</span>) <span class="sc">|&gt;</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">|&gt;</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "$" "1" "0" "." "6" "5" "3" "2" "4" "9" "8" "7" ","</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_selected <span class="sc">|&gt;</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(price) <span class="sc">|&gt;</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(price, <span class="st">","</span>))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,629 × 1
   price    
   &lt;chr&gt;    
 1 $3,070.00
 2 $1,570.00
 3 $1,480.00
 4 $1,000.00
 5 $1,100.00
 6 $1,433.00
 7 $1,800.00
 8 $1,000.00
 9 $1,000.00
10 $1,000.00
# ℹ 1,619 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_selected <span class="ot">&lt;-</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  airbnb_data_selected <span class="sc">|&gt;</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">price =</span> <span class="fu">str_remove_all</span>(price, <span class="st">"[</span><span class="sc">\\</span><span class="st">$,]"</span>),</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">price =</span> <span class="fu">as.integer</span>(price)</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이제 가격 분포를 살펴볼 수 있습니다(<a href="#fig-airbnbpricesfirst-1" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-airbnbpricesfirst-1</span></a>). 이상치가 있으므로 로그 스케일로 고려하고 싶을 수 있습니다(<a href="#fig-airbnbpricesfirst-2" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-airbnbpricesfirst-2</span></a>).</p>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_selected <span class="sc">|&gt;</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> price)) <span class="sc">+</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"1박당 가격"</span>,</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"숙소 수"</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>airbnb_data_selected <span class="sc">|&gt;</span></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(price <span class="sc">&gt;</span> <span class="dv">1000</span>) <span class="sc">|&gt;</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> price)) <span class="sc">+</span></span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"1박당 가격"</span>,</span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"숙소 수"</span></span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-airbnbpricesfirst" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-airbnbpricesfirst-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-airbnbpricesfirst" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-airbnbpricesfirst-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-airbnbpricesfirst-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="11-eda_ko_files/figure-html/fig-airbnbpricesfirst-1.png" class="img-fluid figure-img" data-ref-parent="fig-airbnbpricesfirst" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-airbnbpricesfirst-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) 가격 분포
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-airbnbpricesfirst" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-airbnbpricesfirst-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-airbnbpricesfirst-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="11-eda_ko_files/figure-html/fig-airbnbpricesfirst-2.png" class="img-fluid figure-img" data-ref-parent="fig-airbnbpricesfirst" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-airbnbpricesfirst-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) 1,000달러 이상 가격에 대한 로그 스케일 사용
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-airbnbpricesfirst-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;11.10: 2023년 3월 런던 에어비앤비 임대료 가격 분포
</figcaption>
</figure>
</div>
<p><a href="#fig-airbnbpricesbunch를" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-airbnbpricesbunch를</span></a> 보면, 1,000달러 미만의 가격에 초점을 맞추면 대부분의 숙소가 250달러 미만의 1박당 가격을 가지고 있음을 알 수 있습니다(<a href="#fig-airbnbpricesbunch-1" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-airbnbpricesbunch-1</span></a>). <a href="#sec-clean-and_prepare에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-clean-and_prepare에서</span></a> 연령에서 일부 뭉침을 본 것과 마찬가지로, 여기에서도 가격에서 일부 뭉침이 있는 것으로 보입니다. 이는 0 또는 9로 끝나는 숫자 주변에서 발생할 수 있습니다. 관심 있는 가격을 90달러에서 210달러 사이로 확대하고, 빈을 더 작게 변경해 보겠습니다(<a href="#fig-airbnbpricesbunch-2" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-airbnbpricesbunch-2</span></a>).</p>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_selected <span class="sc">|&gt;</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(price <span class="sc">&lt;</span> <span class="dv">1000</span>) <span class="sc">|&gt;</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> price)) <span class="sc">+</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"1박당 가격"</span>,</span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"숙소 수"</span></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>airbnb_data_selected <span class="sc">|&gt;</span></span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(price <span class="sc">&gt;</span> <span class="dv">90</span>) <span class="sc">|&gt;</span></span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(price <span class="sc">&lt;</span> <span class="dv">210</span>) <span class="sc">|&gt;</span></span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> price)) <span class="sc">+</span></span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"1박당 가격"</span>,</span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"숙소 수"</span></span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-airbnbpricesbunch" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-airbnbpricesbunch-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-airbnbpricesbunch" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-airbnbpricesbunch-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-airbnbpricesbunch-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="11-eda_ko_files/figure-html/fig-airbnbpricesbunch-1.png" class="img-fluid figure-img" data-ref-parent="fig-airbnbpricesbunch" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-airbnbpricesbunch-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) 1,000달러 미만 가격은 일부 뭉침을 시사합니다.
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-airbnbpricesbunch" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-airbnbpricesbunch-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-airbnbpricesbunch-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="11-eda_ko_files/figure-html/fig-airbnbpricesbunch-2.png" class="img-fluid figure-img" data-ref-parent="fig-airbnbpricesbunch" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-airbnbpricesbunch-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) 90달러에서 210달러 사이의 가격은 뭉침을 더 명확하게 보여줍니다.
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-airbnbpricesbunch-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;11.11: 2023년 3월 런던 에어비앤비 목록 가격 분포
</figcaption>
</figure>
</div>
<p>지금은 999달러를 초과하는 모든 가격을 제거할 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_less_1000 <span class="ot">&lt;-</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>  airbnb_data_selected <span class="sc">|&gt;</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(price <span class="sc">&lt;</span> <span class="dv">1000</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>슈퍼호스트는 특히 경험이 많은 에어비앤비 호스트이며, 우리는 그들에 대해 더 자세히 알고 싶을 수 있습니다. 예를 들어, 호스트는 슈퍼호스트이거나 아니거나 둘 중 하나이므로 NA는 예상하지 않습니다. 그러나 NA가 있음을 알 수 있습니다. 호스트가 목록을 제거했거나 유사한 이유일 수 있지만, 이는 더 자세히 조사해야 할 사항입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_less_1000 <span class="sc">|&gt;</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(host_is_superhost)) <span class="sc">|&gt;</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 13</code></pre>
</div>
</div>
<p>또한 이로부터 이진 변수를 생성하고 싶습니다. 현재는 참/거짓이지만, 모델링에는 괜찮지만, 0/1로 만드는 것이 더 쉬운 몇 가지 상황이 있습니다. 그리고 지금은 슈퍼호스트 여부에 NA가 있는 사람은 모두 제거할 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_no_superhost_nas <span class="ot">&lt;-</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  airbnb_data_less_1000 <span class="sc">|&gt;</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(host_is_superhost)) <span class="sc">|&gt;</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">host_is_superhost_binary =</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">as.numeric</span>(host_is_superhost)</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>에어비앤비에서 게스트는 청결도, 정확성, 가치 등 다양한 측면에서 1점부터 5점까지 별점을 줄 수 있습니다. 그러나 데이터셋의 리뷰를 보면, 사실상 이진이며, 거의 모든 경우에 별점이 5점이거나 아니거나 둘 중 하나임을 알 수 있습니다(<a href="#fig-airbnbreviews" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-airbnbreviews</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_no_superhost_nas <span class="sc">|&gt;</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> review_scores_rating)) <span class="sc">+</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"리뷰 점수"</span>,</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"숙소 수"</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-airbnbreviews" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-airbnbreviews-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="11-eda_ko_files/figure-html/fig-airbnbreviews-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-airbnbreviews-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;11.12: 2023년 3월 런던 에어비앤비 임대료의 리뷰 점수 분포
</figcaption>
</figure>
</div>
</div>
</div>
<p>“review_scores_rating”의 NA를 처리하고 싶지만, NA가 많기 때문에 더 복잡합니다. 단순히 리뷰가 없기 때문일 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_no_superhost_nas <span class="sc">|&gt;</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(review_scores_rating)) <span class="sc">|&gt;</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 17681</code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_no_superhost_nas <span class="sc">|&gt;</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(review_scores_rating)) <span class="sc">|&gt;</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(number_of_reviews) <span class="sc">|&gt;</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">table</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>number_of_reviews
    0 
17681 </code></pre>
</div>
</div>
<p>이러한 숙소는 아직 리뷰 점수가 없습니다. 왜냐하면 충분한 리뷰가 없기 때문입니다. 전체의 거의 5분의 1에 달하는 큰 비율이므로 개수를 사용하여 더 자세히 살펴보고 싶을 수 있습니다. <!-- `vis_miss()` from `visdat` [@citevisdat]. --> 이러한 숙소에서 체계적으로 어떤 일이 일어나고 있는지 확인하고 싶습니다. 예를 들어, NA가 최소 리뷰 수와 같은 어떤 요구 사항에 의해 발생한다면, 모두 결측될 것으로 예상할 것입니다. <!-- ```{r} --> <!-- #| eval: true --> <!-- #| include: true --></p>
<!-- library(visdat) -->
<!-- airbnb_data_no_superhost_nas |> -->
<!--   select( -->
<!--     review_scores_rating, -->
<!--     review_scores_accuracy, -->
<!--     review_scores_cleanliness, -->
<!--     review_scores_checkin, -->
<!--     review_scores_communication, -->
<!--     review_scores_location, -->
<!--     review_scores_value -->
<!--   ) |> -->
<!--   vis_miss() -->
<!-- ``` -->
<!-- 거의 모든 경우에 다른 유형의 리뷰가 동일한 관측치에 대해 결측되어 있다는 것이 설득력 있게 보입니다. -->
<p>한 가지 접근 방식은 결측되지 않은 것과 주요 리뷰 점수에만 초점을 맞추는 것입니다(<a href="#fig-airbnbreviewsselected" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-airbnbreviewsselected</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_no_superhost_nas <span class="sc">|&gt;</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(review_scores_rating)) <span class="sc">|&gt;</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> review_scores_rating)) <span class="sc">+</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"평균 리뷰 점수"</span>,</span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"숙소 수"</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-airbnbreviewsselected" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-airbnbreviewsselected-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="11-eda_ko_files/figure-html/fig-airbnbreviewsselected-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-airbnbreviewsselected-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;11.13: 2023년 3월 런던 에어비앤비 임대료의 리뷰 점수 분포
</figcaption>
</figure>
</div>
</div>
</div>
<p>지금은 주요 리뷰 점수에 NA가 있는 사람은 모두 제거할 것입니다. 비록 이렇게 하면 관측치의 약 20%가 제거되지만 말입니다. 이 데이터셋을 실제 분석에 사용하게 된다면, 부록 등에서 이 결정을 정당화해야 할 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_has_reviews <span class="ot">&lt;-</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  airbnb_data_no_superhost_nas <span class="sc">|&gt;</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(review_scores_rating))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>또 다른 중요한 요소는 호스트가 문의에 얼마나 빨리 응답하는지입니다. 에어비앤비는 호스트에게 최대 24시간 이내에 응답하도록 허용하지만, 1시간 이내에 응답하도록 권장합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_has_reviews <span class="sc">|&gt;</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(host_response_time)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  host_response_time     n
  &lt;chr&gt;              &lt;int&gt;
1 N/A                19479
2 a few days or more   712
3 within a day        4512
4 within a few hours  6894
5 within an hour     24321</code></pre>
</div>
</div>
<p>호스트가 응답 시간이 NA인 경우는 불분명합니다. 다른 변수와 관련이 있을 수 있습니다. 흥미롭게도 “host_response_time” 변수의 “NA”는 실제 NA로 코딩되지 않고 다른 범주로 처리되는 것 같습니다. 실제 NA로 다시 코딩하고 변수를 요인으로 변경할 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_has_reviews <span class="ot">&lt;-</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  airbnb_data_has_reviews <span class="sc">|&gt;</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">host_response_time =</span> <span class="fu">if_else</span>(</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>      host_response_time <span class="sc">==</span> <span class="st">"N/A"</span>,</span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>      <span class="cn">NA_character_</span>,</span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>      host_response_time</span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">host_response_time =</span> <span class="fu">factor</span>(host_response_time)</span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>NA에 문제가 있습니다. NA가 많기 때문입니다. 예를 들어, 리뷰 점수와 관계가 있는지 확인하고 싶을 수 있습니다(<a href="#fig-airbnbreviewsselectednasresponse" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-airbnbreviewsselectednasresponse</span></a>). 전체 리뷰가 100인 경우가 많습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_has_reviews <span class="sc">|&gt;</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(host_response_time)) <span class="sc">|&gt;</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> review_scores_rating)) <span class="sc">+</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"평균 리뷰 점수"</span>,</span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"숙소 수"</span></span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-airbnbreviewsselectednasresponse" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-airbnbreviewsselectednasresponse-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="11-eda_ko_files/figure-html/fig-airbnbreviewsselectednasresponse-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-airbnbreviewsselectednasresponse-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;11.14: 2023년 3월 런던 에어비앤비 임대료의 응답 시간 NA인 숙소에 대한 리뷰 점수 분포
</figcaption>
</figure>
</div>
</div>
</div>
<p>일반적으로 결측값은 <code>ggplot2</code>에 의해 제거됩니다. <code>naniar</code>의 <code>geom_miss_point()</code>를 사용하여 그래프에 포함할 수 있습니다(<a href="#fig-visualisemissing" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-visualisemissing</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_has_reviews <span class="sc">|&gt;</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> host_response_time,</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> review_scores_accuracy</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">+</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_miss_point</span>() <span class="sc">+</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"호스트 응답 시간"</span>,</span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"리뷰 점수 정확도"</span>,</span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"결측값입니까?"</span></span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust=</span><span class="dv">1</span>))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-visualisemissing" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-visualisemissing-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="11-eda_ko_files/figure-html/fig-visualisemissing-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-visualisemissing-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;11.15: 호스트 응답 시간별 런던 에어비앤비 데이터의 결측값
</figcaption>
</figure>
</div>
</div>
</div>
<p>지금은 응답 시간에 NA가 있는 사람은 모두 제거할 것입니다. 이렇게 하면 다시 관측치의 약 20%가 제거됩니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_selected <span class="ot">&lt;-</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  airbnb_data_has_reviews <span class="sc">|&gt;</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(host_response_time))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>호스트가 에어비앤비에 얼마나 많은 숙소를 가지고 있는지 관심이 있을 수 있습니다(<a href="#fig-airbnbhostlisting" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-airbnbhostlisting</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_selected <span class="sc">|&gt;</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> host_total_listings_count)) <span class="sc">+</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"호스트별 총 목록 수"</span>,</span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"호스트 수"</span></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-airbnbhostlisting" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-airbnbhostlisting-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="11-eda_ko_files/figure-html/fig-airbnbhostlisting-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-airbnbhostlisting-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;11.16: 2023년 3월 런던 에어비앤비 임대료에 대한 호스트가 에어비앤비에 가지고 있는 숙소 수 분포
</figcaption>
</figure>
</div>
</div>
</div>
<p><a href="#fig-airbnbhostlisting을" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-airbnbhostlisting을</span></a> 보면 2-500개 범위의 숙소를 가진 호스트가 많고, 일반적인 긴 꼬리가 있음을 알 수 있습니다. 그렇게 많은 목록을 가진 호스트의 수는 예상치 못했으며 후속 조치가 필요합니다. 그리고 NA가 있는 호스트도 많으므로 처리해야 합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_selected <span class="sc">|&gt;</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(host_total_listings_count <span class="sc">&gt;=</span> <span class="dv">500</span>) <span class="sc">|&gt;</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 13
    host_id host_response_time host_is_superhost host_total_listings_count
      &lt;dbl&gt; &lt;fct&gt;              &lt;lgl&gt;                                 &lt;dbl&gt;
1 439074505 within an hour     FALSE                                  3627
2 156158778 within an hour     FALSE                                   558
3 156158778 within an hour     FALSE                                   558
4 156158778 within an hour     FALSE                                   558
5 156158778 within an hour     FALSE                                   558
6 156158778 within an hour     FALSE                                   558
# ℹ 9 more variables: neighbourhood_cleansed &lt;chr&gt;, bathrooms &lt;lgl&gt;,
#   bedrooms &lt;dbl&gt;, price &lt;int&gt;, number_of_reviews &lt;dbl&gt;,
#   review_scores_rating &lt;dbl&gt;, review_scores_accuracy &lt;dbl&gt;,
#   review_scores_value &lt;dbl&gt;, host_is_superhost_binary &lt;dbl&gt;</code></pre>
</div>
</div>
<p>10개 이상의 목록을 가진 사람들에 대해 즉시 이상한 점은 없지만, 동시에 여전히 명확하지 않습니다. 지금은 간단하게 한 숙소만 가진 사람들에게 초점을 맞출 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_selected <span class="ot">&lt;-</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  airbnb_data_selected <span class="sc">|&gt;</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_count</span>(host_id) <span class="sc">|&gt;</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="변수-간의-관계-1" class="level3" data-number="11.5.2">
<h3 data-number="11.5.2" class="anchored" data-anchor-id="변수-간의-관계-1"><span class="header-section-number">11.5.2</span> 변수 간의 관계</h3>
<p>변수 간에 어떤 관계가 있는지 확인하기 위해 그래프를 만들고 싶을 수 있습니다. 떠오르는 몇 가지 측면은 가격을 살펴보고 리뷰, 슈퍼호스트, 숙소 수 및 이웃과 비교하는 것입니다.</p>
<p>리뷰가 1개 이상인 숙소에 대해 가격과 리뷰, 그리고 슈퍼호스트 여부 간의 관계를 살펴볼 수 있습니다(<a href="#fig-priceandreview" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-priceandreview</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_selected <span class="sc">|&gt;</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(number_of_reviews <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> price, <span class="at">y =</span> review_scores_rating, </span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> host_is_superhost)) <span class="sc">+</span></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"1박당 가격"</span>,</span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"평균 리뷰 점수"</span>,</span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"슈퍼호스트"</span></span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-priceandreview" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-priceandreview-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="11-eda_ko_files/figure-html/fig-priceandreview-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-priceandreview-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;11.17: 2023년 3월 런던 에어비앤비 임대료에 대한 가격과 리뷰, 그리고 호스트가 슈퍼호스트인지 여부 간의 관계
</figcaption>
</figure>
</div>
</div>
</div>
<p>슈퍼호스트가 되는 요인 중 하나는 문의에 얼마나 빨리 응답하는지입니다. 슈퍼호스트는 문의에 빨리 예 또는 아니오라고 말하는 것을 포함한다고 상상할 수 있습니다. 데이터를 살펴보겠습니다. 먼저, 응답 시간별 슈퍼호스트의 가능한 값을 살펴보고 싶습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_selected <span class="sc">|&gt;</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(host_is_superhost) <span class="sc">|&gt;</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">proportion =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n),</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">proportion =</span> <span class="fu">round</span>(proportion, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  host_is_superhost     n proportion
  &lt;lgl&gt;             &lt;int&gt;      &lt;dbl&gt;
1 FALSE             10480       0.74
2 TRUE               3672       0.26</code></pre>
</div>
</div>
<p>다행히도 리뷰 행을 제거했을 때 슈퍼호스트 여부에 대한 NA가 제거된 것 같지만, 다시 살펴보면 다시 확인해야 할 수도 있습니다. <code>janitor</code>의 <code>tabyl()</code>을 사용하여 호스트의 응답 시간과 슈퍼호스트 여부를 나타내는 표를 만들 수 있습니다. 호스트가 1시간 이내에 응답하지 않으면 슈퍼호스트가 아닐 가능성이 높다는 것이 분명합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_selected <span class="sc">|&gt;</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(host_response_time, host_is_superhost) <span class="sc">|&gt;</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_percentages</span>(<span class="st">"col"</span>) <span class="sc">|&gt;</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>(<span class="at">digits =</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_ns</span>() <span class="sc">|&gt;</span></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_title</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    host_is_superhost            
 host_response_time             FALSE        TRUE
 a few days or more        5%   (489)  0%     (8)
       within a day       22% (2,322) 11%   (399)
 within a few hours       23% (2,440) 25%   (928)
     within an hour       50% (5,229) 64% (2,337)</code></pre>
</div>
</div>
<p>마지막으로, 이웃을 살펴볼 수 있습니다. 데이터 제공자가 이웃 변수를 정리하려고 시도했으므로 지금은 해당 변수를 사용할 것입니다. 그러나 실제 분석에 이 변수를 사용하게 된다면 어떻게 구성되었는지 조사해야 할 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>airbnb_data_selected <span class="sc">|&gt;</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tabyl</span>(neighbourhood_cleansed) <span class="sc">|&gt;</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_pct_formatting</span>() <span class="sc">|&gt;</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>n) <span class="sc">|&gt;</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">100</span>) <span class="sc">|&gt;</span></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">adorn_totals</span>(<span class="st">"row"</span>) <span class="sc">|&gt;</span></span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> neighbourhood_cleansed    n percent
                Hackney 1172    8.3%
            Westminster  965    6.8%
          Tower Hamlets  956    6.8%
              Southwark  939    6.6%
                Lambeth  914    6.5%
             Wandsworth  824    5.8%</code></pre>
</div>
</div>
<p>데이터셋에 모델을 빠르게 실행할 것입니다. <a href="#sec-its-just-a-linear-model에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-its-just-a-linear-model에서</span></a> 모델링에 대해 더 자세히 다룰 것이지만, EDA 동안 모델을 사용하여 데이터셋의 여러 변수 간에 존재할 수 있는 관계를 더 잘 파악할 수 있습니다. 예를 들어, 누군가가 슈퍼호스트인지 여부를 예측할 수 있는지, 그리고 그것을 설명하는 요인이 무엇인지 확인하고 싶을 수 있습니다. 결과가 이진이므로 로지스틱 회귀를 사용하기에 좋은 기회입니다. 슈퍼호스트 상태는 더 빠른 응답과 더 나은 리뷰와 관련이 있을 것으로 예상합니다. 구체적으로, 우리가 추정하는 모델은 다음과 같습니다.</p>
<p><span class="math display">\[\mbox{Prob(슈퍼호스트}=1) = \mbox{logit}^{-1}\left( \beta_0 + \beta_1 \mbox{응답 시간} + \beta_2 \mbox{리뷰} + \epsilon\right)\]</span></p>
<p><code>glm</code>을 사용하여 모델을 추정합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>logistic_reg_superhost_response_review <span class="ot">&lt;-</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glm</span>(</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>    host_is_superhost <span class="sc">~</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>      host_response_time <span class="sc">+</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>      review_scores_rating,</span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> airbnb_data_selected,</span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> binomial</span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>modelsummary</code>를 설치하고 로드한 후 <code>modelsummary()</code>를 사용하여 결과를 빠르게 살펴볼 수 있습니다(<a href="#tbl-modelsummarylogisticregressionsuper" class="quarto-xref">표&nbsp;<span class="quarto-unresolved-ref">tbl-modelsummarylogisticregressionsuper</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(logistic_reg_superhost_response_review)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-modelsummarylogisticregressionsuper" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-modelsummarylogisticregressionsuper-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;11.3: 응답 시간을 기반으로 호스트가 슈퍼호스트인지 여부 설명
</figcaption>
<div aria-describedby="tbl-modelsummarylogisticregressionsuper-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_3smfii65kaj4i2d20l6l(i, j, css_id) {
          var table = document.getElementById("tinytable_3smfii65kaj4i2d20l6l");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_3smfii65kaj4i2d20l6l');
        // Find the row with data-row attribute matching i
        var targetRow = table.querySelector(`tr [data-row="${i}"]`).closest('tr');
        var newRow = table.insertRow(targetRow.rowIndex);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        newCell.setAttribute("data-col", "0");
        newCell.setAttribute("data-row", i - 1);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_3smfii65kaj4i2d20l6l(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_3smfii65kaj4i2d20l6l");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '16', j: 1 },  ], css_id: 'tinytable_css_q29133ho4tlwsg5t624d',}, 
          { positions: [ { i: '10', j: 1 },  ], css_id: 'tinytable_css_bvjfjj51gd6yo3vjg94j',}, 
          { positions: [ { i: '1', j: 1 }, { i: '2', j: 1 }, { i: '3', j: 1 }, { i: '4', j: 1 }, { i: '5', j: 1 }, { i: '6', j: 1 }, { i: '7', j: 1 }, { i: '8', j: 1 }, { i: '9', j: 1 }, { i: '14', j: 1 }, { i: '11', j: 1 }, { i: '12', j: 1 }, { i: '13', j: 1 }, { i: '15', j: 1 },  ], css_id: 'tinytable_css_px2l7r5juucvqpv5tggn',}, 
          { positions: [ { i: '0', j: 1 },  ], css_id: 'tinytable_css_48rc4minodz497dpavyt',}, 
          { positions: [ { i: '16', j: 0 },  ], css_id: 'tinytable_css_4o5phovzxgyild7xemq2',}, 
          { positions: [ { i: '10', j: 0 },  ], css_id: 'tinytable_css_x40zkubcoqivm0bhuxa5',}, 
          { positions: [ { i: '1', j: 0 }, { i: '2', j: 0 }, { i: '3', j: 0 }, { i: '4', j: 0 }, { i: '5', j: 0 }, { i: '6', j: 0 }, { i: '7', j: 0 }, { i: '8', j: 0 }, { i: '9', j: 0 }, { i: '14', j: 0 }, { i: '11', j: 0 }, { i: '12', j: 0 }, { i: '13', j: 0 }, { i: '15', j: 0 },  ], css_id: 'tinytable_css_wthhawbphqlq90fgkxcb',}, 
          { positions: [ { i: '0', j: 0 },  ], css_id: 'tinytable_css_5hkffdfl8r4orimy8qef',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_3smfii65kaj4i2d20l6l(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_q29133ho4tlwsg5t624d, .table th.tinytable_css_q29133ho4tlwsg5t624d { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_bvjfjj51gd6yo3vjg94j, .table th.tinytable_css_bvjfjj51gd6yo3vjg94j { text-align: center; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_px2l7r5juucvqpv5tggn, .table th.tinytable_css_px2l7r5juucvqpv5tggn { text-align: center; }
      .table td.tinytable_css_48rc4minodz497dpavyt, .table th.tinytable_css_48rc4minodz497dpavyt { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_4o5phovzxgyild7xemq2, .table th.tinytable_css_4o5phovzxgyild7xemq2 { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_x40zkubcoqivm0bhuxa5, .table th.tinytable_css_x40zkubcoqivm0bhuxa5 { text-align: left; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_wthhawbphqlq90fgkxcb, .table th.tinytable_css_wthhawbphqlq90fgkxcb { text-align: left; }
      .table td.tinytable_css_5hkffdfl8r4orimy8qef, .table th.tinytable_css_5hkffdfl8r4orimy8qef { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_3smfii65kaj4i2d20l6l" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0"> </th>
                <th scope="col" data-row="0" data-col="1">(1)</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">(Intercept)</td>
                  <td data-row="1" data-col="1">-16.369</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0"></td>
                  <td data-row="2" data-col="1">(0.673)</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">host_response_timewithin a day</td>
                  <td data-row="3" data-col="1">2.230</td>
                </tr>
                <tr>
                  <td data-row="4" data-col="0"></td>
                  <td data-row="4" data-col="1">(0.361)</td>
                </tr>
                <tr>
                  <td data-row="5" data-col="0">host_response_timewithin a few hours</td>
                  <td data-row="5" data-col="1">3.035</td>
                </tr>
                <tr>
                  <td data-row="6" data-col="0"></td>
                  <td data-row="6" data-col="1">(0.359)</td>
                </tr>
                <tr>
                  <td data-row="7" data-col="0">host_response_timewithin an hour</td>
                  <td data-row="7" data-col="1">3.279</td>
                </tr>
                <tr>
                  <td data-row="8" data-col="0"></td>
                  <td data-row="8" data-col="1">(0.358)</td>
                </tr>
                <tr>
                  <td data-row="9" data-col="0">review_scores_rating</td>
                  <td data-row="9" data-col="1">2.545</td>
                </tr>
                <tr>
                  <td data-row="10" data-col="0"></td>
                  <td data-row="10" data-col="1">(0.116)</td>
                </tr>
                <tr>
                  <td data-row="11" data-col="0">Num.Obs.</td>
                  <td data-row="11" data-col="1">14152</td>
                </tr>
                <tr>
                  <td data-row="12" data-col="0">AIC</td>
                  <td data-row="12" data-col="1">14948.4</td>
                </tr>
                <tr>
                  <td data-row="13" data-col="0">BIC</td>
                  <td data-row="13" data-col="1">14986.2</td>
                </tr>
                <tr>
                  <td data-row="14" data-col="0">Log.Lik.</td>
                  <td data-row="14" data-col="1">-7469.197</td>
                </tr>
                <tr>
                  <td data-row="15" data-col="0">F</td>
                  <td data-row="15" data-col="1">197.407</td>
                </tr>
                <tr>
                  <td data-row="16" data-col="0">RMSE</td>
                  <td data-row="16" data-col="1">0.42</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
<p>각 수준이 슈퍼호스트가 될 확률과 양의 상관 관계가 있음을 알 수 있습니다. 그러나 1시간 이내에 응답하는 호스트는 데이터셋에서 슈퍼호스트인 개인과 관련이 있습니다.</p>
<p>이 분석 데이터셋을 저장할 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_parquet</span>(</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> airbnb_data_selected, </span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">sink =</span> <span class="st">"2023-05-05-london-airbnblistings-analysis_dataset.parquet"</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="결론" class="level2" data-number="11.6">
<h2 data-number="11.6" class="anchored" data-anchor-id="결론"><span class="header-section-number">11.6</span> 결론</h2>
<p>이 장에서는 탐색적 데이터 분석(EDA)을 다루었습니다. 이는 데이터셋을 알아가는 적극적인 과정입니다. 우리는 결측 데이터, 변수의 분포, 변수 간의 관계에 초점을 맞추었습니다. 그리고 이를 위해 그래프와 표를 광범위하게 사용했습니다.</p>
<p>EDA에 대한 접근 방식은 맥락과 데이터셋에서 발생하는 문제 및 특징에 따라 달라질 것입니다. 또한 기술에 따라 달라질 것입니다. 예를 들어, 회귀 모델 및 차원 축소 접근 방식을 고려하는 것이 일반적입니다.</p>
</section>
<section id="연습-문제" class="level2" data-number="11.7">
<h2 data-number="11.7" class="anchored" data-anchor-id="연습-문제"><span class="header-section-number">11.7</span> 연습 문제</h2>
<section id="연습" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="연습">연습</h3>
<ol type="1">
<li><em>(계획)</em> 다음 시나리오를 고려하십시오: <em>소셜 미디어 회사에서 연령에 대한 데이터를 가지고 있으며, 이 플랫폼에는 미국 인구의 약 80%가 있습니다.</em> 데이터셋이 어떻게 생겼을지 스케치한 다음, 모든 관측치를 보여주기 위해 만들 수 있는 그래프를 스케치하십시오.</li>
<li><em>(시뮬레이션)</em> 설명된 시나리오를 더 고려하고 상황을 시뮬레이션하십시오. 크기 때문에 parquet을 사용하십시오. 시뮬레이션된 데이터를 기반으로 10개의 테스트를 포함하십시오. 코드가 포함된 GitHub Gist 링크를 제출하십시오.</li>
<li><em>(수집)</em> 그러한 데이터셋의 가능한 출처를 설명하십시오.</li>
<li><em>(탐색)</em> <code>ggplot2</code>를 사용하여 스케치한 그래프를 만드십시오. 코드가 포함된 GitHub Gist 링크를 제출하십시오.</li>
<li><em>(소통)</em> 자신이 한 일에 대해 한 페이지를 작성하고, 표본을 기반으로 한 추정치에 대한 위협 중 일부를 신중하게 논의하십시오.</li>
</ol>
</section>
<section id="퀴즈" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="퀴즈">퀴즈</h3>
<ol type="1">
<li><span class="citation" data-cites="tukey1962future를">(<a href="#ref-tukey1962future를" role="doc-biblioref"><strong>tukey1962future를?</strong></a>)</span> 몇 단락으로 요약한 다음 데이터 과학과 관련시키십시오.</li>
<li>자신의 말로 탐색적 데이터 분석이란 무엇입니까 (최소 세 단락을 작성하고 인용 및 예시를 포함하십시오)?</li>
<li>“my_data”라는 데이터셋이 있고, “first_col”과 “second_col”이라는 두 개의 열이 있다고 가정해 보십시오. 그래프를 생성하는 R 코드를 작성하십시오(그래프 유형은 중요하지 않습니다). 코드가 포함된 GitHub Gist 링크를 제출하십시오.</li>
<li>500개의 관측치와 3개의 변수가 있는 데이터셋이 있다고 가정해 보십시오. 즉, 1,500개의 셀이 있습니다. 행 중 100개가 열 중 하나 이상에 대해 셀이 누락된 경우, 다음 중 무엇을 하시겠습니까? a) 데이터셋에서 전체 행을 제거하시겠습니까? b) 데이터를 있는 그대로 분석하시겠습니까? c) 다른 절차를 사용하시겠습니까? 데이터셋이 10,000개의 행을 가지고 있지만, 동일한 수의 결측 행을 가지고 있다면 어떨까요? 최소 세 단락으로 예시와 인용을 포함하여 논의하십시오.</li>
<li>특이한 값을 식별하는 세 가지 방법을 논의하고, 각각에 대해 최소 한 단락을 작성하십시오.</li>
<li>범주형 변수와 연속형 변수의 차이점은 무엇입니까?</li>
<li>요인 변수와 정수 변수의 차이점은 무엇입니까?</li>
<li>데이터셋에서 체계적으로 배제되는 사람들을 어떻게 생각할 수 있습니까?</li>
<li><code>opendatatoronto</code>를 사용하여 2014년 시장 선거 기부금 데이터를 다운로드하십시오. (참고: <code>get_resource()</code>에서 얻을 2014년 파일에는 많은 시트가 포함되어 있으므로 시장 선거와 관련된 시트만 유지하십시오.)
<ol type="1">
<li>데이터 형식을 정리하십시오(파싱 문제 수정 및 <code>janitor</code>를 사용하여 열 이름 표준화).</li>
<li>데이터셋의 변수를 요약하십시오. 결측값이 있습니까? 있다면 걱정해야 합니까? 모든 변수가 올바른 형식입니까? 그렇지 않다면 올바른 형식의 새 변수를 만드십시오.</li>
<li>기부금 값의 분포를 시각적으로 탐색하십시오. 어떤 기부금이 눈에 띄는 이상치입니까? 그들은 유사한 특성을 공유합니까? 대부분의 데이터를 더 잘 파악하기 위해 이러한 이상치를 제외한 기부금 분포를 플로팅하는 것이 유용할 수 있습니다.</li>
<li>다음 각 범주에서 상위 5명의 후보자를 나열하십시오: 1) 총 기부금; 2) 평균 기부금; 그리고 3) 기부금 수.</li>
<li>해당 프로세스를 반복하되, 후보자 자신의 기부금은 제외하십시오.</li>
<li>두 명 이상의 후보자에게 돈을 기부한 기부자는 몇 명입니까?</li>
</ol></li>
<li><code>ggplot()</code>에서 막대가 있는 그래프를 생성하는 세 가지 <code>geom</code>을 나열하십시오.</li>
<li>10,000개의 관측치와 27개의 변수가 있는 데이터셋을 고려하십시오. 각 관측치에는 최소 하나의 결측 변수가 있습니다. 무슨 일이 일어나고 있는지 이해하기 위해 취할 단계를 한두 단락으로 논의하십시오.</li>
<li>알려진 결측 데이터는 데이터셋에 구멍을 남기는 데이터입니다. 그러나 수집되지 않은 데이터는 어떻습니까? <span class="citation" data-cites="mcclelland2019lock과">(<a href="#ref-mcclelland2019lock과" role="doc-biblioref"><strong>mcclelland2019lock과?</strong></a>)</span> <span class="citation" data-cites="luscombe2020policing을">(<a href="#ref-luscombe2020policing을" role="doc-biblioref"><strong>luscombe2020policing을?</strong></a>)</span> 살펴보십시오. 그들이 데이터셋을 어떻게 수집했고, 이를 구성하는 데 무엇이 필요했는지 조사하십시오. 데이터셋에 무엇이 있고 왜 있습니까? 무엇이 결측되었고 왜 결측되었습니까? 이것이 결과에 어떻게 영향을 미칠 수 있습니까? 유사한 편향이 사용했거나 읽은 다른 데이터셋에 어떻게 들어갈 수 있습니까?</li>
</ol>
</section>
<section id="수업-활동" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="수업-활동">수업 활동</h3>
<ul>
<li>다음 파일 이름을 수정하십시오.</li>
</ul>
<pre class="text"><code>example_project/
├── .gitignore
├── Example project.Rproj
├── scripts
│   ├── simulate data.R
│   ├── DownloadData.R
│   ├── data-cleaning.R
│   ├── test(new)data.R</code></pre>
<ul>
<li><a href="#sec-static-communication에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-static-communication에서</span></a> 소개된 Anscombe의 콰르텟을 고려하십시오. 특정 관측치를 무작위로 제거할 것입니다. 결측 데이터가 있는 데이터셋을 받았다고 가정해 보십시오. <a href="#sec-farm-data" class="quarto-xref"><span class="quarto-unresolved-ref">sec-farm-data</span></a> 및 <a href="#sec-exploratory-data-analysis에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-exploratory-data-analysis에서</span></a> 결측 데이터를 처리하는 접근 방식 중 하나를 선택한 다음, 선택한 것을 구현하는 코드를 작성하십시오. 다음을 비교하십시오.
<ul>
<li>실제 관측치와 결과;</li>
<li>실제 요약 통계와 요약 통계; 그리고</li>
<li>결측 데이터와 실제 데이터를 하나의 그래프에 보여주는 그래프를 만드십시오.</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">853</span>)</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>tidy_anscombe <span class="ot">&lt;-</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>  anscombe <span class="sc">|&gt;</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">everything</span>(),</span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">".value"</span>, <span class="st">"set"</span>),</span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_pattern =</span> <span class="st">"(.)(.)"</span>)</span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a>tidy_anscombe_MCAR <span class="ot">&lt;-</span></span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>  tidy_anscombe <span class="sc">|&gt;</span></span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">row_number =</span> <span class="fu">row_number</span>()) <span class="sc">|&gt;</span></span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb96-13"><a href="#cb96-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">if_else</span>(row_number <span class="sc">%in%</span> <span class="fu">sample</span>(</span>
<span id="cb96-14"><a href="#cb96-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(tidy_anscombe), <span class="at">size =</span> <span class="dv">10</span></span>
<span id="cb96-15"><a href="#cb96-15" aria-hidden="true" tabindex="-1"></a>    ), <span class="cn">NA_real_</span>, x),</span>
<span id="cb96-16"><a href="#cb96-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">if_else</span>(row_number <span class="sc">%in%</span> <span class="fu">sample</span>(</span>
<span id="cb96-17"><a href="#cb96-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(tidy_anscombe), <span class="at">size =</span> <span class="dv">10</span></span>
<span id="cb96-18"><a href="#cb96-18" aria-hidden="true" tabindex="-1"></a>    ), <span class="cn">NA_real_</span>, y)</span>
<span id="cb96-19"><a href="#cb96-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb96-20"><a href="#cb96-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>row_number)</span>
<span id="cb96-21"><a href="#cb96-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-22"><a href="#cb96-22" aria-hidden="true" tabindex="-1"></a>tidy_anscombe_MCAR</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 44 × 3
   set       x     y
   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 1        10  8.04
 2 2        10  9.14
 3 3        NA NA   
 4 4         8 NA   
 5 1         8  6.95
 6 2         8  8.14
 7 3         8  6.77
 8 4         8  5.76
 9 1        NA  7.58
10 2        13  8.74
# ℹ 34 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 여기에 코드 추가</span></span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>다음 데이터셋으로 연습을 다시 수행하십시오. 이 경우 주요 차이점은 무엇입까?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>tidy_anscombe_MNAR <span class="ot">&lt;-</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  tidy_anscombe <span class="sc">|&gt;</span></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(x)) <span class="sc">|&gt;</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordered_x_rows =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(tidy_anscombe),</span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">if_else</span>(ordered_x_rows <span class="sc">%in%</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="cn">NA_real_</span>, x)</span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>ordered_x_rows) <span class="sc">|&gt;</span></span>
<span id="cb99-9"><a href="#cb99-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(y)) <span class="sc">|&gt;</span></span>
<span id="cb99-10"><a href="#cb99-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb99-11"><a href="#cb99-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">ordered_y_rows =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(tidy_anscombe),</span>
<span id="cb99-12"><a href="#cb99-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">if_else</span>(ordered_y_rows <span class="sc">%in%</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="cn">NA_real_</span>, y)</span>
<span id="cb99-13"><a href="#cb99-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb99-14"><a href="#cb99-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(set) <span class="sc">|&gt;</span></span>
<span id="cb99-15"><a href="#cb99-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>ordered_y_rows)</span>
<span id="cb99-16"><a href="#cb99-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-17"><a href="#cb99-17" aria-hidden="true" tabindex="-1"></a>tidy_anscombe_MNAR</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 44 × 3
   set       x     y
   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
 1 1        NA NA   
 2 1        NA NA   
 3 1         9 NA   
 4 1        11  8.33
 5 1        10  8.04
 6 1        NA  7.58
 7 1         6  7.24
 8 1         8  6.95
 9 1         5  5.68
10 1         7  4.82
# ℹ 34 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 여기에 코드 추가</span></span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>페어 프로그래밍(5분마다 교대)을 사용하여 새 R 프로젝트를 만든 다음, <span class="citation" data-cites="Bombieri2023의">(<a href="#ref-Bombieri2023의" role="doc-biblioref"><strong>Bombieri2023의?</strong></a>)</span> 다음 데이터셋을 읽어들이고 Quarto 문서에 코드와 메모를 추가하여 탐색하십시오.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="at">url =</span> <span class="st">"https://doi.org/10.1371/journal.pbio.3001946.s005"</span>,</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">destfile =</span> <span class="st">"data.xlsx"</span>)</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_xlsx</span>(<span class="at">path =</span> <span class="st">"data.xlsx"</span>,</span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">col_types =</span> <span class="st">"text"</span>) <span class="sc">|&gt;</span></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">convert_to_date</span>(date))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>다른 학생과 짝을 이루어 데이터 과학자 역할을 수행하십시오. 파트너는 주제와 질문을 선택할 수 있으며, 당신은 잘 모르지만 그들은 잘 아는 것이어야 합니다(예: 국제 학생이라면 그들의 나라에 대한 것). 그들과 협력하여 분석 계획을 개발하고, 데이터를 시뮬레이션하고, 사용할 수 있는 그래프를 만들어야 합니다.</li>
</ul>
</section>
<section id="과제" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="과제">과제</h3>
<p>다음 옵션 중 하나를 선택하십시오. Quarto를 사용하고, 적절한 제목, 저자, 날짜, GitHub 리포지토리 링크 및 인용을 포함하십시오. PDF를 제출하십시오.</p>
<p><strong>옵션 1:</strong></p>
<p>미국 주 및 인구에 대해 수행된 결측 데이터 연습을 <code>palmerpenguins</code>에서 사용 가능한 <code>penguins()</code> 데이터셋의 “bill_length_mm” 변수에 대해 반복하십시오. 대체된 값과 실제 값을 비교하십시오.</p>
<p>자신이 한 일과 발견한 내용에 대해 최소 두 페이지를 작성하십시오.</p>
<p>그 후, 다른 학생과 짝을 이루어 작성한 작업을 교환하십시오. 그들의 피드백을 바탕으로 업데이트하고, 논문에 그들의 이름을 명시하여 인정하십시오.</p>
<p><strong>옵션 2:</strong></p>
<p>파리에 대한 에어비앤비 EDA를 수행하십시오.</p>
<p><strong>옵션 3:</strong></p>
<p>“결측 데이터란 무엇이며 어떻게 처리해야 하는가?”라는 주제에 대해 최소 두 페이지를 작성하십시오.</p>
<p>그 후, 다른 학생과 짝을 이루어 작성한 작업을 교환하십시오. 그들의 피드백을 바탕으로 업데이트하고, 논문에 그들의 이름을 명시하여 인정하십시오.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-citemodelsummary" class="csl-entry" role="listitem">
Arel-Bundock, Vincent. 2022. <span>“<span>modelsummary</span>: Data and Model Summaries in <span>R</span>”</span>. <em>Journal of Statistical Software</em> 103 (1): 1–23. <a href="https://doi.org/10.18637/jss.v103.i01">https://doi.org/10.18637/jss.v103.i01</a>.
</div>
<div id="ref-tinytable" class="csl-entry" role="listitem">
———. 2024. <em><span>tinytable: Simple and Configurable Tables in <span>“HTML”</span>, <span>“LaTeX”</span>, <span>“Markdown”</span>, <span>“Word”</span>, <span>“PNG”</span>, <span>“PDF”</span>, and <span>“Typst”</span> Formats</span></em>. <a href="https://vincentarelbundock.github.io/tinytable/">https://vincentarelbundock.github.io/tinytable/</a>.
</div>
<div id="ref-airbnbdata" class="csl-entry" role="listitem">
Cox, Murray. 2021. <span>“<span>Inside Airbnb—Toronto Data</span>”</span>. <a href="http://insideairbnb.com/get-the-data.html">http://insideairbnb.com/get-the-data.html</a>.
</div>
<div id="ref-janitor" class="csl-entry" role="listitem">
Firke, Sam. 2023. <em><span>janitor: Simple Tools for Examining and Cleaning Dirty Data</span></em>. <a href="https://CRAN.R-project.org/package=janitor">https://CRAN.R-project.org/package=janitor</a>.
</div>
<div id="ref-citeSharla" class="csl-entry" role="listitem">
Gelfand, Sharla. 2022. <em><span>opendatatoronto: Access the City of Toronto Open Data Portal</span></em>. <a href="https://CRAN.R-project.org/package=opendatatoronto">https://CRAN.R-project.org/package=opendatatoronto</a>.
</div>
<div id="ref-gelmanandhill" class="csl-entry" role="listitem">
Gelman, Andrew, 와/과 Jennifer Hill. 2007. <em>Data Analysis Using Regression and Multilevel/Hierarchical Models</em>. 1st ed. Cambridge University Press.
</div>
<div id="ref-gelmanhillvehtari2020" class="csl-entry" role="listitem">
Gelman, Andrew, Jennifer Hill, 와/과 Aki Vehtari. 2020. <em>Regression and Other Stories</em>. Cambridge University Press. <a href="https://avehtari.github.io/ROS-Examples/">https://avehtari.github.io/ROS-Examples/</a>.
</div>
<div id="ref-GrolemundWickham2011" class="csl-entry" role="listitem">
Grolemund, Garrett, 와/과 Hadley Wickham. 2011. <span>“Dates and Times Made Easy with <span>lubridate</span>”</span>. <em>Journal of Statistical Software</em> 40 (3): 1–25. <a href="https://doi.org/10.18637/jss.v040.i03">https://doi.org/10.18637/jss.v040.i03</a>.
</div>
<div id="ref-myboynick" class="csl-entry" role="listitem">
Horton, Nicholas, 와/과 Stuart Lipsitz. 2001. <span>“Multiple Imputation in Practice”</span>. <em>The American Statistician</em> 55 (3): 244–54. <a href="https://doi.org/10.1198/000313001317098266">https://doi.org/10.1198/000313001317098266</a>.
</div>
<div id="ref-manskiwow" class="csl-entry" role="listitem">
Manski, Charles. 2022. <span>“Inference with Imputed Data: The Allure of Making Stuff Up”</span>. arXiv. <a href="https://doi.org/10.48550/arXiv.2205.07388">https://doi.org/10.48550/arXiv.2205.07388</a>.
</div>
<div id="ref-bestpracticesindatacleaning" class="csl-entry" role="listitem">
Osborne, Jason. 2012. <em><span>Best Practices in Data Cleaning: A Complete Guide to Everything You Need to Do Before and After Collecting Your Data</span></em>. SAGE Publications.
</div>
<div id="ref-citeR" class="csl-entry" role="listitem">
R Core Team. 2024. <em>R: A Language and Environment for Statistical Computing</em>. Vienna, Austria: R Foundation for Statistical Computing. <a href="https://www.R-project.org/">https://www.R-project.org/</a>.
</div>
<div id="ref-arrow" class="csl-entry" role="listitem">
Richardson, Neal, Ian Cook, Nic Crane, Dewey Dunnington, Romain François, Jonathan Keane, Dragoș Moldovan-Grünfeld, Jeroen Ooms, 와/과 Apache Arrow. 2023. <em><span>arrow: Integration to Apache Arrow</span></em>. <a href="https://CRAN.R-project.org/package=arrow">https://CRAN.R-project.org/package=arrow</a>.
</div>
<div id="ref-nihtalk" class="csl-entry" role="listitem">
Ryan, Philip. 2015. <span>“Keeping a Lab Notebook”</span>. <em>YouTube</em>, 5월. <a href="https://youtu.be/-MAIuaOL64I">https://youtu.be/-MAIuaOL64I</a>.
</div>
<div id="ref-staniak2019landscape" class="csl-entry" role="listitem">
Staniak, Mateusz, 와/과 Przemysław Biecek. 2019. <span>“<span>The Landscape of R Packages for Automated Exploratory Data Analysis</span>”</span>. <em><span>The R Journal</span></em> 11 (2): 347–69. <a href="https://doi.org/10.32614/RJ-2019-033">https://doi.org/10.32614/RJ-2019-033</a>.
</div>
<div id="ref-naniar" class="csl-entry" role="listitem">
Tierney, Nicholas, Di Cook, Miles McBain, 와/과 Colin Fay. 2021. <em><span>naniar: Data Structures, Summaries, and Visualisations for Missing Data</span></em>. <a href="https://CRAN.R-project.org/package=naniar">https://CRAN.R-project.org/package=naniar</a>.
</div>
<div id="ref-tukey1962future" class="csl-entry" role="listitem">
Tukey, John. 1962. <span>“The future of data analysis”</span>. <em>The annals of mathematical statistics</em> 33 (1): 1–67. <a href="https://doi.org/10.1214/aoms/1177704711">https://doi.org/10.1214/aoms/1177704711</a>.
</div>
<div id="ref-mice" class="csl-entry" role="listitem">
van Buuren, Stef, 와/과 Karin Groothuis-Oudshoorn. 2011. <span>“<span>mice: Multivariate Imputation by Chained Equations in R</span>”</span>. <em>Journal of Statistical Software</em> 45 (3): 1–67. <a href="https://doi.org/10.18637/jss.v045.i03">https://doi.org/10.18637/jss.v045.i03</a>.
</div>
<div id="ref-hadleycodes" class="csl-entry" role="listitem">
Wickham, Hadley. 2018. <span>“Whole game”</span>. <em>YouTube</em>, 1월. <a href="https://youtu.be/go5Au01Jrvs">https://youtu.be/go5Au01Jrvs</a>.
</div>
<div id="ref-tidyverse" class="csl-entry" role="listitem">
Wickham, Hadley, Mara Averick, Jenny Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, 기타. 2019. <span>“<span>Welcome to the Tidyverse</span>”</span>. <em>Journal of Open Source Software</em> 4 (43): 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>.
</div>
<div id="ref-r4ds" class="csl-entry" role="listitem">
Wickham, Hadley, Mine Çetinkaya-Rundel, 와/과 Garrett Grolemund. (2016년) 2023. <em>R for Data Science</em>. 2nd ed. O’Reilly Media. <a href="https://r4ds.hadley.nz">https://r4ds.hadley.nz</a>.
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "복사완료!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "복사완료!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/tellingstorieswithdata\.com\/mybook");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./10-store_and_share_ko.html" class="pagination-link" aria-label="저장 및 공유">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">저장 및 공유</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./12-ijalm_ko.html" class="pagination-link" aria-label="선형 모델">
        <span class="nav-page-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">선형 모델</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/RohanAlexander/telling_stories/edit/main/11-eda_ko.qmd" class="toc-action"><i class="bi bi-github"></i>편집</a></li></ul></div></div></div></footer></body></html>