<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko" xml:lang="ko"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>16&nbsp; 사후 층화 다단계 회귀 – 데이터로 이야기하기</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./16-text_ko.html" rel="next">
<link href="./14-causality_from_obs_ko.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-b22ef3f334bfc3d7f06e555e13679c65.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "일치 없음",
    "search-matching-documents-text": "일치된 문서",
    "search-copy-link-title": "검색 링크 복사",
    "search-hide-matches-text": "추가 검색 결과 숨기기",
    "search-more-match-text": "추가 검색결과",
    "search-more-matches-text": "추가 검색결과",
    "search-clear-button-title": "제거",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "취소",
    "search-submit-button-title": "검색",
    "search-label": "검색"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="사이드바 전환" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./14-causality_from_obs_ko.html">적용</a></li><li class="breadcrumb-item"><a href="./15-mrp_ko.html"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">사후 층화 다단계 회귀</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="사이드바 전환" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="검색" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">데이터로 이야기하기</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/RohanAlexander/telling_stories/" title="소스 코드" class="quarto-navigation-tool px-1" aria-label="소스 코드"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="검색"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">서문</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-errata_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">오류 및 업데이트</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">기초</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-introduction_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">데이터로 이야기하기</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-drinking_from_a_fire_hose_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">소방 호스에서 마시기</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-workflow_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">재현 가능한 워크플로우</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">소통</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-writing_research_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">연구 작성</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-graphs_tables_maps_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">그래프, 표, 지도</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">획득</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-farm_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">측정, 인구 조사, 표본 추출</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-gather_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">API, 스크래핑, 파싱</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-hunt_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">실험 및 설문 조사</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">준비</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-clean_and_prepare_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">정리, 준비 및 테스트</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-store_and_share_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">저장 및 공유</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-eda_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">탐색적 데이터 분석</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">모델링</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-ijalm_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">선형 모델</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-ijaglm_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">일반화 선형 모델</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-prediction_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">예측</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">적용</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-causality_from_obs_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">관찰 데이터에서 인과 관계</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-mrp_ko.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">사후 층화 다단계 회귀</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-text_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">데이터로서의 텍스트</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-concluding_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">17-concluding_ko.html</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">부록</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-r_essentials_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">R 필수 사항</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-python_essentials_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Python 필수 사항</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-sql_essentials_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">SQL 필수</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-datasets_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">데이터셋</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-rmarkdown_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">R 마크다운</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25-papers_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">F</span>&nbsp; <span class="chapter-title">논문</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./26-deploy_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">G</span>&nbsp; <span class="chapter-title">생산</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./98-cocktails_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">H</span>&nbsp; <span class="chapter-title">칵테일</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./99-references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">목차</h2>
   
  <ul>
  <li><a href="#서론" id="toc-서론" class="nav-link active" data-scroll-target="#서론"><span class="header-section-number">16.1</span> 서론</a></li>
  <li><a href="#시뮬레이션-예시-커피-또는-차" id="toc-시뮬레이션-예시-커피-또는-차" class="nav-link" data-scroll-target="#시뮬레이션-예시-커피-또는-차"><span class="header-section-number">16.2</span> 시뮬레이션 예시: 커피 또는 차?</a>
  <ul class="collapse">
  <li><a href="#모집단-및-편향된-표본-구성" id="toc-모집단-및-편향된-표본-구성" class="nav-link" data-scroll-target="#모집단-및-편향된-표본-구성"><span class="header-section-number">16.2.1</span> 모집단 및 편향된 표본 구성</a></li>
  <li><a href="#표본-모델링" id="toc-표본-모델링" class="nav-link" data-scroll-target="#표본-모델링"><span class="header-section-number">16.2.2</span> 표본 모델링</a></li>
  <li><a href="#사후-층화-데이터셋" id="toc-사후-층화-데이터셋" class="nav-link" data-scroll-target="#사후-층화-데이터셋"><span class="header-section-number">16.2.3</span> 사후 층화 데이터셋</a></li>
  </ul></li>
  <li><a href="#년-미국-대통령-선거-예측" id="toc-년-미국-대통령-선거-예측" class="nav-link" data-scroll-target="#년-미국-대통령-선거-예측"><span class="header-section-number">16.3</span> 2020년 미국 대통령 선거 예측</a>
  <ul class="collapse">
  <li><a href="#설문-조사-데이터" id="toc-설문-조사-데이터" class="nav-link" data-scroll-target="#설문-조사-데이터"><span class="header-section-number">16.3.1</span> 설문 조사 데이터</a></li>
  <li><a href="#사후-층화-데이터" id="toc-사후-층화-데이터" class="nav-link" data-scroll-target="#사후-층화-데이터"><span class="header-section-number">16.3.2</span> 사후 층화 데이터</a></li>
  <li><a href="#표본-모델링-1" id="toc-표본-모델링-1" class="nav-link" data-scroll-target="#표본-모델링-1"><span class="header-section-number">16.3.3</span> 표본 모델링</a></li>
  <li><a href="#사후-층화" id="toc-사후-층화" class="nav-link" data-scroll-target="#사후-층화"><span class="header-section-number">16.3.4</span> 사후 층화</a></li>
  </ul></li>
  <li><a href="#연습-문제" id="toc-연습-문제" class="nav-link" data-scroll-target="#연습-문제"><span class="header-section-number">16.4</span> 연습 문제</a>
  <ul class="collapse">
  <li><a href="#연습" id="toc-연습" class="nav-link" data-scroll-target="#연습">연습</a></li>
  <li><a href="#퀴즈" id="toc-퀴즈" class="nav-link" data-scroll-target="#퀴즈">퀴즈</a></li>
  <li><a href="#수업-활동" id="toc-수업-활동" class="nav-link" data-scroll-target="#수업-활동">수업 활동</a></li>
  <li><a href="#과제" id="toc-과제" class="nav-link" data-scroll-target="#과제">과제</a></li>
  <li><a href="#논문" id="toc-논문" class="nav-link" data-scroll-target="#논문">논문</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/RohanAlexander/telling_stories/edit/main/15-mrp_ko.qmd" class="toc-action"><i class="bi bi-github"></i>편집</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./14-causality_from_obs_ko.html">적용</a></li><li class="breadcrumb-item"><a href="./15-mrp_ko.html"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">사후 층화 다단계 회귀</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-multilevel-regression-with-post-stratification" class="quarto-section-identifier"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">사후 층화 다단계 회귀</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><strong>선수 지식</strong></p>
<ul>
<li><em>비대표적 여론 조사를 통한 선거 예측</em>, <span class="citation" data-cites="wang2015forecasting">(<a href="#ref-wang2015forecasting" role="doc-biblioref">Wang 기타 2015</a>)</span>
<ul>
<li>Xbox 플랫폼에서 가져온 편향된 표본에 대한 MRP 사용을 논의합니다.</li>
</ul></li>
<li><em>비대표적 설문 조사를 사용하여 결혼 후 이름 변경 분석</em>, <span class="citation" data-cites="monicanamechanges">(<a href="#ref-monicanamechanges" role="doc-biblioref">Alexander 2019</a>)</span>
<ul>
<li>설문 조사에 MRP를 구현하고 자세한 코드와 데이터를 제공합니다.</li>
</ul></li>
<li><em>미스터 P는 백신 주저를 이해하는 데 도움이 됩니다</em>, <span class="citation" data-cites="green2020mister">(<a href="#ref-green2020mister" role="doc-biblioref">Green 2020</a>)</span>
<ul>
<li>사용 가능한 코드와 데이터가 있는 MRP의 또 다른 작업 예시입니다.</li>
</ul></li>
<li><em>선거 결과의 통계 모델</em>, <span class="citation" data-cites="gelmantalks">(<a href="#ref-gelmantalks" role="doc-biblioref">Gelman 2020</a>)</span>
<ul>
<li>선거 모델 구축에 대한 논의입니다.</li>
</ul></li>
<li><em>에피소드 248: 민주당은 비합리적인가? (데이비드 쇼어)</em>, <span class="citation" data-cites="galefandshor">(<a href="#ref-galefandshor" role="doc-biblioref">Galef 2020</a>)</span>
<ul>
<li>정치에서 데이터 사용에 대한 논의를 다루는 전반부에 집중하세요. 이는 광범위하게 적용 가능한 교훈을 제공합니다.</li>
</ul></li>
</ul>
<p><strong>핵심 개념 및 기술</strong></p>
<ul>
<li>사후 층화 다단계 회귀(MRP)는 표본, 일반적으로 대규모 여론 조사를 사용하여 모델을 훈련합니다. 그런 다음 훈련된 모델을 사후 층화 데이터셋, 일반적으로 인구 조사 또는 다른 대규모 표본에 적용합니다.</li>
<li>우리는 데이터만으로는 답할 수 없는 질문에 답하는 데 관심이 있기 때문에 모델을 사용합니다. 예를 들어, 모든 정치 구역에서 무슨 일이 일어나고 있는지 알고 싶을 수 있지만, 모든 구역을 적절하게 조사하는 것은 너무 비쌀 것입니다. 완벽한 데이터가 있다면 모델이 필요 없을 것입니다.</li>
<li>모델을 사용하면 일부 질문에 답할 수 있지만, 불확실성을 가지고 답해야 한다는 단점이 있습니다. MRP 설정에서 모델은 우리가 많이 아는 영역에서 정보를 빌려와 거의 모르는 영역에서 사용합니다. 이것이 얼마나 적절한지는 우리가 항상 더 알고 싶은 측면 중 하나입니다. MRP의 주요 어려움 중 하나는 필요한 데이터셋에 접근하는 것입니다.</li>
<li>MRP의 근본적인 가정은 성별, 연령대, 구역 등과 같은 예측 변수와 결과(예: “누구에게 투표할 것인가?”) 간의 관계가 표본과 사후 층화 데이터셋 간에 안정적이라는 것입니다. MRP 추정치를 고려할 때 핵심 질문 중 하나는 “그 가정이 어느 정도 유지되는가?”입니다.</li>
<li>항상 그렇듯이 투명성은 매우 중요하며, 설문 조사 데이터는 공개할 수 없더라도 데이터 준비 및 모델링 코드는 모델 결과와 함께 공개되어야 할 이유가 거의 없습니다. 이는 독립적인 전문가의 조사를 가능하게 하고 MRP 추정치의 신뢰성을 높입니다.</li>
</ul>
<p><strong>소프트웨어 및 패키지</strong></p>
<ul>
<li>Base R <span class="citation" data-cites="citeR">(<a href="#ref-citeR" role="doc-biblioref">R Core Team 2024</a>)</span></li>
<li><code>arrow</code> <span class="citation" data-cites="arrow">(<a href="#ref-arrow" role="doc-biblioref">Richardson 기타 2023</a>)</span></li>
<li><code>broom.mixed</code> <span class="citation" data-cites="mixedbroom">(<a href="#ref-mixedbroom" role="doc-biblioref">Bolker 와/과 Robinson 2022</a>)</span></li>
<li><code>gutenbergr</code> <span class="citation" data-cites="gutenbergr">(<a href="#ref-gutenbergr" role="doc-biblioref">Johnston 와/과 Robinson 2022</a>)</span></li>
<li><code>haven</code> <span class="citation" data-cites="citehaven">(<a href="#ref-citehaven" role="doc-biblioref">Wickham, Miller, 와/과 Smith 2023</a>)</span></li>
<li><code>labelled</code> <span class="citation" data-cites="citelabelled">(<a href="#ref-citelabelled" role="doc-biblioref">Larmarange 2023</a>)</span></li>
<li><code>modelsummary</code> <span class="citation" data-cites="citemodelsummary">(<a href="#ref-citemodelsummary" role="doc-biblioref">Arel-Bundock 2022</a>)</span></li>
<li><code>rstanarm</code> <span class="citation" data-cites="citerstanarm">(<a href="#ref-citerstanarm" role="doc-biblioref">Goodrich 기타 2023</a>)</span></li>
<li><code>tidybayes</code> <span class="citation" data-cites="citetidybayes">(<a href="#ref-citetidybayes" role="doc-biblioref">Kay 2022</a>)</span></li>
<li><code>tidyverse</code> <span class="citation" data-cites="tidyverse">(<a href="#ref-tidyverse" role="doc-biblioref">Wickham 기타 2019</a>)</span></li>
<li><code>tinytable</code> <span class="citation" data-cites="tinytable">(<a href="#ref-tinytable" role="doc-biblioref">Arel-Bundock 2024</a>)</span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arrow)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom.mixed)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># library(gutenbergr)</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># library(labelled)</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modelsummary)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rstanarm)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># library(tidybayes)</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tinytable)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="서론" class="level2" data-number="16.1">
<h2 data-number="16.1" class="anchored" data-anchor-id="서론"><span class="header-section-number">16.1</span> 서론</h2>
<blockquote class="blockquote">
<p>[대통령 선거] 2016년은 미국 정치 역사상 가장 큰 분석 실패였습니다.</p>
<p>데이비드 쇼어, 2020년 8월 13일</p>
</blockquote>
<p>사후 층화 다단계 회귀(MRP)는 비대표적 설문 조사를 조정하여 의견 및 기타 응답을 분석하는 인기 있는 방법입니다. 이는 회귀 모델을 사용하여 개인 수준 설문 조사 응답을 다양한 특성과 연결한 다음, 표본을 재구성하여 모집단과 더 잘 일치시킵니다. 이러한 방식으로 MRP는 응답에 대한 더 나은 이해를 가능하게 할 뿐만 아니라, 다른 방법으로는 사용할 수 없는 데이터를 분석할 수 있게 해줍니다. 그러나 MRP는 용어가 익숙하지 않고 데이터 요구 사항이 까다로울 수 있으므로 시작하기 어려울 수 있습니다.</p>
<p>편향된 설문 조사를 고려해 봅시다. 예를 들어, 학술 회의에서 컴퓨터 선호도에 대한 설문 조사를 실시하여 대학원 학위를 가진 사람들이 과대 대표될 수 있습니다. 그럼에도 불구하고 우리는 더 넓은 모집단에 대해 주장하는 데 관심이 있습니다. 응답자의 37.5%가 Mac을 선호한다고 가정해 봅시다. 한 가지 방법은 편향을 무시하고 “사람들의 37.5%가 Mac을 선호한다”고 결론 내리는 것입니다. 다른 방법은 우리가 아는 정보를 사용하여 조정하는 것입니다. 예를 들어, 대학원 학위를 가진 응답자의 50%가 Mac을 선호하고, 대학원 학위가 없는 응답자의 25%가 Mac을 선호한다고 가정해 봅시다. 그런 다음 더 넓은 모집단에서 대학원 학위를 가진 사람들의 비율을 안다면, 예를 들어 10%라고 한다면, 재가중 또는 사후 층화를 수행하여 추정치를 생성할 수 있습니다: <span class="math inline">\(0.5 \times 0.1 + 0.25 \times 0.9 = 0.275\)</span>. 우리의 추정치는 사람들의 27.5%가 Mac을 선호한다는 것입니다. MRP는 세 번째 접근 방식이며, 모델을 사용하여 재가중을 돕습니다. 여기서 우리는 로지스틱 회귀를 사용하여 설문 조사에서 컴퓨터 선호도와 최고 교육 수준 간의 관계를 추정할 수 있습니다. 그런 다음 그 관계를 교육 측면에서 모집단을 대표하는 데이터셋에 적용합니다. 이의 한 가지 장점은 불확실성을 더 잘 설명할 수 있다는 것입니다. 실제 사례 측면에서, <span class="citation" data-cites="Clinton2022는">(<a href="#ref-Clinton2022는" role="doc-biblioref"><strong>Clinton2022는?</strong></a>)</span> 2020년 미국 대통령 선거에서 민주당과 공화당 간의 전화 응답률에 상당한 차이가 있으며, 이를 수정하면 평균 여론 조사 오차가 감소한다는 것을 발견했습니다.</p>
<p>MRP는 설문 조사 데이터를 다룰 때 유용한 접근 방식입니다. <span class="citation" data-cites="hanretty2020은">(<a href="#ref-hanretty2020은" role="doc-biblioref"><strong>hanretty2020은?</strong></a>)</span> 대안이 제대로 작동하지 않거나 비용이 많이 들기 때문에 MRP를 사용한다고 설명합니다. 본질적으로 MRP는 설문 조사를 기반으로 모델을 훈련한 다음, 훈련된 모델을 다른 데이터셋에 적용합니다. 두 가지 주요 관련 장점이 있습니다.</p>
<ol type="1">
<li>불확실성을 염두에 두고 소규모 표본에 의해 제약을 받지 않는 방식으로 “재가중”할 수 있습니다. 소규모 표본을 다루는 다른 방법은 더 많은 데이터를 수집하거나 버리는 것입니다.</li>
<li>광범위한 설문 조사를 사용하여 특정 측면에서 대표성을 유지하는 방식으로 하위 집합에 대해 말할 수 있습니다. 예를 들어, 전국적으로 연령, 성별 및 교육을 대표하는 표본을 수집했다고 가정해 봅시다. 주/도별 추정치에 관심이 있다면, 해당 세분화된 수준에서 대표성이 유지된다는 보장은 없습니다.</li>
</ol>
<p>실용적인 관점에서, 비확률 표본을 수집하는 것이 비용이 덜 드는 경향이 있으므로 이러한 유형의 데이터를 사용할 수 있는 이점이 있습니다. 그렇긴 하지만, MRP는 만능 해결책이 아니며 통계의 법칙은 여전히 적용됩니다. 확률 표본을 사용할 때보다 추정치 주변의 불확실성이 더 커질 것이며, 여전히 모든 일반적인 편향에 영향을 받을 것입니다. 이는 학계와 산업 모두에서 흥미로운 연구 분야입니다.</p>
<p>MRP에 필요한 워크플로는 간단하지만, 각 단계에서 내려야 하는 세부 사항과 결정은 압도적일 수 있습니다. 명심해야 할 점은 통계 모델을 사용하여 두 데이터셋 간의 관계를 만들려고 노력하고 있으므로, 변수와 수준 측면에서 두 데이터셋 간의 유사성을 확립해야 한다는 것입니다. 단계는 다음과 같습니다.</p>
<ol type="1">
<li>사후 층화 데이터셋과의 일관성을 위해 필요한 것을 고려하여 설문 조사 데이터셋을 수집하고 준비합니다.</li>
<li>설문 조사 데이터셋과의 일관성을 위해 필요한 것을 고려하여 사후 층화 데이터셋을 수집하고 준비합니다.</li>
<li>설문 조사 및 사후 층화 데이터셋 모두에서 사용 가능한 예측 변수 및 수준을 사용하여 설문 조사에서 관심 변수를 모델링합니다.</li>
<li>모델을 사후 층화 데이터에 적용합니다.</li>
</ol>
<p>유명한 MRP 예시 중 하나는 <span class="citation" data-cites="wang2015forecasting입니다">(<a href="#ref-wang2015forecasting입니다" role="doc-biblioref"><strong>wang2015forecasting입니다?</strong></a>)</span>. 그들은 Xbox 게임 플랫폼의 데이터를 사용하여 2012년 미국 대통령 선거를 예측했습니다. <span class="citation" data-cites="wang2015forecasting은">(<a href="#ref-wang2015forecasting은" role="doc-biblioref"><strong>wang2015forecasting은?</strong></a>)</span> 버락 오바마와 밋 롬니 간의 2012년 미국 대통령 선거를 앞둔 45일 동안 Xbox 게임 플랫폼을 통해 옵트인 여론 조사를 구현할 수 있었습니다. 매일 3~5개의 질문이 있었고, 유권자 의향도 포함되었습니다: “오늘 선거가 치러진다면 누구에게 투표하시겠습니까?”. 응답자는 하루에 최대 한 번만 답변할 수 있었습니다. 그리고 첫 응답자는 성별, 인종, 연령, 교육, 주, 정당 ID, 정치 이념, 2008년 대통령 선거에서 누구에게 투표했는지 등 자신에 대한 정보를 제공하도록 요청받았습니다.</p>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
거인의 어깨 위에 서서
</div>
</div>
<div class="callout-body-container callout-body">
<p>앤드류 겔만 박사는 컬럼비아 대학교 통계학 및 정치학 히긴스 교수입니다. 1990년 하버드 대학교에서 통계학 박사 학위를 받은 후, 캘리포니아 대학교 버클리에서 조교수로 임명되었고, 1996년 컬럼비아로 옮겨 2000년 정교수로 승진했습니다. 그의 연구는 통계학, 사회 과학 및 그들의 교차점에 중점을 둡니다. 예를 들어, <span class="citation" data-cites="wang2015forecasting은">(<a href="#ref-wang2015forecasting은" role="doc-biblioref"><strong>wang2015forecasting은?</strong></a>)</span> 편향된 설문 조사도 여전히 가치가 있음을 보여주었습니다. 그는 베이즈 모델링에 널리 사용되는 확률 프로그래밍 언어인 Stan의 주요 연구자였습니다. 그리고 그는 <em>회귀 및 다단계/계층적 모델을 사용한 데이터 분석</em><span class="citation" data-cites="gelmanandhill">(<a href="#ref-gelmanandhill" role="doc-biblioref">Gelman 와/과 Hill 2007</a>)</span>과 <em>베이즈 데이터 분석</em><span class="citation" data-cites="bda">(<a href="#ref-bda" role="doc-biblioref">Gelman 기타 [1995년] 2014</a>)</span>을 포함하여 여러 권의 책을 썼으며, 이는 한 세대의 연구자들에게 특히 큰 영향을 미쳤습니다. 그는 1998년 미국 통계 학회 펠로우로 임명되었고 2003년 COPSS 회장상을 수상했습니다.</p>
</div>
</div>
<p>총 750,148건의 인터뷰가 수행되었으며, 345,858명의 고유 응답자가 참여했고, 그 중 30,000명 이상이 5개 이상의 여론 조사를 완료했습니다. 예상대로 젊은 남성이 Xbox 인구를 지배합니다. 18세에서 29세는 Xbox 데이터셋의 65%를 차지하는 반면, 출구 조사에서는 19%에 불과합니다. 남성은 Xbox 표본의 93%를 차지하지만, 유권자의 47%에 불과합니다.</p>
<p>세부 사항은 중요하지 않지만, 본질적으로 그들은 주, 교육, 성별 등과 같은 다양한 정보를 고려하여 응답자가 오바마에게 투표할 가능성을 모델링합니다. 이러한 다양한 예측 변수가 후보자 지지에 미치는 영향을 고려하는 훈련된 모델을 가진 후, 그들은 이제 사후 층화를 수행합니다. 여기서 각 “셀 수준 추정치는 각 셀의 유권자 비율로 가중치를 부여하고 적절한 수준(즉, 주 또는 전국)으로 집계됩니다.”</p>
<p>그들은 변수의 각 조합에서 사람들의 수를 세는 교차 집계된 인구 데이터가 필요합니다. 일반적으로 인구 조사 또는 ACS와 같은 미국에서 사용 가능한 다른 대규모 설문 조사가 작동했을 것입니다. 이는 <a href="#sec-farm-data에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-farm-data에서</span></a> 소개되었습니다. 어려움은 변수가 교차 집계된 기준으로 사용 가능해야 한다는 것입니다. 따라서 그들은 출구 조사 데이터를 사용하지만, 이는 다른 국가에서는 널리 사용 가능하지 않습니다.</p>
<p>그들은 각 주의 특징에 따라 사후 층화를 통해 주별 추정치를 만듭니다. 그리고 유사하게 인구 통계학적 차이를 조사합니다. 마지막으로, 그들은 추정치를 선거인단 추정치로 변환합니다.</p>
<p>일반적으로 MRP는 특정 목표를 달성하는 좋은 방법이지만, 절충안이 없는 것은 아닙니다. 좋은 품질의 설문 조사가 있다면, 그것의 세분화된 측면에 대해 말할 수 있는 방법이 될 수 있습니다. 또는 불확실성에 대해 우려한다면, 그것에 대해 생각하는 좋은 방법입니다. 편향된 설문 조사가 있다면, 시작하기에 좋은 곳이지만, 만능 해결책은 아닙니다. 다양한 접근 방식에서 흥미로운 작업을 할 수 있는 여지가 많습니다. 예를 들어, 더 통계적인 관점에서, 설문 조사 설계와 모델링 접근 방식이 어떻게 상호 작용하는지, 그리고 불확실성을 과소평가하는 정도에 대해 생각하는 데 많은 작업이 필요합니다. 또한 사후 층화 데이터셋에서 소규모 표본과 불확실성의 함의에 대해 생각하는 것도 흥미롭습니다. 예를 들어, <span class="citation" data-cites="si2020use를">(<a href="#ref-si2020use를" role="doc-biblioref"><strong>si2020use를?</strong></a>)</span> 기반으로 어떤 모델을 사용하는 것이 적절한지, 그리고 여기서 “적절하다”는 것이 무엇을 의미하는지 평가하는 데 엄청난 작업이 필요합니다. 더 일반적으로, MRP가 정확하기 위해 필요한 안정적인 선호도와 관계를 가질 조건에 대해 거의 알지 못합니다. 예를 들어, <span class="citation" data-cites="lauderdale2020model">Lauderdale 기타 (<a href="#ref-lauderdale2020model" role="doc-biblioref">2020</a>)</span> 또는 <span class="citation" data-cites="ghitza2020voter를">(<a href="#ref-ghitza2020voter를" role="doc-biblioref"><strong>ghitza2020voter를?</strong></a>)</span> 기반으로 설문 조사 설계의 불확실성과 이것이 어떻게 관련되는지 이해하는 데 많은 작업이 필요합니다.</p>
<p>이 장에서는 인구의 특징을 안다고 가정하는 상황을 시뮬레이션하는 것으로 시작합니다. 그런 다음 2020년 미국 대통령 선거를 고려합니다.</p>
</section>
<section id="시뮬레이션-예시-커피-또는-차" class="level2" data-number="16.2">
<h2 data-number="16.2" class="anchored" data-anchor-id="시뮬레이션-예시-커피-또는-차"><span class="header-section-number">16.2</span> 시뮬레이션 예시: 커피 또는 차?</h2>
<section id="모집단-및-편향된-표본-구성" class="level3" data-number="16.2.1">
<h3 data-number="16.2.1" class="anchored" data-anchor-id="모집단-및-편향된-표본-구성"><span class="header-section-number">16.2.1</span> 모집단 및 편향된 표본 구성</h3>
<p>시작하려면 <a href="#sec-hunt-data의" class="quarto-xref"><span class="quarto-unresolved-ref">sec-hunt-data의</span></a> 차 시음 실험으로 돌아가서, 누군가가 커피 또는 차를 선호하는지에 대한 모집단을 시뮬레이션할 것입니다. 그런 다음 차를 선호하는 편향된 표본을 추출하고, MRP를 사용하여 해당 모집단 수준 선호도를 다시 얻을 것입니다. 두 가지 설명 변수를 가질 것입니다. 연령대는 “젊은” 또는 “늙은”이 될 것이고, 국적은 “미국” 또는 “영국”이 될 것입니다. 시뮬레이션은 개인이 영국인이거나 늙었을 경우 차를 선호할 가능성이 증가하도록 부과할 것입니다. 우리 모집단의 모든 것은 대략 균형을 이룰 것입니다(즉, 각 변수 간에 절반씩). 그러나 우리의 설문 조사는 더 나이가 많고 영국인에게 편향될 것입니다. 분명히 말하자면, 이 예시에서는 모집단의 “진정한” 특징을 “알고” 있을 것이지만, 이는 실제 데이터를 사용할 때 발생하는 것이 아닙니다. MRP에서 무슨 일이 일어나고 있는지 이해하는 데 도움이 될 뿐입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">853</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>pop_size <span class="ot">&lt;-</span> <span class="dv">1000000</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>sim_population <span class="ot">&lt;-</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">rbinom</span>(<span class="at">n =</span> pop_size, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">prob =</span> <span class="fl">0.5</span>),</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">nationality =</span> <span class="fu">rbinom</span>(<span class="at">n =</span> pop_size, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">prob =</span> <span class="fl">0.5</span>),</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">probability =</span> (age <span class="sc">+</span> nationality <span class="sc">+</span> <span class="fl">0.1</span>) <span class="sc">/</span> <span class="fl">2.2</span>, <span class="co"># 확실성 방지</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">prefers_tea =</span> <span class="fu">rbinom</span>(<span class="at">n =</span> pop_size, <span class="dv">1</span>, <span class="at">prob =</span> probability)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>sim_population</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,000,000 × 4
     age nationality probability prefers_tea
   &lt;int&gt;       &lt;int&gt;       &lt;dbl&gt;       &lt;int&gt;
 1     0           1      0.5              0
 2     0           0      0.0455           0
 3     0           1      0.5              1
 4     0           0      0.0455           0
 5     0           0      0.0455           0
 6     0           0      0.0455           0
 7     0           1      0.5              0
 8     0           0      0.0455           0
 9     0           1      0.5              1
10     0           0      0.0455           0
# ℹ 999,990 more rows</code></pre>
</div>
</div>
<p>그룹별 개수가 상당히 유사하다는 것을 알 수 있습니다(<a href="#tbl-teapreferencecounts" class="quarto-xref">표&nbsp;<span class="quarto-unresolved-ref">tbl-teapreferencecounts</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>sim_population <span class="sc">|&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(age, nationality, prefers_tea) <span class="sc">|&gt;</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">style_tt</span>(<span class="at">j =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">align =</span> <span class="st">"lllr"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_tt</span>(<span class="at">digits =</span> <span class="dv">0</span>, <span class="at">num_mark_big =</span> <span class="st">","</span>, <span class="at">num_fmt =</span> <span class="st">"decimal"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setNames</span>( <span class="fu">c</span>(<span class="st">"연령"</span>, <span class="st">"국적"</span>, <span class="st">"차 선호"</span>, <span class="st">"수"</span>))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-teapreferencecounts" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-teapreferencecounts-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;16.1: 연령 및 국적별 차 선호도
</figcaption>
<div aria-describedby="tbl-teapreferencecounts-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_cmtf09rypxpjm97jl6fn(i, j, css_id) {
          var table = document.getElementById("tinytable_cmtf09rypxpjm97jl6fn");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_cmtf09rypxpjm97jl6fn');
        // Find the row with data-row attribute matching i
        var targetRow = table.querySelector(`tr [data-row="${i}"]`).closest('tr');
        var newRow = table.insertRow(targetRow.rowIndex);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        newCell.setAttribute("data-col", "0");
        newCell.setAttribute("data-row", i - 1);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_cmtf09rypxpjm97jl6fn(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_cmtf09rypxpjm97jl6fn");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '8', j: 3 },  ], css_id: 'tinytable_css_46evu6ea1j5u4cy8e6u1',}, 
          { positions: [ { i: '1', j: 3 }, { i: '2', j: 3 }, { i: '3', j: 3 }, { i: '4', j: 3 }, { i: '5', j: 3 }, { i: '6', j: 3 }, { i: '7', j: 3 },  ], css_id: 'tinytable_css_4avh9v51oa9d4eh6doed',}, 
          { positions: [ { i: '0', j: 3 },  ], css_id: 'tinytable_css_dlw6bdxrbofsb2wdpuqr',}, 
          { positions: [ { i: '8', j: 1 }, { i: '8', j: 0 }, { i: '8', j: 2 },  ], css_id: 'tinytable_css_jxw2yawyx3oemywvrwgi',}, 
          { positions: [ { i: '2', j: 0 }, { i: '3', j: 0 }, { i: '4', j: 0 }, { i: '6', j: 0 }, { i: '7', j: 0 }, { i: '3', j: 2 }, { i: '1', j: 0 }, { i: '1', j: 1 }, { i: '2', j: 1 }, { i: '3', j: 1 }, { i: '4', j: 1 }, { i: '5', j: 1 }, { i: '6', j: 1 }, { i: '7', j: 1 }, { i: '7', j: 2 }, { i: '5', j: 0 }, { i: '1', j: 2 }, { i: '2', j: 2 }, { i: '4', j: 2 }, { i: '5', j: 2 }, { i: '6', j: 2 },  ], css_id: 'tinytable_css_979imqsikp9s8w7iwoit',}, 
          { positions: [ { i: '0', j: 0 }, { i: '0', j: 2 }, { i: '0', j: 1 },  ], css_id: 'tinytable_css_ezxztenpgxx53zzc887f',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_cmtf09rypxpjm97jl6fn(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_46evu6ea1j5u4cy8e6u1, .table th.tinytable_css_46evu6ea1j5u4cy8e6u1 { text-align: right; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_4avh9v51oa9d4eh6doed, .table th.tinytable_css_4avh9v51oa9d4eh6doed { text-align: right; }
      .table td.tinytable_css_dlw6bdxrbofsb2wdpuqr, .table th.tinytable_css_dlw6bdxrbofsb2wdpuqr { text-align: right; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_jxw2yawyx3oemywvrwgi, .table th.tinytable_css_jxw2yawyx3oemywvrwgi { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_979imqsikp9s8w7iwoit, .table th.tinytable_css_979imqsikp9s8w7iwoit { text-align: left; }
      .table td.tinytable_css_ezxztenpgxx53zzc887f, .table th.tinytable_css_ezxztenpgxx53zzc887f { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_cmtf09rypxpjm97jl6fn" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">연령</th>
                <th scope="col" data-row="0" data-col="1">국적</th>
                <th scope="col" data-row="0" data-col="2">차 선호</th>
                <th scope="col" data-row="0" data-col="3">수</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">0</td>
                  <td data-row="1" data-col="1">0</td>
                  <td data-row="1" data-col="2">0</td>
                  <td data-row="1" data-col="3">238,568</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">0</td>
                  <td data-row="2" data-col="1">0</td>
                  <td data-row="2" data-col="2">1</td>
                  <td data-row="2" data-col="3">11,319</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">0</td>
                  <td data-row="3" data-col="1">1</td>
                  <td data-row="3" data-col="2">0</td>
                  <td data-row="3" data-col="3">125,371</td>
                </tr>
                <tr>
                  <td data-row="4" data-col="0">0</td>
                  <td data-row="4" data-col="1">1</td>
                  <td data-row="4" data-col="2">1</td>
                  <td data-row="4" data-col="3">124,730</td>
                </tr>
                <tr>
                  <td data-row="5" data-col="0">1</td>
                  <td data-row="5" data-col="1">0</td>
                  <td data-row="5" data-col="2">0</td>
                  <td data-row="5" data-col="3">125,438</td>
                </tr>
                <tr>
                  <td data-row="6" data-col="0">1</td>
                  <td data-row="6" data-col="1">0</td>
                  <td data-row="6" data-col="2">1</td>
                  <td data-row="6" data-col="3">124,723</td>
                </tr>
                <tr>
                  <td data-row="7" data-col="0">1</td>
                  <td data-row="7" data-col="1">1</td>
                  <td data-row="7" data-col="2">0</td>
                  <td data-row="7" data-col="3">11,421</td>
                </tr>
                <tr>
                  <td data-row="8" data-col="0">1</td>
                  <td data-row="8" data-col="1">1</td>
                  <td data-row="8" data-col="2">1</td>
                  <td data-row="8" data-col="3">238,430</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
<p>평균적으로 인구의 50%가 차를 선호하지만, 이 선호도는 인구 하위 그룹에 따라 달라집니다.</p>
<p>이제 편향된 표본을 가진 설문 조사가 있다고 가정하고 싶습니다. 우리는 더 나이가 많은 응답자와 영국인 응답자를 과대 표집하도록 허용할 것입니다. 편향된 표본 중 차를 커피보다 선호하는 비율이 얼마인지 살펴보고 싶으며, 구성상 차 쪽으로 기울어질 것으로 예상합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">853</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>tea_sample <span class="ot">&lt;-</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  sim_population <span class="sc">|&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">1000</span>, <span class="at">weight_by =</span> probability)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>tea_sample <span class="sc">|&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(age, nationality, prefers_tea) <span class="sc">|&gt;</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">style_tt</span>(<span class="at">j =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">align =</span> <span class="st">"lllr"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_tt</span>(<span class="at">digits =</span> <span class="dv">0</span>, <span class="at">num_mark_big =</span> <span class="st">","</span>, <span class="at">num_fmt =</span> <span class="st">"decimal"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">"연령"</span>, <span class="st">"국적"</span>, <span class="st">"차 선호"</span>, <span class="st">"수"</span>))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-teapreferencesamplecounts" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-teapreferencesamplecounts-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;16.2: 연령 및 국적별 차 선호도에 대한 편향된 표본, 차를 선호하는 사람들을 과대 표집
</figcaption>
<div aria-describedby="tbl-teapreferencesamplecounts-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_8axg08nb45hx91wcgz87(i, j, css_id) {
          var table = document.getElementById("tinytable_8axg08nb45hx91wcgz87");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_8axg08nb45hx91wcgz87');
        // Find the row with data-row attribute matching i
        var targetRow = table.querySelector(`tr [data-row="${i}"]`).closest('tr');
        var newRow = table.insertRow(targetRow.rowIndex);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        newCell.setAttribute("data-col", "0");
        newCell.setAttribute("data-row", i - 1);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_8axg08nb45hx91wcgz87(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_8axg08nb45hx91wcgz87");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '8', j: 3 },  ], css_id: 'tinytable_css_8z339d409jp6iun29fz6',}, 
          { positions: [ { i: '1', j: 3 }, { i: '2', j: 3 }, { i: '3', j: 3 }, { i: '4', j: 3 }, { i: '5', j: 3 }, { i: '6', j: 3 }, { i: '7', j: 3 },  ], css_id: 'tinytable_css_crydf6q81cqlkg05n6mh',}, 
          { positions: [ { i: '0', j: 3 },  ], css_id: 'tinytable_css_v662s2irz2omlydkx7sy',}, 
          { positions: [ { i: '8', j: 1 }, { i: '8', j: 0 }, { i: '8', j: 2 },  ], css_id: 'tinytable_css_0pozrelwaqyl9r6ayk0l',}, 
          { positions: [ { i: '2', j: 0 }, { i: '3', j: 0 }, { i: '4', j: 0 }, { i: '6', j: 0 }, { i: '7', j: 0 }, { i: '3', j: 2 }, { i: '1', j: 0 }, { i: '1', j: 1 }, { i: '2', j: 1 }, { i: '3', j: 1 }, { i: '4', j: 1 }, { i: '5', j: 1 }, { i: '6', j: 1 }, { i: '7', j: 1 }, { i: '7', j: 2 }, { i: '5', j: 0 }, { i: '1', j: 2 }, { i: '2', j: 2 }, { i: '4', j: 2 }, { i: '5', j: 2 }, { i: '6', j: 2 },  ], css_id: 'tinytable_css_7vvo73n51nhlgjbrfy3b',}, 
          { positions: [ { i: '0', j: 0 }, { i: '0', j: 2 }, { i: '0', j: 1 },  ], css_id: 'tinytable_css_m6hqh4g35bndm26ztuvx',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_8axg08nb45hx91wcgz87(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_8z339d409jp6iun29fz6, .table th.tinytable_css_8z339d409jp6iun29fz6 { text-align: right; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_crydf6q81cqlkg05n6mh, .table th.tinytable_css_crydf6q81cqlkg05n6mh { text-align: right; }
      .table td.tinytable_css_v662s2irz2omlydkx7sy, .table th.tinytable_css_v662s2irz2omlydkx7sy { text-align: right; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_0pozrelwaqyl9r6ayk0l, .table th.tinytable_css_0pozrelwaqyl9r6ayk0l { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_7vvo73n51nhlgjbrfy3b, .table th.tinytable_css_7vvo73n51nhlgjbrfy3b { text-align: left; }
      .table td.tinytable_css_m6hqh4g35bndm26ztuvx, .table th.tinytable_css_m6hqh4g35bndm26ztuvx { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_8axg08nb45hx91wcgz87" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">연령</th>
                <th scope="col" data-row="0" data-col="1">국적</th>
                <th scope="col" data-row="0" data-col="2">차 선호</th>
                <th scope="col" data-row="0" data-col="3">수</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">0</td>
                  <td data-row="1" data-col="1">0</td>
                  <td data-row="1" data-col="2">0</td>
                  <td data-row="1" data-col="3">18</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">0</td>
                  <td data-row="2" data-col="1">0</td>
                  <td data-row="2" data-col="2">1</td>
                  <td data-row="2" data-col="3">3</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">0</td>
                  <td data-row="3" data-col="1">1</td>
                  <td data-row="3" data-col="2">0</td>
                  <td data-row="3" data-col="3">119</td>
                </tr>
                <tr>
                  <td data-row="4" data-col="0">0</td>
                  <td data-row="4" data-col="1">1</td>
                  <td data-row="4" data-col="2">1</td>
                  <td data-row="4" data-col="3">128</td>
                </tr>
                <tr>
                  <td data-row="5" data-col="0">1</td>
                  <td data-row="5" data-col="1">0</td>
                  <td data-row="5" data-col="2">0</td>
                  <td data-row="5" data-col="3">133</td>
                </tr>
                <tr>
                  <td data-row="6" data-col="0">1</td>
                  <td data-row="6" data-col="1">0</td>
                  <td data-row="6" data-col="2">1</td>
                  <td data-row="6" data-col="3">126</td>
                </tr>
                <tr>
                  <td data-row="7" data-col="0">1</td>
                  <td data-row="7" data-col="1">1</td>
                  <td data-row="7" data-col="2">0</td>
                  <td data-row="7" data-col="3">25</td>
                </tr>
                <tr>
                  <td data-row="8" data-col="0">1</td>
                  <td data-row="8" data-col="1">1</td>
                  <td data-row="8" data-col="2">1</td>
                  <td data-row="8" data-col="3">448</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
<p>우리 표본은 전체 모집단과 다른 평균 차 선호도를 가지고 있음이 분명합니다(<a href="#tbl-teapreferencesamplecounts" class="quarto-xref">표&nbsp;<span class="quarto-unresolved-ref">tbl-teapreferencesamplecounts</span></a>).</p>
</section>
<section id="표본-모델링" class="level3" data-number="16.2.2">
<h3 data-number="16.2.2" class="anchored" data-anchor-id="표본-모델링"><span class="header-section-number">16.2.2</span> 표본 모델링</h3>
<p>이제 편향된 설문 조사를 기반으로 모델을 훈련합니다. 연령과 국적을 기반으로 차 선호도를 설명합니다. 다단계 모델을 사용해야 한다고 명시된 것은 없지만, 많은 상황에서 더 나쁘지 않을 것입니다. 분명히 말하자면, 개별 수준 데이터가 있지만, 활용할 개인 그룹화가 있다는 의미입니다.</p>
<p><span class="math display">\[
\begin{aligned}
y_i|\pi_i &amp; \sim \mbox{Bern}(\pi_i) \\
\mbox{logit}(\pi_i) &amp; = \beta_0 + \alpha_{a[i]}^{\mbox{age}} + \alpha_{n[i]}^{\mbox{nat}} \\
\alpha_0 &amp; \sim \mbox{Normal}(0, 2.5)\\
\alpha_{a}^{\mbox{age}} &amp; \sim \mbox{Normal}\left(0, \sigma^2_{\mbox{age}}\right)\mbox{ for }a = 1, 2, \dots, A\\
\alpha_{n}^{\mbox{nat}} &amp; \sim \mbox{Normal}\left(0, \sigma^2_{\mbox{nat}}\right)\mbox{ for }n = 1, 2, \dots, N\\
\sigma_{\mbox{age}} &amp; \sim \mbox{Exponential}(1)\\
\sigma_{\mbox{nat}} &amp; \sim \mbox{Exponential}(1)
\end{aligned}
\]</span></p>
<p>여기서 <span class="math inline">\(y_i\)</span>는 응답자의 차 선호도이고 <span class="math inline">\(\pi_i = \mbox{Pr}(y_i=1)\)</span>이며, <span class="math inline">\(\alpha^{\mbox{age}}\)</span>와 <span class="math inline">\(\alpha^{\mbox{nat}}\)</span>는 각각 연령과 국적의 효과입니다. <span class="math inline">\(a[i]\)</span>와 <span class="math inline">\(n[i]\)</span>는 응답자가 속한 연령대와 국적을 나타냅니다. <span class="math inline">\(A\)</span>와 <span class="math inline">\(N\)</span>은 각각 연령대와 국적의 총 수입니다. <code>stan_glm()</code>을 사용하여 모델을 추정할 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>tea_preference_model <span class="ot">&lt;-</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stan_glmer</span>(</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    prefers_tea <span class="sc">~</span> (<span class="dv">1</span> <span class="sc">|</span> age) <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">|</span> nationality),</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> tea_sample,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>),</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">prior =</span> <span class="fu">normal</span>(<span class="at">location =</span> <span class="dv">0</span>, <span class="at">scale =</span> <span class="fl">0.5</span>, <span class="at">autoscale =</span> <span class="cn">TRUE</span>),</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">prior_intercept =</span> <span class="fu">normal</span>(<span class="at">location =</span> <span class="dv">0</span>, <span class="at">scale =</span> <span class="fl">0.5</span>, <span class="at">autoscale =</span> <span class="cn">TRUE</span>),</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">seed =</span> <span class="dv">853</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  tea_preference_model,</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">"tea_preference_model.rds"</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>tea_preference_model <span class="ot">&lt;-</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">readRDS</span>(<span class="at">file =</span> <span class="st">"tea_preference_model.rds"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"차 선호도"</span> <span class="ot">=</span> tea_preference_model</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-teamodelresults" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-teamodelresults-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;16.3: 차 선호도를 과대 표집하는 편향된 표본으로 훈련된 모델
</figcaption>
<div aria-describedby="tbl-teamodelresults-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_eyvdwkt1fw0i1uxaozim(i, j, css_id) {
          var table = document.getElementById("tinytable_eyvdwkt1fw0i1uxaozim");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_eyvdwkt1fw0i1uxaozim');
        // Find the row with data-row attribute matching i
        var targetRow = table.querySelector(`tr [data-row="${i}"]`).closest('tr');
        var newRow = table.insertRow(targetRow.rowIndex);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        newCell.setAttribute("data-col", "0");
        newCell.setAttribute("data-row", i - 1);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_eyvdwkt1fw0i1uxaozim(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_eyvdwkt1fw0i1uxaozim");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '14', j: 1 },  ], css_id: 'tinytable_css_zbpwm1ds3je46nui6frd',}, 
          { positions: [ { i: '3', j: 1 },  ], css_id: 'tinytable_css_56z78dydq1id7sywxwz5',}, 
          { positions: [ { i: '1', j: 1 }, { i: '2', j: 1 }, { i: '7', j: 1 }, { i: '4', j: 1 }, { i: '5', j: 1 }, { i: '6', j: 1 }, { i: '11', j: 1 }, { i: '8', j: 1 }, { i: '9', j: 1 }, { i: '10', j: 1 }, { i: '12', j: 1 }, { i: '13', j: 1 },  ], css_id: 'tinytable_css_jdfmxws5oc3trbjfrcwo',}, 
          { positions: [ { i: '0', j: 1 },  ], css_id: 'tinytable_css_afkzjh7qplq8wz87yckq',}, 
          { positions: [ { i: '14', j: 0 },  ], css_id: 'tinytable_css_caaxd77cwys1wo62kj7q',}, 
          { positions: [ { i: '3', j: 0 },  ], css_id: 'tinytable_css_f2ydnhk7y7035pj3efbk',}, 
          { positions: [ { i: '1', j: 0 }, { i: '2', j: 0 }, { i: '7', j: 0 }, { i: '4', j: 0 }, { i: '5', j: 0 }, { i: '6', j: 0 }, { i: '11', j: 0 }, { i: '8', j: 0 }, { i: '9', j: 0 }, { i: '10', j: 0 }, { i: '12', j: 0 }, { i: '13', j: 0 },  ], css_id: 'tinytable_css_ql6loty0zfesubcbawgx',}, 
          { positions: [ { i: '0', j: 0 },  ], css_id: 'tinytable_css_ycm7wje5kidi6gz5mmha',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_eyvdwkt1fw0i1uxaozim(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_zbpwm1ds3je46nui6frd, .table th.tinytable_css_zbpwm1ds3je46nui6frd { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_56z78dydq1id7sywxwz5, .table th.tinytable_css_56z78dydq1id7sywxwz5 { text-align: center; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_jdfmxws5oc3trbjfrcwo, .table th.tinytable_css_jdfmxws5oc3trbjfrcwo { text-align: center; }
      .table td.tinytable_css_afkzjh7qplq8wz87yckq, .table th.tinytable_css_afkzjh7qplq8wz87yckq { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_caaxd77cwys1wo62kj7q, .table th.tinytable_css_caaxd77cwys1wo62kj7q { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_f2ydnhk7y7035pj3efbk, .table th.tinytable_css_f2ydnhk7y7035pj3efbk { text-align: left; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_ql6loty0zfesubcbawgx, .table th.tinytable_css_ql6loty0zfesubcbawgx { text-align: left; }
      .table td.tinytable_css_ycm7wje5kidi6gz5mmha, .table th.tinytable_css_ycm7wje5kidi6gz5mmha { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_eyvdwkt1fw0i1uxaozim" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0"> </th>
                <th scope="col" data-row="0" data-col="1">차 선호도</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">(Intercept)</td>
                  <td data-row="1" data-col="1">0.001</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">Sigma[age × (Intercept),(Intercept)]</td>
                  <td data-row="2" data-col="1">2.171</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">Sigma[nationality × (Intercept),(Intercept)]</td>
                  <td data-row="3" data-col="1">2.337</td>
                </tr>
                <tr>
                  <td data-row="4" data-col="0">Num.Obs.</td>
                  <td data-row="4" data-col="1">1000</td>
                </tr>
                <tr>
                  <td data-row="5" data-col="0">R2</td>
                  <td data-row="5" data-col="1">0.261</td>
                </tr>
                <tr>
                  <td data-row="6" data-col="0">R2 Marg.</td>
                  <td data-row="6" data-col="1">0.000</td>
                </tr>
                <tr>
                  <td data-row="7" data-col="0">ICC</td>
                  <td data-row="7" data-col="1">0.7</td>
                </tr>
                <tr>
                  <td data-row="8" data-col="0">Log.Lik.</td>
                  <td data-row="8" data-col="1">-457.970</td>
                </tr>
                <tr>
                  <td data-row="9" data-col="0">ELPD</td>
                  <td data-row="9" data-col="1">-461.0</td>
                </tr>
                <tr>
                  <td data-row="10" data-col="0">ELPD s.e.</td>
                  <td data-row="10" data-col="1">16.2</td>
                </tr>
                <tr>
                  <td data-row="11" data-col="0">LOOIC</td>
                  <td data-row="11" data-col="1">921.9</td>
                </tr>
                <tr>
                  <td data-row="12" data-col="0">LOOIC s.e.</td>
                  <td data-row="12" data-col="1">32.4</td>
                </tr>
                <tr>
                  <td data-row="13" data-col="0">WAIC</td>
                  <td data-row="13" data-col="1">921.9</td>
                </tr>
                <tr>
                  <td data-row="14" data-col="0">RMSE</td>
                  <td data-row="14" data-col="1">0.39</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
<p><a href="#fig-teamodelresultsplots는" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-teamodelresultsplots는</span></a> 각기 다른 그룹에 대한 표본 분포를 보여줍니다.</p>
<div id="tbl-teamodelresultsplots" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl quarto-uncaptioned" id="tbl-teamodelresultsplots-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;16.4
</figcaption>
<div aria-describedby="tbl-teamodelresultsplots-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>tea_preference_model <span class="sc">|&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread_draws</span>(<span class="st">`</span><span class="at">(Intercept)</span><span class="st">`</span>, b[, group]) <span class="sc">|&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">condition_mean =</span> <span class="st">`</span><span class="at">(Intercept)</span><span class="st">`</span> <span class="sc">+</span> b) <span class="sc">|&gt;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> group, <span class="at">x =</span> condition_mean)) <span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_halfeye</span>() <span class="sc">+</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</figure>
</div>
</section>
<section id="사후-층화-데이터셋" class="level3" data-number="16.2.3">
<h3 data-number="16.2.3" class="anchored" data-anchor-id="사후-층화-데이터셋"><span class="header-section-number">16.2.3</span> 사후 층화 데이터셋</h3>
<p>이제 사후 층화 데이터셋을 사용하여 각 셀의 수에 대한 추정치를 얻을 것입니다. 일반적으로 모집단을 더 밀접하게 반영할 수 있는 더 큰 데이터셋을 사용합니다. 미국에서는 <a href="#sec-farm-data에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-farm-data에서</span></a> 다루었던 미국 지역사회 조사(ACS)가 인기 있는 선택이며, 다른 국가에서는 일반적으로 인구 조사를 사용합니다.</p>
<p>이 시뮬레이션된 예시에서는 모집단을 사후 층화 데이터셋으로 사용할 수 있습니다. 문제는 100만 개의 관측치로 다루기 어렵다는 것이므로, 그 중 10,000명 표본을 추출합니다. 또한 차 선호도 변수는 우리가 모른다고 가정하므로 제거합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">853</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>tea_poststrat_dataset <span class="ot">&lt;-</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  sim_population <span class="sc">|&gt;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">10000</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>prefers_tea)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>tea_poststrat_dataset</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10,000 × 3
     age nationality probability
   &lt;int&gt;       &lt;int&gt;       &lt;dbl&gt;
 1     0           1      0.5   
 2     0           1      0.5   
 3     0           1      0.5   
 4     0           1      0.5   
 5     1           0      0.5   
 6     1           0      0.5   
 7     0           0      0.0455
 8     1           0      0.5   
 9     1           0      0.5   
10     1           0      0.5   
# ℹ 9,990 more rows</code></pre>
</div>
</div>
<p>이것은 사후 층화 데이터셋에 개별 수준 데이터가 있다고 가정하는 이상적인 예시입니다. 그 세계에서는 각 개인에게 모델을 적용할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>predicted_tea_preference <span class="ot">&lt;-</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  tea_preference_model <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_epred_draws</span>(<span class="at">newdata =</span> tea_poststrat_dataset,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>                             <span class="at">value =</span> <span class="st">"preference"</span>) <span class="sc">|&gt;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">average_preference =</span> <span class="fu">mean</span>(preference),</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">lower =</span> <span class="fu">quantile</span>(preference, <span class="fl">0.025</span>),</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">upper =</span> <span class="fu">quantile</span>(preference, <span class="fl">0.975</span>),</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">.by =</span> <span class="fu">c</span>(age, nationality, .row)</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>predicted_tea_preference <span class="sc">|&gt;</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(age, nationality, average_preference)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="#tbl-mrpteammodelcompare는" class="quarto-xref">표&nbsp;<span class="quarto-unresolved-ref">tbl-mrpteammodelcompare는</span></a> MRP 추정치를 편향된 표본의 원시 추정치와 비교합니다. 이 경우, 우리는 진실을 알고 있으므로 알려진 진실과도 비교할 수 있지만, 일반적으로는 그렇게 할 수 없습니다.</p>
<div id="tbl-mrpteammodelcompare" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-mrpteammodelcompare-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;16.5: MRP 추정치와 진실 및 편향된 표본 비교
</figcaption>
<div aria-describedby="tbl-mrpteammodelcompare-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>comparison <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Type =</span> <span class="fu">c</span>(<span class="st">"진실"</span>, <span class="st">"편향된 표본"</span>, <span class="st">"MRP 추정치"</span>),</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Estimate =</span> <span class="fu">c</span>(</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(sim_population<span class="sc">$</span>prefers_tea),</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(tea_sample<span class="sc">$</span>prefers_tea),</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mean</span>(predicted_tea_preference<span class="sc">$</span>average_preference)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>comparison <span class="sc">|&gt;</span> </span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">style_tt</span>(<span class="at">j =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">align =</span> <span class="st">"lr"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_tt</span>(<span class="at">digits =</span> <span class="dv">2</span>, <span class="at">num_mark_big =</span> <span class="st">","</span>, <span class="at">num_fmt =</span> <span class="st">"decimal"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</figure>
</div>
<p>이 경우 MRP 접근 방식은 편향된 표본을 사용하여 차 선호도에 대한 추정치를 생성하는 데 성공했으며, 이는 진실을 반영했습니다.</p>
<!-- ## 호주 투표 -->
<!-- ### 개요 -->
<!-- 우리가 사용하는 워크플로는 다음과 같습니다. -->
<!-- 1) 여론 조사 읽기; -->
<!-- 2) 여론 조사 모델링; -->
<!-- 3) 사후 층화 데이터 읽기; 그리고 -->
<!-- 4) 모델을 사후 층화 데이터에 적용합니다. -->
<!-- 이전 예시에서는 모델링 단계에서 많은 작업을 수행하지 않았고, "사후 층화 다단계 모델링"이라는 이름에도 불구하고 실제로 다단계 모델을 사용하지 않았습니다. 다단계 모델을 사용해야 한다고 명시된 것은 없지만, 많은 상황에서 더 나쁘지 않을 것입니다. 분명히 말하자면, 개별 수준 데이터가 있지만, 활용할 개인 그룹화가 있다는 의미입니다. 예를 들어, 선거를 모델링하려는 경우, 일반적으로 구역/지역/선거구/선거구 등이 주/도 내에 존재하므로, 적어도 각 주에 대한 절편을 조정하는 계수를 포함하는 것이 합리적일 것입니다.\index{Australia!politics} -->
<!-- 이 섹션에서는 다른 데이터셋을 시뮬레이션한 다음 몇 가지 다른 모델을 적합할 것입니다. 호주 선거 설정을 활용할 것입니다. 호주에는 의회 시스템이 있으며, 의회에는 151석이 있으며, 각 선거구당 1석입니다. 이 선거구는 6개 주와 2개 준주 내에 그룹화되어 있습니다. 두 개의 주요 정당이 있습니다. 즉, 호주 노동당(ALP)과 자유당(LP)입니다. 다소 혼란스럽게도 자유당은 실제로 보수 우익 정당인 반면, 노동당은 진보 좌익 정당입니다. -->
<!-- ### 설문 조사 구성 -->
<!-- 현실에 조금 더 가까워지기 위해 설문 조사를 시뮬레이션한 다음(이전처럼 모집단에서 표본을 추출하는 대신) 실제 데이터를 사용하여 사후 층화할 것입니다. 종속 변수는 "supports_ALP"이며, 이는 이진 변수입니다. 즉, 0 또는 1입니다. 여기서는 세 가지 독립 변수부터 시작할 것입니다. -->
<!-- - "gender": "여성" 또는 "남성" (호주 통계청에서 사용 가능한 것과 동일); -->
<!-- - "age_group": "18세에서 29세", "30세에서 44세", "45세에서 59세", "60세 이상"의 네 가지 그룹 중 하나; -->
<!-- - "state": 1에서 8까지의 정수 중 하나 (포함). -->
<!-- ```{r} -->
<!-- library(tidyverse) -->
<!-- set.seed(853) -->
<!-- size_of_sample_for_australian_polling <- 2000 -->
<!-- sample_for_australian_polling <- -->
<!--   tibble( -->
<!--     age_group = -->
<!--       sample( -->
<!--         x = c(0:3), -->
<!--         size = size_of_sample_for_australian_polling, -->
<!--         replace = TRUE -->
<!--       ), -->
<!--     gender = -->
<!--       sample( -->
<!--         x = c(0:1), -->
<!--         size = size_of_sample_for_australian_polling, -->
<!--         replace = TRUE -->
<!--       ), -->
<!--     state = -->
<!--       sample( -->
<!--         x = c(1:8), -->
<!--         size = size_of_sample_for_australian_polling, -->
<!--         replace = TRUE -->
<!--       ), -->
<!--     noise = rnorm(size_of_sample_for_australian_polling, mean = 0, sd = 1), -->
<!--     support_alp = 1 + 0.5 * age_group + 0.5 * gender + 0.01 * state + noise -->
<!--   ) -->
<!-- # 결과 변수 정규화 -->
<!-- sample_for_australian_polling <- -->
<!--   sample_for_australian_polling |> -->
<!--   mutate( -->
<!--     support_alp = -->
<!--       if_else( -->
<!--         support_alp > median(support_alp, na.rm = TRUE), -->
<!--         "ALP 지지", -->
<!--         "지지 안함" -->
<!--       ) -->
<!--   ) -->
<!-- # 시뮬레이션된 데이터 정리 -->
<!-- sample_for_australian_polling <- -->
<!--   sample_for_australian_polling |> -->
<!--   mutate( -->
<!--     age_group = case_when( -->
<!--       age_group == 0 ~ "18세에서 29세", -->
<!--       age_group == 1 ~ "30세에서 44세", -->
<!--       age_group == 2 ~ "45세에서 59세", -->
<!--       age_group == 3 ~ "60세 이상", -->
<!--       TRUE ~ "문제" -->
<!--     ), -->
<!--     gender = case_when( -->
<!--       gender == 0 ~ "남성", -->
<!--       gender == 1 ~ "여성", -->
<!--       TRUE ~ "문제" -->
<!--     ), -->
<!--     state = case_when( -->
<!--       state == 1 ~ "퀸즐랜드", -->
<!--       state == 2 ~ "뉴사우스웨일스", -->
<!--       state == 3 ~ "호주 수도 준주", -->
<!--       state == 4 ~ "빅토리아", -->
<!--       state == 5 ~ "태즈메이니아", -->
<!--       state == 6 ~ "노던 테리토리", -->
<!--       state == 7 ~ "남호주", -->
<!--       state == 8 ~ "서호주", -->
<!--       TRUE ~ "문제" -->
<!--     ), -->
<!--   ) |> -->
<!--   select(-noise) -->
<!-- # 클래스 정리 -->
<!-- sample_for_australian_polling <- -->
<!--   sample_for_australian_polling |> -->
<!--   mutate(across(c(age_group, gender, state, support_alp), as_factor)) -->
<!-- sample_for_australian_polling |> -->
<!--   head() -->
<!-- ``` -->
<!-- 마지막으로, 설문 조사가 여성을 과대 표집하도록 하고 싶으므로, 남성 300명을 제거할 것입니다. -->
<!-- ```{r} -->
<!-- sample_for_australian_polling_all <- sample_for_australian_polling -->
<!-- sample_for_australian_polling <- -->
<!--   sample_for_australian_polling |> -->
<!--   arrange(gender) |> -->
<!--   slice(1:1700) -->
<!-- ``` -->
<!-- ### 설문 조사 모델링 -->
<!-- 이 여론 조사 데이터는 남성과 노년층이 ALP에 투표할 가능성이 낮고, 여성과 젊은층이 ALP에 투표할 가능성이 높도록 생성되었습니다. 여성은 과대 표집되었습니다. 따라서 데이터셋에 ALP 편향이 있어야 합니다. @tbl-pollingbiassample과 같은 개수 요약 표를 만드는 한 가지 방법은 `modelsummary`[@citemodelsummary]의 `datasummary_skim()`을 사용하는 것입니다. -->
<!-- ```{r} -->
<!-- #| tbl-cap: "변수별 개수 및 그룹 백분율" -->
<!-- #| label: tbl-pollingbiassample -->
<!-- sample_for_australian_polling |> -->
<!--   modelsummary::datasummary_skim(type = "categorical") -->
<!-- ``` -->
<!-- 이제 결과를 다시 얻을 수 있는지 확인하고 싶습니다(여성이 남성보다 호주 노동당에 투표할 가능성이 높고, 나이가 들수록 호주 노동당에 투표할 가능성이 낮아진다는 것을 발견해야 합니다). 우리의 모델은 다음과 같습니다. -->
<!-- $$
\mbox{Pr}(\hat{FP}_{i,p=1}) = \mbox{logit}^{-1} \left(\beta_0 + \beta_1 \times \mbox{gender}_i + \beta_2\times \mbox{age}_i + \beta_3 \times \mbox{state}_i \right)
$$
이 모델은 어떤 사람 $i$가 호주 노동당에 투표할 확률이 그들의 성별, 연령대, 거주 주에 따라 달라진다고 말합니다. 시뮬레이션된 데이터를 기반으로, 우리는 젊은 연령대가 호주 노동당에 투표할 가능성이 높고, 남성이 호주 노동당에 투표할 가능성이 낮기를 원합니다. -->
<!-- ```{r} -->
<!-- #| label: tbl-initial_model_analyse_example_polling -->
<!-- #| tbl-cap: "설문 조사 데이터를 기반으로 응답자가 노동당에 투표할지 여부에 대한 모델 추정치" -->
<!-- alp_support <- -->
<!--   glm( -->
<!--     support_alp ~ gender + age_group + state, -->
<!--     data = sample_for_australian_polling, -->
<!--     family = "binomial" -->
<!--   ) -->
<!-- alp_support |> -->
<!--   modelsummary::modelsummary(fmt = 2, exponentiate = TRUE) -->
<!-- ``` -->
<!-- 우리의 종속 변수는 이진 변수이므로 로지스틱 회귀를 사용했으므로 결과는 해석하기가 약간 더 어렵습니다(@tbl-initial_model_analyse_example_polling). 본질적으로 우리는 입력을 다시 얻었습니다. -->
<!-- ### 사후 층화 -->
<!-- 이제 여론 조사에서 발견한 것을 사용하여 인구 통계학적 특징을 기반으로 각 주에 대한 추정치를 얻을 수 있는지 확인하고 싶습니다. -->
<!-- 먼저 ABS에서 주별 실제 인구 통계 데이터를 읽어들입니다. -->
<!-- ```{r} -->
<!-- #| message: false -->
<!-- #| warning: false -->
<!-- post_strat_census_data <- -->
<!--   read_csv("outputs/data/census_data.csv") -->
<!-- head(post_strat_census_data) -->
<!-- ``` -->
<!-- 이 시점에서 우리는 결정을 내려야 합니다. 왜냐하면 설문 조사와 사후 층화 데이터셋의 변수가 동일해야 하지만, 여기서는 주 약어가 사용되었고, 설문 조사에서는 전체 이름이 사용되었기 때문입니다. 설문 조사 데이터가 이미 모델링되었으므로 사후 층화 데이터셋을 변경할 것입니다. -->
<!-- ```{r} -->
<!-- post_strat_census_data <- -->
<!--   post_strat_census_data |> -->
<!--   mutate( -->
<!--     state = -->
<!--       case_when( -->
<!--         state == "ACT" ~ "호주 수도 준주", -->
<!--         state == "NSW" ~ "뉴사우스웨일스", -->
<!--         state == "NT" ~ "노던 테리토리", -->
<!--         state == "QLD" ~ "퀸즐랜드", -->
<!--         state == "SA" ~ "남호주", -->
<!--         state == "TAS" ~ "태즈메이니아", -->
<!--         state == "VIC" ~ "빅토리아", -->
<!--         state == "WA" ~ "서호주", -->
<!--         TRUE ~ "문제" -->
<!--       ), -->
<!--     age_group = -->
<!--       case_when( -->
<!--         age_group == "ages18to29" ~ "18세에서 29세", -->
<!--         age_group == "ages30to44" ~ "30세에서 44세", -->
<!--         age_group == "ages45to59" ~ "45세에서 59세", -->
<!--         age_group == "ages60plus" ~ "60세 이상", -->
<!--         TRUE ~ "문제" -->
<!--       ) -->
<!--   ) -->
<!-- ``` -->
<!-- 우리는 대략적인 예측만 할 것입니다. 각 성별 및 연령대에 대해 예시 데이터에서 관련 계수를 원하며, 거기서부터 추정치를 구성할 수 있습니다. -->
<!-- ```{r} -->
<!-- post_strat_census_data <- -->
<!--   alp_support |> -->
<!--   predict(newdata = post_strat_census_data, type = "response", se.fit = TRUE) |> -->
<!--   as_tibble() |> -->
<!--   cbind(post_strat_census_data) -->
<!-- post_strat_census_data |> -->
<!--   mutate(alp_predict_prop = fit * cell_prop_of_division_total) |> -->
<!--   summarise(alp_predict = sum(alp_predict_prop), -->
<!--             .by = state) -->
<!-- ``` -->
<!-- 이제 각 부서에 대한 사후 층화 추정치를 얻었습니다. 우리 모델에는 몇 가지 약점이 있습니다. 예를 들어, 작은 셀 개수는 문제가 될 것입니다. 그리고 우리의 접근 방식은 불확실성을 무시하지만, 이제 작동하는 것이 있으므로 복잡하게 만들 수 있습니다. -->
<!-- ### 모델 개선 -->
<!-- 우리는 접근 방식의 주요 문제 중 일부, 특히 작은 셀 개수를 처리하고 불확실성을 더 잘 설명할 수 있는 능력을 해결하고 싶습니다. 설문 조사 데이터를 다루고 있으므로 예측 구간 또는 이와 유사한 것이 중요하며, 중앙 추정치만 보고하는 것은 적절하지 않습니다. 이를 위해 이전과 동일한 광범위한 접근 방식을 사용하되, 모델을 개선할 것입니다. 베이즈 모델로 변경하고 `rstanarm`[@citerstanarm]을 사용할 것입니다. -->
<!-- 이제 이전과 동일한 기본 모델을 사용하되, 베이즈 설정에서 사용합니다. -->
<!-- ```{r} -->
<!-- library(rstanarm) -->
<!-- improved_alp_support <- -->
<!--   stan_glm( -->
<!--     support_alp ~ gender + age_group + state, -->
<!--     data = sample_for_australian_polling, -->
<!--     family = binomial(link = "logit"), -->
<!--     prior = normal(0, 1), -->
<!--     prior_intercept = normal(0, 1), -->
<!--     cores = 2, -->
<!--     seed = 12345 -->
<!--   ) -->
<!-- ``` -->
<!-- 이전과 마찬가지로, 인구 통계학적 특징을 기반으로 각 주에 대한 추정치를 원합니다. 대략적인 예측만 할 것입니다. 각 성별 및 연령대에 대해 예시 데이터에서 관련 계수를 원하며, 추정치를 구성할 수 있습니다(@monicanamechanges의 코드). 이를 위해 `tidybayes`를 사용할 것입니다[@citetidybayes]. -->
<!-- ```{r} -->
<!-- #| message: false -->
<!-- library(tidybayes) -->
<!-- post_stratified_estimates <- -->
<!--   # 베이즈 모델 -->
<!--   improved_alp_support |> -->
<!--   # 사후 층화 데이터셋 샘플에서 예측 생성 -->
<!--   add_epred_draws(newdata = post_strat_census_data) |> -->
<!--   rename(alp_predict = .epred) |> -->
<!--   # 사후 층화 -->
<!--   mutate(alp_predict_prop = alp_predict * cell_prop_of_division_total) |> -->
<!--   ungroup() |>  -->
<!--   summarise(alp_predict = sum(alp_predict_prop), -->
<!--             .by = c(state, .draw)) |> -->
<!--   # 각 주에 대한 평균 및 신뢰 구간 계산 -->
<!--   summarise( -->
<!--     mean = mean(alp_predict), -->
<!--     lower = quantile(alp_predict, 0.025), -->
<!--     upper = quantile(alp_predict, 0.975), -->
<!--     .by = state -->
<!--   ) -->
<!-- post_stratified_estimates -->
<!-- ``` -->
<!-- 이제 각 부서에 대한 사후 층화 추정치를 얻었습니다. 우리의 새로운 베이즈 접근 방식은 불확실성에 대해 더 깊이 생각할 수 있게 해줄 것입니다. 더 많은 계수를 추가하거나(그러나 새로운 셀 개수를 얻어야 한다는 것을 기억하십시오) 일부 레이어를 추가하는 등 다양한 방식으로 이를 복잡하게 만들 수 있습니다. -->
<!-- 흥미로운 측면 중 하나는 우리의 다단계 접근 방식이 다른 셀에서 정보를 빌려와 작은 셀 개수를 처리할 수 있다는 것입니다. 예를 들어, 태즈메이니아의 18세에서 29세 남성 응답자의 대부분을 제거하더라도 모델은 여전히 추정치를 제공할 것입니다. 이는 풀링을 통해 이루어지며, 이 젊은 태즈메이니아 남성의 효과는 응답자가 있는 다른 셀에 의해 부분적으로 결정됩니다. -->
<!-- 다른 사람들에게 전달하고 싶은 흥미로운 측면이 많이 있습니다. 예를 들어, 모델이 결과 추정치에 어떻게 영향을 미치는지 보여주고 싶을 수 있습니다. 편향된 설문 조사 표본의 원시 추정치와 모델 추정치를 비교하는 그래프를 만들 수 있습니다(@fig-resultsforaustraliaa). 편향된 표본 추정치에서 ALP에 유리한 편향과 모델이 대부분의 경우 이를 수정할 수 있는 방법을 확인하십시오. -->
<!-- ```{r} -->
<!-- #| label: fig-resultsforaustraliaa -->
<!-- #| fig-cap: "MRP 추정치와 원시 추정치 비교" -->
<!-- # 원시 설문 조사 추정치 -->
<!-- raw_estimates <- sample_for_australian_polling_all |> -->
<!--   mutate(support_alp_num = abs(as.numeric(support_alp) - 2)) |> -->
<!--   summarise(mean = mean(support_alp_num), -->
<!--             .by = state) -->
<!-- raw_estimates_sample <- sample_for_australian_polling |> -->
<!--   mutate(support_alp_num = abs(as.numeric(support_alp) - 2)) |> -->
<!--   summarise(mean = mean(support_alp_num), -->
<!--             .by = state) -->
<!-- post_stratified_estimates |> -->
<!--   ggplot(aes(y = mean, x = forcats::fct_inorder(state))) + -->
<!--   geom_point(aes(color = "MRP 추정치"), shape = 16, size = 2.5) + -->
<!--   geom_errorbar(aes(ymin = lower, ymax = upper, color = "MRP 추정치"),  -->
<!--                 width = 0) + -->
<!--   geom_point(data = raw_estimates_sample,  -->
<!--              aes(color = "편향된 표본"),  -->
<!--              shape = 15, size = 2.5) + -->
<!--   geom_point(data = raw_estimates, aes(color = "원시 추정치"),  -->
<!--              shape = 18, size = 3) + -->
<!--   labs( -->
<!--     y = "ALP 지지 비율", -->
<!--     x = "주" -->
<!--   ) + -->
<!--   theme_minimal() + -->
<!--   scale_color_brewer(palette = "Set1") + -->
<!--   theme(legend.position = "bottom") + -->
<!--   theme(legend.title = element_blank()) + -->
<!--   coord_flip() + -->
<!--   guides(color = guide_legend(override.aes = list(shape = c(16, 18, 15),  -->
<!--                                                   linetype = c(1, 0, 0)))) -->
<!-- ``` -->
<!-- 마찬가지로, 계수의 분포를 플로팅하고 싶을 수 있습니다. `tidybayes::get_variables(model)`를 사용하여 `gather_draws()`에 전달할 계수를 파악할 수 있습니다. 이 예시에서는 "b_."를 전달했지만, 항상 그런 것은 아닙니다. -->
<!-- ```{r} -->
<!-- #| warning: false -->
<!-- #| message: false -->
<!-- #| label: fig-resultsforaustralia -->
<!-- #| #| layout-ncol: 2 -->
<!-- #| fig-cap: "호주 선거에 대한 모델 적합도 및 데이터에 미치는 영향 검토" -->
<!-- #| fig-subcap: ["사후 예측 검사", "사후 분포와 사전 분포 비교"] -->
<!-- library(rstanarm) -->
<!-- pp_check(improved_alp_support) + -->
<!--   theme_classic() + -->
<!--   theme(legend.position = "bottom") -->
<!-- posterior_vs_prior(improved_alp_support) + -->
<!--   theme_minimal() + -->
<!--   scale_color_brewer(palette = "Set1") + -->
<!--   theme(legend.position = "bottom") + -->
<!--   coord_flip() -->
<!-- ``` -->
<!-- ```{r} -->
<!-- #| label: fig-resultsforaustraliaf -->
<!-- #| fig-cap: "MRP 추정치와 원시 추정치 비교" -->
<!-- marginaleffects::plot_cap(improved_alp_support, condition = "state") + -->
<!--   labs( -->
<!--     x = "주", -->
<!--     y = "평균 지지율" -->
<!--   ) -->
<!-- ``` -->
</section>
</section>
<section id="년-미국-대통령-선거-예측" class="level2" data-number="16.3">
<h2 data-number="16.3" class="anchored" data-anchor-id="년-미국-대통령-선거-예측"><span class="header-section-number">16.3</span> 2020년 미국 대통령 선거 예측</h2>
<p>미국 대통령 선거는 미국에만 고유한 많은 특징을 가지고 있지만, 여기서 구축할 모델은 다양한 설정에 일반화될 수 있습니다. <a href="#sec-hunt-data에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-hunt-data에서</span></a> 소개된 민주주의 기금 유권자 연구 그룹의 설문 조사 데이터를 사용할 것입니다. 그들은 미국 선거를 앞두고 여론 조사를 실시했으며, 등록 후 공개적으로 이용할 수 있도록 합니다. <a href="#sec-farm-data에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-farm-data에서</span></a> 소개된 IPUMS를 사용하여 2019년 미국 지역사회 조사(ACS)를 사후 층화 데이터셋으로 사용할 것입니다. 주, 연령대, 성별 및 교육을 설명 변수로 사용할 것입니다.</p>
<section id="설문-조사-데이터" class="level3" data-number="16.3.1">
<h3 data-number="16.3.1" class="anchored" data-anchor-id="설문-조사-데이터"><span class="header-section-number">16.3.1</span> 설문 조사 데이터</h3>
<p>민주주의 기금 유권자 연구 그룹 Nationscape 설문 조사 데이터셋을 사용할 것입니다. MRP의 한 가지 까다로운 측면은 설문 조사 데이터셋과 사후 층화 데이터셋 간의 일관성을 보장하는 것입니다. 이 경우, <a href="#sec-hunt-data에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-hunt-data에서</span></a> 정리한 데이터셋을 읽어들인 후 변수를 일관되게 만들기 위해 일부 작업을 수행해야 합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>nationscape_data <span class="ot">&lt;-</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"nationscape_data.csv"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>nationscape_data</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5,200 × 5
   gender state vote_biden age_group education_level    
 * &lt;chr&gt;  &lt;chr&gt;      &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt;              
 1 female WI             0 45-59     Post sec +         
 2 female VA             0 45-59     Post sec +         
 3 female TX             0 60+       High school or less
 4 female WA             0 45-59     High school or less
 5 female MA             1 18-29     Some post sec      
 6 female TX             1 30-44     Some post sec      
 7 female CA             0 60+       Some post sec      
 8 female NC             0 45-59     Post sec +         
 9 female MD             0 60+       Post sec +         
10 female FL             1 45-59     Some post sec      
# ℹ 5,190 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># IPUMS와 일치하도록 주 이름 형식 지정</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>states_names_and_abbrevs <span class="ot">&lt;-</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">stateicp =</span> state.name, <span class="at">state =</span> state.abb)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>nationscape_data <span class="ot">&lt;-</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  nationscape_data <span class="sc">|&gt;</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(states_names_and_abbrevs, <span class="at">by =</span> <span class="st">"state"</span>)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(states_names_and_abbrevs)</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="co"># IPUMS 데이터와 일치하도록 소문자로 변경</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>nationscape_data <span class="ot">&lt;-</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  nationscape_data <span class="sc">|&gt;</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">stateicp =</span> <span class="fu">tolower</span>(stateicp))</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="co"># NA를 DC로 대체</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>nationscape_data<span class="sc">$</span>stateicp <span class="ot">&lt;-</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_na</span>(nationscape_data<span class="sc">$</span>stateicp, <span class="st">"district of columbia"</span>)</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 클래스 정리</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>nationscape_data <span class="ot">&lt;-</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>  nationscape_data <span class="sc">|&gt;</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(gender, stateicp, education_level, age_group), </span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>                as_factor))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>마지막으로, 준비된 데이터셋을 parquet 파일로 저장합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_parquet</span>(<span class="at">x =</span> nationscape_data,</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">sink =</span> <span class="st">"nationscape_data_cleaned.parquet"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="사후-층화-데이터" class="level3" data-number="16.3.2">
<h3 data-number="16.3.2" class="anchored" data-anchor-id="사후-층화-데이터"><span class="header-section-number">16.3.2</span> 사후 층화 데이터</h3>
<p>사후 층화할 데이터셋에 대한 많은 옵션이 있으며, 다양한 고려 사항이 있습니다. 우리는 좋은 품질(정의되어야 함)의 데이터셋을 찾고 있으며, 아마도 더 큰 데이터셋을 찾고 있습니다. 엄밀히 데이터 관점에서 보면, 최상의 선택은 <a href="#sec-its-just-a-linear-model에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-its-just-a-linear-model에서</span></a> 사용된 협동 선거 연구(CES)와 같은 것일 것입니다. 그러나 이는 선거 후에만 공개되므로 선거 예측에 사용하는 합리성이 제한됩니다. <span class="citation" data-cites="wang2015forecasting은">(<a href="#ref-wang2015forecasting은" role="doc-biblioref"><strong>wang2015forecasting은?</strong></a>)</span> 출구 조사 데이터를 사용하지만, 이 또한 선거 후에만 사용 가능합니다.</p>
<p><a href="#sec-farm-data에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-farm-data에서</span></a> 수집한 2019년 미국 지역사회 조사(ACS) 데이터셋을 사후 층화 데이터셋으로 사용할 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>poststrat_data</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 407,354 × 4
   gender age_group education_level     stateicp
 * &lt;fct&gt;  &lt;fct&gt;     &lt;fct&gt;               &lt;fct&gt;   
 1 male   60+       High school or less alabama 
 2 male   60+       Some post sec       alabama 
 3 male   18-29     High school or less alabama 
 4 female 18-29     Some post sec       alabama 
 5 male   30-44     Some post sec       alabama 
 6 female 18-29     High school or less alabama 
 7 female 60+       High school or less alabama 
 8 female 18-29     Some post sec       alabama 
 9 male   60+       High school or less alabama 
10 male   45-59     High school or less alabama 
# ℹ 407,344 more rows</code></pre>
</div>
</div>
<p>이 데이터셋은 개별 수준입니다. 각 하위 셀의 개수를 생성한 다음, 주별 비율을 생성할 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>poststrat_data_cells <span class="ot">&lt;-</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  poststrat_data <span class="sc">|&gt;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(stateicp, gender, age_group, education_level)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>마지막으로 각 셀에 대한 비율을 추가합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>poststrat_data_cells <span class="ot">&lt;-</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  poststrat_data_cells <span class="sc">|&gt;</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n),</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">.by =</span> stateicp)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>poststrat_data_cells</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,627 × 6
   stateicp    gender age_group education_level         n    prop
   &lt;fct&gt;       &lt;fct&gt;  &lt;fct&gt;     &lt;fct&gt;               &lt;int&gt;   &lt;dbl&gt;
 1 connecticut male   18-29     High school or less   194 0.0419 
 2 connecticut male   18-29     Some post sec         128 0.0276 
 3 connecticut male   18-29     Post sec +             72 0.0156 
 4 connecticut male   18-29     Grad degree            14 0.00302
 5 connecticut male   30-44     High school or less   132 0.0285 
 6 connecticut male   30-44     Some post sec          93 0.0201 
 7 connecticut male   30-44     Post sec +            147 0.0317 
 8 connecticut male   30-44     Grad degree            88 0.0190 
 9 connecticut male   45-59     High school or less   187 0.0404 
10 connecticut male   45-59     Some post sec          88 0.0190 
# ℹ 1,617 more rows</code></pre>
</div>
</div>
</section>
<section id="표본-모델링-1" class="level3" data-number="16.3.3">
<h3 data-number="16.3.3" class="anchored" data-anchor-id="표본-모델링-1"><span class="header-section-number">16.3.3</span> 표본 모델링</h3>
<p>바이든 대 트럼프 지지 이진 변수가 성별, 연령대, 교육 및 주로 설명되는 모델을 추정하기 위해 로지스틱 회귀를 사용할 것입니다.</p>
<p><span class="math display">\[
\begin{aligned}
y_i|\pi_i &amp; \sim \mbox{Bern}(\pi_i) \\
\mbox{logit}(\pi_i) &amp; = \beta_0+ \alpha_{g[i]}^{\mbox{gender}} + \alpha_{a[i]}^{\mbox{age}} + \alpha_{s[i]}^{\mbox{state}} + \alpha_{e[i]}^{\mbox{edu}} \\
\beta_0 &amp; \sim \mbox{Normal}(0, 2.5)\\
\alpha_{g}^{\mbox{gender}} &amp; \sim \mbox{Normal}(0, 2.5)\mbox{ for }g=1, 2\\
\alpha_{a}^{\mbox{age}} &amp; \sim \mbox{Normal}\left(0, \sigma^2_{\mbox{age}}\right)\mbox{ for }a = 1, 2, \dots, A\\
\alpha_{s}^{\mbox{state}} &amp; \sim \mbox{Normal}\left(0, \sigma^2_{\mbox{state}}\right)\mbox{ for }s = 1, 2, \dots, S\\
\alpha_{e}^{\mbox{edu}} &amp; \sim \mbox{Normal}\left(0, \sigma^2_{\mbox{edu}}\right)\mbox{ for }e = 1, 2, \dots, E\\
\sigma_{\mbox{gender}} &amp; \sim \mbox{Exponential}(1)\\
\sigma_{\mbox{state}} &amp; \sim \mbox{Exponential}(1)\\
\sigma_{\mbox{edu}} &amp; \sim \mbox{Exponential}(1)
\end{aligned}
\]</span></p>
<p>여기서 <span class="math inline">\(y_i\)</span>는 응답자가 바이든을 지지하는지 여부이고 <span class="math inline">\(\pi_i = \mbox{Pr}(y = 1)\)</span>입니다. 그런 다음 <span class="math inline">\(\alpha^{\mbox{gender}}\)</span>, <span class="math inline">\(\alpha^{\mbox{age}}\)</span>, <span class="math inline">\(\alpha^{\mbox{state}}\)</span>, <span class="math inline">\(\alpha^{\mbox{edu}}\)</span>는 각각 성별, 연령, 주 및 교육의 효과입니다. <span class="math inline">\(g[i]\)</span>, <span class="math inline">\(a[i]\)</span>, <span class="math inline">\(s[i]\)</span>, <span class="math inline">\(e[i]\)</span>는 응답자가 속한 성별, 연령대, 주 및 교육 수준을 나타냅니다. <span class="math inline">\(A\)</span>, <span class="math inline">\(S\)</span>, <span class="math inline">\(E\)</span>는 각각 연령대, 주 및 교육 수준의 총 수입니다.</p>
<p>이전에 정리한 데이터를 읽어들인 후, <span class="citation" data-cites="kennedygabry2020에">(<a href="#ref-kennedygabry2020에" role="doc-biblioref"><strong>kennedygabry2020에?</strong></a>)</span> 따라 <code>rstanarm</code>의 <code>stan_glmer()</code>를 사용하여 모델을 추정합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>nationscape_data <span class="ot">&lt;-</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_parquet</span>(<span class="at">file =</span> <span class="st">"nationscape_data_cleaned.parquet"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>us_election_model <span class="ot">&lt;-</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stan_glmer</span>(</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    vote_biden <span class="sc">~</span> gender <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>age_group) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>stateicp) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>education_level),</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> nationscape_data,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="fu">binomial</span>(<span class="at">link =</span> <span class="st">"logit"</span>),</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">prior =</span> <span class="fu">normal</span>(<span class="at">location =</span> <span class="dv">0</span>, <span class="at">scale =</span> <span class="fl">2.5</span>, <span class="at">autoscale =</span> <span class="cn">TRUE</span>),</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">prior_intercept =</span> <span class="fu">normal</span>(<span class="at">location =</span> <span class="dv">0</span>, <span class="at">scale =</span> <span class="fl">2.5</span>, <span class="at">autoscale =</span> <span class="cn">TRUE</span>),</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">cores =</span> <span class="dv">4</span>,</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">adapt_delta =</span> <span class="fl">0.99</span>,</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">seed =</span> <span class="dv">853</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  us_election_model,</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">"us_election_model_mrp.rds"</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이 모델은 실행하는 데 약 15분이 걸리므로, 실행 후 <code>saveRDS()</code>로 저장해야 합니다. 그리고 <code>readRDS()</code>로 로드할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>us_election_model <span class="ot">&lt;-</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">readRDS</span>(<span class="at">file =</span> <span class="st">"us_election_model_mrp.rds"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>계수 추정치를 살펴보고 싶을 수 있습니다(<a href="#tbl-modelsummaryusamrp" class="quarto-xref">표&nbsp;<span class="quarto-unresolved-ref">tbl-modelsummaryusamrp</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  us_election_model</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-modelsummaryusamrp" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-modelsummaryusamrp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;16.6: 2020년 미국 선거에서 바이든과 트럼프 간의 선택 모델 추정
</figcaption>
<div aria-describedby="tbl-modelsummaryusamrp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_c65ak8r6x5qh1ben7a6o(i, j, css_id) {
          var table = document.getElementById("tinytable_c65ak8r6x5qh1ben7a6o");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_c65ak8r6x5qh1ben7a6o');
        // Find the row with data-row attribute matching i
        var targetRow = table.querySelector(`tr [data-row="${i}"]`).closest('tr');
        var newRow = table.insertRow(targetRow.rowIndex);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        newCell.setAttribute("data-col", "0");
        newCell.setAttribute("data-row", i - 1);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_c65ak8r6x5qh1ben7a6o(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_c65ak8r6x5qh1ben7a6o");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '16', j: 1 },  ], css_id: 'tinytable_css_pry58pcedbzweajlknta',}, 
          { positions: [ { i: '5', j: 1 },  ], css_id: 'tinytable_css_cc6jy9gx4bt6v23zbqn4',}, 
          { positions: [ { i: '1', j: 1 }, { i: '2', j: 1 }, { i: '3', j: 1 }, { i: '4', j: 1 }, { i: '9', j: 1 }, { i: '6', j: 1 }, { i: '7', j: 1 }, { i: '8', j: 1 }, { i: '13', j: 1 }, { i: '10', j: 1 }, { i: '11', j: 1 }, { i: '12', j: 1 }, { i: '14', j: 1 }, { i: '15', j: 1 },  ], css_id: 'tinytable_css_3oo2p0qrkgic4k30ccbj',}, 
          { positions: [ { i: '0', j: 1 },  ], css_id: 'tinytable_css_49alnvkwta5a7h06gk6g',}, 
          { positions: [ { i: '16', j: 0 },  ], css_id: 'tinytable_css_1z0fc9nrgdsloiav0s9t',}, 
          { positions: [ { i: '5', j: 0 },  ], css_id: 'tinytable_css_tqcehzek3szop9icj4au',}, 
          { positions: [ { i: '1', j: 0 }, { i: '2', j: 0 }, { i: '3', j: 0 }, { i: '4', j: 0 }, { i: '9', j: 0 }, { i: '6', j: 0 }, { i: '7', j: 0 }, { i: '8', j: 0 }, { i: '13', j: 0 }, { i: '10', j: 0 }, { i: '11', j: 0 }, { i: '12', j: 0 }, { i: '14', j: 0 }, { i: '15', j: 0 },  ], css_id: 'tinytable_css_osetwtdmttxdhwvb3gol',}, 
          { positions: [ { i: '0', j: 0 },  ], css_id: 'tinytable_css_kzjwug7s93anhhr1qvkb',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_c65ak8r6x5qh1ben7a6o(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_pry58pcedbzweajlknta, .table th.tinytable_css_pry58pcedbzweajlknta { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_cc6jy9gx4bt6v23zbqn4, .table th.tinytable_css_cc6jy9gx4bt6v23zbqn4 { text-align: center; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_3oo2p0qrkgic4k30ccbj, .table th.tinytable_css_3oo2p0qrkgic4k30ccbj { text-align: center; }
      .table td.tinytable_css_49alnvkwta5a7h06gk6g, .table th.tinytable_css_49alnvkwta5a7h06gk6g { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_1z0fc9nrgdsloiav0s9t, .table th.tinytable_css_1z0fc9nrgdsloiav0s9t { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_tqcehzek3szop9icj4au, .table th.tinytable_css_tqcehzek3szop9icj4au { text-align: left; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_osetwtdmttxdhwvb3gol, .table th.tinytable_css_osetwtdmttxdhwvb3gol { text-align: left; }
      .table td.tinytable_css_kzjwug7s93anhhr1qvkb, .table th.tinytable_css_kzjwug7s93anhhr1qvkb { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_c65ak8r6x5qh1ben7a6o" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0"> </th>
                <th scope="col" data-row="0" data-col="1">(1)</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">(Intercept)</td>
                  <td data-row="1" data-col="1">0.373</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">gendermale</td>
                  <td data-row="2" data-col="1">-0.542</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">Sigma[stateicp × (Intercept),(Intercept)]</td>
                  <td data-row="3" data-col="1">0.081</td>
                </tr>
                <tr>
                  <td data-row="4" data-col="0">Sigma[education_level × (Intercept),(Intercept)]</td>
                  <td data-row="4" data-col="1">0.036</td>
                </tr>
                <tr>
                  <td data-row="5" data-col="0">Sigma[age_group × (Intercept),(Intercept)]</td>
                  <td data-row="5" data-col="1">0.241</td>
                </tr>
                <tr>
                  <td data-row="6" data-col="0">Num.Obs.</td>
                  <td data-row="6" data-col="1">5200</td>
                </tr>
                <tr>
                  <td data-row="7" data-col="0">R2</td>
                  <td data-row="7" data-col="1">0.056</td>
                </tr>
                <tr>
                  <td data-row="8" data-col="0">R2 Marg.</td>
                  <td data-row="8" data-col="1">0.017</td>
                </tr>
                <tr>
                  <td data-row="9" data-col="0">ICC</td>
                  <td data-row="9" data-col="1">0.2</td>
                </tr>
                <tr>
                  <td data-row="10" data-col="0">Log.Lik.</td>
                  <td data-row="10" data-col="1">-3434.075</td>
                </tr>
                <tr>
                  <td data-row="11" data-col="0">ELPD</td>
                  <td data-row="11" data-col="1">-3468.0</td>
                </tr>
                <tr>
                  <td data-row="12" data-col="0">ELPD s.e.</td>
                  <td data-row="12" data-col="1">16.2</td>
                </tr>
                <tr>
                  <td data-row="13" data-col="0">LOOIC</td>
                  <td data-row="13" data-col="1">6936.1</td>
                </tr>
                <tr>
                  <td data-row="14" data-col="0">LOOIC s.e.</td>
                  <td data-row="14" data-col="1">32.4</td>
                </tr>
                <tr>
                  <td data-row="15" data-col="0">WAIC</td>
                  <td data-row="15" data-col="1">6936.0</td>
                </tr>
                <tr>
                  <td data-row="16" data-col="0">RMSE</td>
                  <td data-row="16" data-col="1">0.48</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
<p><a href="#fig-politicsmodelresultsplots는" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-politicsmodelresultsplots는</span></a> 연령대 및 교육에 대한 표본 분포를 보여줍니다. 공간상의 이유로 일부 선택된 주를 별도로 플로팅합니다(<a href="#fig-politicsmodelresultsplotsstates" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-politicsmodelresultsplotsstates</span></a>).</p>
<div id="tbl-politicsmodelresultsplots" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl quarto-uncaptioned" id="tbl-politicsmodelresultsplots-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;16.7
</figcaption>
<div aria-describedby="tbl-politicsmodelresultsplots-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>us_election_model <span class="sc">|&gt;</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread_draws</span>(<span class="st">`</span><span class="at">(Intercept)</span><span class="st">`</span>, b[, group]) <span class="sc">|&gt;</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">condition_mean =</span> <span class="st">`</span><span class="at">(Intercept)</span><span class="st">`</span> <span class="sc">+</span> b) <span class="sc">|&gt;</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> group, </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"type"</span>, <span class="st">"instance"</span>), </span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">sep =</span> <span class="st">":"</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(type <span class="sc">!=</span> <span class="st">"stateicp"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> group, <span class="at">x =</span> condition_mean)) <span class="sc">+</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_halfeye</span>() <span class="sc">+</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</figure>
</div>
<div id="tbl-politicsmodelresultsplotsstates" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl quarto-uncaptioned" id="tbl-politicsmodelresultsplotsstates-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;16.8
</figcaption>
<div aria-describedby="tbl-politicsmodelresultsplotsstates-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>us_election_model <span class="sc">|&gt;</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread_draws</span>(<span class="st">`</span><span class="at">(Intercept)</span><span class="st">`</span>, b[, group]) <span class="sc">|&gt;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">condition_mean =</span> <span class="st">`</span><span class="at">(Intercept)</span><span class="st">`</span> <span class="sc">+</span> b) <span class="sc">|&gt;</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> group, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"type"</span>, <span class="st">"instance"</span>), <span class="at">sep =</span> <span class="st">":"</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(type <span class="sc">==</span> <span class="st">"stateicp"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(instance <span class="sc">%in%</span> </span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>           <span class="fu">c</span>(<span class="st">"california"</span>, <span class="st">"florida"</span>, <span class="st">"michigan"</span>, <span class="st">"new_york"</span>, <span class="st">"pennsylvania"</span>, </span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>             <span class="st">"vermont"</span>, <span class="st">"west_virginia"</span>, <span class="st">"wisconsin"</span>)</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> group, <span class="at">x =</span> condition_mean)) <span class="sc">+</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_halfeye</span>() <span class="sc">+</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</figure>
</div>
</section>
<section id="사후-층화" class="level3" data-number="16.3.4">
<h3 data-number="16.3.4" class="anchored" data-anchor-id="사후-층화"><span class="header-section-number">16.3.4</span> 사후 층화</h3>
<p>이제 이전에 계산된 모집단 비율에 따라 사후 층화를 수행하고, 각 주에 대한 신뢰 구간도 계산합니다.</p>
<p>그리고 추정치를 그래프로 살펴볼 수 있습니다(<a href="#fig-estimatyusamrp" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-estimatyusamrp</span></a>).</p>
<div id="tbl-estimatyusamrp" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl quarto-uncaptioned" id="tbl-estimatyusamrp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;16.9
</figcaption>
<div aria-describedby="tbl-estimatyusamrp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>

</div>
</div>
</figure>
</div>
<p>Nationscape 데이터셋은 고품질 설문 조사입니다. 그러나 주가 아닌 주요 인구 조사 지역(서부, 중서부, 북동부, 남부)에 가중치가 부여되었으며, 이는 MRP 추정치와 원시 데이터 간에 차이가 나타나는 한 가지 이유일 수 있습니다.</p>
</section>
</section>
<section id="연습-문제" class="level2" data-number="16.4">
<h2 data-number="16.4" class="anchored" data-anchor-id="연습-문제"><span class="header-section-number">16.4</span> 연습 문제</h2>
<section id="연습" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="연습">연습</h3>
<ol type="1">
<li><em>(계획)</em> 다음 시나리오를 고려하십시오: <em>정당 지지는 이진 변수(예/아니오)이며, 연령대, 성별, 소득 그룹 및 최고 교육 수준과 관련이 있습니다.</em> 데이터셋이 어떻게 생겼을지 스케치한 다음, 모든 관측치를 보여주기 위해 만들 수 있는 그래프를 스케치하십시오.</li>
<li><em>(시뮬레이션)</em> 설명된 시나리오를 더 고려하고 상황을 시뮬레이션하십시오. 시뮬레이션된 데이터를 기반으로 최소 10개의 테스트를 포함하십시오.</li>
<li><em>(수집)</em> 그러한 데이터셋의 가능한 출처를 설명하십시오.</li>
<li><em>(탐색)</em> <code>ggplot2</code>를 사용하여 스케치한 그래프를 만드십시오. <code>rstanarm</code>을 사용하여 모델을 추정하십시오.</li>
<li><em>(소통)</em> 자신이 한 일에 대해 두 단락을 작성하십시오.</li>
</ol>
</section>
<section id="퀴즈" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="퀴즈">퀴즈</h3>
<ol type="1">
<li>MRP가 무엇인지, 그리고 사용되는 기술 용어를 설명하면서 장단점을 설명하십시오(최소 세 단락을 작성하십시오).</li>
<li><span class="citation" data-cites="wang2015forecasting에">(<a href="#ref-wang2015forecasting에" role="doc-biblioref"><strong>wang2015forecasting에?</strong></a>)</span> 대해 좋아하는 세 가지 측면은 무엇입니까? 좋아하지 않는 세 가지 측면은 무엇입니까? 논문을 재현할 수 있는 정도는 어느 정도입니까?</li>
<li><span class="citation" data-cites="wang2015forecasting과">(<a href="#ref-wang2015forecasting과" role="doc-biblioref"><strong>wang2015forecasting과?</strong></a>)</span> 관련하여 MRP의 약점은 무엇입니까 (하나 선택)?
<ol type="a">
<li>자세한 데이터 요구 사항.</li>
<li>편향된 데이터 사용 허용.</li>
<li>수행 비용이 비쌉니다.</li>
</ol></li>
<li><span class="citation" data-cites="wang2015forecasting과">(<a href="#ref-wang2015forecasting과" role="doc-biblioref"><strong>wang2015forecasting과?</strong></a>)</span> 관련하여 Xbox 표본에 대해 우려되는 점은 무엇입니까 (하나 선택)?
<ol type="a">
<li>비대표적.</li>
<li>작은 표본 크기.</li>
<li>동일한 응답자로부터 여러 응답.</li>
</ol></li>
<li>다가오는 미국 대통령 선거에서 투표 의향이 개인의 소득에 따라 어떻게 달라지는지 연구하는 데 관심이 있습니다. 이 관계를 연구하기 위해 로지스틱 회귀 모델을 설정합니다. 이 연구에서 가능한 예측 변수는 (모두 선택하십시오)?
<ol type="a">
<li>응답자가 투표 등록되었는지 여부 (예/아니오).</li>
<li>응답자가 민주당 후보에게 투표할 것인지 여부 (예/아니오).</li>
<li>응답자의 인종 (백인/비백인).</li>
<li>응답자의 혼인 상태 (기혼/미혼).</li>
</ol></li>
<li><span class="citation" data-cites="cohn2016에">(<a href="#ref-cohn2016에" role="doc-biblioref"><strong>cohn2016에?</strong></a>)</span> 대해 생각해 보십시오. 왜 이러한 유형의 연습이 더 많이 수행되지 않습니까? 동일한 배경과 정량적 정교함 수준을 가진 다른 그룹이 동일한 데이터를 사용하더라도 왜 그렇게 다른 추정치를 가질 수 있다고 생각하십니까?</li>
<li>설문 조사를 기반으로 모델을 훈련한 다음, ACS 데이터셋을 사용하여 사후 층화합니다. 이 작업을 수행할 때 우리가 직면해야 할 실제적인 고려 사항은 무엇입니까?</li>
<li>연령대가 18-29; 30-44; 45-60; 60+인 설문 조사 데이터셋이 있고, 연령대가 18-34; 35-49; 50-64; 65+인 사후 층화 데이터셋이 있다고 가정해 보십시오. 이들을 통합하기 위해 어떤 접근 방식을 취하시겠습니까? 작성하십시오.</li>
</ol>
</section>
<section id="수업-활동" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="수업-활동">수업 활동</h3>
<ul>
<li><em>논문 검토:</em> <span class="citation" data-cites="wang2015forecasting을">(<a href="#ref-wang2015forecasting을" role="doc-biblioref"><strong>wang2015forecasting을?</strong></a>)</span> 읽고 검토하십시오.</li>
</ul>
</section>
<section id="과제" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="과제">과제</h3>
<p><span class="citation" data-cites="ghitza2020voter와">(<a href="#ref-ghitza2020voter와" role="doc-biblioref"><strong>ghitza2020voter와?</strong></a>)</span> 유사한 방식으로, 민간 회사에서 미국 유권자 파일 기록에 접근할 수 있다고 가정하십시오. 2020년 미국 협동 선거 연구를 기반으로 모델을 훈련하고, 해당 유권자 파일을 기반으로 개별적으로 사후 층화합니다.</p>
<ol type="a">
<li><span class="citation" data-cites="gebru2021datasheets에">(<a href="#ref-gebru2021datasheets에" role="doc-biblioref"><strong>gebru2021datasheets에?</strong></a>)</span> 따라 유권자 파일 데이터셋에 대한 데이터시트를 작성하십시오. 데이터시트는 데이터셋과 함께 제공되며 “동기, 구성, 수집 과정, 권장 사용법” 등을 문서화합니다.</li>
<li><span class="citation" data-cites="Mitchell_2019에">(<a href="#ref-Mitchell_2019에" role="doc-biblioref"><strong>Mitchell_2019에?</strong></a>)</span> 따라 모델에 대한 모델 카드를 생성하십시오. 모델 카드는 모델 세부 정보, 의도된 사용, 지표, 훈련 데이터, 윤리적 고려 사항, 주의 사항 및 권장 사항과 같은 측면을 보고하는 의도적으로 간단한 1~2페이지 문서입니다<span class="citation" data-cites="Mitchell_2019">(<a href="#ref-Mitchell_2019" role="doc-biblioref">Mitchell 기타 2019</a>)</span>.</li>
<li>모델에서 사용하는 기능과 관련된 세 가지 윤리적 측면을 논의하십시오. [각 지점에 대해 한두 단락을 작성하십시오.]</li>
<li>데이터셋, 모델 및 예측 측면에서 적용할 테스트를 자세히 설명하십시오.</li>
</ol>
</section>
<section id="논문" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="논문">논문</h3>
<p>이 시점에서 <a href="#sec-papers" class="quarto-xref">온라인 부록&nbsp;<span class="quarto-unresolved-ref ref-noprefix">sec-papers</span></a>의 <em>Spofforth</em> 논문이 적절할 것입니다.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-monicanamechanges" class="csl-entry" role="listitem">
Alexander, Monica. 2019. <span>“Analyzing name changes after marriage using a non-representative survey”</span>, 8월. <a href="https://www.monicaalexander.com/posts/2019-08-07-mrp/">https://www.monicaalexander.com/posts/2019-08-07-mrp/</a>.
</div>
<div id="ref-citemodelsummary" class="csl-entry" role="listitem">
Arel-Bundock, Vincent. 2022. <span>“<span>modelsummary</span>: Data and Model Summaries in <span>R</span>”</span>. <em>Journal of Statistical Software</em> 103 (1): 1–23. <a href="https://doi.org/10.18637/jss.v103.i01">https://doi.org/10.18637/jss.v103.i01</a>.
</div>
<div id="ref-tinytable" class="csl-entry" role="listitem">
———. 2024. <em><span>tinytable: Simple and Configurable Tables in <span>“HTML”</span>, <span>“LaTeX”</span>, <span>“Markdown”</span>, <span>“Word”</span>, <span>“PNG”</span>, <span>“PDF”</span>, and <span>“Typst”</span> Formats</span></em>. <a href="https://vincentarelbundock.github.io/tinytable/">https://vincentarelbundock.github.io/tinytable/</a>.
</div>
<div id="ref-mixedbroom" class="csl-entry" role="listitem">
Bolker, Ben, 와/과 David Robinson. 2022. <em><span>broom.mixed: Tidying Methods for Mixed Models</span></em>. <a href="https://CRAN.R-project.org/package=broom.mixed">https://CRAN.R-project.org/package=broom.mixed</a>.
</div>
<div id="ref-galefandshor" class="csl-entry" role="listitem">
Galef, Julia. 2020. <span>“Episode 248: Are Democrats being irrational? (David Shor)”</span>. <em>Rationally Speaking</em>, 12월. <a href="http://rationallyspeakingpodcast.org/248-are-democrats-being-irrational-david-shor/">http://rationallyspeakingpodcast.org/248-are-democrats-being-irrational-david-shor/</a>.
</div>
<div id="ref-gelmantalks" class="csl-entry" role="listitem">
Gelman, Andrew. 2020. <span>“Statistical Models of Election Outcomes”</span>. <em>YouTube</em>, 8월. <a href="https://youtu.be/7gjDnrbLQ4k">https://youtu.be/7gjDnrbLQ4k</a>.
</div>
<div id="ref-bda" class="csl-entry" role="listitem">
Gelman, Andrew, John Carlin, Hal Stern, David Dunson, Aki Vehtari, 와/과 Donald Rubin. (1995년) 2014. <em>Bayesian Data Analysis</em>. 3rd ed. Chapman; Hall/CRC.
</div>
<div id="ref-gelmanandhill" class="csl-entry" role="listitem">
Gelman, Andrew, 와/과 Jennifer Hill. 2007. <em>Data Analysis Using Regression and Multilevel/Hierarchical Models</em>. 1st ed. Cambridge University Press.
</div>
<div id="ref-citerstanarm" class="csl-entry" role="listitem">
Goodrich, Ben, Jonah Gabry, Imad Ali, 와/과 Sam Brilleman. 2023. <span>“<span>rstanarm: <span>Bayesian</span> applied regression modeling via <span>Stan</span></span>”</span>. <a href="https://mc-stan.org/rstanarm">https://mc-stan.org/rstanarm</a>.
</div>
<div id="ref-green2020mister" class="csl-entry" role="listitem">
Green, Eric. 2020. <span>“<span>Nivi Research: Mister P helps us understand vaccine hesitancy</span>”</span>, 12월. <a href="https://research.nivi.io/posts/2020-12-08-mister-p-helps-us-understand-vaccine-hesitancy/">https://research.nivi.io/posts/2020-12-08-mister-p-helps-us-understand-vaccine-hesitancy/</a>.
</div>
<div id="ref-gutenbergr" class="csl-entry" role="listitem">
Johnston, Myfanwy, 와/과 David Robinson. 2022. <em><span>gutenbergr: Download and Process Public Domain Works from Project Gutenberg</span></em>. <a href="https://CRAN.R-project.org/package=gutenbergr">https://CRAN.R-project.org/package=gutenbergr</a>.
</div>
<div id="ref-citetidybayes" class="csl-entry" role="listitem">
Kay, Matthew. 2022. <em><span>tidybayes</span>: Tidy Data and Geoms for <span>Bayesian</span> Models</em>. <a href="https://doi.org/10.5281/zenodo.1308151">https://doi.org/10.5281/zenodo.1308151</a>.
</div>
<div id="ref-citelabelled" class="csl-entry" role="listitem">
Larmarange, Joseph. 2023. <em><span>labelled: Manipulating Labelled Data</span></em>. <a href="https://CRAN.R-project.org/package=labelled">https://CRAN.R-project.org/package=labelled</a>.
</div>
<div id="ref-lauderdale2020model" class="csl-entry" role="listitem">
Lauderdale, Benjamin, Delia Bailey, Jack Blumenau, 와/과 Douglas Rivers. 2020. <span>“Model-based pre-election polling for national and sub-national outcomes in the US and UK”</span>. <em>International Journal of Forecasting</em> 36 (2): 399–413. <a href="https://doi.org/10.1016/j.ijforecast.2019.05.012">https://doi.org/10.1016/j.ijforecast.2019.05.012</a>.
</div>
<div id="ref-Mitchell_2019" class="csl-entry" role="listitem">
Mitchell, Margaret, Simone Wu, Andrew Zaldivar, Parker Barnes, Lucy Vasserman, Ben Hutchinson, Elena Spitzer, Inioluwa Deborah Raji, 와/과 Timnit Gebru. 2019. <span>“Model Cards for Model Reporting”</span>. <em>Proceedings of the Conference on Fairness, Accountability, and Transparency</em>, 1월. <a href="https://doi.org/10.1145/3287560.3287596">https://doi.org/10.1145/3287560.3287596</a>.
</div>
<div id="ref-citeR" class="csl-entry" role="listitem">
R Core Team. 2024. <em>R: A Language and Environment for Statistical Computing</em>. Vienna, Austria: R Foundation for Statistical Computing. <a href="https://www.R-project.org/">https://www.R-project.org/</a>.
</div>
<div id="ref-arrow" class="csl-entry" role="listitem">
Richardson, Neal, Ian Cook, Nic Crane, Dewey Dunnington, Romain François, Jonathan Keane, Dragoș Moldovan-Grünfeld, Jeroen Ooms, 와/과 Apache Arrow. 2023. <em><span>arrow: Integration to Apache Arrow</span></em>. <a href="https://CRAN.R-project.org/package=arrow">https://CRAN.R-project.org/package=arrow</a>.
</div>
<div id="ref-wang2015forecasting" class="csl-entry" role="listitem">
Wang, Wei, David Rothschild, Sharad Goel, 와/과 Andrew Gelman. 2015. <span>“Forecasting elections with non-representative polls”</span>. <em>International Journal of Forecasting</em> 31 (3): 980–91. <a href="https://doi.org/10.1016/j.ijforecast.2014.06.001">https://doi.org/10.1016/j.ijforecast.2014.06.001</a>.
</div>
<div id="ref-tidyverse" class="csl-entry" role="listitem">
Wickham, Hadley, Mara Averick, Jenny Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, 기타. 2019. <span>“<span>Welcome to the Tidyverse</span>”</span>. <em>Journal of Open Source Software</em> 4 (43): 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>.
</div>
<div id="ref-citehaven" class="csl-entry" role="listitem">
Wickham, Hadley, Evan Miller, 와/과 Danny Smith. 2023. <em><span>haven: Import and Export <span>“SPSS”</span> <span>“Stata”</span> and <span>“SAS”</span> Files</span></em>. <a href="https://CRAN.R-project.org/package=haven">https://CRAN.R-project.org/package=haven</a>.
</div>
</div>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "복사완료!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "복사완료!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/tellingstorieswithdata\.com\/mybook");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./14-causality_from_obs_ko.html" class="pagination-link" aria-label="관찰 데이터에서 인과 관계">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">관찰 데이터에서 인과 관계</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./16-text_ko.html" class="pagination-link" aria-label="데이터로서의 텍스트">
        <span class="nav-page-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">데이터로서의 텍스트</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/RohanAlexander/telling_stories/edit/main/15-mrp_ko.qmd" class="toc-action"><i class="bi bi-github"></i>편집</a></li></ul></div></div></div></footer></body></html>