<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko" xml:lang="ko"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>9&nbsp; 정리, 준비 및 테스트 – 데이터로 이야기하기</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./10-store_and_share_ko.html" rel="next">
<link href="./08-hunt_ko.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-b22ef3f334bfc3d7f06e555e13679c65.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "일치 없음",
    "search-matching-documents-text": "일치된 문서",
    "search-copy-link-title": "검색 링크 복사",
    "search-hide-matches-text": "추가 검색 결과 숨기기",
    "search-more-match-text": "추가 검색결과",
    "search-more-matches-text": "추가 검색결과",
    "search-clear-button-title": "제거",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "취소",
    "search-submit-button-title": "검색",
    "search-label": "검색"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="사이드바 전환" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./09-clean_and_prepare_ko.html">준비</a></li><li class="breadcrumb-item"><a href="./09-clean_and_prepare_ko.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">정리, 준비 및 테스트</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="사이드바 전환" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="검색" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">데이터로 이야기하기</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/RohanAlexander/telling_stories/" title="소스 코드" class="quarto-navigation-tool px-1" aria-label="소스 코드"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="검색"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">서문</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-errata_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">오류 및 업데이트</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">기초</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-introduction_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">데이터로 이야기하기</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-drinking_from_a_fire_hose_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">소방 호스에서 마시기</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-workflow_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">재현 가능한 워크플로우</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">소통</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-writing_research_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">연구 작성</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-graphs_tables_maps_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">그래프, 표, 지도</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">획득</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-farm_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">측정, 인구 조사, 표본 추출</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-gather_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">API, 스크래핑, 파싱</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-hunt_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">실험 및 설문 조사</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">준비</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-clean_and_prepare_ko.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">정리, 준비 및 테스트</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-store_and_share_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">저장 및 공유</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-eda_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">탐색적 데이터 분석</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">모델링</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-ijalm_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">선형 모델</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-ijaglm_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">일반화 선형 모델</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-prediction_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">예측</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">적용</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-causality_from_obs_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">관찰 데이터에서 인과 관계</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-mrp_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">사후 층화 다단계 회귀</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-text_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">데이터로서의 텍스트</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-concluding_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">17-concluding_ko.html</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">부록</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-r_essentials_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">R 필수 사항</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-python_essentials_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Python 필수 사항</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-sql_essentials_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">SQL 필수</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-datasets_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">데이터셋</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-rmarkdown_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">R 마크다운</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25-papers_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">F</span>&nbsp; <span class="chapter-title">논문</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./26-deploy_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">G</span>&nbsp; <span class="chapter-title">생산</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./98-cocktails_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">H</span>&nbsp; <span class="chapter-title">칵테일</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./99-references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">목차</h2>
   
  <ul>
  <li><a href="#서론" id="toc-서론" class="nav-link active" data-scroll-target="#서론"><span class="header-section-number">9.1</span> 서론</a></li>
  <li><a href="#워크플로" id="toc-워크플로" class="nav-link" data-scroll-target="#워크플로"><span class="header-section-number">9.2</span> 워크플로</a>
  <ul class="collapse">
  <li><a href="#원본-편집되지-않은-데이터-저장" id="toc-원본-편집되지-않은-데이터-저장" class="nav-link" data-scroll-target="#원본-편집되지-않은-데이터-저장"><span class="header-section-number">9.2.1</span> 원본, 편집되지 않은 데이터 저장</a></li>
  <li><a href="#계획" id="toc-계획" class="nav-link" data-scroll-target="#계획"><span class="header-section-number">9.2.2</span> 계획</a></li>
  <li><a href="#작게-시작" id="toc-작게-시작" class="nav-link" data-scroll-target="#작게-시작"><span class="header-section-number">9.2.3</span> 작게 시작</a></li>
  <li><a href="#테스트-및-문서-작성" id="toc-테스트-및-문서-작성" class="nav-link" data-scroll-target="#테스트-및-문서-작성"><span class="header-section-number">9.2.4</span> 테스트 및 문서 작성</a></li>
  <li><a href="#반복-일반화-및-업데이트" id="toc-반복-일반화-및-업데이트" class="nav-link" data-scroll-target="#반복-일반화-및-업데이트"><span class="header-section-number">9.2.5</span> 반복, 일반화 및 업데이트</a></li>
  </ul></li>
  <li><a href="#확인-및-테스트" id="toc-확인-및-테스트" class="nav-link" data-scroll-target="#확인-및-테스트"><span class="header-section-number">9.3</span> 확인 및 테스트</a>
  <ul class="collapse">
  <li><a href="#그래프" id="toc-그래프" class="nav-link" data-scroll-target="#그래프"><span class="header-section-number">9.3.1</span> 그래프</a></li>
  <li><a href="#개수" id="toc-개수" class="nav-link" data-scroll-target="#개수"><span class="header-section-number">9.3.2</span> 개수</a></li>
  <li><a href="#테스트" id="toc-테스트" class="nav-link" data-scroll-target="#테스트"><span class="header-section-number">9.3.3</span> 테스트</a></li>
  </ul></li>
  <li><a href="#시뮬레이션-예시-달리기-시간" id="toc-시뮬레이션-예시-달리기-시간" class="nav-link" data-scroll-target="#시뮬레이션-예시-달리기-시간"><span class="header-section-number">9.4</span> 시뮬레이션 예시: 달리기 시간</a></li>
  <li><a href="#이름" id="toc-이름" class="nav-link" data-scroll-target="#이름"><span class="header-section-number">9.5</span> 이름</a>
  <ul class="collapse">
  <li><a href="#기계가-읽을-수-있는-이름" id="toc-기계가-읽을-수-있는-이름" class="nav-link" data-scroll-target="#기계가-읽을-수-있는-이름"><span class="header-section-number">9.5.1</span> 기계가 읽을 수 있는 이름</a></li>
  <li><a href="#사람이-읽을-수-있는-이름" id="toc-사람이-읽을-수-있는-이름" class="nav-link" data-scroll-target="#사람이-읽을-수-있는-이름"><span class="header-section-number">9.5.2</span> 사람이 읽을 수 있는 이름</a></li>
  </ul></li>
  <li><a href="#년-탄자니아-dhs" id="toc-년-탄자니아-dhs" class="nav-link" data-scroll-target="#년-탄자니아-dhs"><span class="header-section-number">9.6</span> 1996년 탄자니아 DHS</a></li>
  <li><a href="#년-케냐-인구-조사" id="toc-년-케냐-인구-조사" class="nav-link" data-scroll-target="#년-케냐-인구-조사"><span class="header-section-number">9.7</span> 2019년 케냐 인구 조사</a>
  <ul class="collapse">
  <li><a href="#수집-및-정리" id="toc-수집-및-정리" class="nav-link" data-scroll-target="#수집-및-정리"><span class="header-section-number">9.7.1</span> 수집 및 정리</a></li>
  <li><a href="#확인-및-테스트-1" id="toc-확인-및-테스트-1" class="nav-link" data-scroll-target="#확인-및-테스트-1"><span class="header-section-number">9.7.2</span> 확인 및 테스트</a></li>
  <li><a href="#정리" id="toc-정리" class="nav-link" data-scroll-target="#정리"><span class="header-section-number">9.7.3</span> 정리</a></li>
  </ul></li>
  <li><a href="#연습-문제" id="toc-연습-문제" class="nav-link" data-scroll-target="#연습-문제"><span class="header-section-number">9.8</span> 연습 문제</a>
  <ul class="collapse">
  <li><a href="#연습" id="toc-연습" class="nav-link" data-scroll-target="#연습">연습</a></li>
  <li><a href="#퀴즈" id="toc-퀴즈" class="nav-link" data-scroll-target="#퀴즈">퀴즈</a></li>
  <li><a href="#수업-활동" id="toc-수업-활동" class="nav-link" data-scroll-target="#수업-활동">수업 활동</a></li>
  <li><a href="#과제" id="toc-과제" class="nav-link" data-scroll-target="#과제">과제</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/RohanAlexander/telling_stories/edit/main/09-clean_and_prepare_ko.qmd" class="toc-action"><i class="bi bi-github"></i>편집</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./09-clean_and_prepare_ko.html">준비</a></li><li class="breadcrumb-item"><a href="./09-clean_and_prepare_ko.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">정리, 준비 및 테스트</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-clean-and-prepare" class="quarto-section-identifier"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">정리, 준비 및 테스트</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><strong>선수 지식</strong></p>
<ul>
<li><em>데이터 페미니즘</em>, <span class="citation" data-cites="datafeminism2020">(<a href="#ref-datafeminism2020" role="doc-biblioref">D’Ignazio 와/과 Klein 2020</a>)</span>
<ul>
<li>동일한 프로세스에 대한 다양한 데이터 소스를 고려하는 것의 중요성을 논의하는 5장 “유니콘, 관리인, 닌자, 마법사, 록 스타”에 집중하세요.</li>
</ul></li>
<li><em>데이터 과학을 위한 R</em>, <span class="citation" data-cites="r4ds">(<a href="#ref-r4ds" role="doc-biblioref">Wickham, Çetinkaya-Rundel, 와/과 Grolemund [2016년] 2023</a>)</span>
<ul>
<li>정돈된 데이터와 이를 얻기 위한 몇 가지 전략에 대한 개요를 제공하는 6장 “데이터 정리”에 집중하세요.</li>
</ul></li>
<li><em>R을 이용한 데이터 정리 소개</em>, <span class="citation" data-cites="de2013introduction">(<a href="#ref-de2013introduction" role="doc-biblioref">De Jonge 와/과 van der Loo 2013</a>)</span>
<ul>
<li>R로 데이터를 읽고 다양한 클래스에 대한 자세한 정보를 제공하는 2장 “원시 데이터에서 기술적으로 올바른 데이터로”에 집중하세요.</li>
</ul></li>
<li><em>워싱턴 포스트 선거 엔지니어링 팀이 선거 데이터에 대해 배워야 했던 것</em> <span class="citation" data-cites="washingtonpostelections">(<a href="#ref-washingtonpostelections" role="doc-biblioref">Liu, Bronner, 와/과 Bowers 2022</a>)</span>
<ul>
<li>실제 데이터셋에 대한 몇 가지 실제적인 문제를 자세히 설명합니다.</li>
</ul></li>
<li><em>계약으로서의 열 이름</em>, <span class="citation" data-cites="columnnamesascontracts">(<a href="#ref-columnnamesascontracts" role="doc-biblioref">Riederer 2020</a>)</span>
<ul>
<li>변수 이름 지정에 대한 제한된 어휘를 갖는 것의 이점을 소개합니다.</li>
</ul></li>
<li><em>통계적, 물리적, 역사적 증거를 결합하여 역사적 해수면 온도 기록 개선</em>, <span class="citation" data-cites="Chan2021Combining">(<a href="#ref-Chan2021Combining" role="doc-biblioref">Chan 2021</a>)</span>
<ul>
<li>다른 선박에서 다른 시간에 수집된 관측치로부터 온도 데이터셋을 생성하는 어려움을 자세히 설명합니다.</li>
</ul></li>
</ul>
<p><strong>핵심 개념 및 기술</strong></p>
<ul>
<li>데이터셋을 정리하고 준비하는 것은 많은 결정을 포함하는 어려운 작업입니다. 최종 목표를 계획하고 우리가 얻고자 하는 데이터셋을 시뮬레이션하는 것은 데이터를 정리하고 준비하는 핵심 요소입니다.</li>
<li>데이터셋의 작은 샘플부터 시작하여 반복적인 방식으로 작업하는 것이 도움이 될 수 있습니다. 특정 측면을 수정하는 코드를 작성한 다음, 추가적인 부분으로 반복하고 일반화하십시오.</li>
<li>그 과정에서 데이터셋이 통과해야 할 일련의 테스트와 검사도 개발해야 합니다. 이는 데이터셋에서 기대하는 주요 기능에 초점을 맞춰야 합니다.</li>
<li>우리는 변수의 클래스, 명확한 이름, 그리고 각 변수의 고유한 값이 이 모든 것을 고려할 때 예상대로인지에 대해 특히 주의해야 합니다.</li>
</ul>
<p><strong>소프트웨어 및 패키지</strong></p>
<ul>
<li>Base R <span class="citation" data-cites="citeR">(<a href="#ref-citeR" role="doc-biblioref">R Core Team 2024</a>)</span></li>
<li><code>janitor</code> <span class="citation" data-cites="janitor">(<a href="#ref-janitor" role="doc-biblioref">Firke 2023</a>)</span></li>
<li><code>lubridate</code> <span class="citation" data-cites="GrolemundWickham2011">(<a href="#ref-GrolemundWickham2011" role="doc-biblioref">Grolemund 와/과 Wickham 2011</a>)</span></li>
<li><code>modelsummary</code> <span class="citation" data-cites="citemodelsummary">(<a href="#ref-citemodelsummary" role="doc-biblioref">Arel-Bundock 2022</a>)</span></li>
<li><code>opendatatoronto</code> <span class="citation" data-cites="citeSharla">(<a href="#ref-citeSharla" role="doc-biblioref">Gelfand 2022</a>)</span></li>
<li><code>pdftools</code> <span class="citation" data-cites="pdftools">(<a href="#ref-pdftools" role="doc-biblioref">Ooms 2022</a>)</span></li>
<li><code>pointblank</code> <span class="citation" data-cites="pointblank">(<a href="#ref-pointblank" role="doc-biblioref">Iannone 와/과 Vargas 2022</a>)</span></li>
<li><code>readxl</code> <span class="citation" data-cites="readxl">(<a href="#ref-readxl" role="doc-biblioref">Wickham 와/과 Bryan 2023</a>)</span></li>
<li><code>scales</code> <span class="citation" data-cites="scales">(<a href="#ref-scales" role="doc-biblioref">Wickham 와/과 Seidel 2022</a>)</span></li>
<li><code>stringi</code> <span class="citation" data-cites="stringi">(<a href="#ref-stringi" role="doc-biblioref">Gagolewski 2022</a>)</span></li>
<li><code>testthat</code> <span class="citation" data-cites="testthat">(<a href="#ref-testthat" role="doc-biblioref">Wickham 2011</a>)</span></li>
<li><code>tidyverse</code> <span class="citation" data-cites="tidyverse">(<a href="#ref-tidyverse" role="doc-biblioref">Wickham 기타 2019</a>)</span></li>
<li><code>tinytable</code> <span class="citation" data-cites="tinytable">(<a href="#ref-tinytable" role="doc-biblioref">Arel-Bundock 2024</a>)</span></li>
<li><code>validate</code> <span class="citation" data-cites="validate">(<a href="#ref-validate" role="doc-biblioref">van der Loo 와/과 De Jonge 2021</a>)</span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'janitor'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    chisq.test, fisher.test</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'lubridate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    date, intersect, setdiff, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modelsummary)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(opendatatoronto)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pdftools)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Using poppler version 24.12.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># library(pointblank)</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringi)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(testthat)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr   1.1.4     ✔ readr   2.1.5
✔ forcats 1.0.0     ✔ stringr 1.5.1
✔ ggplot2 3.5.2     ✔ tibble  3.3.0
✔ purrr   1.1.0     ✔ tidyr   1.3.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ readr::col_factor()    masks scales::col_factor()
✖ purrr::discard()       masks scales::discard()
✖ readr::edition_get()   masks testthat::edition_get()
✖ dplyr::filter()        masks stats::filter()
✖ purrr::is_null()       masks testthat::is_null()
✖ dplyr::lag()           masks stats::lag()
✖ readr::local_edition() masks testthat::local_edition()
✖ dplyr::matches()       masks tidyr::matches(), testthat::matches()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tinytable)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># library(validate)</span></span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="서론" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="서론"><span class="header-section-number">9.1</span> 서론</h2>
<blockquote class="blockquote">
<p>“음, 린든, 당신이 옳을 수도 있고 그들이 당신이 말하는 것처럼 똑똑할 수도 있습니다.” 레이번이 말했다. “하지만 그들 중 단 한 명이라도 보안관에 출마했다면 훨씬 더 좋았을 것입니다.”</p>
<p>존 F. 케네디의 새 내각에 대한 린든 존슨의 열정에 대한 샘 레이번의 반응, <em>The Best and the Brightest</em><span class="citation" data-cites="halberstam">(<a href="#ref-halberstam" role="doc-biblioref">Halberstam 1972</a>, p.&nbsp;41)</span>에서 인용.</p>
</blockquote>
<p>이 장에서는 데이터 정리 및 준비를 위한 보다 공식적인 접근 방식을 제시합니다. 이는 다음을 중심으로 합니다.</p>
<ol type="1">
<li>타당성;</li>
<li>내부 일관성; 그리고</li>
<li>외부 일관성.</li>
</ol>
<p>당신의 모델은 데이터 유효성 검사를 했는지 신경 쓰지 않지만, 당신은 해야 합니다. 타당성은 데이터셋의 값이 명백히 틀리지 않다는 것을 의미합니다. 예를 들어, 몇 가지 예외를 제외하고 통화에는 문자가 없어야 하고, 이름에는 숫자가 없어야 하며, 속도는 빛의 속도보다 빠르지 않아야 합니다. 내부 일관성은 데이터셋이 자체적으로 모순되지 않는다는 것을 의미합니다. 예를 들어, 구성 열이 총 열에 합산된다는 것을 의미할 수 있습니다. 외부 일관성은 데이터셋이 일반적으로 외부 소스와 모순되지 않으며, 모순될 경우 의도적이라는 것을 의미합니다. 예를 들어, 우리의 데이터셋이 도시 인구에 관한 것이라고 주장한다면, 우리는 대략적으로 관련 인구 조사에서 사용 가능한 것과 동일할 것으로 예상할 것입니다.</p>
<p>미국 로켓 회사인 SpaceX는 로켓을 제어하기 위해 10 또는 50 헤르츠(각각 0.1 및 0.02초에 해당) 주기를 사용합니다. 각 주기마다 온도 및 압력과 같은 센서의 입력이 읽히고 처리되며, 일부 설정을 조정할지 여부와 같은 결정을 내리는 데 사용됩니다<span class="citation" data-cites="martinpopper">(<a href="#ref-martinpopper" role="doc-biblioref">Martin 와/과 Popper 2021</a>)</span>. 우리는 데이터 정리 및 준비 중에 작은 조정을 반복하는 유사한 반복적 접근 방식을 권장합니다. 처음부터 모든 것을 완벽하게 만들려고 노력하기보다는, 작은 지속적인 개선 과정을 통해 시작하고 반복하십시오.</p>
<p>데이터 정리 및 준비의 역할은 너무 커서 데이터셋을 이해하는 유일한 사람들은 그것을 정리한 사람들뿐입니다. 그러나 데이터 정리의 역설은 종종 정리 및 준비를 하는 사람들이 결과 데이터셋에 대한 신뢰가 가장 적다는 것입니다. 모든 데이터 과학 워크플로의 어느 시점에서는 모델링을 하는 사람들이 데이터 정리를 해야 합니다. 비록 그것을 하고 싶어하는 사람은 거의 없지만<span class="citation" data-cites="Sambasivan2021">(<a href="#ref-Sambasivan2021" role="doc-biblioref">Sambasivan 기타 2021</a>)</span>, 모델링만큼이나 영향력이 있을 수 있습니다. 데이터를 정리하고 준비하는 것은 많은 결정을 내리는 것이며, 그 중 일부는 결과에 중요한 영향을 미칠 수 있습니다. 예를 들어, <span class="citation" data-cites="labelsiswrongs는">(<a href="#ref-labelsiswrongs는" role="doc-biblioref"><strong>labelsiswrongs는?</strong></a>)</span> 컴퓨터 과학의 일부 인기 있는 데이터셋의 테스트 세트에 평균적으로 약 3%의 잘못된 레이블이 포함되어 있음을 발견했습니다. <span class="citation" data-cites="Banes2022는">(<a href="#ref-Banes2022는" role="doc-biblioref"><strong>Banes2022는?</strong></a>)</span> 수마트라 오랑우탄 <em>(Pongo abelii)</em> 참조 게놈을 다시 검토하고 10개 샘플 중 9개에 문제가 있음을 발견했습니다. 그리고 <span class="citation" data-cites="eveninaccountingwhat는">(<a href="#ref-eveninaccountingwhat는" role="doc-biblioref"><strong>eveninaccountingwhat는?</strong></a>)</span> 회사의 회계 데이터의 제출된 버전과 표준화된 버전 사이에 상당한 차이가 있음을 발견했습니다. 특히 복잡한 재정 상황의 경우 더욱 그렇습니다. 케네디 내각이 지능에도 불구하고 실무 경험이 있기를 바랐던 샘 레이번처럼, 데이터 과학자는 데이터셋의 지저분한 현실에 몰두해야 합니다.</p>
<p>심리학에서 일찍이 확인되었지만<span class="citation" data-cites="anniesfind">(<a href="#ref-anniesfind" role="doc-biblioref">Open Science Collaboration 2015</a>)</span> 이후 물리 및 사회 과학의 다른 많은 분야로 확장된 재현성 위기는 p-값 “해킹”, 연구자 자유도, 파일 서랍 문제, 심지어 데이터 및 결과 조작과 같은 문제를 드러냈습니다<span class="citation" data-cites="gelman2013garden">(<a href="#ref-gelman2013garden" role="doc-biblioref">Gelman 와/과 Loken 2013</a>)</span>. 이제 이러한 문제를 해결하기 위한 조치가 취해지고 있습니다. 그러나 데이터 수집, 정리 및 준비 측면은 이러한 단계에서 내린 결정이 통계 결과에 크게 영향을 미친다는 증거에도 불구하고 상대적으로 거의 초점을 받지 못했습니다<span class="citation" data-cites="huntington2021influence">(<a href="#ref-huntington2021influence" role="doc-biblioref">Huntington-Klein 기타 2021</a>)</span>. 이 장에서는 이러한 문제에 초점을 맞춥니다.</p>
<p>데이터 과학의 기반이 되는 통계적 관행은 시뮬레이션된 데이터셋에 적용될 때 자체적으로 정확하고 견고하지만, 데이터 과학은 일반적으로 일반적으로 적합되는 모델의 가정을 따르는 데이터로 수행되지 않습니다. 예를 들어, 데이터 과학자들은 “이질성, 복잡한 의존성 및 결측 패턴으로 오염된 지저분하고 필터링되지 않은, 그리고 아마도 깨끗하지 않은 데이터”에 관심이 있습니다. 이는 최근까지 더 전통적인 통계학자들 사이에서 정중한 대화에서 피했던 것입니다<span class="citation" data-cites="craiu2019hiring">(<a href="#ref-craiu2019hiring" role="doc-biblioref">Craiu 2019</a>)</span>. 빅 데이터는 이 문제를 해결하지 못하며 심지어 악화시킬 수도 있습니다. 예를 들어, 데이터 문제를 조정하지 않고 품질이 낮은 더 많은 양의 데이터를 기반으로 한 모집단 추론은 단순히 더 자신 있게 틀린 결론으로 이어질 것입니다<span class="citation" data-cites="meng2018statistical">(<a href="#ref-meng2018statistical" role="doc-biblioref">Meng 2018</a>)</span>. 응용 통계 연구에서 발견되는 문제는 반드시 연구자의 품질이나 편향과 관련이 있는 것은 아닙니다<span class="citation" data-cites="silberzahn2018many">(<a href="#ref-silberzahn2018many" role="doc-biblioref">Silberzahn 기타 2018</a>)</span>. 대신, 그것들은 데이터 과학이 수행되는 맥락의 결과입니다. 이 장은 이 작업에 대해 명시적으로 생각하는 접근 방식과 도구를 제공합니다.</p>
<p><span class="citation" data-cites="gelman2020most는">(<a href="#ref-gelman2020most는" role="doc-biblioref"><strong>gelman2020most는?</strong></a>)</span> 지난 50년간의 가장 중요한 통계적 아이디어에 대해 글을 쓰면서, 각각이 데이터 분석에 대한 새로운 사고 방식을 가능하게 했다고 말합니다. 이러한 아이디어는 통계학의 영역으로 “취향이나 철학의 문제로 여겨졌던” 접근 방식을 가져왔습니다. 이 장에서 데이터 정리 및 준비에 초점을 맞추는 것은, 일반적으로 잘못되게도 핵심 통계적 관심사라기보다는 취향의 문제로 간주되는 측면을 성문화하거나 영역 안으로 가져오는 것과 유사합니다.</p>
<p>데이터 정리 및 준비를 위해 우리가 옹호하는 워크플로는 다음과 같습니다.</p>
<ol type="1">
<li>원본, 편집되지 않은 데이터를 저장합니다.</li>
<li>스케치 및 시뮬레이션을 통해 최종 목표를 염두에 두고 시작합니다.</li>
<li>테스트 및 문서를 작성합니다.</li>
<li>작은 샘플에 대해 계획을 실행합니다.</li>
<li>계획을 반복합니다.</li>
<li>실행을 일반화합니다.</li>
<li>테스트 및 문서를 업데이트합니다.</li>
</ol>
<p>우리는 효과적이기 위해 다양한 기술이 필요하지만, 이것이 바로 데이터 과학의 핵심입니다. 필요한 접근 방식은 끈기 있고 합리적인 것의 조합입니다. 데이터 정리와 관련하여 완벽은 좋은 것의 적입니다. 그리고 구체적으로 말하면, 데이터의 90%를 정리하고 준비한 다음, 나머지 10%를 정리하고 준비하는 데 드는 노력이 가치가 있는지 결정하기 전에 탐색을 시작하는 것이 좋습니다. 왜냐하면 그 나머지는 엄청난 시간과 노력을 필요로 할 것이기 때문입니다.</p>
<p>농업, 수집 또는 사냥을 통해 얻었는지 여부에 관계없이 모든 데이터에는 문제가 있습니다. 우리는 다양한 문제를 다룰 수 있는 접근 방식이 필요하며, 더 중요하게는 그것들이 모델링에 어떻게 영향을 미칠 수 있는지 이해해야 합니다<span class="citation" data-cites="van2005data">(<a href="#ref-van2005data" role="doc-biblioref">Van den Broeck 기타 2005</a>)</span>. 데이터를 정리하는 것은 데이터를 분석하는 것입니다. 왜냐하면 이 과정은 결과에서 우리가 중요하게 생각하는 것에 대해 선택을 하도록 강요하기 때문입니다<span class="citation" data-cites="thatrandyauperson">(<a href="#ref-thatrandyauperson" role="doc-biblioref">Au 2020</a>)</span>.</p>
</section>
<section id="워크플로" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="워크플로"><span class="header-section-number">9.2</span> 워크플로</h2>
<section id="원본-편집되지-않은-데이터-저장" class="level3" data-number="9.2.1">
<h3 data-number="9.2.1" class="anchored" data-anchor-id="원본-편집되지-않은-데이터-저장"><span class="header-section-number">9.2.1</span> 원본, 편집되지 않은 데이터 저장</h3>
<p>첫 번째 단계는 원본, 편집되지 않은 데이터를 별도의 로컬 폴더에 저장하는 것입니다. 원본, 편집되지 않은 데이터는 재현성의 기초를 확립합니다<span class="citation" data-cites="wilsongoodenough">(<a href="#ref-wilsongoodenough" role="doc-biblioref">Wilson 기타 2017</a>)</span>. 데이터를 정부 웹사이트와 같은 제3자로부터 얻었다면, 우리는 그들이 해당 데이터를 계속 호스팅할지, 업데이트할지, 또는 사용 가능한 주소를 변경할지 여부에 대해 통제할 수 없습니다. 로컬 사본을 저장하는 것은 또한 그들의 서버에 부과하는 부담을 줄여줍니다.</p>
<p>원본, 편집되지 않은 데이터를 로컬에 저장한 후에는 해당 상태로 사본을 유지하고 수정하지 않아야 합니다. 우리가 그것을 정리하고 준비하기 시작할 때, 우리는 대신 데이터셋의 사본에 이러한 변경 사항을 적용합니다. 원본, 편집되지 않은 데이터셋을 유지하고, 우리가 분석하고자 하는 데이터셋을 생성하는 데 필요한 스크립트를 사용하면 전체 워크플로가 재현 가능하도록 보장됩니다. 오늘 우리가 내리기로 결정한 변경 사항이 데이터셋에 대해 더 많이 알게 된 후 내일 내릴 변경 사항이 아닐 수도 있습니다. 우리는 필요할 경우 원본, 편집되지 않은 상태의 데이터를 가지고 있는지 확인해야 합니다<span class="citation" data-cites="Borer2009">(<a href="#ref-Borer2009" role="doc-biblioref">Borer 기타 2009</a>)</span>.</p>
<p>우리는 항상 원본, 편집되지 않은 데이터를 공유할 수 없을 수도 있지만, 거의 항상 유사한 것을 만들 수 있습니다. 예를 들어, 제한된 사용 컴퓨터를 사용하는 경우, 가장 좋은 방법은 주요 기능을 전달하는 원본, 편집되지 않은 데이터의 시뮬레이션된 버전을 만들고, README 파일에 자세한 접근 지침을 포함하는 것일 수 있습니다.</p>
</section>
<section id="계획" class="level3" data-number="9.2.2">
<h3 data-number="9.2.2" class="anchored" data-anchor-id="계획"><span class="header-section-number">9.2.2</span> 계획</h3>
<p>최종 목표를 계획하는 것은 끝을 염두에 두고 시작하도록 강요하며 다양한 이유로 중요합니다. <a href="#sec-gather-data에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-gather-data에서</span></a> 소개된 데이터 스크래핑과 마찬가지로, 범위 확장을 사전에 방지하는 데 도움이 됩니다. 그러나 데이터 정리에서는 최종 데이터셋이 어떻게 생겼으면 하는지에 대해 정말로 생각하도록 강요합니다.</p>
<p>첫 번째 단계는 관심 있는 데이터셋을 스케치하는 것입니다. 스케치의 주요 특징은 열의 이름, 클래스 및 가능한 값 범위와 같은 측면입니다. 예를 들어, 미국 주의 인구에 관심이 있을 수 있습니다. 우리의 스케치는 <a href="#fig-sketchdataplan과" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-sketchdataplan과</span></a> 같을 수 있습니다.</p>
<div id="fig-sketchdataplan" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-sketchdataplan-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/state_population_sketch.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:40.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-sketchdataplan-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;9.1: 미국 주 및 인구의 계획된 데이터셋
</figcaption>
</figure>
</div>
<p>이 경우, 스케치는 주 이름에 대해 약어가 아닌 전체 이름을 원하고, 인구를 백만 단위로 측정하기로 결정하도록 강요합니다. 이 최종 목표를 스케치하는 과정은 우리가 일찍 결정을 내리고 원하는 최종 목표에 대해 명확하게 하도록 강요했습니다.</p>
<p>그런 다음 코드를 사용하여 데이터를 시뮬레이션합니다. 다시, 이 과정은 우리가 어떤 함수를 사용할지 결정해야 하므로 데이터셋에서 합리적인 값이 어떻게 보이는지에 대해 생각하도록 강요합니다. 각 변수의 고유한 값에 대해 신중하게 생각해야 합니다. 예를 들어, 변수가 “성별”을 의미한다면 “남성”, “여성”, “기타”, “알 수 없음”과 같은 고유한 값이 예상될 수 있지만, “1,000”과 같은 숫자는 잘못되었을 가능성이 높습니다. 또한 함수 출력을 변수에 할당해야 하므로 이름에 대해 명시적으로 생각하도록 강요합니다. 예를 들어, 미국 주에 대한 일부 인구 데이터를 시뮬레이션할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">853</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>simulated_population <span class="ot">&lt;-</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">state =</span> state.name,</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">population =</span> <span class="fu">runif</span>(<span class="at">n =</span> <span class="dv">50</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">50</span>) <span class="sc">|&gt;</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">round</span>(<span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>simulated_population</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 50 × 2
   state       population
   &lt;chr&gt;            &lt;dbl&gt;
 1 Alabama          18.0 
 2 Alaska            6.01
 3 Arizona          24.2 
 4 Arkansas         15.8 
 5 California        1.87
 6 Colorado         20.2 
 7 Connecticut       6.54
 8 Delaware         12.1 
 9 Florida           7.9 
10 Georgia           9.44
# ℹ 40 more rows</code></pre>
</div>
</div>
<p>데이터 정리 및 준비 동안 우리의 목적은 원본, 편집되지 않은 데이터를 해당 계획에 가깝게 가져오는 것입니다. 이상적으로는 데이터셋의 원하는 최종 목표가 “정돈된 데이터”가 되도록 계획할 것입니다. 이것은 <a href="#sec-r-essentials" class="quarto-xref">온라인 부록&nbsp;<span class="quarto-unresolved-ref ref-noprefix">sec-r-essentials</span></a>에서 소개되었지만, 간략하게 말하면 <span class="citation" data-cites="r4ds wickham2014tidy">(<a href="#ref-r4ds" role="doc-biblioref">Wickham, Çetinkaya-Rundel, 와/과 Grolemund [2016년] 2023</a>; <a href="#ref-wickham2014tidy" role="doc-biblioref">Wickham 2014</a>, p.&nbsp;4)</span> 다음을 의미합니다.</p>
<ol type="1">
<li>각 변수는 자체 열에 있습니다.</li>
<li>각 관측치는 자체 행에 있습니다.</li>
<li>각 값은 자체 셀에 있습니다.</li>
</ol>
<p>이 단계에서 타당성 및 내부 일관성에 대해 생각하기 시작하십시오. 이 데이터가 가져야 할 기능은 무엇입니까? 데이터셋을 시뮬레이션하는 과정에서 이것들을 기록하십시오. 왜냐하면 이것들을 사용하여 테스트를 작성할 것이기 때문입니다.</p>
</section>
<section id="작게-시작" class="level3" data-number="9.2.3">
<h3 data-number="9.2.3" class="anchored" data-anchor-id="작게-시작"><span class="header-section-number">9.2.3</span> 작게 시작</h3>
<p>철저하게 계획한 후에는 우리가 다루고 있는 원본, 편집되지 않은 데이터로 전환할 수 있습니다. 일반적으로 우리는 원본, 편집되지 않은 데이터를 가능한 한 빨리 직사각형 데이터셋으로 조작하려고 합니다. 이렇게 하면 익숙한 <code>tidyverse</code> 함수를 사용할 수 있습니다. 예를 들어, <code>.txt</code> 파일로 시작한다고 가정해 봅시다.</p>
<p>첫 번째 단계는 데이터셋에서 규칙성을 찾는 것입니다. 우리는 테이블 형식의 데이터로 끝나기를 원하며, 이는 다른 열을 구별하기 위한 어떤 종류의 구분 기호가 필요하다는 것을 의미합니다. 이상적으로는 쉼표, 세미콜론, 탭, 이중 공백 또는 줄 바꿈과 같은 기능일 수 있습니다. 다음 경우에는 쉼표를 활용할 수 있습니다.</p>
<pre><code>앨라배마, 5
알래스카, 0.7
애리조나, 7
아칸소, 3
캘리포니아, 40</code></pre>
<p>더 어려운 경우에는 데이터셋에 활용할 수 있는 어떤 규칙적인 기능이 있을 수 있습니다. 때로는 다양한 텍스트가 반복됩니다. 다음 경우와 같습니다.</p>
<pre><code>주는 앨라배마이고 인구는 5백만입니다.
주는 알래스카이고 인구는 0.7백만입니다.
주는 애리조나이고 인구는 7백만입니다.
주는 아칸소이고 인구는 3백만입니다.
주는 캘리포니아이고 인구는 40백만입니다.</code></pre>
<p>이 경우, 전통적인 구분 기호는 없지만, “주는”, “이고 인구는”, “백만”의 규칙성을 사용하여 필요한 것을 얻을 수 있습니다. 더 어려운 경우는 줄 바꿈이 없는 경우입니다. 이 마지막 경우는 그것을 보여줍니다.</p>
<pre><code>앨라배마 5 알래스카 0.7 애리조나 7 아칸소 3 캘리포니아 40</code></pre>
<p>이것을 접근하는 한 가지 방법은 우리가 찾고 있는 다른 클래스와 값을 활용하는 것입니다. 예를 들어, 우리는 미국 주를 찾고 있다는 것을 알고 있으므로 가능한 옵션은 50가지뿐이며(DC는 잠시 제쳐두고), 이것들을 구분 기호로 사용할 수 있습니다. 또한 인구가 숫자라는 사실을 사용하여 공백 뒤에 숫자가 오는 것을 기준으로 분리할 수도 있습니다.</p>
<p>이제 이 마지막 경우를 정돈된 데이터로 변환할 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>unedited_data <span class="ot">&lt;-</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"앨라배마 5 알래스카 0.7 애리조나 7 아칸소 3 캘리포니아 40"</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>tidy_data <span class="ot">&lt;-</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">raw =</span> unedited_data) <span class="sc">|&gt;</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> raw,</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">into =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>],</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"(?&lt;=[[:digit:]]) "</span> <span class="co"># 숫자 뒤에 오는 괄호</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>],</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"drop_me"</span>,</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"separate_me"</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> separate_me,</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"state"</span>, <span class="st">"population"</span>),</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">" (?=[[:digit:]])"</span> <span class="co"># 숫자 뒤에 오는 공백</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>drop_me)</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>tidy_data</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  state      population
  &lt;chr&gt;      &lt;chr&gt;     
1 앨라배마   5         
2 알래스카   0.7       
3 애리조나   7         
4 아칸소     3         
5 캘리포니아 40        </code></pre>
</div>
</div>
</section>
<section id="테스트-및-문서-작성" class="level3" data-number="9.2.4">
<h3 data-number="9.2.4" class="anchored" data-anchor-id="테스트-및-문서-작성"><span class="header-section-number">9.2.4</span> 테스트 및 문서 작성</h3>
<p>직사각형 데이터셋을 설정했지만, 지저분한 데이터셋이므로, 우리가 가지고 있는 클래스를 살펴보기 시작해야 합니다. 이 시점에서 클래스를 수정할 필요는 없습니다. 왜냐하면 데이터 손실이 발생할 수 있기 때문입니다. 그러나 클래스가 무엇인지 확인하고, 시뮬레이션된 데이터셋과 비교하고, 변경해야 할 사항을 확인하기 위해 다른 열을 기록합니다. <code>class()</code>에 대한 배경 정보는 <a href="#sec-r-essentials" class="quarto-xref">온라인 부록&nbsp;<span class="quarto-unresolved-ref ref-noprefix">sec-r-essentials</span></a>에서 확인할 수 있습니다.</p>
<p>클래스를 변경하기 전과 더 맞춤형 문제로 넘어가기 전에, 다음과 같은 일반적인 문제를 처리해야 합니다.</p>
<ul>
<li>숫자여야 하는 변수에 있는 쉼표 및 기타 구두점($, €, £ 등)과 같은 통화 기호.</li>
<li>“December”와 “Dec” 및 “12”가 모두 한 변수에 있는 것과 같은 일관성 없는 날짜 형식.</li>
<li>특히 유니코드에서 예상치 못한 문자 인코딩으로 인해 일관성 없이 표시될 수 있습니다.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></li>
</ul>
<p>일반적으로 즉시 명백한 것은 무엇이든 수정하려고 합니다. 예를 들어, 통화에서 숫자를 그룹화하는 데 사용된 쉼표는 제거해야 합니다. 그러나 상황은 종종 압도적으로 느껴질 것입니다. 우리가 해야 할 일은 각 변수의 고유한 값을 살펴보고, 무엇을 수정할지 분류하는 것입니다. 우리는 가장 큰 영향을 미칠 가능성이 있는 것을 기준으로 분류 결정을 내립니다. 이는 일반적으로 관측치의 수를 세고, 내림차순으로 정렬한 다음, 이 순서대로 처리하는 것을 의미합니다.</p>
<p>멤버십 테스트가 통과되면(처음에는 시뮬레이션과 경험을 기반으로 설정함) 클래스를 변경하고 모든 테스트를 다시 실행할 수 있습니다. 우리는 이 아이디어를 소프트웨어 개발의 단위 테스트 접근 방식에서 채택했습니다. 테스트는 소프트웨어(또는 이 경우 데이터)가 우리의 목적에 적합한지 이해할 수 있게 해주기 때문에 중요합니다<span class="citation" data-cites="researchsoftware">(<a href="#ref-researchsoftware" role="doc-biblioref">Irving 기타 2021</a>)</span>. 테스트, 특히 데이터 과학에서는 한 번 작성하고 잊어버리는 정적인 것이 아닙니다. 대신 필요에 따라 업데이트되고 진화해야 합니다.</p>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
아, 그것에 대해 좋은 데이터가 있다고 생각하는군요!
</div>
</div>
<div class="callout-body-container callout-body">
<p>현실의 단순화는 스포츠 기록에서 특히 두드러지게 나타나며, 이는 반드시 무엇을 기록할지 선택해야 합니다. 스포츠 기록은 어떤 목적에는 적합하지만 다른 목적에는 적합하지 않습니다. 예를 들어, 체스는 흑백 사각형이 번갈아 나타나는 8x8 보드에서 진행됩니다. 사각형은 문자(A-G)와 숫자(1-8)의 고유한 조합으로 표시됩니다. 대부분의 말은 고유한 약어를 가지고 있습니다. 예를 들어 나이트는 N이고 비숍은 B입니다. 각 게임은 각 플레이어가 이 “대수 표기법”을 사용하여 독립적으로 기록됩니다. 이러한 기록을 통해 게임의 움직임을 재현할 수 있습니다. 2021년 체스 세계 선수권 대회는 매그너스 칼슨과 이안 네폼니아치치 사이에서 진행되었습니다. 이 게임은 특히 주목할 만한 여러 가지 이유가 있었는데, 가장 긴 세계 선수권 대회 게임이었다는 점을 포함하여, 칼슨과 네폼니아치치 모두 예상치 못한 실수를 저질렀다는 점입니다. 예를 들어, 33번째 수에서 칼슨은 기회를 활용하지 못했고, 36번째 수에서 다른 수를 두었다면 네폼니아치치에게 유망한 엔드게임을 제공했을 것입니다<span class="citation" data-cites="PeterDoggers">(<a href="#ref-PeterDoggers" role="doc-biblioref">Doggers 2021</a>)</span>. 이러한 실수 중 한 가지 이유는 게임의 그 시점에서 두 플레이어 모두 남은 시간이 거의 없었기 때문일 수 있습니다. 즉, 그들은 매우 빠르게 수를 결정해야 했습니다. 그러나 게임 시트에서 제공하는 표현에는 남은 시간이 기록되지 않기 때문에 그러한 감각이 없습니다. 기록은 게임에서 일어난 일의 “정확한” 표현으로서 목적에 적합하지만, 반드시 왜 일어났는지에 대한 것은 아닙니다.</p>
</div>
</div>
<p>약간 잘못된 문자열 모음으로 예시를 살펴보겠습니다. 이러한 유형의 출력은 <a href="#sec-gather-data에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-gather-data에서</span></a> 소개된 OCR의 일반적인 출력이며, 종종 거의 완벽하지만 완전히는 아닙니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>messy_string <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"Patricia, Ptricia, PatricIa, Patric1a, PatricIa"</span>),</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">"PatrIcia, Patricia, Patricia, Patricia , 8atricia"</span>),</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">sep =</span> <span class="st">", "</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이전과 마찬가지로, 먼저 이것을 직사각형 데이터셋으로 가져옵니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>messy_dataset <span class="ot">&lt;-</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">names =</span> messy_string) <span class="sc">|&gt;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(names, <span class="at">sep =</span> <span class="st">", "</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>messy_dataset</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 1
   names      
   &lt;chr&gt;      
 1 "Patricia" 
 2 "Ptricia"  
 3 "PatricIa" 
 4 "Patric1a" 
 5 "PatricIa" 
 6 "PatrIcia" 
 7 "Patricia" 
 8 "Patricia" 
 9 "Patricia "
10 "8atricia" </code></pre>
</div>
</div>
<p>이제 이 오류 중 어떤 것을 수정할지 결정해야 합니다. 어떤 것이 가장 중요한지 결정하는 데 도움이 되도록 개수를 만듭니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>messy_dataset <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(names, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 2
  names           n
  &lt;chr&gt;       &lt;int&gt;
1 "Patricia"      3
2 "PatricIa"      2
3 "8atricia"      1
4 "PatrIcia"      1
5 "Patric1a"      1
6 "Patricia "     1
7 "Ptricia"       1</code></pre>
</div>
</div>
<p>가장 흔한 고유 관측치는 올바른 것입니다. 다음 관측치인 “PatricIa”는 “i”가 잘못 대문자로 표시된 것 같습니다. “PatrIcia”도 마찬가지입니다. <code>str_to_title()</code>을 사용하여 대문자 문제를 해결할 수 있습니다. 이 함수는 문자열의 각 단어의 첫 글자를 대문자로, 나머지는 소문자로 변환한 다음 개수를 다시 계산합니다.</p>
<p>문자열에 대한 배경 정보는 <a href="#sec-r-essentials" class="quarto-xref">온라인 부록&nbsp;<span class="quarto-unresolved-ref ref-noprefix">sec-r-essentials</span></a>에서 확인할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>messy_dataset_fix_I_8 <span class="ot">&lt;-</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  messy_dataset <span class="sc">|&gt;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names =</span> <span class="fu">str_to_title</span>(names)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>messy_dataset_fix_I_8 <span class="sc">|&gt;</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(names, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  names           n
  &lt;chr&gt;       &lt;int&gt;
1 "Patricia"      6
2 "8atricia"      1
3 "Patric1a"      1
4 "Patricia "     1
5 "Ptricia"       1</code></pre>
</div>
</div>
<p>이미 이전 30%에 비해 60%의 값이 올바르므로 훨씬 나아졌습니다. “8tricia”와 “Ptricia”라는 두 가지 명확한 오류가 더 있습니다. 전자는 “P” 대신 “8”로 구분되고, 후자는 “a”가 누락되었습니다. <code>str_replace_all()</code>을 사용하여 이러한 문제를 해결할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>messy_dataset_fix_a_n <span class="ot">&lt;-</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  messy_dataset_fix_I_8 <span class="sc">|&gt;</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names =</span> <span class="fu">str_replace_all</span>(names, <span class="st">"8atricia"</span>, <span class="st">"Patricia"</span>),</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names =</span> <span class="fu">str_replace_all</span>(names, <span class="st">"Ptricia"</span>, <span class="st">"Patricia"</span>)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>messy_dataset_fix_a_n <span class="sc">|&gt;</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(names, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  names           n
  &lt;chr&gt;       &lt;int&gt;
1 "Patricia"      8
2 "Patric1a"      1
3 "Patricia "     1</code></pre>
</div>
</div>
<p>우리는 많은 노력 없이 80%의 결과를 달성했습니다. 마지막 두 가지 문제는 더 미묘합니다. 첫 번째는 “i”가 “1”로 잘못 코딩되었기 때문에 발생했습니다. 일부 글꼴에서는 이것이 표시되지만 다른 글꼴에서는 보기 더 어려울 것입니다. 이것은 특히 OCR에서 흔한 문제이며, 주의해야 할 사항입니다. 두 번째는 후행 공백 때문에 발생합니다. 후행 및 선행 공백은 또 다른 일반적인 문제이며, <code>str_trim()</code>을 사용하여 해결할 수 있습니다. 이 두 가지 남은 문제를 해결하면 모든 항목이 수정됩니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>cleaned_data <span class="ot">&lt;-</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  messy_dataset_fix_a_n <span class="sc">|&gt;</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names =</span> <span class="fu">str_replace_all</span>(names, <span class="st">"Patric1a"</span>, <span class="st">"Patricia"</span>),</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names =</span> <span class="fu">str_trim</span>(names, <span class="at">side =</span> <span class="fu">c</span>(<span class="st">"right"</span>))</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>cleaned_data <span class="sc">|&gt;</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(names, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  names        n
  &lt;chr&gt;    &lt;int&gt;
1 Patricia    10</code></pre>
</div>
</div>
<p>이 예시에서는 머릿속으로 테스트를 수행했습니다. 우리는 “Patricia”를 기대하고 있다는 것을 알고 있습니다. 그러나 이 테스트를 문서화하기 시작할 수도 있습니다. 한 가지 방법은 데이터셋에 “Patricia” 이외의 값이 있는지 확인하는 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>check_me <span class="ot">&lt;-</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  cleaned_data <span class="sc">|&gt;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(names <span class="sc">!=</span> <span class="st">"Patricia"</span>)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">nrow</span>(check_me) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"여전히 Patricia가 아닌 값이 있습니다!"</span>)</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>조건이 충족되지 않으면 코드 실행을 중지하는 <code>stopifnot()</code>을 사용하여 좀 더 강력하게 만들 수 있습니다. 이 함수를 사용하려면 충족되기를 원하는 조건을 정의합니다. 이 유형의 검사를 코드 전체에 구현할 수 있습니다. 예를 들어, 데이터셋에 특정 수의 관측치가 있거나 특정 변수가 정수 또는 요인과 같은 다양한 속성을 가져야 한다고 예상하는 경우입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stopifnot</span>(<span class="fu">nrow</span>(check_me) <span class="sc">==</span> <span class="dv">0</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>stopifnot()</code>을 사용하여 스크립트가 예상대로 작동하는지 확인할 수 있습니다.</p>
<p>데이터셋에 대한 테스트를 작성하는 또 다른 방법은 <code>testthat</code>를 사용하는 것입니다. 패키지 테스트를 위해 개발되었지만, 데이터셋을 테스트하는 기능을 사용할 수 있습니다. 예를 들어, <code>expect_length()</code>를 사용하여 데이터셋의 길이를 확인하고 <code>expect_equal()</code>을 사용하여 내용을 확인할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 데이터셋의 길이가 1입니까?</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">expect_length</span>(check_me, <span class="dv">1</span>) </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 관측치는 문자입니까?</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="fu">expect_equal</span>(<span class="fu">class</span>(cleaned_data<span class="sc">$</span>names), <span class="st">"character"</span>) </span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 모든 고유 관측치는 "Patricia"입니까?</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="fu">expect_equal</span>(<span class="fu">unique</span>(cleaned_data<span class="sc">$</span>names), <span class="st">"Patricia"</span>) </span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>테스트가 통과하면 아무 일도 일어나지 않지만, 테스트가 실패하면 스크립트가 중지됩니다.</p>
<p>무엇을 테스트해야 할까요? 어려운 문제이며, 다음 섹션에서 더 구체적인 테스트 범위를 자세히 설명합니다. 그러나 일반적으로 우리가 가지고 있는 것을 우리가 예상하는 것과 비교하여 테스트합니다. 1960년대 아폴로 프로그램 소프트웨어 작업을 하던 엔지니어들은 처음에는 테스트 작성을 “귀찮은 일”로 여겼습니다<span class="citation" data-cites="digitalapollo">(<a href="#ref-digitalapollo" role="doc-biblioref">Mindell 2008</a>, p.&nbsp;170)</span>. 그러나 그들은 결국 NASA가 포괄적인 테스트 스위트가 동반되지 않으면 소프트웨어를 사용하여 사람을 달에 보낼 수 있다고 믿지 않을 것이라는 것을 깨달았습니다. 데이터 과학도 마찬가지입니다.</p>
<p>타당성 테스트부터 시작하십시오. 이들은 일반적으로 변수의 클래스, 고유한 값 및 관측치 수를 확인합니다. 예를 들어, 최근 데이터셋을 사용하는 경우 연도 열은 모든 요소가 네 자리 숫자이고 “2”로 시작하는지 테스트할 수 있습니다. <span class="citation" data-cites="peterbaumgartnertesting은">(<a href="#ref-peterbaumgartnertesting은" role="doc-biblioref"><strong>peterbaumgartnertesting은?</strong></a>)</span> 이를 스키마에 대한 테스트라고 설명합니다.</p>
<p>그 후에는 내부 일관성 검사로 전환하십시오. 예를 들어, 다른 숫자 응답 변수가 있는 경우, 그 합계가 총 변수와 일치하는지 확인하거나, 그렇지 않다면 이 차이가 설명 가능한지 확인하십시오. 마지막으로 외부 일관성 테스트로 전환하십시오. 여기서는 외부 정보를 사용하여 테스트에 정보를 제공하려고 합니다. 예를 들어, 독일의 신생아 사망률(NMR) 변수가 있다면(<a href="#sec-fire-hose에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-fire-hose에서</span></a> 소개된 개념), 세계 보건 기구(WHO)의 추정치를 살펴보고 NMR 변수가 일치하는지 확인할 수 있습니다. 숙련된 분석가는 이 모든 것을 머릿속으로 합니다. 문제는 이것이 확장되지 않고, 일관성이 없으며, 명성에 과부하가 걸릴 수 있다는 것입니다. 모델링 맥락에서 이 문제에 대해서는 <a href="#sec-its-just-a-linear-model에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-its-just-a-linear-model에서</span></a> 다시 다룹니다.</p>
<p>코드 전체에 테스트를 작성하며, 끝에만 작성하지 않습니다. 특히 중간 단계에 <code>stopifnot()</code> 문을 사용하면 데이터셋이 예상대로 정리되고 있는지 확인할 수 있습니다. 예를 들어, 두 데이터셋을 병합할 때 다음을 확인할 수 있습니다.</p>
<ol type="1">
<li>데이터셋의 변수 이름은 고유하며, 키로 사용될 열은 제외합니다.</li>
<li>각 유형의 관측치 수가 적절하게 전달되고 있습니다.</li>
<li>데이터셋의 차원이 예상치 않게 변경되지 않습니다.</li>
</ol>
</section>
<section id="반복-일반화-및-업데이트" class="level3" data-number="9.2.5">
<h3 data-number="9.2.5" class="anchored" data-anchor-id="반복-일반화-및-업데이트"><span class="header-section-number">9.2.5</span> 반복, 일반화 및 업데이트</h3>
<p>이제 계획을 반복할 수 있습니다. 가장 최근의 경우, 10개의 항목으로 시작했습니다. 이것을 100개 또는 심지어 1,000개로 늘릴 수 없는 이유는 없습니다. 정리 절차와 테스트를 일반화해야 할 수도 있습니다. 그러나 결국 데이터셋을 어떤 종류의 순서로 가져오기 시작할 것입니다.</p>
</section>
</section>
<section id="확인-및-테스트" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="확인-및-테스트"><span class="header-section-number">9.3</span> 확인 및 테스트</h2>
<p><a href="#sec-on-writing에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-on-writing에서</span></a> 말했듯이, 린든 존슨의 전기 작가 로버트 카로는 미국 36대 대통령과 관련된 모든 사람을 추적하는 데 수년을 보냈습니다. 카로와 그의 아내 이나는 존슨이 어디 출신인지 더 잘 이해하기 위해 텍사스 힐 컨트리에서 3년 동안 살았습니다. 카로는 존슨이 상원 의원으로서 D.C.에 머물던 곳에서 상원까지 달려갔다는 소식을 듣고, 존슨이 왜 달렸는지 이해하기 위해 그 경로를 여러 번 직접 달렸습니다. 카로는 존슨이 그랬던 것처럼 해가 뜰 때 그 경로를 달렸을 때 비로소 이해했습니다. 즉, 해가 상원 로툰다에 특히 영감을 주는 방식으로 비친다는 것을 알게 되었습니다<span class="citation" data-cites="caroonworking">(<a href="#ref-caroonworking" role="doc-biblioref">Caro 2019</a>, p.&nbsp;156)</span>. 이러한 배경 작업은 그가 다른 누구도 알지 못했던 측면을 밝혀낼 수 있게 했습니다. 예를 들어, 존슨은 거의 확실히 첫 선거에서 승리를 훔쳤습니다<span class="citation" data-cites="caroonworking">(<a href="#ref-caroonworking" role="doc-biblioref">Caro 2019</a>, p.&nbsp;116)</span>. 우리는 이와 동일한 정도로 데이터를 이해해야 합니다. 우리는 비유적으로 모든 페이지를 넘겨보고 싶습니다.</p>
<p>음의 공간 개념은 디자인에서 잘 확립되어 있습니다. 이는 주제를 둘러싸고 있는 것을 의미합니다. 때로는 음의 공간이 효과로 사용됩니다. 예를 들어, 미국 물류 회사 FedEx의 로고는 E와 X 사이에 음의 공간이 있어 화살표를 만듭니다. 이와 유사하게, 우리는 우리가 가지고 있는 데이터와 가지고 있지 않은 데이터에 대해 인식해야 합니다<span class="citation" data-cites="citemyboy">(<a href="#ref-citemyboy" role="doc-biblioref">Hodgetts 2022</a>)</span>. 우리는 우리가 가지고 있지 않은 데이터가 어떤 식으로든 의미를 가지고 있으며, 잠재적으로 우리의 결론을 바꿀 정도까지 의미를 가질 수 있다고 우려합니다. 데이터를 정리할 때, 우리는 이상 징후를 찾고 있습니다. 우리는 데이터셋에 있어야 하지만 없어야 하는 값뿐만 아니라 그 반대 상황, 즉 데이터셋에 있어야 하지만 없는 값에도 관심이 있습니다. 이러한 상황을 식별하는 데 사용하는 세 가지 도구는 그래프, 개수 및 테스트입니다.</p>
<p>우리는 또한 이러한 도구를 사용하여 올바른 관측치를 잘못된 것으로 변경하지 않도록 합니다. 특히 정리 및 준비에 여러 단계가 필요한 경우, 한 단계에서 수정된 내용이 나중에 취소될 수 있습니다. 우리는 그래프, 개수, 특히 테스트를 사용하여 이를 방지합니다. 이러한 것들의 중요성은 데이터셋의 크기에 따라 기하급수적으로 증가합니다. 작고 중간 규모의 데이터셋은 수동 검사 및 분석가에 의존하는 다른 측면에 더 적합하지만, 대규모 데이터셋은 특히 더 효율적인 전략을 필요로 합니다<span class="citation" data-cites="hand2018statistical">(<a href="#ref-hand2018statistical" role="doc-biblioref">Hand 2018</a>)</span>.</p>
<section id="그래프" class="level3" data-number="9.3.1">
<h3 data-number="9.3.1" class="anchored" data-anchor-id="그래프"><span class="header-section-number">9.3.1</span> 그래프</h3>
<p>그래프는 데이터를 정리할 때 귀중한 도구입니다. 왜냐하면 데이터셋의 각 관측치를 잠재적으로 다른 관측치와 관련하여 보여주기 때문입니다. 값이 속하지 않는 경우를 식별하는 데 유용합니다. 예를 들어, 값이 숫자여야 하지만 여전히 문자이면 플롯되지 않고 경고가 표시됩니다. 그래프는 숫자 데이터에 특히 유용하지만, 텍스트 및 범주형 데이터에도 여전히 유용합니다. 예를 들어, 청소년 설문 조사에서 사람의 나이에 관심이 있는 상황을 가정해 봅시다. 다음과 같은 데이터가 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>youth_survey_data <span class="ot">&lt;-</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">ages =</span> <span class="fu">c</span>(</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="fl">15.9</span>, <span class="fl">14.9</span>, <span class="fl">16.6</span>, <span class="fl">15.8</span>, <span class="fl">16.7</span>, <span class="fl">17.9</span>, <span class="fl">12.6</span>, <span class="fl">11.5</span>, <span class="fl">16.2</span>, <span class="fl">19.5</span>, <span class="dv">150</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>youth_survey_data <span class="sc">|&gt;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> ages)) <span class="sc">+</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"응답자 연령"</span>,</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"응답자 수"</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>youth_survey_data_fixed <span class="sc">|&gt;</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> ages)) <span class="sc">+</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"응답자 연령"</span>,</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"응답자 수"</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-youth-survey" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-youth-survey-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-youth-survey" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-youth-survey-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-youth-survey-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="09-clean_and_prepare_ko_files/figure-html/fig-youth-survey-1.png" class="img-fluid figure-img" data-ref-parent="fig-youth-survey" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-youth-survey-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) 정리 전
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-youth-survey" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-youth-survey-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-youth-survey-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="09-clean_and_prepare_ko_files/figure-html/fig-youth-survey-2.png" class="img-fluid figure-img" data-ref-parent="fig-youth-survey" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-youth-survey-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) 정리 후
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-youth-survey-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;9.2: 시뮬레이션된 청소년 설문 조사 데이터셋의 연령은 데이터 문제를 식별합니다.
</figcaption>
</figure>
</div>
<p><a href="#fig-youth-survey-1은" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-youth-survey-1은</span></a> 예상치 못한 값 150을 보여줍니다. 가장 가능성 있는 설명은 데이터가 소수점을 놓쳐 잘못 입력되었으며, 15.0이어야 한다는 것입니다. 이를 수정하고 문서화한 다음 그래프를 다시 그리면 모든 것이 더 유효해 보일 것입니다(<a href="#fig-youth-survey-2" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-youth-survey-2</span></a>).</p>
</section>
<section id="개수" class="level3" data-number="9.3.2">
<h3 data-number="9.3.2" class="anchored" data-anchor-id="개수"><span class="header-section-number">9.3.2</span> 개수</h3>
<p>우리는 대부분의 데이터를 올바르게 얻는 데 집중하고 싶으므로 고유 값의 개수에 관심이 있습니다. 대부분의 데이터가 가장 일반적인 개수에 집중되기를 바랍니다. 그러나 그것을 뒤집어 특히 흔하지 않은 것이 무엇인지 보는 것도 유용할 수 있습니다. 이것들을 다루고 싶은 정도는 우리가 필요한 것에 따라 달라집니다. 궁극적으로, 우리가 하나를 수정할 때마다 우리는 매우 적은 추가 관측치를 얻습니다. 심지어 하나만 얻을 수도 있습니다. 개수는 텍스트 또는 범주형 데이터에 특히 유용하지만, 숫자 데이터에도 도움이 될 수 있습니다.</p>
<p>각각 “호주”를 의미하는 텍스트 데이터의 예를 살펴보겠습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>australian_names_data <span class="ot">&lt;-</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">country =</span> <span class="fu">c</span>(</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Australie"</span>, <span class="st">"Austrelia"</span>, <span class="st">"Australie"</span>, <span class="st">"Australie"</span>, <span class="st">"Aeustralia"</span>,</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Austraia"</span>, <span class="st">"Australia"</span>, <span class="st">"Australia"</span>, <span class="st">"Australia"</span>, <span class="st">"Australia"</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>australian_names_data <span class="sc">|&gt;</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(country, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  country        n
  &lt;chr&gt;      &lt;int&gt;
1 Australia      4
2 Australie      3
3 Aeustralia     1
4 Austraia       1
5 Austrelia      1</code></pre>
</div>
</div>
<p>이 개수를 사용하면 시간을 어디에 투자해야 할지 알 수 있습니다. “Australie”를 “Australia”로 변경하면 사용 가능한 데이터 양이 거의 두 배가 됩니다.</p>
<p>간략하게 숫자 데이터로 돌아가서, <span class="citation" data-cites="Preece1981은">(<a href="#ref-Preece1981은" role="doc-biblioref"><strong>Preece1981은?</strong></a>)</span> 변수의 각 관측치의 마지막 숫자의 개수를 플로팅할 것을 권장합니다. 예를 들어, 변수의 관측치가 “41.2”, “80.3”, “20.7”, “1.2”, “46.5”, “96.2”, “32.7”, “44.3”, “5.1”, “49.0”이라면, 0, 1, 5는 한 번씩 나타나고, 3, 7은 두 번씩 나타나고, 2는 세 번 나타납니다. 우리는 이러한 마지막 숫자가 균일하게 분포되어야 한다고 예상할 수 있습니다. 그러나 놀랍게도 종종 그렇지 않으며, 차이가 있는 방식은 유익할 수 있습니다. 예를 들어, 데이터가 반올림되었거나 다른 수집자에 의해 기록되었을 수 있습니다.</p>
<p>예를 들어, 이 장의 뒷부분에서 2019년 케냐 인구 조사에서 일부 데이터를 수집, 정리 및 준비할 것입니다. 여기서는 해당 데이터셋을 미리 사용하여 연령의 마지막 숫자의 개수를 살펴봅니다. 즉, 35세에서 “5”를 가져오고, 74세에서 “4”를 가져옵니다. <a href="#tbl-countofages는" class="quarto-xref">표&nbsp;<span class="quarto-unresolved-ref">tbl-countofages는</span></a> 일부 응답자가 연령에 대한 질문에 가장 가까운 5 또는 10으로 응답하기 때문에 발생하는 예상되는 연령 집중 현상을 보여줍니다. 그러한 패턴이 없는 연령 변수가 있다면 다른 유형의 질문에서 구성되었을 것으로 예상할 수 있습니다.</p>
<div class="cell">
<div id="tbl-countofages" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-countofages-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;9.1: 2019년 케냐 인구 조사에서 나이로비의 단일 연령의 마지막 숫자의 개수에서 0과 5 숫자의 초과
</figcaption>
<div aria-describedby="tbl-countofages-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_wg4i5s5l3roann6ust74(i, j, css_id) {
          var table = document.getElementById("tinytable_wg4i5s5l3roann6ust74");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_wg4i5s5l3roann6ust74');
        // Find the row with data-row attribute matching i
        var targetRow = table.querySelector(`tr [data-row="${i}"]`).closest('tr');
        var newRow = table.insertRow(targetRow.rowIndex);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        newCell.setAttribute("data-col", "0");
        newCell.setAttribute("data-row", i - 1);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_wg4i5s5l3roann6ust74(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_wg4i5s5l3roann6ust74");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '10', j: 1 },  ], css_id: 'tinytable_css_d4z6rk9e74m6bdrhf4ia',}, 
          { positions: [ { i: '1', j: 1 }, { i: '2', j: 1 }, { i: '3', j: 1 }, { i: '4', j: 1 }, { i: '5', j: 1 }, { i: '6', j: 1 }, { i: '7', j: 1 }, { i: '8', j: 1 }, { i: '9', j: 1 },  ], css_id: 'tinytable_css_tabohvodxc0dwfmnyose',}, 
          { positions: [ { i: '0', j: 1 },  ], css_id: 'tinytable_css_2ou2jcla8w83v8k810qi',}, 
          { positions: [ { i: '10', j: 0 },  ], css_id: 'tinytable_css_650yijyavy5pczq9hvrn',}, 
          { positions: [ { i: '1', j: 0 }, { i: '2', j: 0 }, { i: '3', j: 0 }, { i: '4', j: 0 }, { i: '5', j: 0 }, { i: '6', j: 0 }, { i: '7', j: 0 }, { i: '8', j: 0 }, { i: '9', j: 0 },  ], css_id: 'tinytable_css_q6or7rlh2w1sx2llfi7d',}, 
          { positions: [ { i: '0', j: 0 },  ], css_id: 'tinytable_css_e9l6bggwk0lnfrmsgp6b',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_wg4i5s5l3roann6ust74(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_d4z6rk9e74m6bdrhf4ia, .table th.tinytable_css_d4z6rk9e74m6bdrhf4ia { text-align: right; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_tabohvodxc0dwfmnyose, .table th.tinytable_css_tabohvodxc0dwfmnyose { text-align: right; }
      .table td.tinytable_css_2ou2jcla8w83v8k810qi, .table th.tinytable_css_2ou2jcla8w83v8k810qi { text-align: right; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_650yijyavy5pczq9hvrn, .table th.tinytable_css_650yijyavy5pczq9hvrn { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_q6or7rlh2w1sx2llfi7d, .table th.tinytable_css_q6or7rlh2w1sx2llfi7d { text-align: left; }
      .table td.tinytable_css_e9l6bggwk0lnfrmsgp6b, .table th.tinytable_css_e9l6bggwk0lnfrmsgp6b { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_wg4i5s5l3roann6ust74" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">나이의 마지막 숫자</th>
                <th scope="col" data-row="0" data-col="1">횟수</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">0</td>
                  <td data-row="1" data-col="1">347,233</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">1</td>
                  <td data-row="2" data-col="1">278,930</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">2</td>
                  <td data-row="3" data-col="1">308,933</td>
                </tr>
                <tr>
                  <td data-row="4" data-col="0">3</td>
                  <td data-row="4" data-col="1">285,745</td>
                </tr>
                <tr>
                  <td data-row="5" data-col="0">4</td>
                  <td data-row="5" data-col="1">270,355</td>
                </tr>
                <tr>
                  <td data-row="6" data-col="0">5</td>
                  <td data-row="6" data-col="1">303,817</td>
                </tr>
                <tr>
                  <td data-row="7" data-col="0">6</td>
                  <td data-row="7" data-col="1">246,582</td>
                </tr>
                <tr>
                  <td data-row="8" data-col="0">7</td>
                  <td data-row="8" data-col="1">242,688</td>
                </tr>
                <tr>
                  <td data-row="9" data-col="0">8</td>
                  <td data-row="9" data-col="1">207,739</td>
                </tr>
                <tr>
                  <td data-row="10" data-col="0">9</td>
                  <td data-row="10" data-col="1">216,355</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="테스트" class="level3" data-number="9.3.3">
<h3 data-number="9.3.3" class="anchored" data-anchor-id="테스트"><span class="header-section-number">9.3.3</span> 테스트</h3>
<p><a href="#sec-reproducible-workflows에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-reproducible-workflows에서</span></a> 말했듯이, 코드를 작성하면 프로그래머이지만, 재미로 코딩하는 사람과 예를 들어 제임스 웹 우주 망원경을 실행하는 코드를 작성하는 사람 사이에는 차이가 있습니다. <span class="citation" data-cites="weinbergpsychology">Weinberg (<a href="#ref-weinbergpsychology" role="doc-biblioref">1971</a>, p.&nbsp;122)</span>에 따르면, 우리는 아마추어와 전문가를 후속 사용자의 존재를 기준으로 구별할 수 있습니다. 코딩을 처음 시작할 때, 일반적으로 자신만 사용할 코드를 작성합니다. 예를 들어, 수업 논문을 위해 코드를 작성할 수 있습니다. 성적을 받은 후에는 대부분의 경우 코드가 다시 실행되지 않습니다. 대조적으로, 전문가는 다른 사람들을 위해, 그리고 종종 다른 사람들과 함께 코드를 작성합니다.</p>
<p>오늘날 많은 학술 연구는 코드에 의존합니다. 그 연구가 지속적인 지식에 기여하려면, 그 연구의 기반이 되는 코드는 다른 사람들을 위해 작성되고 연구자가 다른 프로젝트로 이동한 후에도 잘 작동해야 합니다. 전문가는 코드가 다른 사람들에게 고려될 수 있도록 하는 작업에 적절한 주의를 기울입니다. 그 중 큰 부분은 테스트입니다.</p>
<p><span class="citation" data-cites="jplcodingstandards">Jet Propulsion Laboratory (<a href="#ref-jplcodingstandards" role="doc-biblioref">2009</a>, p.&nbsp;14)</span>는 사후 분석에서 “작성된 코드 100줄당 최소 하나의 결함을 발견한다”고 주장합니다. 테스트 없는 코드에 결함이 없다고 믿을 이유는 없으며, 단지 알려지지 않았을 뿐입니다. 따라서 가능한 한 코드에 테스트를 포함하도록 노력해야 합니다. 데이터 과학 코드를 테스트하기 위한 일부 인프라가 있습니다. 예를 들어, Python에는 <span class="citation" data-cites="tdda의">(<a href="#ref-tdda의" role="doc-biblioref"><strong>tdda의?</strong></a>)</span> 테스트 주도 데이터 분석 라이브러리가 있지만, 더 많은 것이 필요합니다.</p>
<p>어떤 것들은 너무 중요해서 정리된 데이터셋에 반드시 포함되어야 합니다. 이것들은 우리가 확인해야 할 조건입니다. 일반적으로 경험, 전문가 지식 또는 계획 및 시뮬레이션 단계에서 나옵니다. 예를 들어, 연령 변수에는 음수가 없어야 하며, 110세 이상의 연령은 거의 없어야 합니다. 이러한 경우 특정 조건이 충족되어야 한다고 명시적으로 요구할 수 있습니다. 또 다른 예는 국가 간 분석을 수행할 때, 데이터셋에 있어야 한다고 알고 있는 국가 이름 목록이 유용할 것입니다. 우리의 테스트는 다음과 같을 것입니다.</p>
<ol type="1">
<li>해당 목록에 없지만 데이터셋에 있는 값, 또는 그 반대; 그리고</li>
<li>데이터셋에 있어야 한다고 예상했지만 없는 국가.</li>
</ol>
<p>구체적인 예를 들기 위해 케냐의 5대 카운티에 대한 분석을 수행한다고 가정해 봅시다. 찾아보면 다음과 같습니다: “나이로비”, “키암부”, “나쿠루”, “카카메가”, “분고마”. 해당 변수를 생성할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>correct_kenya_counties <span class="ot">&lt;-</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"나이로비"</span>, <span class="st">"키암부"</span>, <span class="st">"나쿠루"</span>, <span class="st">"카카메가"</span>, <span class="st">"분고마"</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>그런 다음 오류가 포함된 다음 데이터셋이 있다고 가정해 봅시다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>top_five_kenya <span class="ot">&lt;-</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">county =</span> <span class="fu">c</span>(</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"나이로비"</span>,  <span class="st">"나이로비1"</span>, <span class="st">"나쿠루"</span>, <span class="st">"카카메가"</span>, <span class="st">"나쿠루"</span>,</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"키암부"</span>, <span class="st">"키암브루"</span>, <span class="st">"카바메가"</span>, <span class="st">"분고마8"</span>, <span class="st">"분고마"</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>top_five_kenya <span class="sc">|&gt;</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(county, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 × 2
  county        n
  &lt;chr&gt;     &lt;int&gt;
1 나쿠루        2
2 나이로비      1
3 나이로비1     1
4 분고마        1
5 분고마8       1
6 카바메가      1
7 카카메가      1
8 키암부        1
9 키암브루      1</code></pre>
</div>
</div>
<p>개수를 기준으로 일부를 수정해야 한다는 것을 알고 있습니다. 이름에 숫자가 있는 것이 두 개 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>top_five_kenya_fixed_1_8 <span class="ot">&lt;-</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  top_five_kenya <span class="sc">|&gt;</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">county =</span> <span class="fu">str_replace_all</span>(county, <span class="st">"나이로비1"</span>, <span class="st">"나이로비"</span>),</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">county =</span> <span class="fu">str_replace_all</span>(county, <span class="st">"분고마8"</span>, <span class="st">"분고마"</span>)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>top_five_kenya_fixed_1_8 <span class="sc">|&gt;</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(county, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 2
  county       n
  &lt;chr&gt;    &lt;int&gt;
1 나이로비     2
2 나쿠루       2
3 분고마       2
4 카바메가     1
5 카카메가     1
6 키암부       1
7 키암브루     1</code></pre>
</div>
</div>
<p>이 시점에서 이것을 우리가 알고 있는 올바른 변수와 비교할 수 있습니다. 우리는 양방향으로 확인합니다. 즉, 올바른 변수에 있지만 데이터셋에 없는 것이 있는지, 그리고 데이터셋에 있지만 올바른 변수에 없는 것이 있는지 확인합니다. 우리는 확인 조건을 사용하여 완료되었는지 여부를 결정합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">all</span>(top_five_kenya_fixed_1_8<span class="sc">$</span>county <span class="sc">|&gt;</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%in%</span> correct_kenya_counties)) {</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"정리된 카운티가 예상 국가와 일치합니다."</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"모든 카운티가 완전히 정리되지 않았습니다."</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "모든 카운티가 완전히 정리되지 않았습니다."</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">all</span>(correct_kenya_counties <span class="sc">%in%</span> top_five_kenya_fixed_1_8<span class="sc">$</span>county <span class="sc">|&gt;</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>())) {</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"예상 국가가 정리된 카운티에 있습니다."</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"예상 국가가 정리된 카운티에 모두 없습니다."</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "예상 국가가 정리된 카운티에 있습니다."</code></pre>
</div>
</div>
<p>모든 카운티가 예상과 일치하지 않으므로 여전히 정리해야 할 것이 분명합니다.</p>
<section id="테스트할-측면" class="level4" data-number="9.3.3.1">
<h4 data-number="9.3.3.1" class="anchored" data-anchor-id="테스트할-측면"><span class="header-section-number">9.3.3.1</span> 테스트할 측면</h4>
<p>클래스 및 날짜에 대한 명시적 테스트와 그것들이 잘못될 가능성이 얼마나 흔한지에 대해 이야기할 것입니다. 그러나 명시적으로 테스트를 고려해야 할 다른 측면은 다음과 같습니다.</p>
<ul>
<li>통화 값 변수는 상황에 따라 합리적인 범위에 대해 테스트해야 합니다. 어떤 경우에는 음수 값이 불가능할 것입니다. 때로는 상한을 식별할 수 있습니다. 통화 변수는 숫자여야 합니다. 쉼표나 다른 구분 기호가 없어야 합니다. 통화 기호나 세미콜론과 같은 기호가 포함되어서는 안 됩니다.</li>
<li>인구 값 변수는 음수여서는 안 됩니다. 도시 인구는 100,000에서 50,000,000 사이여야 합니다. 다시 숫자여야 하며, 숫자만 포함해야 하고 기호는 없어야 합니다.</li>
<li>이름은 문자 변수여야 합니다. 숫자나 일부 제한된 기호가 포함되지 않을 수 있으며, 이는 맥락에 따라 다릅니다.</li>
<li>관측치 수는 의도치 않게 변경하기가 놀랍도록 쉽습니다. 의도적으로 발생하는 것은 괜찮지만, 우연히 발생하면 상당한 문제를 일으킬 수 있습니다. 관측치 수는 데이터 시뮬레이션에 대해 데이터 정리 프로세스 시작 시 테스트해야 하며, 이 예상은 필요에 따라 업데이트되어야 합니다. 데이터 정리 프로세스 전체에서 테스트해야 하지만, 특히 조인 전후에 테스트해야 합니다.</li>
</ul>
<p>더 일반적으로, 전문가와 협력하고 사전 지식을 활용하여 관심 변수에 대한 합리적인 기능을 파악한 다음 이를 구현하십시오. 예를 들어, <span class="citation" data-cites="scamswillnotsaveus가">(<a href="#ref-scamswillnotsaveus가" role="doc-biblioref"><strong>scamswillnotsaveus가?</strong></a>)</span> 사용자 수에 대한 주장에서 오류를 빠르게 식별할 수 있었던 방법을 고려하십시오. 이는 미국에서 연방 재정 지원을 받는 기관 수와 대략적으로 비교하여 이루어졌습니다.</p>
<p><code>validate</code>를 사용하여 일련의 테스트를 설정할 수 있습니다. 예를 들어, 여기서는 명확한 문제가 있는 데이터를 시뮬레이션할 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">853</span>)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>dataset_with_issues <span class="ot">&lt;-</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">c</span>(</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">runif</span>(<span class="at">n =</span> <span class="dv">9</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">100</span>) <span class="sc">|&gt;</span> <span class="fu">round</span>(),</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>      <span class="dv">1000</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender =</span> <span class="fu">c</span>(</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sample</span>(</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="fu">c</span>(<span class="st">"female"</span>, <span class="st">"male"</span>, <span class="st">"other"</span>, <span class="st">"prefer not to disclose"</span>),</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">size =</span> <span class="dv">9</span>,</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">replace =</span> <span class="cn">TRUE</span>,</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.4</span>, <span class="fl">0.4</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>)</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>      <span class="st">"tasmania"</span></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">income =</span> <span class="fu">rexp</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">rate =</span> <span class="fl">0.10</span>) <span class="sc">|&gt;</span> <span class="fu">round</span>() <span class="sc">|&gt;</span> <span class="fu">as.character</span>()</span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>dataset_with_issues</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
     age gender                 income
   &lt;dbl&gt; &lt;chr&gt;                  &lt;chr&gt; 
 1    36 female                 20    
 2    12 prefer not to disclose 16    
 3    48 male                   0     
 4    32 female                 2     
 5     4 female                 1     
 6    40 female                 13    
 7    13 female                 13    
 8    24 female                 7     
 9    16 male                   3     
10  1000 tasmania               2     </code></pre>
</div>
</div>
<p>이 경우, 불가능한 연령이 하나 있고, 성별 변수에 없어야 할 관측치가 하나 있으며, 마지막으로 소득은 숫자 대신 문자 변수입니다. <code>validator()</code>를 사용하여 데이터가 충족해야 할 규칙을 설정하고 <code>confront()</code>를 사용하여 충족하는지 여부를 결정합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>rules <span class="ot">&lt;-</span> <span class="fu">validator</span>(</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">is.numeric</span>(age),</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">is.character</span>(gender),</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">is.numeric</span>(income),</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>  age <span class="sc">&lt;</span> <span class="dv">120</span>,</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>  gender <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"female"</span>, <span class="st">"male"</span>, <span class="st">"other"</span>, <span class="st">"prefer not to disclose"</span>)</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>out <span class="ot">&lt;-</span></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">confront</span>(dataset_with_issues, rules)</span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(out)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이 경우, 우리가 설정한 마지막 세 가지 규칙에 문제가 있음을 알 수 있습니다. 더 일반적으로, <span class="citation" data-cites="datavalidationbook은">(<a href="#ref-datavalidationbook은" role="doc-biblioref"><strong>datavalidationbook은?</strong></a>)</span> 사용할 수 있는 많은 예시 테스트를 제공합니다.</p>
<p><a href="#sec-farm-data에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-farm-data에서</span></a> 언급했듯이, 성별은 특히 주의해야 할 사항입니다. 일반적으로 “남성” 또는 “여성”이 아닌 소수의 응답이 있을 것입니다. 상황에 따라 올바른 처리 방법이 다릅니다. 그러나 “남성” 또는 “여성” 이외의 응답이 데이터셋에서 제거되고 무시될 경우(너무 적기 때문에), 응답자에 대한 존중을 보여주기 위해 그들이 데이터셋의 나머지 부분과 어떻게 유사하거나 달랐는지에 대한 간략한 논의를 포함하는 것이 좋습니다. 플롯과 더 광범위한 논의는 부록에 포함될 수 있습니다.</p>
</section>
<section id="클래스" class="level4" data-number="9.3.3.2">
<h4 data-number="9.3.3.2" class="anchored" data-anchor-id="클래스"><span class="header-section-number">9.3.3.2</span> 클래스</h4>
<p>미국인들은 돈에 집착하고, 영국인들은 계급에 집착한다고 말하기도 합니다. 데이터 정리 및 준비의 경우 우리는 영국인이 되어야 합니다. 클래스는 중요하며 특별한 주의를 기울여야 합니다. <a href="#sec-r-essentials" class="quarto-xref">온라인 부록&nbsp;<span class="quarto-unresolved-ref ref-noprefix">sec-r-essentials</span></a>에서 클래스를 소개하며, 여기서는 “numeric”, “character”, “factor”에 초점을 맞춥니다. 변수의 클래스에 대한 명시적인 검사는 필수적입니다. 변수에 잘못된 클래스를 할당하면 후속 분석에 큰 영향을 미칠 수 있습니다. 다음이 중요합니다.</p>
<ul>
<li>어떤 값이 숫자여야 하는지 또는 요인이어야 하는지 확인합니다. 그리고</li>
<li>값이 문자가 아닌 숫자인지 확인합니다.</li>
</ul>
<p>값이 숫자인지 요인인지 명확히 하는 것이 왜 중요한지 이해하기 위해 다음 상황을 고려하십시오.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>simulated_class_data <span class="ot">&lt;-</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">response =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">group_as_integer =</span> <span class="fu">as.integer</span>(group),</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">group_as_factor =</span> <span class="fu">as.factor</span>(group),</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="#sec-its-just-a-linear-model에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-its-just-a-linear-model에서</span></a> 더 자세히 다룰 로지스틱 회귀를 사용하고, 먼저 “group”을 정수로 포함한 다음, 요인으로 포함합니다. <a href="#tbl-effect-of-class는" class="quarto-xref">표&nbsp;<span class="quarto-unresolved-ref">tbl-effect-of-class는</span></a> 결과가 얼마나 다른지 보여주며, 회귀에 사용되는 변수의 클래스를 올바르게 얻는 것의 중요성을 강조합니다. 전자의 경우(group이 정수) 관측치의 다른 수준 간에 일관된 관계를 부과하는 반면, 후자의 경우(요인) 더 많은 자유를 허용합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>models <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"정수로서의 그룹"</span> <span class="ot">=</span> <span class="fu">glm</span>(</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>    response <span class="sc">~</span> group_as_integer,</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> simulated_class_data,</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"binomial"</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"요인으로서의 그룹"</span> <span class="ot">=</span> <span class="fu">glm</span>(</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>    response <span class="sc">~</span> group_as_factor,</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> simulated_class_data,</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="st">"binomial"</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(models)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-effect-of-class" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-effect-of-class-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;9.2: 회귀 결과에 대한 클래스의 영향 검토
</figcaption>
<div aria-describedby="tbl-effect-of-class-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_o7jc27w3qwg4i5s5l3ro(i, j, css_id) {
          var table = document.getElementById("tinytable_o7jc27w3qwg4i5s5l3ro");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_o7jc27w3qwg4i5s5l3ro');
        // Find the row with data-row attribute matching i
        var targetRow = table.querySelector(`tr [data-row="${i}"]`).closest('tr');
        var newRow = table.insertRow(targetRow.rowIndex);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        newCell.setAttribute("data-col", "0");
        newCell.setAttribute("data-row", i - 1);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_o7jc27w3qwg4i5s5l3ro(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_o7jc27w3qwg4i5s5l3ro");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '14', j: 1 }, { i: '14', j: 2 },  ], css_id: 'tinytable_css_l0q8vf6yqz2rc0jigwna',}, 
          { positions: [ { i: '8', j: 2 }, { i: '8', j: 1 },  ], css_id: 'tinytable_css_6bdrhf4ia9y3ft15iqig',}, 
          { positions: [ { i: '1', j: 1 }, { i: '3', j: 1 }, { i: '4', j: 1 }, { i: '5', j: 1 }, { i: '6', j: 1 }, { i: '7', j: 1 }, { i: '6', j: 2 }, { i: '9', j: 1 }, { i: '10', j: 1 }, { i: '11', j: 1 }, { i: '12', j: 1 }, { i: '13', j: 1 }, { i: '12', j: 2 }, { i: '2', j: 1 }, { i: '1', j: 2 }, { i: '2', j: 2 }, { i: '3', j: 2 }, { i: '4', j: 2 }, { i: '5', j: 2 }, { i: '10', j: 2 }, { i: '7', j: 2 }, { i: '9', j: 2 }, { i: '11', j: 2 }, { i: '13', j: 2 },  ], css_id: 'tinytable_css_dwfmnyosed4z6rk9e74m',}, 
          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 },  ], css_id: 'tinytable_css_3v8k810qitabohvodxc0',}, 
          { positions: [ { i: '14', j: 0 },  ], css_id: 'tinytable_css_pczq9hvrn2ou2jcla8w8',}, 
          { positions: [ { i: '8', j: 0 },  ], css_id: 'tinytable_css_sx2llfi7d650yijyavy5',}, 
          { positions: [ { i: '1', j: 0 }, { i: '2', j: 0 }, { i: '3', j: 0 }, { i: '4', j: 0 }, { i: '5', j: 0 }, { i: '6', j: 0 }, { i: '7', j: 0 }, { i: '12', j: 0 }, { i: '9', j: 0 }, { i: '10', j: 0 }, { i: '11', j: 0 }, { i: '13', j: 0 },  ], css_id: 'tinytable_css_nfrmsgp6bq6or7rlh2w1',}, 
          { positions: [ { i: '0', j: 0 },  ], css_id: 'tinytable_css_ann6ust74e9l6bggwk0l',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_o7jc27w3qwg4i5s5l3ro(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_l0q8vf6yqz2rc0jigwna, .table th.tinytable_css_l0q8vf6yqz2rc0jigwna { text-align: center; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_6bdrhf4ia9y3ft15iqig, .table th.tinytable_css_6bdrhf4ia9y3ft15iqig { text-align: center; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_dwfmnyosed4z6rk9e74m, .table th.tinytable_css_dwfmnyosed4z6rk9e74m { text-align: center; }
      .table td.tinytable_css_3v8k810qitabohvodxc0, .table th.tinytable_css_3v8k810qitabohvodxc0 { text-align: center; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_pczq9hvrn2ou2jcla8w8, .table th.tinytable_css_pczq9hvrn2ou2jcla8w8 { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_sx2llfi7d650yijyavy5, .table th.tinytable_css_sx2llfi7d650yijyavy5 { text-align: left; border-bottom: solid black 0.05em; }
      .table td.tinytable_css_nfrmsgp6bq6or7rlh2w1, .table th.tinytable_css_nfrmsgp6bq6or7rlh2w1 { text-align: left; }
      .table td.tinytable_css_ann6ust74e9l6bggwk0l, .table th.tinytable_css_ann6ust74e9l6bggwk0l { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_o7jc27w3qwg4i5s5l3ro" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0"> </th>
                <th scope="col" data-row="0" data-col="1">정수로서의 그룹</th>
                <th scope="col" data-row="0" data-col="2">요인으로서의 그룹</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">(Intercept)</td>
                  <td data-row="1" data-col="1">1.417</td>
                  <td data-row="1" data-col="2">1.099</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0"></td>
                  <td data-row="2" data-col="1">(1.755)</td>
                  <td data-row="2" data-col="2">(1.155)</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">group_as_integer</td>
                  <td data-row="3" data-col="1">-0.666</td>
                  <td data-row="3" data-col="2"></td>
                </tr>
                <tr>
                  <td data-row="4" data-col="0"></td>
                  <td data-row="4" data-col="1">(0.894)</td>
                  <td data-row="4" data-col="2"></td>
                </tr>
                <tr>
                  <td data-row="5" data-col="0">group_as_factor2</td>
                  <td data-row="5" data-col="1"></td>
                  <td data-row="5" data-col="2">-1.792</td>
                </tr>
                <tr>
                  <td data-row="6" data-col="0"></td>
                  <td data-row="6" data-col="1"></td>
                  <td data-row="6" data-col="2">(1.683)</td>
                </tr>
                <tr>
                  <td data-row="7" data-col="0">group_as_factor3</td>
                  <td data-row="7" data-col="1"></td>
                  <td data-row="7" data-col="2">-1.099</td>
                </tr>
                <tr>
                  <td data-row="8" data-col="0"></td>
                  <td data-row="8" data-col="1"></td>
                  <td data-row="8" data-col="2">(1.826)</td>
                </tr>
                <tr>
                  <td data-row="9" data-col="0">Num.Obs.</td>
                  <td data-row="9" data-col="1">9</td>
                  <td data-row="9" data-col="2">9</td>
                </tr>
                <tr>
                  <td data-row="10" data-col="0">AIC</td>
                  <td data-row="10" data-col="1">15.8</td>
                  <td data-row="10" data-col="2">17.1</td>
                </tr>
                <tr>
                  <td data-row="11" data-col="0">BIC</td>
                  <td data-row="11" data-col="1">16.2</td>
                  <td data-row="11" data-col="2">17.7</td>
                </tr>
                <tr>
                  <td data-row="12" data-col="0">Log.Lik.</td>
                  <td data-row="12" data-col="1">-5.891</td>
                  <td data-row="12" data-col="2">-5.545</td>
                </tr>
                <tr>
                  <td data-row="13" data-col="0">F</td>
                  <td data-row="13" data-col="1">0.554</td>
                  <td data-row="13" data-col="2">0.579</td>
                </tr>
                <tr>
                  <td data-row="14" data-col="0">RMSE</td>
                  <td data-row="14" data-col="1">0.48</td>
                  <td data-row="14" data-col="2">0.46</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
<p>클래스는 너무 중요하고 미묘하며 분석에 해로운 영향을 미 미칠 수 있으므로, 클래스를 확인하는 일련의 테스트를 통한 분석이 더 신뢰할 수 있습니다. 이 스위트를 설정하는 것은 모델링 직전에 특히 가치가 있지만, 데이터 정리 및 준비의 일부로 설정하는 것이 좋습니다. 미국 독점 거래 회사인 Jane Street가 특정 프로그래밍 언어인 OCaml을 사용하는 한 가지 이유는 해당 유형 시스템이 클래스와 관련하여 더 신뢰할 수 있기 때문입니다<span class="citation" data-cites="somers2015">(<a href="#ref-somers2015" role="doc-biblioref">Somers 2015</a>)</span>. 코드가 중요할 때 클래스는 매우 중요합니다.</p>
<p>컴퓨터 과학 전반에서 유형의 효과와 함의에 대한 많은 미해결 질문이 있지만, 일부 작업이 있었습니다. 예를 들어, <span class="citation" data-cites="Gao2017는">(<a href="#ref-Gao2017는" role="doc-biblioref"><strong>Gao2017는?</strong></a>)</span> 정적 유형 시스템을 사용하면 프로덕션 JavaScript 시스템에서 약 15%의 오류를 잡을 수 있음을 발견했습니다. Typescript와 같은 언어가 개발되었으며, 이 경우 JavaScript와의 주요 차이점은 강력하게 유형화된다는 것입니다. <span class="citation" data-cites="Turcotte2020은">(<a href="#ref-Turcotte2020은" role="doc-biblioref"><strong>Turcotte2020은?</strong></a>)</span> R에 유형 시스템을 추가하는 데 대한 몇 가지 고려 사항을 검토합니다. 그들은 기술적인 문제를 해결하는 데 도움이 되는 프로토타입을 개발했지만, 대규모 구현은 사용자가 변경해야 하는 필요성을 포함하여 여러 가지 이유로 어려울 것이라는 점을 인정합니다.</p>
<p>이 책에서 <code>read_csv()</code> 및 데이터를 가져오는 다른 함수를 사용할 때, 우리는 함수가 변수의 클래스를 추측하도록 허용했습니다. 앞으로는 더 의도적으로 “col_types”를 사용하여 직접 지정할 것입니다. 예를 들어, 다음 대신:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>raw_igme_data <span class="ot">&lt;-</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">file =</span> <span class="st">"https://childmortality.org/wp-content/uploads/2021/09/UNIGME-2021.csv"</span>,</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>다음과 같이 사용하는 것을 권장합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>raw_igme_data <span class="ot">&lt;-</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">file =</span> <span class="st">"https://childmortality.org/wp-content/uploads/2021/09/UNIGME-2021.csv"</span>,</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_select =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">Geographic area</span><span class="st">`</span>, TIME_PERIOD, OBS_VALUE),</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_types =</span> <span class="fu">cols</span>(</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>      <span class="st">`</span><span class="at">Geographic area</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">col_character</span>(),</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">TIME_PERIOD =</span> <span class="fu">col_character</span>(),</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">OBS_VALUE =</span> <span class="fu">col_double</span>(),</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이것은 일반적으로 데이터셋을 처음 읽고, 빠르게 파악한 다음, 필요한 열과 클래스만 지정하여 제대로 읽는 반복적인 과정입니다. 이것은 약간의 추가 작업이 필요하지만, 클래스에 대해 명확하게 하는 것이 중요합니다.</p>
</section>
<section id="날짜" class="level4" data-number="9.3.3.3">
<h4 data-number="9.3.3.3" class="anchored" data-anchor-id="날짜"><span class="header-section-number">9.3.3.3</span> 날짜</h4>
<p>날짜와 함께 작업할 것이라고 말할 때 누군가가 어떤 반응을 보이는지는 그 사람이 날짜와 함께 작업해 본 적이 있는지에 대한 시볼레스입니다. 만약 그들이 끔찍한 이야기를 공유한다면, 그들은 이전에 날짜와 함께 작업해 본 적이 있을 가능성이 높습니다!</p>
<p>날짜에 대한 광범위한 확인은 중요합니다. 이상적으로는 날짜가 YYYY-MM-DD 형식이어야 합니다. 더 넓은 세상에서 적절한 날짜 형식에 대한 의견 차이가 있습니다. 합리적인 사람들은 2022년 7월 1일 또는 2022년 7월 1일 중 어느 것이 더 나은지에 대해 의견이 다를 수 있지만, YYYY-MM-DD는 국제 표준이며 가능한 경우 날짜 변수에서 이를 사용해야 합니다.</p>
<p>유용할 수 있는 몇 가지 테스트는 다음과 같습니다.</p>
<ul>
<li>열이 요일인 경우, 구성 요소가 월요일, 화요일, …, 일요일만 있는지 테스트합니다. 또한, 7일 모두 존재하는지 테스트합니다. 마찬가지로 월에 대해서도 테스트합니다.</li>
<li>각 월에 대한 일수가 적절한지 테스트합니다. 예를 들어, 9월이 30일인지 확인합니다.</li>
<li>데이터셋에서 날짜가 순서대로 있는지 확인합니다. 반드시 그럴 필요는 없지만, 종종 그렇지 않은 경우 탐색할 가치가 있는 문제가 있습니다.</li>
<li>연도가 분석 기간에 대해 완전하고 적절한지 확인합니다.</li>
</ul>
<p><a href="#sec-fire-hose에서는" class="quarto-xref"><span class="quarto-unresolved-ref">sec-fire-hose에서는</span></a> <code>opendatatoronto</code>를 사용하여 2021년 토론토의 쉼터 사용량 데이터셋을 소개했습니다. 여기서는 날짜와 관련된 몇 가지 문제를 설명하기 위해 2017년의 동일한 데이터셋을 검토합니다. 먼저 데이터를 다운로드해야 합니다.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>toronto_shelters_2017 <span class="ot">&lt;-</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">search_packages</span>(<span class="st">"Daily Shelter Occupancy"</span>) <span class="sc">|&gt;</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list_package_resources</span>() <span class="sc">|&gt;</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"Daily shelter occupancy 2017.csv"</span>) <span class="sc">|&gt;</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_split</span>(name) <span class="sc">|&gt;</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(get_resource, <span class="at">.id =</span> <span class="st">"file"</span>)</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> toronto_shelters_2017,</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">"toronto_shelters_2017.csv"</span></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이름을 더 쉽게 입력할 수 있도록 하고 관련 열만 유지해야 합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>toronto_shelters_2017 <span class="ot">&lt;-</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  toronto_shelters_2017 <span class="sc">|&gt;</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(occupancy_date, sector, occupancy, capacity)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이 데이터셋의 주요 문제는 날짜입니다. 날짜는 대부분 연-월-일 형식으로 보이지만, 특정 관측치는 연-일-월 형식일 수 있습니다. <code>lubridate</code>의 <code>ymd()</code>를 사용하여 해당 순서로 날짜를 파싱합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>toronto_shelters_2017 <span class="ot">&lt;-</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  toronto_shelters_2017 <span class="sc">|&gt;</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># 시간 제거</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">occupancy_date =</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_remove</span>(</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>        occupancy_date,</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"T[:digit:]{2}:[:digit:]{2}:[:digit:]{2}"</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>        )) <span class="sc">|&gt;</span></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">generated_date =</span> <span class="fu">ymd</span>(occupancy_date, <span class="at">quiet =</span> <span class="cn">TRUE</span>))</span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>toronto_shelters_2017</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 38,700 × 5
   occupancy_date sector   occupancy capacity generated_date
   &lt;chr&gt;          &lt;chr&gt;        &lt;dbl&gt;    &lt;dbl&gt; &lt;date&gt;        
 1 2017-01-01     Co-ed           16       16 2017-01-01    
 2 2017-01-01     Men             13       17 2017-01-01    
 3 2017-01-01     Men             63       63 2017-01-01    
 4 2017-01-01     Families        66       70 2017-01-01    
 5 2017-01-01     Men             58       60 2017-01-01    
 6 2017-01-01     Families       168      160 2017-01-01    
 7 2017-01-01     Families       119      150 2017-01-01    
 8 2017-01-01     Men             23       28 2017-01-01    
 9 2017-01-01     Families         8        0 2017-01-01    
10 2017-01-01     Co-ed           14       40 2017-01-01    
# ℹ 38,690 more rows</code></pre>
</div>
</div>
<p>날짜의 세 번째 구성 요소의 분포를 플로팅한 결과 문제가 있음을 분명히 알 수 있습니다(<a href="#fig-homeless-daycount-1" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-homeless-daycount-1</span></a>). 특히 날짜의 분포가 대략 균일하지 않다는 점이 우려됩니다.</p>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>toronto_shelters_2017 <span class="sc">|&gt;</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>    generated_date,</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"three"</span>),</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"-"</span>,</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove =</span> <span class="cn">FALSE</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(three) <span class="sc">|&gt;</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> three, <span class="at">y =</span> n)) <span class="sc">+</span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"점유 날짜의 세 번째 구성 요소"</span>,</span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"수"</span>)</span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>toronto_shelters_2017 <span class="sc">|&gt;</span></span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">row_number =</span> <span class="fu">c</span>(<span class="fu">seq_len</span>(<span class="fu">nrow</span>(toronto_shelters_2017)))) <span class="sc">|&gt;</span></span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> row_number, <span class="at">y =</span> generated_date), <span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb58-21"><a href="#cb58-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"행 번호"</span>,</span>
<span id="cb58-22"><a href="#cb58-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"날짜"</span></span>
<span id="cb58-23"><a href="#cb58-23" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-homeless-daycount" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-homeless-daycount-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-homeless-daycount" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-homeless-daycount-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-homeless-daycount-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="09-clean_and_prepare_ko_files/figure-html/fig-homeless-daycount-1.png" class="img-fluid figure-img" data-ref-parent="fig-homeless-daycount" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-homeless-daycount-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) 점유 날짜의 세 번째 구성 요소별 개수
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-homeless-daycount" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-homeless-daycount-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-homeless-daycount-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="09-clean_and_prepare_ko_files/figure-html/fig-homeless-daycount-2.png" class="img-fluid figure-img" data-ref-parent="fig-homeless-daycount" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-homeless-daycount-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) 행 번호와 날짜 비교
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-homeless-daycount-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;9.3: 날짜를 더 자세히 검토
</figcaption>
</figure>
</div>
<p>언급했듯이, 데이터셋을 정리할 때 특히 유용한 그래프 중 하나는 관측치가 데이터셋에 나타나는 순서입니다. 예를 들어, 일반적으로 날짜 순서대로 대략적인 순서가 있을 것으로 예상합니다. 이것이 사실인지 확인하기 위해 데이터셋에 나타나는 순서대로 날짜 변수를 그래프로 그릴 수 있습니다(<a href="#fig-homeless-daycount-2" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-homeless-daycount-2</span></a>).</p>
<p>이것은 단지 빠른 그래프이지만 요점을 설명합니다. 즉, 많은 것이 순서대로 있지만 전부는 아닙니다. 순서대로라면 대각선을 따라 있을 것으로 예상할 것입니다. 데이터가 순서대로 있지 않다는 것은 이상합니다. 특히 처음에는 체계적인 것이 있는 것처럼 보이기 때문입니다. 데이터를 요약하여 날짜별 점유율을 얻을 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lisa Lendway의 아이디어</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>toronto_shelters_by_day <span class="ot">&lt;-</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  toronto_shelters_2017 <span class="sc">|&gt;</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(occupancy, capacity) <span class="sc">|&gt;</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">occupancy =</span> <span class="fu">sum</span>(occupancy),</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">capacity =</span> <span class="fu">sum</span>(capacity),</span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">usage =</span> occupancy <span class="sc">/</span> capacity,</span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">.by =</span> generated_date</span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>우리는 토론토의 쉼터 공간 가용성에 관심이 있습니다(<a href="#fig-plotoccupancy" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-plotoccupancy</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>toronto_shelters_by_day <span class="sc">|&gt;</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">day</span>(generated_date), <span class="at">y =</span> occupancy)) <span class="sc">+</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="cn">NA</span>)) <span class="sc">+</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"유형"</span>,</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"일"</span>,</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"점유율 (수)"</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(</span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">vars</span>(<span class="fu">month</span>(generated_date, <span class="at">label =</span> <span class="cn">TRUE</span>)),</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">scales =</span> <span class="st">"free_x"</span></span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-plotoccupancy" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-plotoccupancy-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="09-clean_and_prepare_ko_files/figure-html/fig-plotoccupancy-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-plotoccupancy-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;9.4: 토론토 쉼터의 일일 점유율
</figcaption>
</figure>
</div>
</div>
</div>
<p>월의 첫 12일 동안 문제가 있는 것으로 보입니다. 데이터를 보면 순서가 이상하다는 점을 지적했습니다. <a href="#fig-homeless-daycount-2를" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-homeless-daycount-2를</span></a> 보면 많은 관측치에 영향을 미치는 체계적인 문제가 있는 것 같습니다. 일반적으로 날짜 변수에서 첫 12일이 거꾸로 되어 있을 수 있습니다. 즉, 연-월-일이라고 생각하지만 실제로는 연-일-월입니다. 그러나 예외도 있습니다. 첫 번째 단계로, 각 월의 첫 12일을 뒤집어 보면 도움이 되는지 확인할 수 있습니다. 상당히 무뚝뚝한 방법이지만, 도움이 되기를 바랍니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Monica Alexander의 코드</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>padded_1_to_12 <span class="ot">&lt;-</span> <span class="fu">sprintf</span>(<span class="st">"%02d"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>)</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>list_of_dates_to_flip <span class="ot">&lt;-</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(<span class="dv">2017</span>, padded_1_to_12, </span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rep</span>(padded_1_to_12, <span class="at">each =</span> <span class="dv">12</span>), <span class="at">sep =</span> <span class="st">"-"</span>)</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>toronto_shelters_2017_flip <span class="ot">&lt;-</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>  toronto_shelters_2017 <span class="sc">|&gt;</span></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">year</span>(generated_date),</span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">month =</span> <span class="fu">month</span>(generated_date),</span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">day =</span> <span class="fu">day</span>(generated_date),</span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">generated_date =</span> <span class="fu">as.character</span>(generated_date),</span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">changed_date =</span> <span class="fu">if_else</span>(</span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a>      generated_date <span class="sc">%in%</span> list_of_dates_to_flip,</span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste</span>(year, day, month, <span class="at">sep =</span> <span class="st">"-"</span>),</span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste</span>(year, month, day, <span class="at">sep =</span> <span class="st">"-"</span>),</span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">changed_date =</span> <span class="fu">ymd</span>(changed_date)</span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>year, <span class="sc">-</span>month, <span class="sc">-</span>day)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이제 살펴보겠습니다(<a href="#fig-sheltersdatebyrowadj" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-sheltersdatebyrowadj</span></a>).</p>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>toronto_shelters_2017_flip <span class="sc">|&gt;</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">counter =</span> <span class="fu">seq_len</span>(<span class="fu">nrow</span>(toronto_shelters_2017_flip))) <span class="sc">|&gt;</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> counter, <span class="at">y =</span> changed_date)) <span class="sc">+</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"데이터셋의 행"</span>,</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"해당 행의 날짜"</span>) <span class="sc">+</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>toronto_shelters_2017_flip <span class="sc">|&gt;</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(occupancy, capacity) <span class="sc">|&gt;</span></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">occupancy =</span> <span class="fu">sum</span>(occupancy),</span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">.by =</span> changed_date) <span class="sc">|&gt;</span></span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">day</span>(changed_date), <span class="at">y =</span> occupancy)) <span class="sc">+</span></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="cn">NA</span>)) <span class="sc">+</span></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">color =</span> <span class="st">"유형"</span>,</span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"변경된 날짜"</span>,</span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"점유율 (수)"</span>) <span class="sc">+</span></span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(<span class="fu">month</span>(changed_date, <span class="at">label =</span> <span class="cn">TRUE</span>)),</span>
<span id="cb62-20"><a href="#cb62-20" aria-hidden="true" tabindex="-1"></a>             <span class="at">scales =</span> <span class="st">"free_x"</span>) <span class="sc">+</span></span>
<span id="cb62-21"><a href="#cb62-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-sheltersdatebyrowadj" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-sheltersdatebyrowadj-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-sheltersdatebyrowadj" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-sheltersdatebyrowadj-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-sheltersdatebyrowadj-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="09-clean_and_prepare_ko_files/figure-html/fig-sheltersdatebyrowadj-1.png" class="img-fluid figure-img" data-ref-parent="fig-sheltersdatebyrowadj" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-sheltersdatebyrowadj-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) 조정 후 순서대로 각 행의 날짜
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-sheltersdatebyrowadj" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-sheltersdatebyrowadj-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-sheltersdatebyrowadj-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="09-clean_and_prepare_ko_files/figure-html/fig-sheltersdatebyrowadj-2.png" class="img-fluid figure-img" data-ref-parent="fig-sheltersdatebyrowadj" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-sheltersdatebyrowadj-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) 조정 후 토론토 쉼터 일일 점유율
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-sheltersdatebyrowadj-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;9.5: 조정된 날짜, 토론토 쉼터 점유율
</figcaption>
</figure>
</div>
<p>모든 문제가 해결된 것은 아닙니다. 예를 들어, 이제 대각선 아래에 항목이 없습니다(<a href="#fig-sheltersdatebyrowadj-1" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-sheltersdatebyrowadj-1</span></a>). 그러나 체계적인 차이가 거의 완전히 해결되었음을 알 수 있습니다(<a href="#fig-sheltersdatebyrowadj-2" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-sheltersdatebyrowadj-2</span></a>). 여기서 이 예시를 마치겠습니다.</p>
</section>
</section>
</section>
<section id="시뮬레이션-예시-달리기-시간" class="level2" data-number="9.4">
<h2 data-number="9.4" class="anchored" data-anchor-id="시뮬레이션-예시-달리기-시간"><span class="header-section-number">9.4</span> 시뮬레이션 예시: 달리기 시간</h2>
<p><a href="#sec-its-just-a-linear-model에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-its-just-a-linear-model에서</span></a> 다시 다룰 구체적인 예시를 제공하기 위해, 5킬로미터(약 3마일 이상)를 달리는 데 걸리는 시간과 마라톤을 달리는 데 걸리는 시간(<a href="#fig-fivekmvsmarathon-1" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-fivekmvsmarathon-1</span></a>)을 비교해 봅시다.</p>
<p>여기서는 테스트에 초점을 맞춰 “시뮬레이션”과 “획득”을 고려합니다. 시뮬레이션에서는 8.4의 관계를 지정합니다. 이는 5킬로미터 달리기와 42.2킬로미터 마라톤 거리(약 26마일 이상) 사이의 대략적인 비율입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">853</span>)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>num_observations <span class="ot">&lt;-</span> <span class="dv">200</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>expected_relationship <span class="ot">&lt;-</span> <span class="fl">8.4</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>fast_time <span class="ot">&lt;-</span> <span class="dv">15</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>good_time <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>sim_run_data <span class="ot">&lt;-</span></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">five_km_time =</span></span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">runif</span>(<span class="at">n =</span> num_observations, <span class="at">min =</span> fast_time, <span class="at">max =</span> good_time),</span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">noise =</span> <span class="fu">rnorm</span>(<span class="at">n =</span> num_observations, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">20</span>),</span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">marathon_time =</span> five_km_time <span class="sc">*</span> expected_relationship <span class="sc">+</span> noise</span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">five_km_time =</span> <span class="fu">round</span>(<span class="at">x =</span> five_km_time, <span class="at">digits =</span> <span class="dv">1</span>),</span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">marathon_time =</span> <span class="fu">round</span>(<span class="at">x =</span> marathon_time, <span class="at">digits =</span> <span class="dv">1</span>)</span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>noise)</span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a>sim_run_data</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 200 × 2
   five_km_time marathon_time
          &lt;dbl&gt;         &lt;dbl&gt;
 1         20.4          164.
 2         16.8          158 
 3         22.3          196.
 4         19.7          160.
 5         15.6          121.
 6         21.1          178.
 7         17            157.
 8         18.6          169.
 9         17.4          150.
10         17.8          126.
# ℹ 190 more rows</code></pre>
</div>
</div>
<p>우리는 시뮬레이션을 사용하여 실제 데이터가 충족하기를 원하는 다양한 테스트를 설정할 수 있습니다. 예를 들어, 5킬로미터 및 마라톤 달리기 시간의 클래스가 숫자이기를 원합니다. 그리고 200개의 관측치를 원합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stopifnot</span>(</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">class</span>(sim_run_data<span class="sc">$</span>marathon_time) <span class="sc">==</span> <span class="st">"numeric"</span>,</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">class</span>(sim_run_data<span class="sc">$</span>five_km_time) <span class="sc">==</span> <span class="st">"numeric"</span>,</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>(sim_run_data) <span class="sc">==</span> <span class="dv">200</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>5킬로미터 달리기 시간의 경우 15분 미만이거나 30분 이상인 값은 후속 조치가 필요한 값일 가능성이 높다는 것을 알고 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stopifnot</span>(</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">min</span>(sim_run_data<span class="sc">$</span>five_km_time) <span class="sc">&gt;=</span> <span class="dv">15</span>,</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">max</span>(sim_run_data<span class="sc">$</span>five_km_time) <span class="sc">&lt;=</span> <span class="dv">30</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이 최대값과 시뮬레이션된 관계 8.4를 기반으로, 약간의 편차를 허용하더라도 마라톤 시간이 300분(30x8.4=252분)을 상당히 초과하는 것을 발견하면 놀랄 것입니다. (분명히, 마라톤을 달리는 데 이보다 더 오래 걸리는 것은 잘못된 것이 아니지만, 우리의 시뮬레이션 매개변수를 기반으로 할 때 믿을 수 없을 정도로 빠른 88분 마라톤 시간이 나올 것이므로 시뮬레이션을 개선해야 할 필요가 있습니다.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stopifnot</span>(</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">min</span>(sim_run_data<span class="sc">$</span>marathon_time) <span class="sc">&gt;=</span> <span class="dv">118</span>,</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">max</span>(sim_run_data<span class="sc">$</span>marathon_time) <span class="sc">&lt;=</span> <span class="dv">300</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>그런 다음 이러한 테스트를 실제 데이터에 적용할 수 있습니다. 5킬로미터 및 마라톤 달리기 시간 간의 관계에 대한 실제 설문 조사 데이터는 <span class="citation" data-cites="Vickers2016에서">(<a href="#ref-Vickers2016에서" role="doc-biblioref"><strong>Vickers2016에서?</strong></a>)</span> 사용할 수 있습니다. <span class="citation" data-cites="Vickers2016이">(<a href="#ref-Vickers2016이" role="doc-biblioref"><strong>Vickers2016이?</strong></a>)</span> “추가 파일”로 제공하는 데이터를 다운로드한 후, 관심 있는 변수와 5킬로미터 시간 및 마라톤 시간을 모두 가진 개인에게만 초점을 맞출 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>vickers_data <span class="ot">&lt;-</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_excel</span>(<span class="st">"13102_2016_52_MOESM2_ESM.xlsx"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(k5_ti, mf_ti) <span class="sc">|&gt;</span> </span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>()</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>vickers_data</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 430 × 2
   k5_ti mf_ti
   &lt;dbl&gt; &lt;dbl&gt;
 1  1075 10295
 2  1292 12292
 3  1222 13452
 4   893  9515
 5  1050 10875
 6  1603 16580
 7  1457 15440
 8  1256 13113
 9  1572 17190
10  2575 22139
# ℹ 420 more rows</code></pre>
</div>
</div>
<p>가장 먼저 눈에 띄는 것은 데이터가 초 단위로 되어 있지만, 우리는 분 단위로 예상했다는 것입니다. 이것은 괜찮습니다. 우리의 시뮬레이션과 테스트를 업데이트하거나 데이터를 조정할 수 있습니다. 우리의 시뮬레이션과 테스트는 데이터가 약간 다르더라도(필연적으로 그럴 것입니다) 그 가치를 유지합니다.</p>
<p>이 경우, 데이터를 분 단위로 전환하기 위해 60으로 나누고 반올림할 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>vickers_data <span class="ot">&lt;-</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  vickers_data <span class="sc">|&gt;</span> </span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">five_km_time =</span> <span class="fu">round</span>(k5_ti <span class="sc">/</span> <span class="dv">60</span>, <span class="dv">1</span>),</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">marathon_time =</span> <span class="fu">round</span>(mf_ti <span class="sc">/</span> <span class="dv">60</span>, <span class="dv">1</span>)</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(five_km_time, marathon_time)</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>vickers_data</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 430 × 2
   five_km_time marathon_time
          &lt;dbl&gt;         &lt;dbl&gt;
 1         17.9          172.
 2         21.5          205.
 3         20.4          224.
 4         14.9          159.
 5         17.5          181.
 6         26.7          276.
 7         24.3          257.
 8         20.9          219.
 9         26.2          286.
10         42.9          369 
# ℹ 420 more rows</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stopifnot</span>(</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">class</span>(vickers_data<span class="sc">$</span>marathon_time) <span class="sc">==</span> <span class="st">"numeric"</span>,</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">class</span>(vickers_data<span class="sc">$</span>five_km_time) <span class="sc">==</span> <span class="st">"numeric"</span>,</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">min</span>(vickers_data<span class="sc">$</span>five_km_time) <span class="sc">&gt;=</span> <span class="dv">15</span>,</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">max</span>(vickers_data<span class="sc">$</span>five_km_time) <span class="sc">&lt;=</span> <span class="dv">30</span>,</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">min</span>(vickers_data<span class="sc">$</span>marathon_time) <span class="sc">&gt;=</span> <span class="dv">118</span>,</span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">max</span>(vickers_data<span class="sc">$</span>marathon_time) <span class="sc">&lt;=</span> <span class="dv">300</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이 경우, 시뮬레이션된 데이터를 위해 작성된 우리의 테스트는 15분보다 빠르거나 30분보다 긴 5킬로미터 달리기 시간을 식별합니다. 또한 300분보다 긴 마라톤 시간을 식별합니다. 이 데이터를 실제로 분석에 사용한다면, 다음 단계는 데이터를 플로팅하고, 테스트에서 식별된 각 지점을 검토한 다음, 테스트 또는 데이터셋을 조정하는 것입니다.</p>
</section>
<section id="이름" class="level2" data-number="9.5">
<h2 data-number="9.5" class="anchored" data-anchor-id="이름"><span class="header-section-number">9.5</span> 이름</h2>
<blockquote class="blockquote">
<p>프로그램은 사람들이 읽을 수 있도록 작성되어야 하며, 기계가 실행하는 것은 부수적인 일이다.</p>
<p><span class="citation" data-cites="abelson1996structure">Abelson 와/과 Sussman (<a href="#ref-abelson1996structure" role="doc-biblioref">1996</a>)</span></p>
</blockquote>
<p>이름은 중요합니다. 이 책의 많은 부분이 쓰여진 땅은 오늘날 캐나다라고 불리지만, 오랫동안 터틀 아일랜드로 알려져 있었습니다. 마찬가지로, 호주 중앙에는 큰 바위가 있습니다. 오랫동안 울루루라고 불렸고, 그 다음에는 에어즈 록으로 알려졌습니다. 오늘날에는 두 가지 이름을 모두 사용하는 이중 이름을 가지고 있습니다. 그리고 사우스 캐롤라이나 주 의사당 주변의 표지판을 포함하여 미국 남부 일부 지역에서는 미국 남북 전쟁을 북부 침략 전쟁이라고 부릅니다. 이러한 예시에서 사용되는 이름은 사용자뿐만 아니라 상황에 대한 정보도 전달합니다. 심지어 영국 왕실도 이름의 힘을 인정합니다. 1917년에 그들은 작센-코부르크-고타 가문에서 윈저 가문으로 변경했습니다. 제1차 세계 대전을 고려할 때 전자가 너무 독일적이라고 느껴졌기 때문입니다. 이름은 일상생활에서 중요합니다. 그리고 우리 코드에서도 중요합니다.</p>
<p>코딩할 때 이름은 중요하며 특별한 주의를 기울여야 합니다. 왜냐하면 <span class="citation" data-cites="hermans2021programmer">(<a href="#ref-hermans2021programmer" role="doc-biblioref">Hermans 2021</a>)</span>:</p>
<ol type="1">
<li>코드에 포함되어 코드를 문서화하는 데 도움이 됩니다.</li>
<li>모든 스크립트의 큰 부분을 차지합니다.</li>
<li>다른 사람들이 많이 참조합니다. 그리고</li>
<li>독자가 코드에서 무슨 일이 일어나고 있는지 이해하는 데 도움이 됩니다.</li>
</ol>
<p>데이터의 본질을 존중하는 것 외에도 이름은 두 가지 추가 고려 사항을 충족해야 합니다.</p>
<ol type="1">
<li>기계가 읽을 수 있어야 합니다. 그리고</li>
<li>사람이 읽을 수 있어야 합니다.</li>
</ol>
<section id="기계가-읽을-수-있는-이름" class="level3" data-number="9.5.1">
<h3 data-number="9.5.1" class="anchored" data-anchor-id="기계가-읽을-수-있는-이름"><span class="header-section-number">9.5.1</span> 기계가 읽을 수 있는 이름</h3>
<p>기계가 읽을 수 있는 이름을 보장하는 것은 더 쉬운 표준을 충족할 수 있습니다. 일반적으로 공백과 특수 문자를 피하는 것을 의미합니다. 공백은 밑줄로 대체할 수 있습니다. 예를 들어, “my data”보다 “my_data”를 선호합니다. 공백을 피하면 탭 완성이 가능해져 효율성이 높아집니다. 또한 공백이 다른 운영 체제에서 다르게 처리되므로 재현성에도 도움이 됩니다.</p>
<p>일반적으로 특수 문자는 다른 컴퓨터와 언어 간에 일관성이 없을 수 있으므로 제거해야 합니다. 특히 슬래시, 백슬래시, 별표, 그리고 작은따옴표와 큰따옴표의 경우 더욱 그렇습니다. 이름에 이러한 것들을 사용하지 않도록 노력하십시오.</p>
<p>이름은 데이터셋 내에서 고유해야 하며, 특정 변수가 다른 데이터셋을 조인하는 키로 의도적으로 사용되는 경우가 아니라면 데이터셋 컬렉션 내에서도 고유해야 합니다. 이는 일반적으로 효과적인 이름에 도메인이 중요하다는 것을 의미하며, 팀의 일원으로 작업할 때 이 모든 것이 훨씬 더 어려워집니다<span class="citation" data-cites="hermans2017peter">(<a href="#ref-hermans2017peter" role="doc-biblioref">Hermans 2017</a>)</span>. 이름은 고유해야 할 뿐만 아니라 혼동의 가능성이 있을 때 눈에 띄게 달라야 합니다. 예를 들어, 수년 동안 PHP 언어에는 <code>mysql_escape_string</code>과 <code>mysql_real_escape_string</code>이 모두 있었습니다<span class="citation" data-cites="somers2015">(<a href="#ref-somers2015" role="doc-biblioref">Somers 2015</a>)</span>. 프로그래머가 실수로 다른 것을 의미하는 것을 작성했을 수 있다는 것을 쉽게 알 수 있습니다.</p>
<p>기계가 읽을 수 있는 이름에 더 가까워지는 데 특히 유용한 함수는 <code>janitor</code>의 <code>clean_names()</code>입니다. 이것은 위에서 언급한 문제뿐만 아니라 몇 가지 다른 문제도 처리합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>some_bad_names <span class="ot">&lt;-</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"두 번째 이름에 공백이 있습니다"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>),</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"이상한#기호"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>),</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"일관성없는대소문자"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>)</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>bad_names_made_better <span class="ot">&lt;-</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>  some_bad_names <span class="sc">|&gt;</span></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>some_bad_names</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  `두 번째 이름에 공백이 있습니다` `이상한#기호` 일관성없는대소문자
                             &lt;dbl&gt;         &lt;dbl&gt;              &lt;dbl&gt;
1                                1             1                  1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>bad_names_made_better</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  du_beonjjae_ileum_e_gongbaeg_i_i…¹ isanghan_number_giho ilgwanseong_eobsneun…²
                               &lt;dbl&gt;                &lt;dbl&gt;                  &lt;dbl&gt;
1                                  1                    1                      1
# ℹ abbreviated names: ¹​du_beonjjae_ileum_e_gongbaeg_i_issseubnida,
#   ²​ilgwanseong_eobsneundaesomunja</code></pre>
</div>
</div>
</section>
<section id="사람이-읽을-수-있는-이름" class="level3" data-number="9.5.2">
<h3 data-number="9.5.2" class="anchored" data-anchor-id="사람이-읽을-수-있는-이름"><span class="header-section-number">9.5.2</span> 사람이 읽을 수 있는 이름</h3>
<blockquote class="blockquote">
<p>프로그램은 사람들이 읽을 수 있도록 작성되어야 하며, 기계가 실행하는 것은 부수적인 일이다.</p>
<p><span class="citation" data-cites="abelson1996structure">Abelson 와/과 Sussman (<a href="#ref-abelson1996structure" role="doc-biblioref">1996</a>)</span></p>
</blockquote>
<p><a href="#sec-on-writing에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-on-writing에서</span></a> 독자를 위해 논문을 작성한다고 강조했듯이, 여기서는 독자를 위해 코드를 작성한다고 강조합니다. 사람이 읽을 수 있는 이름은 추가적인 계층과 광범위한 고려가 필요합니다. <span class="citation" data-cites="jsfcodingstandards">Lockheed Martin (<a href="#ref-jsfcodingstandards" role="doc-biblioref">2005</a>, p.&nbsp;25)</span>에 따르면, “O” 문자 대신 “0” 숫자 또는 “D” 문자를 사용하거나, “S” 문자 대신 “5” 숫자를 사용하여만 다른 이름을 피해야 합니다. 마찬가지로 “S”와 “5”도 그렇습니다.</p>
<p>다른 문화권과 그들이 우리가 사용하는 일부 이름을 어떻게 해석할지 고려해야 합니다. 또한 데이터셋의 후속 사용자가 가질 수 있는 다른 경험 수준도 고려해야 합니다. 이는 데이터 과학 경험뿐만 아니라 유사한 데이터셋 경험 측면에서도 마찬가지입니다. 예를 들어, “flag”라는 변수는 종종 변수에 후속 조치가 필요하거나 어떤 식으로든 신중하게 처리해야 하는 데이터가 포함되어 있음을 나타내는 데 사용됩니다. 숙련된 분석가는 이것을 알겠지만, 초보자는 모를 것입니다. 가능한 한 의미 있는 이름을 사용하려고 노력하십시오<span class="citation" data-cites="lin2020ten">(<a href="#ref-lin2020ten" role="doc-biblioref">Lin, Ali, 와/과 Wilson 2021</a>)</span>. 짧은 이름이 이해하는 데 더 오래 걸릴 수 있다는 것이 밝혀졌으므로<span class="citation" data-cites="shorternamestakelonger">(<a href="#ref-shorternamestakelonger" role="doc-biblioref">Hofmeister, Siegmund, 와/과 Holt 2017</a>)</span>, 가능한 한 흔하지 않은 약어를 피하는 것이 종종 유용합니다.</p>
<p><span class="citation" data-cites="jennybryanonnames는">(<a href="#ref-jennybryanonnames는" role="doc-biblioref"><strong>jennybryanonnames는?</strong></a>)</span> 특히 파일 이름이 파일 관리자가 부과할 기본 순서를 고려해야 한다고 권장합니다. 이는 “00-”, “01-” 등과 같은 접두사를 파일 이름에 추가하는 것을 의미할 수 있습니다(파일 수에 따라 0으로 왼쪽 채우기가 필요할 수 있음). 결정적으로 날짜에 ISO 8601을 사용해야 합니다. 이는 이전에 소개되었으며, 2022년 12월 2일은 “2022-12-02”로 작성됩니다. 이러한 파일 이름을 사용하는 이유는 파일의 순서에 대한 정보를 다른 사람들에게 제공하기 위함입니다.</p>
<p>R의 흥미로운 기능 중 하나는 특정 경우에 이름에 대한 부분 일치가 가능하다는 것입니다. 예를 들어:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>partial_matching_example <span class="ot">&lt;-</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">data.frame</span>(</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">my_first_name =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">another_name =</span> <span class="fu">c</span>(<span class="st">"wow"</span>, <span class="st">"great"</span>)</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>partial_matching_example<span class="sc">$</span>my_first_name</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>partial_matching_example<span class="sc">$</span>my</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2</code></pre>
</div>
</div>
<p>이 동작은 <code>tidyverse</code> 내에서는 불가능합니다(예를 들어, 위 코드에서 <code>data.frame</code>이 <code>tibble</code>로 대체된 경우). 부분 일치는 거의 사용해서는 안 됩니다. 이는 휴식 후 코드를 이해하기 더 어렵게 만들고, 다른 사람들이 새로 접근하기 어렵게 만듭니다.</p>
<p>변수 이름은 일관된 구조를 가져야 합니다. 예를 들어, <code>read_csv()</code>와 같이 <code>동사_명사</code> 명명 패턴을 부과한 다음, <code>명사_동사</code>와 같은 함수(예: <code>csv_read()</code>)를 가지면 일관성이 없을 것입니다. 이러한 불일치는 함수 이름을 기억하기 더 어렵게 만들기 때문에 상당한 비용을 부과합니다.</p>
<p>R, Python 및 데이터 과학에 일반적으로 사용되는 다른 많은 언어는 정적 유형과 달리 동적 유형입니다. 이는 클래스가 변수를 선언하는 것과 독립적으로 정의될 수 있음을 의미합니다. 데이터 과학 연구의 흥미로운 영역 중 하나는 부분적으로 정적 유형으로 이동하고 그것이 무엇을 의미할 수 있는지 이해하는 것입니다. 예를 들어, Python은 2014년에 유형 힌트를 <a href="https://peps.python.org/pep-0484/">활성화했습니다</a><span class="citation" data-cites="boykistypehints">(<a href="#ref-boykistypehints" role="doc-biblioref">Boykis 2019</a>)</span>. 필수는 아니지만, 이는 유형에 대해 더 명시적으로 하는 데 도움이 됩니다.</p>
<p><span class="citation" data-cites="columnnamesascontracts는">(<a href="#ref-columnnamesascontracts는" role="doc-biblioref"><strong>columnnamesascontracts는?</strong></a>)</span> 변수 이름을 계약으로 사용할 것을 권장합니다. 우리는 이를 위해 변수에 대한 제어된 어휘를 설정합니다. 이런 식으로, 우리는 이름에 사용할 수 있는 단어 집합을 정의할 것입니다. <span class="citation" data-cites="columnnamesascontracts의">(<a href="#ref-columnnamesascontracts의" role="doc-biblioref"><strong>columnnamesascontracts의?</strong></a>)</span> 제어된 어휘에서 변수는 클래스에 대한 약어, 관련 특정 내용, 그리고 다양한 세부 정보로 시작할 수 있습니다.</p>
<p>예를 들어, “age”와 “sex”라는 열 이름을 고려할 수 있습니다. <span class="citation" data-cites="columnnamesascontracts에">(<a href="#ref-columnnamesascontracts에" role="doc-biblioref"><strong>columnnamesascontracts에?</strong></a>)</span> 따라 우리는 이것들을 클래스 및 기타 정보에 대해 더 유익하게 변경할 수 있습니다. 이 문제는 해결되지 않았으며, 아직 모범 사례가 없습니다. 예를 들어, 가독성 측면에서 이에 대한 반론도 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>some_names <span class="ot">&lt;-</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">as.integer</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">35</span>, <span class="dv">36</span>)),</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">sex =</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">"male"</span>, <span class="st">"male"</span>, <span class="st">"female"</span>, <span class="st">"male"</span>))</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>riederer_names <span class="ot">&lt;-</span></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>  some_names <span class="sc">|&gt;</span></span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">integer_age_respondent =</span> age,</span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">factor_sex_respondent =</span> sex</span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-14"><a href="#cb81-14" aria-hidden="true" tabindex="-1"></a>some_names</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
    age sex   
  &lt;int&gt; &lt;fct&gt; 
1     1 male  
2     3 male  
3    35 female
4    36 male  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>riederer_names</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  integer_age_respondent factor_sex_respondent
                   &lt;int&gt; &lt;fct&gt;                
1                      1 male                 
2                      3 male                 
3                     35 female               
4                     36 male                 </code></pre>
</div>
</div>
<p>프로젝트 전체에서 이름에 대해 조금 더 명시적이고 일관성을 유지하려고 노력하는 것만으로도 나중에 프로젝트를 다시 방문할 때 상당한 이점을 가져옵니다. 다른 이름으로 불리는 장미가 똑같이 달콤한 향기를 낼까요? 물론입니다. 그러나 우리는 그것을 장미라고 부릅니다. 또는 더 나아가 <em>Rosa rubiginosa</em>라고 부릅니다. 왜냐하면 그것이 “red_thing”, “five_petaled_smell_nice”, “flower”, 또는 “r_1”과 같은 것과 비교하여 우리가 무엇에 대해 이야기하고 있는지 다른 사람들이 알 수 있도록 돕기 때문입니다. 더 명확하고, 다른 사람들이 효율적으로 이해하는 데 도움이 됩니다.</p>
</section>
</section>
<section id="년-탄자니아-dhs" class="level2" data-number="9.6">
<h2 data-number="9.6" class="anchored" data-anchor-id="년-탄자니아-dhs"><span class="header-section-number">9.6</span> 1996년 탄자니아 DHS</h2>
<p>이제 두 가지 예시 중 첫 번째를 살펴보겠습니다. 인구 통계 및 건강 설문 조사(DHS)는 다른 데이터셋이 없을 수 있는 지역에서 데이터를 수집하는 데 중요한 역할을 합니다. 여기서는 1996년 탄자니아의 가구 인구에 대한 DHS 표를 정리하고 준비할 것입니다. 이 책에서 옹호하는 워크플로는 다음과 같습니다.</p>
<p><span class="math display">\[
\mbox{계획}\rightarrow\mbox{시뮬레이션}\rightarrow\mbox{획득}\rightarrow\mbox{탐색}\rightarrow\mbox{공유}
\]</span></p>
<p>우리는 연령대, 성별 및 도시/농촌 분포에 관심이 있습니다. 빠른 스케치는 <a href="#fig-tanzaniasketch와" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-tanzaniasketch와</span></a> 같을 수 있습니다.</p>
<div id="fig-tanzaniasketch" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-tanzaniasketch-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/09-tanzania_sketch.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-tanzaniasketch-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;9.6: 관심 있을 수 있는 데이터셋의 빠른 스케치
</figcaption>
</figure>
</div>
<p>그런 다음 데이터셋을 시뮬레이션할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">853</span>)</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>age_group <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">starter =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">19</span>) <span class="sc">|&gt;</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lower =</span> starter <span class="sc">*</span> <span class="dv">5</span>, <span class="at">upper =</span> starter <span class="sc">*</span> <span class="dv">5</span> <span class="sc">+</span> <span class="dv">4</span>) <span class="sc">|&gt;</span></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(string_sequence, lower, upper, <span class="at">sep =</span> <span class="st">"-"</span>) <span class="sc">|&gt;</span></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(string_sequence)</span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a>mean_value <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a>simulated_tanzania_dataset <span class="ot">&lt;-</span></span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_group =</span> age_group,</span>
<span id="cb85-13"><a href="#cb85-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">urban_male =</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="fu">length</span>(age_group), mean_value)),</span>
<span id="cb85-14"><a href="#cb85-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">urban_female =</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="fu">length</span>(age_group), mean_value)),</span>
<span id="cb85-15"><a href="#cb85-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">rural_male =</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="fu">length</span>(age_group), mean_value)),</span>
<span id="cb85-16"><a href="#cb85-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">rural_female =</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="fu">length</span>(age_group), mean_value)),</span>
<span id="cb85-17"><a href="#cb85-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_male =</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="fu">length</span>(age_group), mean_value)),</span>
<span id="cb85-18"><a href="#cb85-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_female =</span> <span class="fu">round</span>(<span class="fu">rnorm</span>(<span class="fu">length</span>(age_group), mean_value))</span>
<span id="cb85-19"><a href="#cb85-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb85-20"><a href="#cb85-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb85-21"><a href="#cb85-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">urban_total =</span> urban_male <span class="sc">+</span> urban_female,</span>
<span id="cb85-22"><a href="#cb85-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">rural_total =</span> rural_male <span class="sc">+</span> rural_female,</span>
<span id="cb85-23"><a href="#cb85-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_total =</span> total_male <span class="sc">+</span> total_female</span>
<span id="cb85-24"><a href="#cb85-24" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb85-25"><a href="#cb85-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-26"><a href="#cb85-26" aria-hidden="true" tabindex="-1"></a>simulated_tanzania_dataset</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 10
   age_group urban_male urban_female rural_male rural_female total_male
   &lt;chr&gt;          &lt;dbl&gt;        &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;      &lt;dbl&gt;
 1 0-4               10           10          9            9         11
 2 5-9               10            9          9           10          9
 3 10-14              8           11         11           11         10
 4 15-19              9           11         10            9         10
 5 20-24              9            8         11           10          9
 6 25-29             12            9         10           10         10
 7 30-34              9            8         10           10          8
 8 35-39             10           11          8           10         10
 9 40-44              9            9          9           10         11
10 45-49              9           10         11           10         11
11 50-54             12           10          9           13         10
12 55-59              9           11         10            9          9
13 60-64             10            9         11           11         10
14 65-69             10           10         10           10         11
15 70-74             10           10         12            9          8
16 75-79             10            8         10            9         10
17 80-84             10            9          9           10          9
18 85-89             10            9         10           11         11
19 90-94             11           11         11           10         11
20 95-99             10           10         10           11         11
# ℹ 4 more variables: total_female &lt;dbl&gt;, urban_total &lt;dbl&gt;, rural_total &lt;dbl&gt;,
#   total_total &lt;dbl&gt;</code></pre>
</div>
</div>
<p>이 시뮬레이션을 기반으로 우리는 다음을 테스트하는 데 관심이 있습니다.</p>
<ol type="a">
<li>숫자만 있는지 여부.</li>
<li>도시 및 농촌의 합계가 총 열과 일치하는지 여부.</li>
<li>연령대의 합계가 총계와 일치하는지 여부.</li>
</ol>
<p>데이터를 다운로드하는 것으로 시작합니다.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">url =</span> <span class="st">"https://dhsprogram.com/pubs/pdf/FR83/FR83.pdf"</span>,</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">destfile =</span> <span class="st">"1996_Tanzania_DHS.pdf"</span>,</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">mode =</span> <span class="st">"wb"</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이 경우 우리는 PDF의 33페이지에 있는 표 2.1에 관심이 있습니다(<a href="#fig-tanzanian-dhs" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-tanzanian-dhs</span></a>).</p>
<div id="fig-tanzanian-dhs" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-tanzanian-dhs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/tanzanian_dhs.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-tanzanian-dhs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;9.7: 1996년 탄자니아 DHS의 관심 페이지
</figcaption>
</figure>
</div>
<p><code>stringi</code>의 <code>stri_split_lines()</code>를 사용하여 해당 특정 페이지에 초점을 맞춥니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Bob Rudis에서: https://stackoverflow.com/a/47793617</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>tanzania_dhs_page_33 <span class="ot">&lt;-</span> <span class="fu">stri_split_lines</span>(tanzania_dhs[[<span class="dv">33</span>]])[[<span class="dv">1</span>]]</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>먼저 모든 작성된 내용을 제거하고 표에 초점을 맞추고 싶습니다. 그런 다음 익숙한 <code>tidyverse</code> 접근 방식을 사용할 수 있도록 티블로 변환하고 싶습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>tanzania_dhs_page_33_only_data <span class="ot">&lt;-</span> tanzania_dhs_page_33[<span class="dv">31</span><span class="sc">:</span><span class="dv">55</span>]</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>tanzania_dhs_raw <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">all =</span> tanzania_dhs_page_33_only_data)</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>tanzania_dhs_raw</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>모든 열이 하나로 축소되었으므로 분리해야 합니다. “Age group”을 “Age-group”으로 변경해야 합니다. 왜냐하면 그것을 분리하고 싶지 않기 때문입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 열 분리</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>tanzania_dhs_separated <span class="ot">&lt;-</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  tanzania_dhs_raw <span class="sc">|&gt;</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">all =</span> <span class="fu">str_squish</span>(all)) <span class="sc">|&gt;</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">all =</span> <span class="fu">str_replace</span>(all, <span class="st">"Age group"</span>, <span class="st">"Age-group"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(</span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> all,</span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">into =</span> <span class="fu">c</span>(</span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>      <span class="st">"age_group"</span>, </span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a>      <span class="st">"male_urban"</span>, <span class="st">"female_urban"</span>, <span class="st">"total_urban"</span>,</span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a>      <span class="st">"male_rural"</span>, <span class="st">"female_rural"</span>, <span class="st">"total_rural"</span>,</span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a>      <span class="st">"male_total"</span>, <span class="st">"female_total"</span>, <span class="st">"total_total"</span></span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb90-14"><a href="#cb90-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">" "</span>,</span>
<span id="cb90-15"><a href="#cb90-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove =</span> <span class="cn">TRUE</span>,</span>
<span id="cb90-16"><a href="#cb90-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"right"</span>,</span>
<span id="cb90-17"><a href="#cb90-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">extra =</span> <span class="st">"drop"</span></span>
<span id="cb90-18"><a href="#cb90-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb90-19"><a href="#cb90-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-20"><a href="#cb90-20" aria-hidden="true" tabindex="-1"></a>tanzania_dhs_separated</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이제 행과 열을 정리해야 합니다. 우리가 제거해야 할 것을 파악하는 데 도움이 되는 유용한 “음의 공간” 접근 방식은 우리가 원하는 모든 것을 일시적으로 제거했을 때 남는 것을 살펴보는 것입니다. 남는 것은 제거 대상이 됩니다. 이 경우 우리는 열에 숫자가 포함되기를 원한다는 것을 알고 있으므로 문자열에서 숫자로 변환하는 데 방해가 될 수 있는 모든 것을 제거하기 위해 모든 열에서 숫자 문자를 제거합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>tanzania_dhs_separated <span class="sc">|&gt;</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">str_remove_all</span>(., <span class="st">"[:digit:]"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이 경우 일부 쉼표와 세미콜론이 잘못 소수점으로 간주되었음을 알 수 있습니다. 또한 일부 물결표와 빈 줄을 제거해야 합니다. 그 후 올바른 클래스를 적용할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>tanzania_dhs_cleaned <span class="ot">&lt;-</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>  tanzania_dhs_separated <span class="sc">|&gt;</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">6</span><span class="sc">:</span><span class="dv">22</span>, <span class="dv">24</span>, <span class="dv">25</span>) <span class="sc">|&gt;</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">str_replace_all</span>(., <span class="st">"[,;]"</span>, <span class="st">"."</span>))) <span class="sc">|&gt;</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_group =</span> <span class="fu">str_replace</span>(age_group, <span class="st">"20-~"</span>, <span class="st">"20-24"</span>),</span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_group =</span> <span class="fu">str_replace</span>(age_group, <span class="st">"40-~"</span>, <span class="st">"40-44"</span>),</span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">male_rural =</span> <span class="fu">str_replace</span>(male_rural, <span class="st">"14.775"</span>, <span class="st">"14775"</span>)</span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="fu">c</span>(</span>
<span id="cb92-11"><a href="#cb92-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"male"</span>, <span class="st">"female"</span>, <span class="st">"total"</span></span>
<span id="cb92-12"><a href="#cb92-12" aria-hidden="true" tabindex="-1"></a>  )),</span>
<span id="cb92-13"><a href="#cb92-13" aria-hidden="true" tabindex="-1"></a>  as.numeric))</span>
<span id="cb92-14"><a href="#cb92-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-15"><a href="#cb92-15" aria-hidden="true" tabindex="-1"></a>tanzania_dhs_cleaned</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>마지막으로, 구성 부분의 합계가 총계와 일치하는지 확인할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>tanzania_dhs_cleaned <span class="sc">|&gt;</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>age_group <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Total"</span>, <span class="st">"Number"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">sum =</span> <span class="fu">sum</span>(total_total))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이 경우 몇 십분의 1퍼센트 포인트 차이가 있음을 알 수 있습니다.</p>
</section>
<section id="년-케냐-인구-조사" class="level2" data-number="9.7">
<h2 data-number="9.7" class="anchored" data-anchor-id="년-케냐-인구-조사"><span class="header-section-number">9.7</span> 2019년 케냐 인구 조사</h2>
<p>마지막 예시로, 더 광범위한 상황을 고려하고 2019년 케냐 인구 조사에서 일부 데이터를 수집, 정리 및 준비해 봅시다. 나이로비에 대한 성별 단일 연령별 집계 데이터셋을 만드는 데 초점을 맞출 것입니다.</p>
<p>2019년 케냐 인구 조사의 연령, 성별 및 행정 단위별 인구 분포는 <a href="https://www.knbs.or.ke/?wpdmpro=2019-kenya-population-and-housing-census-volume-iii-distribution-of-population-by-age-sex-and-administrative-units">여기</a>에서 다운로드할 수 있습니다. 이 PDF 형식은 특정 결과를 쉽게 찾아볼 수 있게 하지만, 데이터를 모델링하려는 경우에는 그다지 유용하지 않습니다. 그렇게 하려면 이 PDF를 분석할 수 있는 정돈된 데이터셋으로 변환해야 합니다.</p>
<section id="수집-및-정리" class="level3" data-number="9.7.1">
<h3 data-number="9.7.1" class="anchored" data-anchor-id="수집-및-정리"><span class="header-section-number">9.7.1</span> 수집 및 정리</h3>
<p>먼저 2019년 케냐 인구 조사의 PDF를 다운로드하여 읽어들여야 합니다.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>census_url <span class="ot">&lt;-</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://www.knbs.or.ke/download/2019-kenya-population-and-"</span>,</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"housing-census-volume-iii-distribution-of-population-by-age-"</span>,</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"sex-and-administrative-units/?wpdmdl=5729&amp;refresh="</span>,</span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"620561f1ce3ad1644519921"</span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(</span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">url =</span> census_url,</span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">destfile =</span> <span class="st">"2019_Kenya_census.pdf"</span>,</span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">mode =</span> <span class="st">"wb"</span></span>
<span id="cb94-13"><a href="#cb94-13" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이 예시에서는 나이로비에 대한 PDF 페이지에 초점을 맞출 것입니다(<a href="#fig-examplekenyancensuspage" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-examplekenyancensuspage</span></a>).</p>
<div id="fig-examplekenyancensuspage" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-examplekenyancensuspage-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/09-Kenya_Nairobi.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-examplekenyancensuspage-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;9.8: 나이로비에 대한 2019년 케냐 인구 조사 페이지
</figcaption>
</figure>
</div>
<section id="직사각형으로-만들기" class="level4" data-number="9.7.1.1">
<h4 data-number="9.7.1.1" class="anchored" data-anchor-id="직사각형으로-만들기"><span class="header-section-number">9.7.1.1</span> 직사각형으로 만들기</h4>
<p>첫 번째 과제는 데이터셋을 더 쉽게 조작할 수 있는 형식으로 만드는 것입니다. 페이지의 관련 부분을 추출할 것입니다. 이 경우 나이로비에 대한 데이터는 410페이지에 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 관심 페이지에 초점</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>just_nairobi <span class="ot">&lt;-</span> <span class="fu">stri_split_lines</span>(kenya_census[[<span class="dv">410</span>]])[[<span class="dv">1</span>]]</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 빈 줄 제거</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>just_nairobi <span class="ot">&lt;-</span> just_nairobi[just_nairobi <span class="sc">!=</span> <span class="st">""</span>]</span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 페이지 상단의 제목, 머리글 및 기타 내용 제거</span></span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a>just_nairobi <span class="ot">&lt;-</span> just_nairobi[<span class="dv">5</span><span class="sc">:</span><span class="fu">length</span>(just_nairobi)]</span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 페이지 하단의 페이지 번호 및 기타 내용 제거</span></span>
<span id="cb95-11"><a href="#cb95-11" aria-hidden="true" tabindex="-1"></a>just_nairobi <span class="ot">&lt;-</span> just_nairobi[<span class="dv">1</span><span class="sc">:</span><span class="dv">62</span>]</span>
<span id="cb95-12"><a href="#cb95-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-13"><a href="#cb95-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 티블로 변환</span></span>
<span id="cb95-14"><a href="#cb95-14" aria-hidden="true" tabindex="-1"></a>demography_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">all =</span> just_nairobi)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이 시점에서 데이터는 티블에 있습니다. 이를 통해 익숙한 <code>dplyr</code> 동사를 사용할 수 있습니다. 특히 열을 분리하고 싶습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>demography_data <span class="ot">&lt;-</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  demography_data <span class="sc">|&gt;</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">all =</span> <span class="fu">str_squish</span>(all)) <span class="sc">|&gt;</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">all =</span> <span class="fu">str_replace</span>(all, <span class="st">"10 -14"</span>, <span class="st">"10-14"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">all =</span> <span class="fu">str_replace</span>(all, <span class="st">"Not Stated"</span>, <span class="st">"NotStated"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 두 열 설정 처리</span></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(</span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> all,</span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">into =</span> <span class="fu">c</span>(</span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>      <span class="st">"age"</span>, <span class="st">"male"</span>, <span class="st">"female"</span>, <span class="st">"total"</span>,</span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a>      <span class="st">"age_2"</span>, <span class="st">"male_2"</span>, <span class="st">"female_2"</span>, <span class="st">"total_2"</span></span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb96-13"><a href="#cb96-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">" "</span>,</span>
<span id="cb96-14"><a href="#cb96-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove =</span> <span class="cn">TRUE</span>,</span>
<span id="cb96-15"><a href="#cb96-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"right"</span>,</span>
<span id="cb96-16"><a href="#cb96-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">extra =</span> <span class="st">"drop"</span></span>
<span id="cb96-17"><a href="#cb96-17" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>현재는 나란히 있습니다. 대신 아래에 추가해야 합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>demography_data_long <span class="ot">&lt;-</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbind</span>(</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>    demography_data <span class="sc">|&gt;</span> <span class="fu">select</span>(age, male, female, total),</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>    demography_data <span class="sc">|&gt;</span></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">select</span>(age_2, male_2, female_2, total_2) <span class="sc">|&gt;</span></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rename</span>(</span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">age =</span> age_2,</span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">male =</span> male_2,</span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">female =</span> female_2,</span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">total =</span> total_2</span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb97-12"><a href="#cb97-12" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># NA 행이 하나 있으므로 제거합니다.</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>demography_data_long <span class="ot">&lt;-</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>  demography_data_long <span class="sc">|&gt;</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">remove_empty</span>(<span class="at">which =</span> <span class="fu">c</span>(<span class="st">"rows"</span>))</span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a>demography_data_long</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 123 × 4
   age   male      female    total    
   &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;    
 1 Total 2,192,452 2,204,376 4,396,828
 2 0     57,265    56,523    113,788  
 3 1     56,019    54,601    110,620  
 4 2     52,518    51,848    104,366  
 5 3     51,115    51,027    102,142  
 6 4     47,182    46,889    94,071   
 7 0-4   264,099   260,888   524,987  
 8 5     45,203    44,711    89,914   
 9 6     43,635    44,226    87,861   
10 7     43,507    43,655    87,162   
# ℹ 113 more rows</code></pre>
</div>
</div>
<p>직사각형 형식으로 만들었으므로 이제 데이터셋을 유용하게 만들기 위해 정리해야 합니다.</p>
</section>
<section id="타당성" class="level4" data-number="9.7.1.2">
<h4 data-number="9.7.1.2" class="anchored" data-anchor-id="타당성"><span class="header-section-number">9.7.1.2</span> 타당성</h4>
<p>타당성을 얻으려면 여러 단계가 필요합니다. 첫 번째 단계는 숫자를 문자 대신 실제 숫자로 만드는 것입니다. 유형을 변환하기 전에 숫자가 아닌 모든 것을 제거해야 합니다. 그렇지 않으면 해당 셀이 NA로 변환됩니다. 먼저 숫자가 아닌 모든 값을 식별하여 제거할 수 있으며, <code>distinct()</code>는 특히 유용합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>demography_data_long <span class="sc">|&gt;</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(male, female, total) <span class="sc">|&gt;</span></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">str_remove_all</span>(., <span class="st">"[:digit:]"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  male  female total
  &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;
1 ",,"  ",,"   ",," 
2 ","   ","    ","  
3 ""    ","    ","  
4 ""    ""     ","  
5 ""    ""     ""   </code></pre>
</div>
</div>
<p>쉼표를 제거해야 합니다. 여기서 <code>janitor</code>를 사용할 수도 있지만, <code>janitor</code>(및 다른 패키지)가 원하는 방식으로 처리하지 못하는 이상한 것들이 있을 수 있으므로 적어도 먼저 무슨 일이 일어나고 있는지 살펴보는 것이 좋습니다. 그럼에도 불구하고, 제거해야 할 모든 것을 식별한 후 실제 제거를 수행하고 숫자 문자열 열을 정수로 변환할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>demography_data_long <span class="ot">&lt;-</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>  demography_data_long <span class="sc">|&gt;</span></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(male, female, total), <span class="sc">~</span> <span class="fu">str_remove_all</span>(., <span class="st">","</span>))) <span class="sc">|&gt;</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(male, female, total), <span class="sc">~</span> <span class="fu">as.integer</span>(.)))</span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>demography_data_long</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 123 × 4
   age      male  female   total
   &lt;chr&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;
 1 Total 2192452 2204376 4396828
 2 0       57265   56523  113788
 3 1       56019   54601  110620
 4 2       52518   51848  104366
 5 3       51115   51027  102142
 6 4       47182   46889   94071
 7 0-4    264099  260888  524987
 8 5       45203   44711   89914
 9 6       43635   44226   87861
10 7       43507   43655   87162
# ℹ 113 more rows</code></pre>
</div>
</div>
</section>
<section id="내부-일관성" class="level4" data-number="9.7.1.3">
<h4 data-number="9.7.1.3" class="anchored" data-anchor-id="내부-일관성"><span class="header-section-number">9.7.1.3</span> 내부 일관성</h4>
<p></p>
<p>인구 조사는 이미 연령대별로 일부 작업을 수행했지만, 우리는 단일 연령별 집계에만 초점을 맞추고 싶습니다. 따라서 연령 유형에 대한 플래그를 추가할 것입니다. 즉, “0세에서 5세”와 같은 연령대 또는 “1”과 같은 단일 연령입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>demography_data_long <span class="ot">&lt;-</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>  demography_data_long <span class="sc">|&gt;</span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_type =</span> <span class="fu">if_else</span>(<span class="fu">str_detect</span>(age, <span class="st">"-"</span>), </span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>                       <span class="st">"age-group"</span>, </span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>                       <span class="st">"single-year"</span>),</span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_type =</span> <span class="fu">if_else</span>(<span class="fu">str_detect</span>(age, <span class="st">"Total"</span>), </span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a>                       <span class="st">"age-group"</span>, </span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a>                       age_type)</span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>현재 연령은 문자 변수입니다. 여기서 결정을 내려야 합니다. 문자 변수이기를 원하지 않습니다(그래프가 제대로 그려지지 않기 때문입니다). 그러나 숫자이기를 원하지도 않습니다. 왜냐하면 <code>total</code>과 <code>100+</code>가 있기 때문입니다. 지금은 그냥 요인으로 만들 것이며, 적어도 멋지게 그래프로 그릴 수 있을 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>demography_data_long <span class="ot">&lt;-</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>  demography_data_long <span class="sc">|&gt;</span></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">age =</span> <span class="fu">as_factor</span>(age)</span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="확인-및-테스트-1" class="level3" data-number="9.7.2">
<h3 data-number="9.7.2" class="anchored" data-anchor-id="확인-및-테스트-1"><span class="header-section-number">9.7.2</span> 확인 및 테스트</h3>
<p>데이터를 수집하고 정리했으므로 몇 가지 확인을 실행하고 싶습니다. 데이터 형식에 따라 “total”이 “male”과 “female”의 합계인지 확인할 수 있습니다. 이는 사용 가능한 두 가지 성별 범주뿐입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>demography_data_long <span class="sc">|&gt;</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">check_sum =</span> male <span class="sc">+</span> female,</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">totals_match =</span> <span class="fu">if_else</span>(total <span class="sc">==</span> check_sum, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(totals_match <span class="sc">==</span> <span class="dv">0</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 7
# ℹ 7 variables: age &lt;fct&gt;, male &lt;int&gt;, female &lt;int&gt;, total &lt;int&gt;,
#   age_type &lt;chr&gt;, check_sum &lt;int&gt;, totals_match &lt;dbl&gt;</code></pre>
</div>
</div>
<p>마지막으로, 단일 연령 집계가 연령대와 일치하는지 확인하고 싶습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>demography_data_long <span class="sc">|&gt;</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_groups =</span> <span class="fu">if_else</span>(age_type <span class="sc">==</span> <span class="st">"age-group"</span>, </span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>                              age, </span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>                              <span class="cn">NA_character_</span>)) <span class="sc">|&gt;</span></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill</span>(age_groups, <span class="at">.direction =</span> <span class="st">"up"</span>) <span class="sc">|&gt;</span></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">group_sum =</span> <span class="fu">sum</span>(total),</span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">group_sum =</span> group_sum <span class="sc">/</span> <span class="dv">2</span>,</span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">difference =</span> total <span class="sc">-</span> group_sum,</span>
<span id="cb108-10"><a href="#cb108-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">.by =</span> <span class="fu">c</span>(age_groups)</span>
<span id="cb108-11"><a href="#cb108-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb108-12"><a href="#cb108-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age_type <span class="sc">==</span> <span class="st">"age-group"</span> <span class="sc">&amp;</span> age_groups <span class="sc">!=</span> <span class="st">"Total"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb108-13"><a href="#cb108-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
  age     male female  total age_type  age_groups group_sum difference
  &lt;fct&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt; &lt;chr&gt;     &lt;chr&gt;          &lt;dbl&gt;      &lt;dbl&gt;
1 0-4   264099 260888 524987 age-group 0-4           524987          0
2 5-9   215230 217482 432712 age-group 5-9           432712          0
3 10-14 185008 193542 378550 age-group 10-14         378550          0
4 15-19 159098 192755 351853 age-group 15-19         351853          0
5 20-24 249534 313485 563019 age-group 20-24         563019          0
6 25-29 282703 300845 583548 age-group 25-29         583548          0</code></pre>
</div>
</div>
</section>
<section id="정리" class="level3" data-number="9.7.3">
<h3 data-number="9.7.3" class="anchored" data-anchor-id="정리"><span class="header-section-number">9.7.3</span> 정리</h3>
<p>이제 모든 것이 잘 보인다고 합리적으로 확신했으므로, 정돈된 형식으로 변환할 수 있습니다. 이렇게 하면 작업하기가 더 쉬워집니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>demography_data_tidy <span class="ot">&lt;-</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>  demography_data_long <span class="sc">|&gt;</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="sc">~</span><span class="fu">paste0</span>(., <span class="st">"_total"</span>), male<span class="sc">:</span>total) <span class="sc">|&gt;</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">contains</span>(<span class="st">"_total"</span>), </span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"type"</span>, </span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"number"</span>) <span class="sc">|&gt;</span></span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(</span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> type,</span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"gender"</span>, <span class="st">"part_of_area"</span>),</span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"_"</span></span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb110-12"><a href="#cb110-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, age_type, gender, number)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이 데이터셋을 정리하는 원래 목적은 <span class="citation" data-cites="alexander2021bayesian에서">(<a href="#ref-alexander2021bayesian에서" role="doc-biblioref"><strong>alexander2021bayesian에서?</strong></a>)</span> 사용되는 표를 만드는 것이었습니다. 이 데이터셋으로 돌아갈 것이지만, 이 모든 것을 종합하기 위해 나이로비에 대한 성별 단일 연령별 집계 그래프를 만들고 싶을 수 있습니다(<a href="#fig-monicasnairobigraph" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-monicasnairobigraph</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>demography_data_tidy <span class="sc">|&gt;</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age_type <span class="sc">==</span> <span class="st">"single-year"</span>) <span class="sc">|&gt;</span></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, gender, number) <span class="sc">|&gt;</span></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(gender <span class="sc">!=</span> <span class="st">"total"</span>) <span class="sc">|&gt;</span></span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> number, <span class="at">fill =</span> gender)) <span class="sc">+</span></span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> number, <span class="at">fill =</span> gender), </span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> comma) <span class="sc">+</span></span>
<span id="cb111-9"><a href="#cb111-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">99</span>, <span class="at">by =</span> <span class="dv">5</span>), <span class="st">"100+"</span>)) <span class="sc">+</span></span>
<span id="cb111-10"><a href="#cb111-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb111-11"><a href="#cb111-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>) <span class="sc">+</span></span>
<span id="cb111-12"><a href="#cb111-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb111-13"><a href="#cb111-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"수"</span>,</span>
<span id="cb111-14"><a href="#cb111-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"연령"</span>,</span>
<span id="cb111-15"><a href="#cb111-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"성별"</span>,</span>
<span id="cb111-16"><a href="#cb111-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"데이터 출처: 2019년 케냐 인구 조사"</span></span>
<span id="cb111-17"><a href="#cb111-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb111-18"><a href="#cb111-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb111-19"><a href="#cb111-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-monicasnairobigraph" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-monicasnairobigraph-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="09-clean_and_prepare_ko_files/figure-html/fig-monicasnairobigraph-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-monicasnairobigraph-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;9.9: 2019년 케냐 인구 조사를 기반으로 한 나이로비의 연령 및 성별 분포
</figcaption>
</figure>
</div>
</div>
</div>
<p><a href="#fig-monicasnairobigraph에서" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-monicasnairobigraph에서</span></a> 연령 집중 현상, 남녀 출생 비율의 약간의 차이, 15세에서 25세 사이의 상당한 차이를 포함하여 다양한 특징이 분명합니다.</p>
<p>마지막으로, 더 유익한 이름을 사용하고 싶을 수 있습니다. 예를 들어, 이전 케냐 데이터 예시에서는 다음과 같은 열 이름이 있습니다: “area”, “age”, “gender”, “number”. 열 이름을 계약으로 사용한다면 다음과 같을 수 있습니다: “chr_area”, “fctr_group_age”, “chr_group_gender”, “int_group_count”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>column_names_as_contracts <span class="ot">&lt;-</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>  demography_data_tidy <span class="sc">|&gt;</span></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age_type <span class="sc">==</span> <span class="st">"single-year"</span>) <span class="sc">|&gt;</span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, gender, number) <span class="sc">|&gt;</span></span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"fctr_group_age"</span> <span class="ot">=</span> <span class="st">"age"</span>,</span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"chr_group_gender"</span> <span class="ot">=</span> <span class="st">"gender"</span>,</span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"int_group_count"</span> <span class="ot">=</span> <span class="st">"number"</span></span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>pointblank</code>를 사용하여 테스트를 설정할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>agent <span class="ot">&lt;-</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">create_agent</span>(<span class="at">tbl =</span> column_names_as_contracts) <span class="sc">|&gt;</span></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">col_is_character</span>(<span class="at">columns =</span> <span class="fu">vars</span>(chr_group_gender)) <span class="sc">|&gt;</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">col_is_factor</span>(<span class="at">columns =</span> <span class="fu">vars</span>(fctr_group_age)) <span class="sc">|&gt;</span></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">col_is_integer</span>(<span class="at">columns =</span> <span class="fu">vars</span>(int_group_count)) <span class="sc">|&gt;</span></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">col_vals_in_set</span>(</span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> chr_group_gender,</span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">set =</span> <span class="fu">c</span>(<span class="st">"male"</span>, <span class="st">"female"</span>, <span class="st">"total"</span>)</span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">interrogate</span>()</span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a>agent</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="연습-문제" class="level2" data-number="9.8">
<h2 data-number="9.8" class="anchored" data-anchor-id="연습-문제"><span class="header-section-number">9.8</span> 연습 문제</h2>
<section id="연습" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="연습">연습</h3>
<ol type="1">
<li><em>(계획)</em> 다음 시나리오를 고려하십시오: <em>두 명의 직원이 있는 상점을 관리하고 있으며 그들의 효율성을 모델링하는 데 관심이 있습니다. 상점은 오전 9시에 열고 오후 5시에 닫습니다. 직원의 효율성은 약간 상관 관계가 있으며, 시간당 서비스하는 고객 수로 정의됩니다. 음의 상관 관계 또는 양의 상관 관계를 가정하는지 명확히 하십시오.</em> 데이터셋이 어떻게 생겼을지 스케치한 다음, 모든 관측치를 보여주기 위해 만들 수 있는 그래프를 스케치하십시오.</li>
<li><em>(시뮬레이션)</em> 설명된 시나리오를 더 고려하고 상황을 시뮬레이션하십시오. 시뮬레이션된 데이터를 기반으로 5개의 테스트를 포함하십시오. 코드가 포함된 GitHub Gist 링크를 제출하십시오.</li>
<li><em>(수집)</em> 그러한 데이터셋의 가능한 출처를 설명하십시오.</li>
<li><em>(탐색)</em> <code>ggplot2</code>를 사용하여 1단계에서 스케치한 그래프를 시뮬레이션된 데이터를 사용하여 만드십시오. 코드가 포함된 GitHub Gist 링크를 제출하십시오.</li>
<li><em>(소통)</em> 자신이 한 일에 대해 두 단락을 작성하십시오.</li>
</ol>
</section>
<section id="퀴즈" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="퀴즈">퀴즈</h3>
<ol type="1">
<li>“some_words”라는 문자 변수에 “You know what”이라는 하나의 관측치가 있는 <code>sayings</code>라는 데이터셋이 있다면, 다음 중 어떤 것이 그것을 구성 단어로 분리할까요 (하나 선택)?
<ol type="a">
<li><code>separate(data = sayings, col = some_words, into = c("one", "two", "three"), sep = " ")</code></li>
<li><code>split(data = sayings, col = some_words, into = c("one", "two", "three"), sep = " ")</code></li>
<li><code>divide(data = sayings, col = some_words, into = c("one", "two", "three"), sep = " ")</code></li>
<li><code>part(data = sayings, col = some_words, into = c("one", "two", "three"), sep = " ")</code></li>
<li><code>unattach(data = sayings, col = some_words, into = c("one", "two", "three"), sep = " ")</code></li>
</ol></li>
<li>다음은 정돈된 데이터의 예입니까?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">"이안"</span>, <span class="st">"패트리샤"</span>, <span class="st">"빌"</span>, <span class="st">"카렌"</span>),</span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">age_group =</span> <span class="fu">c</span>(<span class="st">"18-29"</span>, <span class="st">"30-44"</span>, <span class="st">"45-60"</span>, <span class="st">"60+"</span>),</span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<pre><code>a.  예
b. 아니오</code></pre>
<ol start="3" type="1">
<li>“lemons”를 “lemonade”로 변경하는 함수는 무엇입니까?
<ol type="a">
<li><code>str_replace(string = "lemons", pattern = "lemons", replacement = "lemonade")</code></li>
<li><code>chr_replace(string = "lemons", pattern = "lemons", replacement = "lemonade")</code></li>
<li><code>str_change(string = "lemons", pattern = "lemons", replacement = "lemonade")</code></li>
<li><code>chr_change(string = "lemons", pattern = "lemons", replacement = "lemonade")</code></li>
</ol></li>
<li>연령을 다룰 때 변수에 대한 바람직한 클래스는 무엇입니까 (모두 선택하십시오)?
<ol type="a">
<li>정수</li>
<li>행렬</li>
<li>숫자</li>
</ol></li>
<li>다음 독일 도시를 고려하십시오: “베를린”, “함부르크”, “뮌헨”, “쾰른”, “프랑크푸르트”, “로스토크”. <code>testthat</code>를 사용하여 “german_cities” 변수가 이러한 도시만 포함한다고 주장하는 데이터셋이 있다면 적용할 수 있는 세 가지 테스트를 정의하십시오. GitHub Gist 링크를 제출하십시오.</li>
<li>데이터 과학에서 날짜에 가장 적합한 형식은 무엇입까?
<ol type="a">
<li>YYYY-DD-MM</li>
<li>YYYY-MM-DD</li>
<li>DD-MM-YYYY</li>
<li>MM-MM-YYYY</li>
</ol></li>
<li>다음 중 속하지 않을 가능성이 있는 것은 무엇입니까? <code>c(15.9, 14.9, 16.6, 15.8, 16.7, 17.9, I2.6, 11.5, 16.2, 19.5, 15.0)</code></li>
<li><span class="citation" data-cites="jsfcodingstandards">Lockheed Martin (<a href="#ref-jsfcodingstandards" role="doc-biblioref">2005</a>, p.&nbsp;25)</span>의 “AV 규칙 48”과 관련하여 다음 중 식별자를 다르게 할 수 없는 것은 무엇입니까 (모두 선택하십시오)?
<ol type="a">
<li>대소문자 혼합만</li>
<li>밑줄 문자의 존재/부재</li>
<li>문자 “O”와 숫자 “0” 또는 문자 “D”의 교환</li>
<li>문자 “I”와 숫자 “1” 또는 문자 “l”의 교환</li>
</ol></li>
<li><span class="citation" data-cites="Preece1981과">(<a href="#ref-Preece1981과" role="doc-biblioref"><strong>Preece1981과?</strong></a>)</span> 관련하여 마지막 숫자가 유익할 수 있는 두 가지 방법을 논의하십시오. 각각에 대해 최소 한 단락을 작성하고 예시를 포함하십시오.</li>
</ol>
</section>
<section id="수업-활동" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="수업-활동">수업 활동</h3>
<ul>
<li>잘 아는 주제를 선택한 다음:
<ul>
<li>R 스크립트에서 이상적인 데이터셋을 재현 가능하게 시뮬레이션하십시오.</li>
<li>다른 R 스크립트에서 5개의 테스트를 작성하십시오.</li>
<li>데이터셋을 생성하는 코드(테스트는 아님)를 GitHub Gist를 통해 다른 사람에게 제공하십시오. 그들이 코드에서 의도적으로 세 가지 다른 데이터 문제를 만들도록 한 다음 다시 보내도록 하십시오(일관성 없는 날짜 형식, 결측값 추가, 음수 값 추가, 소수점 변경 등).</li>
<li>테스트가 문제를 식별합니까?</li>
</ul></li>
<li>시뮬레이션의 도움을 받아 다음 주장을 논의하십시오: “이 집은 문자열이 요인보다 낫다고 믿습니다.”<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></li>
<li>소득에 대한 데이터를 얻었습니다. 소득 “999999”를 가진 응답자가 많다면 왜 걱정해야 할까요?</li>
<li>새 R 프로젝트를 만들고 R 스크립트를 사용하여 원본 “Adélie penguin data”<span class="citation" data-cites="penguinsoriginaldata">(<a href="#ref-penguinsoriginaldata" role="doc-biblioref">Palmer Station Antarctica LTER 와/과 Gorman, Kristen 2020</a>)</span>를 다운로드하고 로드한 다음(이를 돕기 위한 일부 코드<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>가 아래에 포함되어 있습니다):
<ul>
<li><code>rename()</code>을 사용하여 이름을 개선하십시오.</li>
<li>폴더를 GitHub 리포지토리에 추가하십시오.</li>
<li>리포지토리를 다른 학생과 교환하십시오.</li>
<li>이름이 개선될 수 있는 두 가지 점에 대해 GitHub 이슈를 만드십시오.</li>
<li><code>palmerpenguins::penguins</code>와 비교하여 이름이 어떻게 다른지 논의하십시오.</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>raw_penguin_data <span class="ot">&lt;-</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">"https://portal.edirepository.org/nis/dataviewer?packageid=knb-lter-pal.219.5&amp;entityid=002f3893385f710df69eeebe893144ff"</span>,</span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><code>anscombe</code>를 사용하여 Anscombe의 콰르텟의 정돈된 버전을 생성하십시오.</li>
<li>미국 일반 사회 조사(US General Social Survey)는 “모름”을 어떻게 코딩합니까?</li>
<li>결측 데이터를 코딩하는 각 옵션의 장단점을 논의하십시오.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">income_1 =</span> <span class="fu">c</span>(<span class="dv">88515</span>, <span class="dv">103608</span>, <span class="sc">-</span><span class="dv">99</span>, <span class="dv">87644</span>, <span class="dv">118279</span>, <span class="dv">107342</span>, <span class="dv">97300</span>, <span class="dv">97226</span>, <span class="dv">73367</span>, <span class="dv">101528</span>),</span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">income_2 =</span> <span class="fu">c</span>(<span class="dv">88515</span>, <span class="dv">103608</span>, <span class="dv">102582</span>, <span class="dv">87644</span>, <span class="dv">118279</span>, <span class="dv">107342</span>, <span class="st">"missing"</span>, <span class="dv">97226</span>, <span class="dv">73367</span>, <span class="dv">101528</span>),</span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">income_3 =</span> <span class="fu">c</span>(<span class="dv">999999</span>, <span class="dv">103608</span>, <span class="dv">102582</span>, <span class="dv">87644</span>, <span class="dv">118279</span>, <span class="dv">107342</span>, <span class="dv">97300</span>, <span class="dv">97226</span>, <span class="dv">73367</span>, <span class="dv">101528</span>),</span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">income_4 =</span> <span class="fu">c</span>(<span class="dv">88515</span>, <span class="dv">103608</span>, <span class="dv">102582</span>, <span class="dv">87644</span>, <span class="dv">0</span>, <span class="dv">107342</span>, <span class="dv">97300</span>, <span class="dv">97226</span>, <span class="dv">73367</span>, <span class="dv">101528</span>),</span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">income_5 =</span> <span class="fu">c</span>(<span class="dv">88515</span>, <span class="dv">103608</span>, <span class="dv">102582</span>, <span class="dv">87644</span>, <span class="dv">118279</span>, <span class="dv">107342</span>, <span class="dv">97300</span>, <span class="dv">97226</span>, <span class="dv">73367</span>, <span class="cn">NA_integer_</span>)</span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>결측 데이터는 데이터셋에서 어떻게 코딩되어야 한다고 생각하십니까?</li>
<li>새 R 프로젝트를 사용하여 관심 있는 도시에 대해:<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a>
<ul>
<li><a href="http://justicetechlab.org/shotspotter-data/">여기</a>에서 ShotSpotter 데이터셋을 다운로드하고 데이터셋을 정리하는 재현 가능한 코드를 작성하십시오.</li>
<li>코드를 GitHub에 추가하십시오.</li>
<li>수업의 다른 학생과 리포지토리를 교환하십시오. 그들은 당신의 데이터셋을 사용하여 그래프를 만들기 위한 풀 리퀘스트를 해야 합니다.</li>
</ul></li>
<li>ImageNet 데이터셋을 가져와 무작위 이미지 10개를 엽니다. 자신의 레이블을 적용하십시오. 자신의 레이블이 실제 레이블과 어느 정도 일치합니까? 이 데이터셋으로 훈련된 모델의 결과에 미치는 영향은 무엇입니까?</li>
<li>세대 간 부를 이해하는 데 관심이 있다고 가정해 보십시오. 이 중 한 가지 측면은 오늘날 사람들의 교육 결과와 100년 전 다른 나라 사람들의 교육 결과를 연결하는 것입니다. 데이터셋을 일관되게 만들고, 선택한 이유를 문서화하십시오.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">period =</span> <span class="fu">c</span>(<span class="dv">1901</span>, <span class="dv">1901</span>, <span class="dv">1901</span>, <span class="dv">2023</span>, <span class="dv">2023</span>, <span class="dv">2023</span>),</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">country =</span> <span class="fu">c</span>(</span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"프로이센"</span>,</span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"오스트리아-헝가리 제국"</span>,</span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"헝가리 왕국"</span>,</span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"캐나다"</span>,</span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"호주"</span>,</span>
<span id="cb118-9"><a href="#cb118-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"영국"</span></span>
<span id="cb118-10"><a href="#cb118-10" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb118-11"><a href="#cb118-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">highest_education =</span> <span class="fu">c</span>(</span>
<span id="cb118-12"><a href="#cb118-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"김나지움"</span>,</span>
<span id="cb118-13"><a href="#cb118-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"고등 공과 학교"</span>,</span>
<span id="cb118-14"><a href="#cb118-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"마투라"</span>,</span>
<span id="cb118-15"><a href="#cb118-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"고등학교"</span>,</span>
<span id="cb118-16"><a href="#cb118-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"학부 우등"</span>,</span>
<span id="cb118-17"><a href="#cb118-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"A-레벨"</span></span>
<span id="cb118-18"><a href="#cb118-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb118-19"><a href="#cb118-19" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><code>datasets::UCBAdmissions</code>에서 정돈된 데이터를 만드십시오.</li>
<li><code>datasets::LifeCycleSavings</code>를 사용하여:
<ul>
<li>먼저 <code>pivot_longer()</code>를 사용하여 길게 만드십시오.</li>
<li><code>ggplot</code>를 사용하여 그래프를 만드십시오.</li>
<li>그런 다음 <code>pivot_wider()</code>를 사용하여 다시 넓게 만드십시오.</li>
<li>호주, 캐나다, 뉴질랜드 및 자신이 선택한 국가에 대해 <code>tinytable::tt()</code>를 사용하여 표를 만드십시오.</li>
</ul></li>
<li>다음을 수정하십시오.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">date =</span> <span class="fu">c</span>(<span class="st">"20-02-2023"</span>,</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>           <span class="st">"20 February 2023"</span>,</span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>           <span class="st">"02-20-2023"</span>,</span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>           <span class="st">"2023-20-02"</span>,</span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>           <span class="st">"February 20, 2023"</span>)</span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>다음을 수정하십시오.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">date =</span> <span class="fu">c</span>(<span class="st">"01-02-2023"</span>,</span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>           <span class="st">"02-01-2023"</span>,</span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>           <span class="st">"2023-01-02"</span>)</span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>캐나다 토론토에 살고 있다고 가정해 보십시오. 다음 날짜에 무엇이 잘못되었습니까?<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> <code>2023-03-12 02:01:00</code>.</li>
<li><a href="#sec-multilevel-regression-with-post-stratification의" class="quarto-xref"><span class="quarto-unresolved-ref">sec-multilevel-regression-with-post-stratification의</span></a> 예시를 따라 <a href="https://gss.norc.org/Get-The-Data">미국 일반 사회 조사</a>에서 “.dta” 파일을 읽어들이고, 레이블을 추가하고, 일부 변수의 그래프를 만드십시오. 결측 데이터는 어떻게 됩니까?</li>
</ul>
</section>
<section id="과제" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="과제">과제</h3>
<p><span class="citation" data-cites="Jordan2019Artificial">Jordan (<a href="#ref-Jordan2019Artificial" role="doc-biblioref">2019</a>)</span>, <span class="citation" data-cites="datafeminism2020">D’Ignazio 와/과 Klein (<a href="#ref-datafeminism2020" role="doc-biblioref">2020, 6장</a>)</span>, <span class="citation" data-cites="thatrandyauperson">Au (<a href="#ref-thatrandyauperson" role="doc-biblioref">2020</a>)</span> 및 기타 관련 작업을 참조하여 데이터가 스스로 말하도록 어느 정도 허용해야 한다고 생각하십니까? 최소 두 페이지를 작성하십시오.</p>
<p>Quarto를 사용하고, 적절한 제목, 저자, 날짜, GitHub 리포지토리 링크 및 인용을 포함하여 초안을 작성하십시오. 그 후, 다른 학생과 짝을 이루어 작성한 작업을 교환하십시오. 그들의 피드백을 바탕으로 업데이트하고, 논문에 그들의 이름을 명시하여 인정하십시오. PDF를 제출하십시오.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-abelson1996structure" class="csl-entry" role="listitem">
Abelson, Harold, 와/과 Gerald Jay Sussman. 1996. <em>Structure and interpretation of computer programs</em>. Cambridge: The MIT Press.
</div>
<div id="ref-citemodelsummary" class="csl-entry" role="listitem">
Arel-Bundock, Vincent. 2022. <span>“<span>modelsummary</span>: Data and Model Summaries in <span>R</span>”</span>. <em>Journal of Statistical Software</em> 103 (1): 1–23. <a href="https://doi.org/10.18637/jss.v103.i01">https://doi.org/10.18637/jss.v103.i01</a>.
</div>
<div id="ref-tinytable" class="csl-entry" role="listitem">
———. 2024. <em><span>tinytable: Simple and Configurable Tables in <span>“HTML”</span>, <span>“LaTeX”</span>, <span>“Markdown”</span>, <span>“Word”</span>, <span>“PNG”</span>, <span>“PDF”</span>, and <span>“Typst”</span> Formats</span></em>. <a href="https://vincentarelbundock.github.io/tinytable/">https://vincentarelbundock.github.io/tinytable/</a>.
</div>
<div id="ref-thatrandyauperson" class="csl-entry" role="listitem">
Au, Randy. 2020. <span>“Data Cleaning IS Analysis, Not Grunt Work”</span>, 9월. <a href="https://counting.substack.com/p/data-cleaning-is-analysis-not-grunt">https://counting.substack.com/p/data-cleaning-is-analysis-not-grunt</a>.
</div>
<div id="ref-Borer2009" class="csl-entry" role="listitem">
Borer, Elizabeth T., Eric W. Seabloom, Matthew B. Jones, 와/과 Mark Schildhauer. 2009. <span>“Some Simple Guidelines for Effective Data Management”</span>. <em>Bulletin of the Ecological Society of America</em> 90 (2): 205–14. <a href="https://doi.org/10.1890/0012-9623-90.2.205">https://doi.org/10.1890/0012-9623-90.2.205</a>.
</div>
<div id="ref-boykistypehints" class="csl-entry" role="listitem">
Boykis, Vicki. 2019. <span>“A deep dive on Python type hints”</span>, 7월. <a href="https://vickiboykis.com/2019/07/08/a-deep-dive-on-python-type-hints/">https://vickiboykis.com/2019/07/08/a-deep-dive-on-python-type-hints/</a>.
</div>
<div id="ref-caroonworking" class="csl-entry" role="listitem">
Caro, Robert. 2019. <em>Working</em>. 1st ed. New York: Knopf.
</div>
<div id="ref-Chan2021Combining" class="csl-entry" role="listitem">
Chan, Duo. 2021. <span>“Combining Statistical, Physical, and Historical Evidence to Improve Historical Sea-Surface Temperature Records”</span>. <em>Harvard Data Science Review</em> 3 (1). <a href="https://doi.org/10.1162/99608f92.edcee38f">https://doi.org/10.1162/99608f92.edcee38f</a>.
</div>
<div id="ref-craiu2019hiring" class="csl-entry" role="listitem">
Craiu, Radu. 2019. <span>“The Hiring Gambit: In Search of the Twofer Data Scientist”</span>. <em>Harvard Data Science Review</em> 1 (1). <a href="https://doi.org/10.1162/99608f92.440445cb">https://doi.org/10.1162/99608f92.440445cb</a>.
</div>
<div id="ref-datafeminism2020" class="csl-entry" role="listitem">
D’Ignazio, Catherine, 와/과 Lauren Klein. 2020. <em>Data Feminism</em>. Massachusetts: The MIT Press. <a href="https://data-feminism.mitpress.mit.edu">https://data-feminism.mitpress.mit.edu</a>.
</div>
<div id="ref-de2013introduction" class="csl-entry" role="listitem">
De Jonge, Edwin, 와/과 Mark van der Loo. 2013. <em><span>An introduction to data cleaning with R</span></em>. Statistics Netherlands Heerlen. <a href="https://cran.r-project.org/doc/contrib/de%5FJonge+van%5Fder%5FLoo-Introduction%5Fto%5Fdata%5Fcleaning%5Fwith%5FR.pdf">https://cran.r-project.org/doc/contrib/de%5FJonge+van%5Fder%5FLoo-Introduction%5Fto%5Fdata%5Fcleaning%5Fwith%5FR.pdf</a>.
</div>
<div id="ref-PeterDoggers" class="csl-entry" role="listitem">
Doggers, Peter. 2021. <span>“Carlsen Wins Game 6, Longest World Chess Championship Game Of All Time”</span>, 12월. <a href="https://www.chess.com/news/view/fide-world-chess-championship-2021-game-6">https://www.chess.com/news/view/fide-world-chess-championship-2021-game-6</a>.
</div>
<div id="ref-janitor" class="csl-entry" role="listitem">
Firke, Sam. 2023. <em><span>janitor: Simple Tools for Examining and Cleaning Dirty Data</span></em>. <a href="https://CRAN.R-project.org/package=janitor">https://CRAN.R-project.org/package=janitor</a>.
</div>
<div id="ref-stringi" class="csl-entry" role="listitem">
Gagolewski, Marek. 2022. <span>“<span>stringi</span>: <span>F</span>ast and portable character string processing in <span>R</span>”</span>. <em>Journal of Statistical Software</em> 103 (2): 1–59. <a href="https://doi.org/10.18637/jss.v103.i02">https://doi.org/10.18637/jss.v103.i02</a>.
</div>
<div id="ref-citeSharla" class="csl-entry" role="listitem">
Gelfand, Sharla. 2022. <em><span>opendatatoronto: Access the City of Toronto Open Data Portal</span></em>. <a href="https://CRAN.R-project.org/package=opendatatoronto">https://CRAN.R-project.org/package=opendatatoronto</a>.
</div>
<div id="ref-gelman2013garden" class="csl-entry" role="listitem">
Gelman, Andrew, 와/과 Eric Loken. 2013. <span>“The garden of forking paths: Why multiple comparisons can be a problem, even when there is no <span>‘fishing expedition’</span> or <span>‘p-hacking’</span> and the research hypothesis was posited ahead of time”</span>. <em>Department of Statistics, Columbia University</em>. <a href="http://www.stat.columbia.edu/~gelman/research/unpublished/p%5Fhacking.pdf">http://www.stat.columbia.edu/~gelman/research/unpublished/p%5Fhacking.pdf</a>.
</div>
<div id="ref-GrolemundWickham2011" class="csl-entry" role="listitem">
Grolemund, Garrett, 와/과 Hadley Wickham. 2011. <span>“Dates and Times Made Easy with <span>lubridate</span>”</span>. <em>Journal of Statistical Software</em> 40 (3): 1–25. <a href="https://doi.org/10.18637/jss.v040.i03">https://doi.org/10.18637/jss.v040.i03</a>.
</div>
<div id="ref-halberstam" class="csl-entry" role="listitem">
Halberstam, David. 1972. <em><span>The Best and the Brightest</span></em>. 1st ed. New York: Random House.
</div>
<div id="ref-hand2018statistical" class="csl-entry" role="listitem">
Hand, David. 2018. <span>“Statistical challenges of administrative and transaction data”</span>. <em>Journal of the Royal Statistical Society: Series A (Statistics in Society)</em> 181 (3): 555–605. <a href="https://doi.org/10.1111/rssa.12315">https://doi.org/10.1111/rssa.12315</a>.
</div>
<div id="ref-hermans2017peter" class="csl-entry" role="listitem">
Hermans, Felienne. 2017. <span>“Peter Hilton on Naming”</span>. <em>IEEE Software</em> 34 (3): 117–20. <a href="https://doi.org/10.1109/MS.2017.81">https://doi.org/10.1109/MS.2017.81</a>.
</div>
<div id="ref-hermans2021programmer" class="csl-entry" role="listitem">
———. 2021. <em>The Programmer’s Brain: What every programmer needs to know about cognition</em>. 1st ed. New York: Simon; Schuster. <a href="https://www.manning.com/books/the-programmers-brain">https://www.manning.com/books/the-programmers-brain</a>.
</div>
<div id="ref-citemyboy" class="csl-entry" role="listitem">
Hodgetts, Paul. 2022. <span>“The Negative Space of Data”</span>, 3월. <a href="https://hodgettsp.netlify.app/post/data-negativespace/">https://hodgettsp.netlify.app/post/data-negativespace/</a>.
</div>
<div id="ref-shorternamestakelonger" class="csl-entry" role="listitem">
Hofmeister, Johannes, Janet Siegmund, 와/과 Daniel Holt. 2017. <span>“Shorter identifier names take longer to comprehend”</span>. In <em>2017 IEEE 24th International Conference on Software Analysis, Evolution and Reengineering (SANER)</em>, 217–27. <a href="https://doi.org/10.1109/saner.2017.7884623">https://doi.org/10.1109/saner.2017.7884623</a>.
</div>
<div id="ref-huntington2021influence" class="csl-entry" role="listitem">
Huntington-Klein, Nick, Andreu Arenas, Emily Beam, Marco Bertoni, Jeffrey Bloem, Pralhad Burli, Naibin Chen, 기타. 2021. <span>“The influence of hidden researcher decisions in applied microeconomics”</span>. <em>Economic Inquiry</em> 59: 944–60. <a href="https://doi.org/10.1111/ecin.12992">https://doi.org/10.1111/ecin.12992</a>.
</div>
<div id="ref-pointblank" class="csl-entry" role="listitem">
Iannone, Richard, 와/과 Mauricio Vargas. 2022. <em><span>pointblank: Data Validation and Organization of Metadata for Local and Remote Tables</span></em>. <a href="https://CRAN.R-project.org/package=pointblank">https://CRAN.R-project.org/package=pointblank</a>.
</div>
<div id="ref-researchsoftware" class="csl-entry" role="listitem">
Irving, Damien, Kate Hertweck, Luke Johnston, Joel Ostblom, Charlotte Wickham, 와/과 Greg Wilson. 2021. <em>Research Software Engineering with Python</em>. Chapman; Hall/CRC.
</div>
<div id="ref-jplcodingstandards" class="csl-entry" role="listitem">
Jet Propulsion Laboratory. 2009. <span>“<span>JPL Institutional Coding Standard for the C Programming Language</span>”</span>. <em>Document Number D-60411</em>, 3월. <a href="https://web.archive.org/web/20111015064908/http://lars-lab.jpl.nasa.gov/JPL_Coding_Standard_C.pdf">https://web.archive.org/web/20111015064908/http://lars-lab.jpl.nasa.gov/JPL_Coding_Standard_C.pdf</a>.
</div>
<div id="ref-Jordan2019Artificial" class="csl-entry" role="listitem">
Jordan, Michael. 2019. <span>“<span>Artificial Intelligence–The Revolution Hasn’t Happened Yet</span>”</span>. <em>Harvard Data Science Review</em> 1 (1). <a href="https://doi.org/10.1162/99608f92.f06c6e61">https://doi.org/10.1162/99608f92.f06c6e61</a>.
</div>
<div id="ref-lin2020ten" class="csl-entry" role="listitem">
Lin, Sarah, Ibraheem Ali, 와/과 Greg Wilson. 2021. <span>“Ten quick tips for making things findable”</span>. <em>PLOS Computational Biology</em> 16 (12): 1–10. <a href="https://doi.org/10.1371/journal.pcbi.1008469">https://doi.org/10.1371/journal.pcbi.1008469</a>.
</div>
<div id="ref-washingtonpostelections" class="csl-entry" role="listitem">
Liu, Emily, Lenny Bronner, 와/과 Jeremy Bowers. 2022. <span>“What The Washington Post Elections Engineering team had to learn about election data”</span>. <em>Washington Post Engineering</em>, 4월. <a href="https://washpost.engineering/what-the-washington-post-elections-engineering-team-had-to-learn-about-election-data-a41603daf9ca">https://washpost.engineering/what-the-washington-post-elections-engineering-team-had-to-learn-about-election-data-a41603daf9ca</a>.
</div>
<div id="ref-jsfcodingstandards" class="csl-entry" role="listitem">
Lockheed Martin. 2005. <span>“<span>Joint Strike Fighter Air Vehicle C++ Coding Standards For The System Development And Demonstration Program</span>”</span>. <em>Document Number 2RDU00001 Rev C</em>, 12월. <a href="https://www.stroustrup.com/JSF-AV-rules.pdf">https://www.stroustrup.com/JSF-AV-rules.pdf</a>.
</div>
<div id="ref-martinpopper" class="csl-entry" role="listitem">
Martin, Charles, 와/과 Ben Popper. 2021. <span>“Don’t push that button: Exploring the software that flies SpaceX rockets and Starships”</span>. <em>The Overflow</em>, 12월. <a href="https://stackoverflow.blog/2021/12/27/dont-push-that-button-exploring-the-software-that-flies-spacex-starships/">https://stackoverflow.blog/2021/12/27/dont-push-that-button-exploring-the-software-that-flies-spacex-starships/</a>.
</div>
<div id="ref-meng2018statistical" class="csl-entry" role="listitem">
Meng, Xiao-Li. 2018. <span>“Statistical paradises and paradoxes in big data (I): Law of large populations, big data paradox, and the 2016 US presidential election”</span>. <em>The Annals of Applied Statistics</em> 12 (2): 685–726. <a href="https://doi.org/10.1214/18-AOAS1161SF">https://doi.org/10.1214/18-AOAS1161SF</a>.
</div>
<div id="ref-digitalapollo" class="csl-entry" role="listitem">
Mindell, David. 2008. <em><span>Digital Apollo: Human and Machine in Spaceflight</span></em>. 1st ed. New York: The MIT Press.
</div>
<div id="ref-pdftools" class="csl-entry" role="listitem">
Ooms, Jeroen. 2022. <em><span>pdftools: Text Extraction, Rendering and Converting of PDF Documents</span></em>. <a href="https://CRAN.R-project.org/package=pdftools">https://CRAN.R-project.org/package=pdftools</a>.
</div>
<div id="ref-anniesfind" class="csl-entry" role="listitem">
Open Science Collaboration. 2015. <span>“Estimating the reproducibility of psychological science”</span>. <em>Science</em> 349 (6251): aac4716. <a href="https://doi.org/10.1126/science.aac4716">https://doi.org/10.1126/science.aac4716</a>.
</div>
<div id="ref-penguinsoriginaldata" class="csl-entry" role="listitem">
Palmer Station Antarctica LTER, 와/과 Gorman, Kristen. 2020. <span>“Structural size measurements and isotopic signatures of foraging among adult male and female Adélie penguins (Pygoscelis adeliae) nesting along the Palmer Archipelago near Palmer Station, 2007-2009”</span>. <a href="https://doi.org/10.6073/PASTA/98B16D7D563F265CB52372C8CA99E60F">https://doi.org/10.6073/PASTA/98B16D7D563F265CB52372C8CA99E60F</a>.
</div>
<div id="ref-citeR" class="csl-entry" role="listitem">
R Core Team. 2024. <em>R: A Language and Environment for Statistical Computing</em>. Vienna, Austria: R Foundation for Statistical Computing. <a href="https://www.R-project.org/">https://www.R-project.org/</a>.
</div>
<div id="ref-columnnamesascontracts" class="csl-entry" role="listitem">
Riederer, Emily. 2020. <span>“Column Names as Contracts”</span>, 9월. <a href="https://emilyriederer.netlify.app/post/column-name-contracts/">https://emilyriederer.netlify.app/post/column-name-contracts/</a>.
</div>
<div id="ref-Sambasivan2021" class="csl-entry" role="listitem">
Sambasivan, Nithya, Shivani Kapania, Hannah Highfill, Diana Akrong, Praveen Paritosh, 와/과 Lora Aroyo. 2021. <span>“<span>‘Everyone wants to do the model work, not the data work’</span>: Data Cascades in High-Stakes <span>AI</span>”</span>. In <em>Proceedings of the 2021 <span>CHI</span> Conference on Human Factors in Computing Systems</em>. <span>ACM</span>. <a href="https://doi.org/10.1145/3411764.3445518">https://doi.org/10.1145/3411764.3445518</a>.
</div>
<div id="ref-silberzahn2018many" class="csl-entry" role="listitem">
Silberzahn, Raphael, Eric Uhlmann, Daniel Martin, Pasquale Anselmi, Frederik Aust, Eli Awtrey, Štěpán Bahnı́k, 기타. 2018. <span>“Many analysts, one data set: Making transparent how variations in analytic choices affect results”</span>. <em>Advances in Methods and Practices in Psychological Science</em> 1 (3): 337–56. <a href="https://doi.org/10.1177/2515245917747646">https://doi.org/10.1177/2515245917747646</a>.
</div>
<div id="ref-somers2015" class="csl-entry" role="listitem">
Somers, James. 2015. <span>“<span>Toolkits for the Mind</span>”</span>. <em>MIT Technology Review</em>, 4월. <a href="https://www.technologyreview.com/2015/04/02/168469/toolkits-for-the-mind/">https://www.technologyreview.com/2015/04/02/168469/toolkits-for-the-mind/</a>.
</div>
<div id="ref-van2005data" class="csl-entry" role="listitem">
Van den Broeck, Jan, Solveig Argeseanu Cunningham, Roger Eeckels, 와/과 Kobus Herbst. 2005. <span>“Data cleaning: detecting, diagnosing, and editing data abnormalities”</span>. <em>PLOS Medicine</em> 2 (10): e267. <a href="https://doi.org/10.1371/journal.pmed.0020267">https://doi.org/10.1371/journal.pmed.0020267</a>.
</div>
<div id="ref-validate" class="csl-entry" role="listitem">
van der Loo, Mark, 와/과 Edwin De Jonge. 2021. <span>“<span>Data Validation Infrastructure for R</span>”</span>. <em>Journal of Statistical Software</em> 97 (10): 1–33. <a href="https://doi.org/10.18637/jss.v097.i10">https://doi.org/10.18637/jss.v097.i10</a>.
</div>
<div id="ref-weinbergpsychology" class="csl-entry" role="listitem">
Weinberg, Gerald. 1971. <em>The Psychology of Computer Programming</em>. New York: Van Nostrand Reinhold Company.
</div>
<div id="ref-testthat" class="csl-entry" role="listitem">
Wickham, Hadley. 2011. <span>“<span>testthat: Get Started with Testing</span>”</span>. <em>The R Journal</em> 3: 5–10. <a href="https://journal.r-project.org/archive/2011-1/RJournal%5F2011-1%5FWickham.pdf">https://journal.r-project.org/archive/2011-1/RJournal%5F2011-1%5FWickham.pdf</a>.
</div>
<div id="ref-wickham2014tidy" class="csl-entry" role="listitem">
———. 2014. <span>“Tidy data”</span>. <em>Journal of statistical software</em> 59 (1): 1–23. <a href="https://doi.org/10.18637/jss.v059.i10">https://doi.org/10.18637/jss.v059.i10</a>.
</div>
<div id="ref-tidyverse" class="csl-entry" role="listitem">
Wickham, Hadley, Mara Averick, Jenny Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, 기타. 2019. <span>“<span>Welcome to the Tidyverse</span>”</span>. <em>Journal of Open Source Software</em> 4 (43): 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>.
</div>
<div id="ref-readxl" class="csl-entry" role="listitem">
Wickham, Hadley, 와/과 Jennifer Bryan. 2023. <em><span>readxl: Read Excel Files</span></em>. <a href="https://CRAN.R-project.org/package=readxl">https://CRAN.R-project.org/package=readxl</a>.
</div>
<div id="ref-r4ds" class="csl-entry" role="listitem">
Wickham, Hadley, Mine Çetinkaya-Rundel, 와/과 Garrett Grolemund. (2016년) 2023. <em>R for Data Science</em>. 2nd ed. O’Reilly Media. <a href="https://r4ds.hadley.nz">https://r4ds.hadley.nz</a>.
</div>
<div id="ref-scales" class="csl-entry" role="listitem">
Wickham, Hadley, 와/과 Dana Seidel. 2022. <em><span>scales: Scale Functions for Visualization</span></em>. <a href="https://CRAN.R-project.org/package=scales">https://CRAN.R-project.org/package=scales</a>.
</div>
<div id="ref-wilsongoodenough" class="csl-entry" role="listitem">
Wilson, Greg, Jenny Bryan, Karen Cranston, Justin Kitzes, Lex Nederbragt, 와/과 Tracy Teal. 2017. <span>“Good enough practices in scientific computing”</span>. <em>PLOS Computational Biology</em> 13 (6): 1–20. <a href="https://doi.org/10.1371/journal.pcbi.1005510">https://doi.org/10.1371/journal.pcbi.1005510</a>.
</div>
</div>
</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>배경 지식으로, 컴퓨터는 0과 1의 문자열을 기반으로 하므로 알파벳과 같은 기호를 고려할 수 있도록 문자 인코딩이 필요합니다. 특히 성가신 데이터 정리 문제 중 하나는 다른 문자 인코딩입니다. 이는 외국어 및 이상한 문자를 다룰 때 특히 흔합니다. 일반적으로 UTF-8이라는 인코딩을 사용합니다. 문자 벡터의 인코딩은 <code>Encoding()</code>을 사용하여 찾을 수 있습니다.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>이것이 작동하지 않으면 토론토 시 정부가 데이터셋을 이동했을 수 있습니다. 대신 <code>earlier_toronto_shelters &lt;- read_csv("https://www.tellingstorieswithdata.com/inputs/data/earlier_toronto_shelters.csv")</code>를 사용하십시오.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>또는 https://www.tellingstorieswithdata.com/inputs/pdfs/1996_Tanzania_DHS.pdf를 사용하십시오.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>케냐 정부 링크가 깨지면 해당 URL을 https://www.tellingstorieswithdata.com/inputs/pdfs/2019_Kenya_census.pdf로 바꾸십시오.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>이 연습의 기본 아이디어는 마이클 도넬리에서 나왔습니다.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>이 코드는 크리스티나 웨이에서 나왔습니다.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>이 연습의 아이디어는 테일러 존 라이트에서 나왔습니다.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>이 연습의 아이디어는 데릭 비튼에서 나왔습니다.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "복사완료!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "복사완료!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/tellingstorieswithdata\.com\/mybook");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./08-hunt_ko.html" class="pagination-link" aria-label="실험 및 설문 조사">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">실험 및 설문 조사</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./10-store_and_share_ko.html" class="pagination-link" aria-label="저장 및 공유">
        <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">저장 및 공유</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/RohanAlexander/telling_stories/edit/main/09-clean_and_prepare_ko.qmd" class="toc-action"><i class="bi bi-github"></i>편집</a></li></ul></div></div></div></footer></body></html>