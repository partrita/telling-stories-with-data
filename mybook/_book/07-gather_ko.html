<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko" xml:lang="ko"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>7&nbsp; API, 스크래핑, 파싱 – 데이터로 이야기하기</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./08-hunt_ko.html" rel="next">
<link href="./06-farm_ko.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-b22ef3f334bfc3d7f06e555e13679c65.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "일치 없음",
    "search-matching-documents-text": "일치된 문서",
    "search-copy-link-title": "검색 링크 복사",
    "search-hide-matches-text": "추가 검색 결과 숨기기",
    "search-more-match-text": "추가 검색결과",
    "search-more-matches-text": "추가 검색결과",
    "search-clear-button-title": "제거",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "취소",
    "search-submit-button-title": "검색",
    "search-label": "검색"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="사이드바 전환" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./06-farm_ko.html">획득</a></li><li class="breadcrumb-item"><a href="./07-gather_ko.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">API, 스크래핑, 파싱</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="사이드바 전환" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="검색" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">데이터로 이야기하기</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/RohanAlexander/telling_stories/" title="소스 코드" class="quarto-navigation-tool px-1" aria-label="소스 코드"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="검색"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">서문</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-errata_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">오류 및 업데이트</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">기초</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-introduction_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">데이터로 이야기하기</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-drinking_from_a_fire_hose_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">소방 호스에서 마시기</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-workflow_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">재현 가능한 워크플로우</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">소통</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-writing_research_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">연구 작성</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-graphs_tables_maps_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">그래프, 표, 지도</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">획득</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-farm_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">측정, 인구 조사, 표본 추출</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-gather_ko.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">API, 스크래핑, 파싱</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-hunt_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">실험 및 설문 조사</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">준비</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-clean_and_prepare_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">정리, 준비 및 테스트</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-store_and_share_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">저장 및 공유</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-eda_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">탐색적 데이터 분석</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">모델링</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-ijalm_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">선형 모델</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-ijaglm_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">일반화 선형 모델</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-prediction_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">예측</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">적용</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-causality_from_obs_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">관찰 데이터에서 인과 관계</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./15-mrp_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">사후 층화 다단계 회귀</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./16-text_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">데이터로서의 텍스트</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./17-concluding_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">17-concluding_ko.html</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">부록</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="토글 섹션">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-r_essentials_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">R 필수 사항</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-python_essentials_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Python 필수 사항</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-sql_essentials_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">SQL 필수</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-datasets_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">데이터셋</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-rmarkdown_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">R 마크다운</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25-papers_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">F</span>&nbsp; <span class="chapter-title">논문</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./26-deploy_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">G</span>&nbsp; <span class="chapter-title">생산</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./98-cocktails_ko.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">H</span>&nbsp; <span class="chapter-title">칵테일</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./99-references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">목차</h2>
   
  <ul>
  <li><a href="#서론" id="toc-서론" class="nav-link active" data-scroll-target="#서론"><span class="header-section-number">7.1</span> 서론</a></li>
  <li><a href="#api" id="toc-api" class="nav-link" data-scroll-target="#api"><span class="header-section-number">7.2</span> API</a>
  <ul class="collapse">
  <li><a href="#arxiv-nasa-dataverse" id="toc-arxiv-nasa-dataverse" class="nav-link" data-scroll-target="#arxiv-nasa-dataverse"><span class="header-section-number">7.2.1</span> arXiv, NASA, Dataverse</a></li>
  <li><a href="#spotify" id="toc-spotify" class="nav-link" data-scroll-target="#spotify"><span class="header-section-number">7.2.2</span> Spotify</a></li>
  </ul></li>
  <li><a href="#웹-스크래핑" id="toc-웹-스크래핑" class="nav-link" data-scroll-target="#웹-스크래핑"><span class="header-section-number">7.3</span> 웹 스크래핑</a>
  <ul class="collapse">
  <li><a href="#원칙" id="toc-원칙" class="nav-link" data-scroll-target="#원칙"><span class="header-section-number">7.3.1</span> 원칙</a></li>
  <li><a href="#htmlcss-필수-사항" id="toc-htmlcss-필수-사항" class="nav-link" data-scroll-target="#htmlcss-필수-사항"><span class="header-section-number">7.3.2</span> HTML/CSS 필수 사항</a></li>
  <li><a href="#도서-정보" id="toc-도서-정보" class="nav-link" data-scroll-target="#도서-정보"><span class="header-section-number">7.3.3</span> 도서 정보</a></li>
  <li><a href="#영국-총리" id="toc-영국-총리" class="nav-link" data-scroll-target="#영국-총리"><span class="header-section-number">7.3.4</span> 영국 총리</a></li>
  <li><a href="#반복" id="toc-반복" class="nav-link" data-scroll-target="#반복"><span class="header-section-number">7.3.5</span> 반복</a></li>
  </ul></li>
  <li><a href="#pdf" id="toc-pdf" class="nav-link" data-scroll-target="#pdf"><span class="header-section-number">7.4</span> PDF</a>
  <ul class="collapse">
  <li><a href="#제인-에어" id="toc-제인-에어" class="nav-link" data-scroll-target="#제인-에어"><span class="header-section-number">7.4.1</span> <em>제인 에어</em></a></li>
  <li><a href="#미국-총-출산율" id="toc-미국-총-출산율" class="nav-link" data-scroll-target="#미국-총-출산율"><span class="header-section-number">7.4.2</span> 미국 총 출산율</a></li>
  <li><a href="#광학-문자-인식" id="toc-광학-문자-인식" class="nav-link" data-scroll-target="#광학-문자-인식"><span class="header-section-number">7.4.3</span> 광학 문자 인식</a></li>
  </ul></li>
  <li><a href="#연습-문제" id="toc-연습-문제" class="nav-link" data-scroll-target="#연습-문제"><span class="header-section-number">7.5</span> 연습 문제</a>
  <ul class="collapse">
  <li><a href="#연습" id="toc-연습" class="nav-link" data-scroll-target="#연습">연습</a></li>
  <li><a href="#퀴즈" id="toc-퀴즈" class="nav-link" data-scroll-target="#퀴즈">퀴즈</a></li>
  <li><a href="#수업-활동" id="toc-수업-활동" class="nav-link" data-scroll-target="#수업-활동">수업 활동</a></li>
  <li><a href="#과제" id="toc-과제" class="nav-link" data-scroll-target="#과제">과제</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/RohanAlexander/telling_stories/edit/main/07-gather_ko.qmd" class="toc-action"><i class="bi bi-github"></i>편집</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./06-farm_ko.html">획득</a></li><li class="breadcrumb-item"><a href="./07-gather_ko.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">API, 스크래핑, 파싱</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-gather-data" class="quarto-section-identifier"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">API, 스크래핑, 파싱</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-simple callout-note">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>Chapman and Hall/CRC에서 2023년 7월에 이 책을 출판했습니다. <a href="https://www.routledge.com/Telling-Stories-with-Data-With-Applications-in-R/Alexander/p/book/9781032134772">여기</a>에서 구매할 수 있습니다. 이 온라인 버전은 인쇄된 내용에서 일부 업데이트되었습니다.</p>
</div>
</div>
</div>
<p><strong>선수 지식</strong></p>
<ul>
<li><em>역사를 데이터로 바꾸기: HPE에서의 데이터 수집, 측정 및 추론</em>, <span class="citation" data-cites="cirone">(<a href="#ref-cirone" role="doc-biblioref">Cirone 와/과 Spirling 2021</a>)</span>
<ul>
<li>이 논문은 데이터셋 생성의 몇 가지 어려움에 대해 논의합니다.</li>
</ul></li>
<li><em>교도소 데이터 수집의 두 가지 체제</em>, <span class="citation" data-cites="Johnson2021Two">(<a href="#ref-Johnson2021Two" role="doc-biblioref">Johnson 2021</a>)</span>
<ul>
<li>이 논문은 미국 정부의 교도소 데이터와 수감자 및 지역 사회의 데이터를 비교합니다.</li>
</ul></li>
<li><em>AI 아틀라스</em>, <span class="citation" data-cites="crawford">(<a href="#ref-crawford" role="doc-biblioref">Crawford 2021</a>)</span>
<ul>
<li>데이터 출처를 이해하는 것의 중요성에 대해 논의하는 3장 “데이터”에 집중하세요.</li>
</ul></li>
</ul>
<p><strong>핵심 개념 및 기술</strong></p>
<ul>
<li>때로는 데이터가 존재하지만 데이터셋으로 사용될 목적으로 구성되지 않은 경우가 있습니다. 우리는 데이터를 수집해야 합니다.</li>
<li>이러한 비정형 소스에서 얻은 데이터셋을 정리하고 준비하는 것은 번거롭고 성가실 수 있지만, 결과적으로 얻는 구조화되고 정돈된 데이터는 종종 특히 흥미롭고 유용합니다.</li>
<li>우리는 다양한 소스에서 데이터를 수집할 수 있습니다. 여기에는 API(직접적으로, 반정형 데이터를 포함할 수 있으며, 간접적으로 R 패키지를 통해)가 포함됩니다. 또한 합리적이고 윤리적인 웹 스크래핑을 통해 데이터를 수집할 수도 있습니다. 마지막으로, PDF에서 데이터를 수집할 수도 있습니다.</li>
</ul>
<p><strong>소프트웨어 및 패키지</strong></p>
<ul>
<li>Base <code>R</code> <span class="citation" data-cites="citeR">(<a href="#ref-citeR" role="doc-biblioref">R Core Team 2024</a>)</span></li>
<li><code>babynames</code> <span class="citation" data-cites="citebabynames">(<a href="#ref-citebabynames" role="doc-biblioref">Wickham 2021</a>)</span></li>
<li><code>gh</code> <span class="citation" data-cites="gh">(<a href="#ref-gh" role="doc-biblioref">Bryan 와/과 Wickham 2021</a>)</span></li>
<li><code>here</code> <span class="citation" data-cites="here">(<a href="#ref-here" role="doc-biblioref">Müller 2020</a>)</span></li>
<li><code>httr</code> <span class="citation" data-cites="citehttr">(<a href="#ref-citehttr" role="doc-biblioref">Wickham 2023</a>)</span></li>
<li><code>janitor</code> <span class="citation" data-cites="janitor">(<a href="#ref-janitor" role="doc-biblioref">Firke 2023</a>)</span></li>
<li><code>jsonlite</code> <span class="citation" data-cites="jsonlite">(<a href="#ref-jsonlite" role="doc-biblioref">Ooms 2014</a>)</span></li>
<li><code>lubridate</code> <span class="citation" data-cites="GrolemundWickham2011">(<a href="#ref-GrolemundWickham2011" role="doc-biblioref">Grolemund 와/과 Wickham 2011</a>)</span></li>
<li><code>pdftools</code> <span class="citation" data-cites="pdftools">(<a href="#ref-pdftools" role="doc-biblioref">Ooms 2022a</a>)</span></li>
<li><code>purrr</code> <span class="citation" data-cites="citepurrr">(<a href="#ref-citepurrr" role="doc-biblioref">Wickham 와/과 Henry 2022</a>)</span></li>
<li><code>rvest</code> <span class="citation" data-cites="citervest">(<a href="#ref-citervest" role="doc-biblioref">Wickham 2022</a>)</span></li>
<li><code>spotifyr</code> <span class="citation" data-cites="spotifyr">(<a href="#ref-spotifyr" role="doc-biblioref">Thompson 기타 2022</a>)</span> (이 패키지는 CRAN에 없으므로 <code>install.packages("devtools")</code> 후 <code>devtools::install_github("charlie86/spotifyr")</code>로 설치하세요)</li>
<li><code>tesseract</code> <span class="citation" data-cites="citetesseract">(<a href="#ref-citetesseract" role="doc-biblioref">Ooms 2022b</a>)</span></li>
<li><code>tidyverse</code> <span class="citation" data-cites="tidyverse">(<a href="#ref-tidyverse" role="doc-biblioref">Wickham 기타 2019</a>)</span></li>
<li><code>tinytable</code> <span class="citation" data-cites="tinytable">(<a href="#ref-tinytable" role="doc-biblioref">Arel-Bundock 2024</a>)</span></li>
<li><code>usethis</code> <span class="citation" data-cites="usethis">(<a href="#ref-usethis" role="doc-biblioref">Wickham, Bryan, 와/과 Barrett 2022</a>)</span></li>
<li><code>xml2</code> <span class="citation" data-cites="xml2">(<a href="#ref-xml2" role="doc-biblioref">Wickham, Hester, 와/과 Ooms 2021</a>)</span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(babynames)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gh)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pdftools)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(spotifyr)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># library(tesseract)</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tinytable)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(usethis)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xml2)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="서론" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="서론"><span class="header-section-number">7.1</span> 서론</h2>
<p>이 장에서는 우리가 직접 수집해야 하는 데이터를 다룹니다. 이는 관측치가 존재하지만, 우리가 고려할 데이터셋을 얻기 위해 그것들을 파싱하고, 가져오고, 정리하고, 준비해야 한다는 것을 의미합니다. <a href="#sec-farm-data에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-farm-data에서</span></a> 논의된 양식 데이터와 달리, 종종 이러한 관측치는 분석 목적으로 제공되지 않습니다. 이는 문서화, 포함 및 제외 결정, 결측 데이터, 윤리적 행동에 특히 주의해야 함을 의미합니다.</p>
<p>이러한 데이터셋의 예로, <span class="citation" data-cites="Cummins2022는">(<a href="#ref-Cummins2022는" role="doc-biblioref"><strong>Cummins2022는?</strong></a>)</span> 1892년에서 1992년 사이에 영국에서 개별 유언 검인 기록을 사용하여 데이터셋을 생성했습니다. 그들은 “엘리트” 상속의 약 3분의 1이 은폐되어 있음을 발견했습니다. 마찬가지로, <span class="citation" data-cites="Taflaga2019는">(<a href="#ref-Taflaga2019는" role="doc-biblioref"><strong>Taflaga2019는?</strong></a>)</span> 호주 장관 전화번호부를 기반으로 직무 책임에 대한 체계적인 데이터셋을 구축했습니다. 그들은 성별에 따라 상당한 차이가 있음을 발견했습니다. 유언장이나 전화번호부 모두 데이터셋에 포함될 목적으로 생성된 것이 아닙니다. 그러나 존중하는 접근 방식을 통해 다른 방법으로는 얻을 수 없는 통찰력을 얻을 수 있습니다. 우리는 이것을 “데이터 수집”이라고 부릅니다. 즉, 데이터는 존재하지만 우리는 그것을 얻어야 합니다.</p>
<p>프로젝트 시작 시 프로젝트가 가져야 할 가치에 대해 결정해야 합니다. 예를 들어, <span class="citation" data-cites="huggingfaceethics는">(<a href="#ref-huggingfaceethics는" role="doc-biblioref"><strong>huggingfaceethics는?</strong></a>)</span> 투명성, 재현성, 공정성, 자기 비판, 그리고 공로 인정에 가치를 둡니다. 이것이 프로젝트에 어떤 영향을 미칠까요? “공로 인정”에 가치를 둔다는 것은 귀속 및 라이선스에 대해 특히 열성적이어야 한다는 것을 의미할 수 있습니다. 수집된 데이터의 경우, 원본, 편집되지 않은 데이터가 우리의 것이 아닐 수 있으므로 이에 대해 특별히 고려해야 합니다.</p>
<p>데이터 과학 워크플로의 결과는 기본 데이터보다 좋을 수 없습니다<span class="citation" data-cites="bailey2008design">(<a href="#ref-bailey2008design" role="doc-biblioref">Bailey 2008</a>)</span>. 아무리 정교한 통계 분석도 제대로 수집되지 않은 데이터를 조정하는 데 어려움을 겪을 것입니다. 이는 팀으로 작업할 때 데이터 수집은 팀의 선임 구성원이 감독하고 적어도 부분적으로 수행해야 함을 의미합니다. 그리고 혼자 작업할 때는 이 단계에 특별한 고려와 주의를 기울이십시오.</p>
<p>이 장에서는 데이터를 수집하는 다양한 접근 방식을 살펴봅니다. API 및 JSON, XML과 같은 반정형 데이터 사용부터 시작합니다. API를 사용하는 것은 일반적으로 데이터 제공자가 접근을 허용하는 조건을 지정한 상황입니다. API를 사용하면 데이터를 수집하는 코드를 작성할 수 있습니다. 이는 효율적이고 확장이 가능하기 때문에 가치가 있습니다. API를 통해 데이터를 수집하는 데 익숙해지면 흥미로운 데이터셋에 접근할 수 있습니다. 예를 들어, <span class="citation" data-cites="facebookapitrump는">(<a href="#ref-facebookapitrump는" role="doc-biblioref"><strong>facebookapitrump는?</strong></a>)</span> 페이스북 정치 광고 API를 사용하여 트럼프 2020년 캠페인 광고 218,100개를 수집하여 캠페인을 더 잘 이해했습니다.</p>
<p>그런 다음 웹 스크래핑으로 넘어갑니다. 웹사이트에 데이터가 있을 때 웹 스크래핑을 사용하고 싶을 수 있습니다. 이러한 데이터는 일반적으로 데이터셋으로 사용될 목적으로 구성되지 않았으므로 프로젝트에 대한 의도적이고 명확한 가치를 갖는 것이 특히 중요합니다. 스크래핑은 데이터 수집의 중요한 부분입니다. 왜냐하면 데이터 제공자의 우선 순위로 인해 API를 구현하지 않은 많은 데이터 소스가 있기 때문입니다. 예를 들어, 팬데믹 초기에 COVID-19 대시보드를 만드는 데 웹 스크래핑이 광범위하게 사용되었습니다<span class="citation" data-cites="scrapecoviddata">(<a href="#ref-scrapecoviddata" role="doc-biblioref">Eisenstein 2022</a>)</span>.</p>
<p>마지막으로, PDF에서 데이터를 수집하는 것을 고려합니다. 이를 통해 특히 정부 보고서 및 오래된 책에 포함된 흥미로운 데이터셋을 구축할 수 있습니다. 실제로, 많은 국가에 정보 자유 법률이 존재하며 정부가 데이터를 이용 가능하게 하도록 요구하지만, 이러한 법률은 종종 스프레드시트가 CSV로 시작되었음에도 불구하고 PDF로 공유되는 결과를 낳습니다.</p>
<p>데이터 수집은 양식 데이터를 사용하는 것보다 더 많은 노력을 요구할 수 있지만, 다른 방법으로는 할 수 없는 데이터셋을 탐색하고 질문에 답할 수 있게 해줍니다. 세계에서 가장 흥미로운 작업 중 일부는 수집된 데이터를 사용하지만, 존중하는 태도로 접근하는 것이 특히 중요합니다.</p>
</section>
<section id="api" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="api"><span class="header-section-number">7.2</span> API</h2>
<p>일상 언어에서, 그리고 우리의 목적을 위해, API(Application Programming Interface)는 누군가가 자신의 컴퓨터에 특정 파일을 설정하여 우리가 그들의 지침을 따라 그것들을 얻을 수 있는 상황입니다. 예를 들어, Slack에서 GIF를 사용할 때, 백그라운드에서 작동하는 한 가지 방법은 Slack이 Giphy 서버에 적절한 GIF를 요청하고, Giphy 서버가 Slack에 그 GIF를 제공한 다음, Slack이 그것을 채팅에 삽입하는 것입니다. Slack과 Giphy가 상호 작용하는 방식은 Giphy의 API에 의해 결정됩니다. 더 엄밀히 말하면, API는 HTTP 프로토콜을 사용하여 우리가 접근하는 서버에서 실행되는 애플리케이션입니다.</p>
<p>여기서는 데이터 수집을 위한 API 사용에 중점을 둡니다. 이 맥락에서 API는 사람이 아닌 다른 컴퓨터가 접근할 수 있도록 설정된 웹사이트입니다. 예를 들어, <a href="https://www.google.com/maps">Google Maps</a>로 이동할 수 있습니다. 그리고 스크롤하고 클릭하고 드래그하여 지도를, 예를 들어 호주 캔버라에 중앙에 놓을 수 있습니다. 또는 <a href="https://www.google.com/maps/@-35.2812958,149.1248113,16z">이 링크</a>를 브라우저에 붙여넣을 수 있습니다. 탐색하는 대신 그 링크를 붙여넣음으로써 우리는 API를 사용하는 방식을 모방했습니다. 즉, URL을 제공하고 무언가를 돌려받는 것입니다. 이 경우 결과는 <a href="#fig-focuson2020과" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-focuson2020과</span></a> 같은 지도여야 합니다.</p>
<div id="fig-focuson2020" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-focuson2020-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/07-googlemaps_canberra.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-focuson2020-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;7.1: 2023년 2월 12일 기준 Google Maps의 API 응답 예시
</figcaption>
</figure>
</div>
<p>API를 사용하는 장점은 데이터 제공자가 일반적으로 제공할 의향이 있는 데이터와 제공 조건을 지정한다는 것입니다. 이러한 조건에는 속도 제한(즉, 데이터를 얼마나 자주 요청할 수 있는지) 및 데이터로 무엇을 할 수 있는지(예: 상업적 목적으로 사용하거나 재게시하는 것이 허용되지 않을 수 있음)와 같은 측면이 포함될 수 있습니다. API가 특별히 우리가 사용하도록 제공되므로 예기치 않은 변경이나 법적 문제에 덜 영향을 받을 가능성이 있습니다. 이 때문에 API를 사용할 수 있을 때는 웹 스크래핑보다 API를 사용하는 것이 분명합니다.</p>
<p>이제 API 사용의 몇 가지 사례 연구를 살펴보겠습니다. 첫 번째에서는 <code>httr</code>를 사용하여 API를 직접 다룹니다. 그런 다음 <code>spotifyr</code>를 사용하여 Spotify에서 데이터를 가져옵니다.</p>
<section id="arxiv-nasa-dataverse" class="level3" data-number="7.2.1">
<h3 data-number="7.2.1" class="anchored" data-anchor-id="arxiv-nasa-dataverse"><span class="header-section-number">7.2.1</span> arXiv, NASA, Dataverse</h3>
<p><code>httr</code>를 설치하고 로드한 후 <code>GET()</code>을 사용하여 API에서 직접 데이터를 가져옵니다. 이것은 특정 데이터를 가져오려고 시도하며 주요 인수는 “url”입니다. 이것은 <a href="#fig-focuson2020의" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-focuson2020의</span></a> Google Maps 예시와 유사합니다. 여기서 우리가 관심 있는 특정 정보는 지도였습니다.</p>
<section id="arxiv" class="level4" data-number="7.2.1.1">
<h4 data-number="7.2.1.1" class="anchored" data-anchor-id="arxiv"><span class="header-section-number">7.2.1.1</span> arXiv</h4>
<p>이 사례 연구에서는 <a href="https://arxiv.org/help/api/">arXiv에서 제공하는 API</a>를 사용할 것입니다. arXiv는 동료 검토를 거치기 전의 학술 논문을 위한 온라인 저장소입니다. 이러한 논문은 일반적으로 “프리프린트”라고 불립니다. 우리는 <code>GET()</code>을 사용하여 URL을 제공함으로써 arXiv에 프리프린트에 대한 정보를 얻도록 요청합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>arxiv <span class="ot">&lt;-</span> <span class="fu">GET</span>(<span class="st">"http://export.arxiv.org/api/query?id_list=2310.01402"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">status_code</span>(arxiv)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>status_code()</code>를 사용하여 응답을 확인할 수 있습니다. 예를 들어, 200은 성공을 의미하고, 400은 서버에서 오류를 받았음을 의미합니다. 서버에서 무언가를 받았다고 가정하면 <code>content()</code>를 사용하여 표시할 수 있습니다. 이 경우 XML 형식의 데이터를 받았습니다. XML은 항목이 태그로 식별되는 마크업 언어이며, 태그는 다른 태그 안에 중첩될 수 있습니다. <code>xml2</code>를 설치하고 로드한 후 <code>read_xml()</code>을 사용하여 XML을 읽을 수 있습니다. XML은 반정형 구조이며, <code>html_structure()</code>를 사용하여 먼저 살펴보는 것이 유용할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">content</span>(arxiv) <span class="sc">|&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_xml</span>() <span class="sc">|&gt;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_structure</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이 XML 트리에서 다양한 측면을 추출하여 데이터셋을 만들고 싶을 수 있습니다. 예를 들어, 8번째 항목인 “entry”를 살펴보고, 특히 “entry” 내의 4번째 및 9번째 항목인 “title”과 “URL”을 얻을 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>data_from_arxiv <span class="ot">&lt;-</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">content</span>(arxiv) <span class="sc">|&gt;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">read_xml</span>() <span class="sc">|&gt;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">xml_child</span>(<span class="at">search =</span> <span class="dv">8</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">xml_child</span>(<span class="at">search =</span> <span class="dv">4</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">xml_text</span>(),</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">link =</span> <span class="fu">content</span>(arxiv) <span class="sc">|&gt;</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">read_xml</span>() <span class="sc">|&gt;</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">xml_child</span>(<span class="at">search =</span> <span class="dv">8</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">xml_child</span>(<span class="at">search =</span> <span class="dv">9</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">xml_attr</span>(<span class="st">"href"</span>)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>data_from_arxiv</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="nasa-오늘의-천문학-사진" class="level4" data-number="7.2.1.2">
<h4 data-number="7.2.1.2" class="anchored" data-anchor-id="nasa-오늘의-천문학-사진"><span class="header-section-number">7.2.1.2</span> NASA 오늘의 천문학 사진</h4>
<p>또 다른 예로, NASA는 매일 <a href="https://api.nasa.gov">APOD API</a>를 통해 오늘의 천문학 사진(APOD)을 제공합니다. <code>GET()</code>을 사용하여 특정 날짜의 사진 URL을 얻은 다음 표시할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>NASA_APOD_20190719 <span class="ot">&lt;-</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">GET</span>(<span class="st">"https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY&amp;date=2019-07-19"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>content()</code>를 사용하여 반환된 데이터를 검사하면 날짜, 제목, 설명 및 URL과 같은 다양한 필드가 제공됨을 알 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># APOD 2019년 7월 19일</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">content</span>(NASA_APOD_20190719)<span class="sc">$</span>date</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2019-07-19"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">content</span>(NASA_APOD_20190719)<span class="sc">$</span>title</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Tranquility Base Panorama"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">content</span>(NASA_APOD_20190719)<span class="sc">$</span>explanation</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "On July 20, 1969 the Apollo 11 lunar module Eagle safely touched down on the Moon. It landed near the southwestern corner of the Moon's Mare Tranquillitatis at a landing site dubbed Tranquility Base. This panoramic view of Tranquility Base was constructed from the historic photos taken from the lunar surface. On the far left astronaut Neil Armstrong casts a long shadow with Sun is at his back and the Eagle resting about 60 meters away ( AS11-40-5961). He stands near the rim of 30 meter-diameter Little West crater seen here to the right ( AS11-40-5954). Also visible in the foreground is the top of the camera intended for taking stereo close-ups of the lunar surface."</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">content</span>(NASA_APOD_20190719)<span class="sc">$</span>url</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "https://apod.nasa.gov/apod/image/1907/apollo11TranquilitybasePan600h.jpg"</code></pre>
</div>
</div>
<p><code>knitr</code>의 <code>include_graphics()</code>에 해당 URL을 제공하여 표시할 수 있습니다(<a href="#fig-nasaone" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-nasaone</span></a>).</p>
<div id="fig-nasaone" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-nasaone-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div id="fig-nasamoon" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-nasamoon-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/apollo11TranquilitybasePan.jpg" class="img-fluid figure-img" data-ref-parent="fig-nasaone">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-nasamoon-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) 고요의 바다 파노라마 (이미지 출처: 닐 암스트롱, 아폴로 11호, NASA)
</figcaption>
</figure>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-nasaone-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;7.2: NASA APOD API에서 얻은 이미지
</figcaption>
</figure>
</div>
</section>
<section id="dataverse" class="level4" data-number="7.2.1.3">
<h4 data-number="7.2.1.3" class="anchored" data-anchor-id="dataverse"><span class="header-section-number">7.2.1.3</span> Dataverse</h4>
<p>마지막으로, 반정형 형식의 또 다른 일반적인 API 응답은 JSON입니다. JSON은 기계가 파싱할 수 있는 인간이 읽을 수 있는 데이터 저장 방식입니다. 행과 열에 익숙한 CSV와 달리 JSON은 키-값 쌍을 사용합니다.</p>
<p><code>{ css} {   "firstName": "Rohan",   "lastName": "Alexander",   "age": 36,   "favFoods": {     "first": "Pizza",     "second": "Bagels",     "third": null   } }</code></p>
<p><code>jsonlite</code>로 JSON을 파싱할 수 있습니다. 특정 예를 고려하기 위해 데이터셋 공유를 더 쉽게 만드는 웹 애플리케이션인 “Dataverse”를 사용합니다. API를 사용하여 데모 데이터버스를 쿼리할 수 있습니다. 예를 들어, 정치와 관련된 데이터셋에 관심이 있을 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>politics_datasets <span class="ot">&lt;-</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fromJSON</span>(<span class="st">"https://demo.dataverse.org/api/search?q=politics"</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>politics_datasets</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$status
[1] "OK"

$data
$data$q
[1] "politics"

$data$total_count
[1] 7793

$data$start
[1] 0

$data$spelling_alternatives
named list()

$data$items
                                                              name      type
1                                             CAP - United Kingdom dataverse
2                                          China Archive Dataverse dataverse
3                               Isabel Causadias Domingo Dataverse dataverse
4                                                   Dataset-Omer-1   dataset
5                                                  CAP - Australia dataverse
6  Czech Household Panel Survey wave 3 - time-use diaries (adults)   dataset
7                                     Politics Now Poll: July 1996   dataset
8                                Politics Now Poll: September 1996   dataset
9                                Politics Now Poll: September 1996   dataset
10                                 Politics Now Poll: October 1996   dataset
                                                           url
1                  https://demo.dataverse.org/dataverse/CAP_UK
2           https://demo.dataverse.org/dataverse/china-archive
3  https://demo.dataverse.org/dataverse/icausadias_artresearch
4                          https://doi.org/10.70122/FK2/RXCK22
5           https://demo.dataverse.org/dataverse/CAP_Australia
6                          https://doi.org/10.70122/FK2/BSEQZI
7                      https://doi.org/10.25940/ROPER-31106695
8                      https://doi.org/10.25940/ROPER-31106705
9                      https://doi.org/10.25940/ROPER-31106707
10                     https://doi.org/10.25940/ROPER-31106688
                                                   image_url
1  https://demo.dataverse.org/api/access/dvCardImage/2058461
2                                                       &lt;NA&gt;
3                                                       &lt;NA&gt;
4                                                       &lt;NA&gt;
5  https://demo.dataverse.org/api/access/dvCardImage/2058462
6                                                       &lt;NA&gt;
7                                                       &lt;NA&gt;
8                                                       &lt;NA&gt;
9                                                       &lt;NA&gt;
10                                                      &lt;NA&gt;
               identifier
1                  CAP_UK
2           china-archive
3  icausadias_artresearch
4                    &lt;NA&gt;
5           CAP_Australia
6                    &lt;NA&gt;
7                    &lt;NA&gt;
8                    &lt;NA&gt;
9                    &lt;NA&gt;
10                   &lt;NA&gt;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      description
1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             The UK Policy Agendas Project seeks to develop systematic measures of the policy agenda of British government and politics over time. It applies the policy content coding system of the original Policy Agendas Project in the United States, founded by Frank Baumgartner and Bryan Jones, with the aim of creating a consistent record of the issues that are attended to at different points in time, across many of the main venues of British public policy and politics – namely in parliament, the media and public opinion. The reliability of these measures of policy attention are ensured through adherence to clearly defined coding rules and standards, which give us confidence that changes in the priorities of government can be tracked consistently over time and in different arenas of politics. Location: University of Edinburgh; University of Southampton Downloadable Data Series: 12 Time Span: 1910-2015 Total Observations: 125,539
2  Introduction The China Archive is a data archive dedicated to support of scholarly, empirical research by anthropologists, economists, historians, political scientists, sociologists, and others in the fields of business, agriculture, and engineering. The goal of the Archive is to enable case research on Chinese domestic matters and China–U.S. relations, as well as to facilitate the inclusion of China in more broadly comparative studies. To that end, the Archive’s mission includes: acquiring and maintaining extant data sets and data sources on an ongoing basis, facilitating production of quantitative data from textual information when such is desirable and feasible, making all of the Archive’s data available on a user-friendly basis to scholars at and visiting Texas A&amp;M University, and establishing web-based links to searchable electronic sources of information on China. As long-term goals, The China Archive is especially dedicated to: locating and acquiring difficult-to-obtain Chinese data such as public opinion data, making as many of the holdings as possible available online or via other computer media, and providing capability for converting textual data to numerical data suitable for quantitative analysis. In keeping with these goals, the Archive includes data sets collected by individuals and research centers/institutes as well as by government agencies. The Archive was planned by a faculty committee in 2002–2003, and is now a project of the Texas A&amp;M University Libraries. A faculty committee continues to function as an advisory committee to the Libraries on matters related to the upkeep and expansion of The China Archive. The faculty committee is, in turn, advised by an External Advisory Panel, composed of China scholars from other academic institutions in the United States. Faculty Planning Committee Bob Harmel, Archive Planning Committee Chair; Political Science; Director, Program in the Cross-National Study of Politics Stephen Atkins, Sterling Evans Library Ben Crouch, Associate Dean, College of Liberal Arts Qi Li, Department of Economics Xinsheng Liu, Institute for Science, Technology and Public Policy, Bush School of Government and Public Service; School of Government, Peking University Rick Nader, Director, Institute for Pacific Asia Dudley Poston, Professor of Sociology and Abell Professor of Liberal Arts Raghavan (Srini) Srinivasan, Director, Spatial Sciences Laboratory, Texas Agriculture Experiment Station Di Wang, Assistant Professor of History Ben Wu, Associate Professor, Rangeland Ecology and Management Wei Zhao, Professor, Computer Science; Associate Vice President for Research Dianzhi (Dan) Sui, Department of Geography
3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    This Dataverse explores the diverse contexts in which artistic practice and collective identity develop, examining the intersections of cultural critique, market dynamics, and technological advancement. The datasets available in this Dataverse include a wide-ranging investigation into how artist collectives shape collective identities that transcend individual authorship, often reflecting cultural, social, and political themes. Additionally, research on the art market sheds light on the systems governing art distribution and valuation, while studies on the influence of technology in art education explore how digital tools and AI are reshaping creative processes and academic environments. This Dataverse offers resources for researchers, students, and professionals in the fields of art history, cultural studies, and social sciences, aiming to deepen understanding of the structures, markets, and technologies that inform contemporary art and its societal impact.
4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  This should be bold. This should be a new line. This should be a blockquote. This should be code This should be emphasized This should be strong There should be a horizontal rule below this sentence. This should be h1 size. This should be h2 This should be h3. This should be first item in a list This should be second item in a list This should be a paragraph break This should be subscript. This should be superscript This should be striked out
5                                                                                                                                                                                                                                          The Australian Policy Agendas Project collects and organizes data on Australian legislation, executive speeches, opposition questions, public opinion, media coverage, and High Court decisions. Some details are listed below. Data is forthcoming. Decisions of the High Court of Australia This dataset contains information on every case decided by the High Court of Australia between the years 1970 and 2015. Cases serve as the unit of analysis. Each case was coded in terms of its policy content and several other variables controlling for the nature of the case and the nature of the court. In coding for policy content, we utilized the Comparative Agendas Project’s topics coding scheme, where each case was assigned both a major topic and a sub topic depending on its policy content. A full description of these categories and their corresponding codes may be found in the codebook. Sydney Morning Herald - Front Page Articles This dataset contains information on each article published on the Sydney Morning Herald's front page for each day from 1990 through 2015. Front page articles serve as the unit of analysis. Each article was coded in terms of its policy content and other variables of interest controlling for location, political context, and key actors. In coding for policy content, we utilized the Comparative Agendas Project’s major topics coding scheme, where each article was assigned a major topic code. A full description of the policy content categories and their corresponding codes may be found in the major topics codebook. Dr. Keith Dowding (ANU), Dr. Aaron Martin (Melbourne), and Dr. Rhonda Evans (UT-Austin) lead the Australian Policy Agendas Project. Dr. Dowding and Dr. Martin coded legislation, executive speeches, opposition questions, public opinion, and media data, and Dr. Evans collected data on decisions of the High Court of Australia as well as additional media data. Data is forthcoming. Principal Investigator: Dr. Keith Dowding, Dr. Aaron Martin, Dr. Rhonda Evans Location: Australian National University, University of Melbourne, The University of Texas at Austin Downloadable Data Series: 1 Time Span: 1970-2015 Total Observations: 2,548 Sponsoring Institutions Dr. Dowding and Dr. Martin’s research was funded by the Australian Research Council Discovery Award DP 110102622. Dr. Evans’ research is funded by the Edward A. Clark Center for Australian and New Zealand Studies at The University of Texas at Austin.
6                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         The dataset contains information from the time-use diaries distributed to adults (18 years and more) in the respective wave of the Czech Household Panel Survey. The dataset does not include other information on time-use diary respondents - these need to be appended from the main data file from the respective wave. The Czech Household Panel Survey (CHPS) is a sample survey that repeatedly interviews a representative sample of the sample households living in the Czech Republic. Between 2015 and 2019, five waves with annual intervals were fielded. In 2020 and 2021, two smaller data collections focused on the covid-19 pandemic occurred. From 2023 to 2024, the next (sixth) wave was undertaken. CHPS is an interdisciplinary study using insights from sociology, economics, and political science. From 2015 to 2018, the study focused on five main thematic areas: Family life, time use, health; Education and the labour market; Social stratification; Housing; Political participation and civil society. The first wave's sample of households was constructed using probabilistic (random) sampling to be representative of the Czech Republic's household population. In the next waves, households that took part in the previous year were asked to participate. All household members in the target age range were invited to complete the questionnaires. New households were not introduced into the sample from the second to the fifth wave.
7                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            &lt;NA&gt;
8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            &lt;NA&gt;
9                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            &lt;NA&gt;
10                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           &lt;NA&gt;
           published_at publicationStatuses                 affiliation
1  2023-06-06T17:18:53Z           Published Comparative Agendas Project
2  2016-12-09T20:13:22Z           Published      Texas A &amp; M University
3  2024-10-27T21:01:11Z           Published    Universitat de Barcelona
4  2024-11-18T15:32:02Z           Published                        &lt;NA&gt;
5  2023-06-06T17:18:42Z           Published Comparative Agendas Project
6  2024-11-25T15:55:51Z           Published                        &lt;NA&gt;
7  2020-12-22T18:47:48Z           Published                        &lt;NA&gt;
8  2020-12-22T19:09:20Z           Published                        &lt;NA&gt;
9  2020-12-22T19:11:02Z           Published                        &lt;NA&gt;
10 2020-12-22T19:16:27Z           Published                        &lt;NA&gt;
           parentDataverseName parentDataverseIdentifier
1  Demo testing request access         requestaccessdemo
2               Demo Dataverse                      demo
3               Demo Dataverse                      demo
4                         &lt;NA&gt;                      &lt;NA&gt;
5  Demo testing request access         requestaccessdemo
6                         &lt;NA&gt;                      &lt;NA&gt;
7                         &lt;NA&gt;                      &lt;NA&gt;
8                         &lt;NA&gt;                      &lt;NA&gt;
9                         &lt;NA&gt;                      &lt;NA&gt;
10                        &lt;NA&gt;                      &lt;NA&gt;
                     global_id
1                         &lt;NA&gt;
2                         &lt;NA&gt;
3                         &lt;NA&gt;
4      doi:10.70122/FK2/RXCK22
5                         &lt;NA&gt;
6      doi:10.70122/FK2/BSEQZI
7  doi:10.25940/ROPER-31106695
8  doi:10.25940/ROPER-31106705
9  doi:10.25940/ROPER-31106707
10 doi:10.25940/ROPER-31106688
                                                  publisher
1                                                      &lt;NA&gt;
2                                                      &lt;NA&gt;
3                                                      &lt;NA&gt;
4                                            Demo Dataverse
5                                                      &lt;NA&gt;
6        Czech Social Science Data Archive - TEST DATAVERSE
7  Harvesting Roper Center Datasets (this is an experiment)
8  Harvesting Roper Center Datasets (this is an experiment)
9  Harvesting Roper Center Datasets (this is an experiment)
10 Harvesting Roper Center Datasets (this is an experiment)
                                                                                                                                                                                                                                                                                                              citationHtml
1                                                                                                                                                                                                                                                                                                                     &lt;NA&gt;
2                                                                                                                                                                                                                                                                                                                     &lt;NA&gt;
3                                                                                                                                                                                                                                                                                                                     &lt;NA&gt;
4                                                                                                                                                           Fahim, Omer, 2024, "Dataset-Omer-1", &lt;a href="https://doi.org/10.70122/FK2/RXCK22" target="_blank"&gt;https://doi.org/10.70122/FK2/RXCK22&lt;/a&gt;, Demo Dataverse, V2
5                                                                                                                                                                                                                                                                                                                     &lt;NA&gt;
6  Lyons, Pat; Hamplov&amp;aacute;, Dana; R&amp;ouml;schov&amp;aacute;, Michaela; Kudrn&amp;aacute;č, Ale&amp;scaron;; Hrub&amp;aacute;, Lucie, 2024, "Czech Household Panel Survey wave 3 - time-use diaries (adults)", &lt;a href="https://doi.org/10.70122/FK2/BSEQZI" target="_blank"&gt;https://doi.org/10.70122/FK2/BSEQZI&lt;/a&gt;, Demo Dataverse, V1
7                                                                                                              Politics Now, 2025, "Politics Now Poll: July 1996", &lt;a href="https://doi.org/10.25940/ROPER-31106695" target="_blank"&gt;https://doi.org/10.25940/ROPER-31106695&lt;/a&gt;, Roper Center for Public Opinion Research
8                                                                                                         Politics Now, 2025, "Politics Now Poll: September 1996", &lt;a href="https://doi.org/10.25940/ROPER-31106705" target="_blank"&gt;https://doi.org/10.25940/ROPER-31106705&lt;/a&gt;, Roper Center for Public Opinion Research
9                                                                                                         Politics Now, 2025, "Politics Now Poll: September 1996", &lt;a href="https://doi.org/10.25940/ROPER-31106707" target="_blank"&gt;https://doi.org/10.25940/ROPER-31106707&lt;/a&gt;, Roper Center for Public Opinion Research
10                                                                                                          Politics Now, 2025, "Politics Now Poll: October 1996", &lt;a href="https://doi.org/10.25940/ROPER-31106688" target="_blank"&gt;https://doi.org/10.25940/ROPER-31106688&lt;/a&gt;, Roper Center for Public Opinion Research
   identifier_of_dataverse
1                     &lt;NA&gt;
2                     &lt;NA&gt;
3                     &lt;NA&gt;
4                     demo
5                     &lt;NA&gt;
6                CSDA_TEST
7           roperharvested
8           roperharvested
9           roperharvested
10          roperharvested
                                          name_of_dataverse
1                                                      &lt;NA&gt;
2                                                      &lt;NA&gt;
3                                                      &lt;NA&gt;
4                                            Demo Dataverse
5                                                      &lt;NA&gt;
6        Czech Social Science Data Archive - TEST DATAVERSE
7  Harvesting Roper Center Datasets (this is an experiment)
8  Harvesting Roper Center Datasets (this is an experiment)
9  Harvesting Roper Center Datasets (this is an experiment)
10 Harvesting Roper Center Datasets (this is an experiment)
                                                                                                                                                                                                        citation
1                                                                                                                                                                                                           &lt;NA&gt;
2                                                                                                                                                                                                           &lt;NA&gt;
3                                                                                                                                                                                                           &lt;NA&gt;
4                                                                                                                   Fahim, Omer, 2024, "Dataset-Omer-1", https://doi.org/10.70122/FK2/RXCK22, Demo Dataverse, V2
5                                                                                                                                                                                                           &lt;NA&gt;
6  Lyons, Pat; Hamplová, Dana; Röschová, Michaela; Kudrnáč, Aleš; Hrubá, Lucie, 2024, "Czech Household Panel Survey wave 3 - time-use diaries (adults)", https://doi.org/10.70122/FK2/BSEQZI, Demo Dataverse, V1
7                                                                          Politics Now, 2025, "Politics Now Poll: July 1996", https://doi.org/10.25940/ROPER-31106695, Roper Center for Public Opinion Research
8                                                                     Politics Now, 2025, "Politics Now Poll: September 1996", https://doi.org/10.25940/ROPER-31106705, Roper Center for Public Opinion Research
9                                                                     Politics Now, 2025, "Politics Now Poll: September 1996", https://doi.org/10.25940/ROPER-31106707, Roper Center for Public Opinion Research
10                                                                      Politics Now, 2025, "Politics Now Poll: October 1996", https://doi.org/10.25940/ROPER-31106688, Roper Center for Public Opinion Research
              storageIdentifier        subjects fileCount versionId
1                          &lt;NA&gt;            NULL        NA        NA
2                          &lt;NA&gt;            NULL        NA        NA
3                          &lt;NA&gt;            NULL        NA        NA
4      s3://10.70122/FK2/RXCK22 Social Sciences         0    273564
5                          &lt;NA&gt;            NULL        NA        NA
6      s3://10.70122/FK2/BSEQZI Social Sciences         0    274306
7  s3://10.25940/roper-31106695                         0    321192
8  s3://10.25940/roper-31106705                         0    321773
9  s3://10.25940/roper-31106707                         0    321819
10 s3://10.25940/roper-31106688                         0    321973
   versionState majorVersion minorVersion            createdAt
1          &lt;NA&gt;           NA           NA                 &lt;NA&gt;
2          &lt;NA&gt;           NA           NA                 &lt;NA&gt;
3          &lt;NA&gt;           NA           NA                 &lt;NA&gt;
4      RELEASED            2            0 2024-11-05T18:57:22Z
5          &lt;NA&gt;           NA           NA                 &lt;NA&gt;
6      RELEASED            1            1 2024-11-11T13:37:31Z
7      RELEASED           NA           NA 2025-07-01T20:25:31Z
8      RELEASED           NA           NA 2025-07-01T20:26:26Z
9      RELEASED           NA           NA 2025-07-01T20:26:30Z
10     RELEASED           NA           NA 2025-07-01T20:26:45Z
              updatedAt
1                  &lt;NA&gt;
2                  &lt;NA&gt;
3                  &lt;NA&gt;
4  2024-11-18T15:32:02Z
5                  &lt;NA&gt;
6  2024-12-22T13:18:13Z
7  2025-07-01T20:25:31Z
8  2025-07-01T20:26:26Z
9  2025-07-01T20:26:30Z
10 2025-07-01T20:26:45Z
                                                                      contacts
1                                                                         NULL
2                                                                         NULL
3                                                                         NULL
4                                              Fahim, Omer, Harvard University
5                                                                         NULL
6  Röschová, Michaela, Institute of Sociology of the Czech Academy of Sciences
7                                                                           , 
8                                                                           , 
9                                                                           , 
10                                                                          , 
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  publications
1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         NULL
2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         NULL
3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         NULL
4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             McGhee, Eric, Seth Masket, Boris Shor, Steven Rogers, and Nolan McCarty. 2014. “A Primary Cause of Partisanship? Nomination Systems and Legislator Ideology.” &lt;i&gt;American Journal of Political Science&lt;/i&gt; 58 (2): 337–51., http://dx.doi.org/10.1111/ajps.12070
5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         NULL
6  Kudrnáč, A., Eger. A. M., Hjerm, M. 2023. Scapegoating Immigrants in Times of Personal and Collective Crises: Results from a Czech Panel Study. International Migration Review 0(0)1-20, Kudrnáčová M, Kudrnáč A (2023) Better sleep, better life? testing the role of sleep on quality of life. PLoS ONE 18(3): e0282085. https://doi.org/10.1371/journal.pone.0282085, Sládek, M., Klusáček, J., Hamplová, D., &amp;amp; Sumová, A. 2023. Population-representative study reveals cardiovascular and metabolic disease biomarkers associated with misaligned sleep schedules. Sleep, https://doi.org/10.1093/sleep/zsad037, Raudenská, P., D. Hamplová. 2022. The Effect of Parents' Education and Income on Children's School Performance: the Mediating Role of the Family Environment and Children's Characteristics, and Gender Differences. Polish Sociological Review 218: 247-271, https://doi.org/10.26412/psr218.06, Kudrnáčová, M., D. Hamplová. 2022. Social Jetlag in the Context of Work and Family. Sociológia / Slovak Sociological Review: 54(4): 295-324. 0049-1225. DOI: https://doi.org/10.31577/sociologia.2022.54.4.11, Kudrnáč, A., J. Klusáček. 2022. Dočasný nárůst důvěry ve vládu a dodržování protiepidemických opatření na počátku koronavirové krize. Sociologický časopis / Czech Sociological Review 58(2):119-150, https://doi.org/10.13060/csr.2022.016., Hamplová, D., Raudenská, P. 2021. Gender Differences in the Link between Family Scholarly Culture and Parental Educational Aspirations. Sociológia - Slovak Sociological Review 53 (5): 435-462, https://doi.org/10.31577/sociologia.2021.53.5.16, Raudenská, P., K. Bašná. 2021. Individual’s cultural capital: intergenerational transmission, partner effect, or individual merit? Poetics, https://doi.org/10.1016/j.poetic.2021.101575, Kudrnáč, A. 2021. A study of the effects of obesity and poor health on the relationship between distance to the polling station and the probability to vote. Party Politics 27(3):540-551, https://doi.org/10.1177/1354068819867414, Sládek, M., Kudrnáčová Röschová, M., Adámková, V., Hamplová, D., &amp;amp; Sumová, A. 2020. Chronotype assessment via a large scale sociodemographic survey favours yearlong Standard time over Daylight Saving Time in central Europe. Scientific reports, 10(1), 1419, https://doi.org/10.1038/s41598-020-58413-9, Nývlt, Ondřej. 2018. sociodemografické determinanty studijních výsledků a začátku pracovní kariéry v České republice. Demografie 60 (2):111-123, Lux, M., P. Sunega, L. Kážmér. 2018. Intergenerational financial transfers and indirect reciprocity: determinants of the reproduction of homeownership in the postsocialist Czech Republic. Housing Studies, https://doi.org/10.1080/02673037.2018.1541441, Slepičková, Lenka, Petr Fučík. 2018. Využívání předškolního vzdělávání v České republice: Komu chybí místa ve školkách? Sociologický časopis / Czech Sociological Review 54 (1): 35-62, https://doi.org/10.13060/00380288.2018.54.1.395, Hrubá, L. 2017. Sociální determinanty vysokých vzdělanostních očekávání rodičů. Sociológia - Slovak Sociological Review 49 (5): 463-481, https://journals.sagepub.com/doi/10.1177/01979183231177971, https://doi.org/10.1371/journal.pone.0282085, https://doi.org/10.1093/sleep/zsad037, https://doi.org/10.26412/psr218.06, https://doi.org/10.31577/sociologia.2022.54.4.11, https://doi.org/10.13060/csr.2022.016, https://www.sav.sk/index.php?lang=sk&amp;amp;doc=journal-list&amp;amp;part=article_response_page&amp;amp;journal_article_no=26724, https://www.sciencedirect.com/science/article/pii/S0304422X21000590?via%3Dihub, https://journals.sagepub.com/doi/10.1177/1354068819867414, https://doi.org/10.1038/s41598-020-58413-9, https://www.czechdemography.cz/aktuality/demografie-c-2-2018/, https://doi.org/10.1080/02673037.2018.1541441, https://doi.org/10.13060/00380288.2018.54.1.395, https://www.ceeol.com/search/article-detail?id=583362
7                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         NULL
8                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         NULL
9                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         NULL
10                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        NULL
                                                                       authors
1                                                                         NULL
2                                                                         NULL
3                                                                         NULL
4                                                                  Fahim, Omer
5                                                                         NULL
6  Lyons, Pat, Hamplová, Dana, Röschová, Michaela, Kudrnáč, Aleš, Hrubá, Lucie
7                                                                 Politics Now
8                                                                 Politics Now
9                                                                 Politics Now
10                                                                Politics Now
       keywords
1          NULL
2          NULL
3          NULL
4          NULL
5          NULL
6  time budgets
7          NULL
8          NULL
9          NULL
10         NULL
                                                                                                          producers
1                                                                                                              NULL
2                                                                                                              NULL
3                                                                                                              NULL
4                                                                                                              NULL
5                                                                                                              NULL
6  Institute of Sociology of the Czech Academy of Sciences, CERGE-EI, Masaryk University, Faculty of Social Studies
7                                                                                                              NULL
8                                                                                                              NULL
9                                                                                                              NULL
10                                                                                                             NULL
   geographicCoverage
1                NULL
2                NULL
3                NULL
4                NULL
5                NULL
6      Czech Republic
7                NULL
8                NULL
9                NULL
10               NULL

$data$count_in_response
[1] 10</code></pre>
</div>
</div>
<p><code>View(politics_datasets)</code>를 사용하여 데이터셋을 볼 수 있으며, 이를 통해 관심 있는 트리를 확장할 수 있습니다. 항목 위에 마우스를 올린 다음 녹색 화살표 아이콘을 클릭하여 해당 요소를 중심으로 하는 데 필요한 코드를 얻을 수도 있습니다(<a href="#fig-jsonfirst" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-jsonfirst</span></a>).</p>
<div id="fig-jsonfirst" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-jsonfirst-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/jsonlite.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-jsonfirst-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;7.3: JSON 요소 “items” 위에 마우스를 올린 예시. 녹색 화살표 아이콘을 클릭하면 해당 요소를 중심으로 하는 코드를 얻을 수 있습니다.
</figcaption>
</figure>
</div>
<p>이를 통해 관심 있는 데이터셋을 얻는 방법을 알 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as_tibble</span>(politics_datasets[[<span class="st">"data"</span>]][[<span class="st">"items"</span>]])</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!-- ### 트위터에서 데이터 수집 -->
<!-- 트위터는 텍스트 및 기타 데이터의 풍부한 소스이며 엄청난 양의 학술 연구에서 사용됩니다[@twitterseemsokay]. 트위터 API는 트위터가 이러한 데이터를 수집하도록 요청하는 방식입니다. `rtweet`는 이 API를 중심으로 구축되었으며 다른 `R` 패키지를 사용하는 것과 유사한 방식으로 상호 작용할 수 있습니다. (또 다른 유용한 `R` 패키지는 `academictwitteR`[@academictwitteR]이며, 이는 전체 접근 권한이 있는 학술 트랙 API에서만 작동하지만 전체 아카이브 검색을 가능하게 합니다.) 처음에는 일반 트위터 계정으로 트위터 API를 사용할 수 있습니다. -->
<!-- `rtweet` 및 `tidyverse`를 설치하고 로드하는 것으로 시작합니다. 그런 다음 `rtweet`를 승인해야 하며, 예를 들어 사용자의 즐겨찾기를 반환하는 `get_favorites()`와 같은 패키지의 함수를 호출하여 이 프로세스를 시작합니다. 승인 전에 실행되면 브라우저가 열리고 일반 트위터 계정에 로그인합니다(@fig-rtweetlogin). -->
<!-- ```{r} -->
<!-- #| warning: false -->
<!-- #| message: false -->
<!-- #| label: loadpackages -->
<!-- library(rtweet) -->
<!-- library(tidyverse) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- #| eval: false -->
<!-- #| label: initialise_rtweet -->
<!-- get_favorites(user = "RohanAlexander") -->
<!-- ``` -->
<!-- ![rtweet 승인 페이지](figures/rtweet.png){#fig-rtweetlogin width=90% fig-align="center"} -->
<!-- 애플리케이션이 승인되면 `get_favorites()`를 사용하여 사용자의 즐겨찾기를 실제로 가져와 저장할 수 있습니다. -->
<!-- ```{r} -->
<!-- #| label: get_rohan_favs -->
<!-- #| eval: false -->
<!-- rohans_favorites <- get_favorites("RohanAlexander") -->
<!-- saveRDS(rohans_favorites, "rohans_favorites.rds") -->
<!-- ``` -->
<!-- ```{r} -->
<!-- #| label: get_rohan_favsactual -->
<!-- #| include: false -->
<!-- #| eval: false -->
<!-- # INTERNAL -->
<!-- rohans_favorites <- get_favorites("RohanAlexander") -->
<!-- saveRDS(rohans_favorites, "inputs/data/rohans_favs.rds") -->
<!-- ``` -->
<!-- ```{r} -->
<!-- #| include: false -->
<!-- rohans_favorites <- readRDS(here::here("inputs/data/rohans_favs.rds")) -->
<!-- ``` -->
<!-- 그런 다음 최근 즐겨찾기를 살펴볼 수 있습니다. 액세스 시점에 따라 다를 수 있다는 점을 염두에 두십시오. -->
<!-- ```{r} -->
<!-- #| label: look_at_rohans_favs -->
<!-- rohans_favorites |> -->
<!--   arrange(desc(created_at)) |> -->
<!--   slice(1:10) |> -->
<!--   select(screen_name, text) -->
<!-- ``` -->
<!-- `search_tweets()`를 사용하여 특정 주제에 대한 트윗을 검색할 수 있습니다. 예를 들어, R과 일반적으로 관련된 해시태그인 "#rstats"를 사용하는 트윗을 살펴볼 수 있습니다. -->
<!-- ```{r} -->
<!-- #| label: get_rstats -->
<!-- #| eval: false -->
<!-- rstats_tweets <- search_tweets( -->
<!--   q = "#rstats", -->
<!--   include_rts = FALSE -->
<!-- ) -->
<!-- saveRDS(rstats_tweets, "rstats_tweets.rds") -->
<!-- ``` -->
<!-- ```{r} -->
<!-- #| label: get_rstatsactual -->
<!-- #| include: false -->
<!-- #| eval: false -->
<!-- # INTERNAL -->
<!-- rstats_tweets <- search_tweets( -->
<!--   q = "#rstats", -->
<!--   include_rts = FALSE -->
<!-- ) -->
<!-- saveRDS(rstats_tweets, "inputs/data/rstats_tweets.rds") -->
<!-- ``` -->
<!-- ```{r} -->
<!-- #| include: false -->
<!-- rstats_tweets <- readRDS(here::here("inputs/data/rstats_tweets.rds")) -->
<!-- ``` -->
<!-- ```{r} -->
<!-- #| label: look_at_rstats -->
<!-- rstats_tweets |> -->
<!--   select(screen_name, text) |> -->
<!--   head() -->
<!-- ``` -->
<!-- 사용할 수 있는 다른 유용한 함수로는 사용자가 팔로우하는 모든 계정을 가져오는 `get_friends()`와 사용자의 최근 트윗을 가져오는 `get_timelines()`가 있습니다. 개발자로 등록하면 더 많은 트위터 API 기능에 접근할 수 있습니다. -->
<!-- API를 사용할 때, 심지어 `R` 패키지(이 경우 `rtweet`)로 래핑된 경우에도 접근이 제공되는 조건을 읽는 것이 중요합니다. 트위터 API 문서는 놀랍도록 읽기 쉬우며, [개발자 정책](https://developer.twitter.com/en/developer-terms/policy)은 특히 명확합니다. API 제공자가 데이터를 제공하는 조건을 위반하기가 얼마나 쉬운지 보려면, 우리가 다운로드한 트윗을 저장했다고 가정해 보십시오. 이것을 GitHub에 푸시하면 트윗에 민감한 정보가 포함되어 있었다면 실수로 저장했을 수 있습니다. 트위터는 또한 API를 사용하는 사람들에게 민감한 정보에 대해 특히 주의하고 트위터 사용자를 트위터 외부의 신원과 일치시키지 않도록 명시적으로 요청합니다. 다시 말하지만, [이러한 제한된 사용 사례에 대한 문서](https://developer.twitter.com/en/developer-terms/more-on-restricted-use-cases)는 명확하고 읽기 쉽습니다. -->
</section>
</section>
<section id="spotify" class="level3" data-number="7.2.2">
<h3 data-number="7.2.2" class="anchored" data-anchor-id="spotify"><span class="header-section-number">7.2.2</span> Spotify</h3>
<p>때로는 API를 중심으로 구축된 <code>R</code> 패키지가 있어 이전에 본 것과 유사한 방식으로 상호 작용할 수 있습니다. 예를 들어, <code>spotifyr</code>는 Spotify API를 감싸는 래퍼입니다. API를 사용할 때, 심지어 <code>R</code> 패키지(이 경우 <code>spotifyr</code>)로 래핑된 경우에도 접근이 제공되는 조건을 읽는 것이 중요합니다.</p>
<p>Spotify API에 접근하려면 <a href="https://developer.spotify.com/dashboard/">Spotify 개발자 계정</a>이 필요합니다. 이것은 무료이지만 Spotify 계정으로 로그인한 다음 개발자 약관에 동의해야 합니다(<a href="#fig-spotifyaccept" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-spotifyaccept</span></a>).</p>
<div id="fig-spotifyaccept" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-spotifyaccept-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/spotify.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-spotifyaccept-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;7.4: Spotify 개발자 계정 약관 동의 페이지
</figcaption>
</figure>
</div>
<p>등록 절차를 계속 진행하면, 우리의 경우 무엇을 구축하는지 “모르기” 때문에 Spotify는 비상업적 계약을 사용하도록 요구하며, 이는 괜찮습니다. Spotify API를 사용하려면 “클라이언트 ID”와 “클라이언트 시크릿”이 필요합니다. 이것들은 우리가 비밀로 유지해야 하는 것들입니다. 그렇지 않으면 세부 정보를 아는 누구든지 우리 개발자 계정을 우리인 것처럼 사용할 수 있습니다. 이러한 세부 정보를 최소한의 번거로움으로 비밀로 유지하는 한 가지 방법은 “시스템 환경”에 보관하는 것입니다. 이렇게 하면 GitHub에 푸시할 때 포함되지 않아야 합니다. 이를 위해 <code>usethis</code>를 로드하고 사용하여 시스템 환경을 수정할 것입니다. 특히, “.Renviron”이라는 파일이 있으며, 이를 열고 “클라이언트 ID”와 “클라이언트 시크릿”을 추가할 것입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">edit_r_environ</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>edit_r_environ()</code>을 실행하면 “.Renviron” 파일이 열리고 “Spotify Client ID”와 “Client Secret”을 추가할 수 있습니다. <code>spotifyr</code>가 해당 특정 이름의 키를 환경에서 찾을 것이므로 동일한 이름을 사용하는 것이 중요합니다. 이 책에서는 일반적으로 큰따옴표를 사용하지만 여기서는 작은따옴표를 사용하는 것이 중요합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>SPOTIFY_CLIENT_ID <span class="ot">=</span> <span class="st">'PUT_YOUR_CLIENT_ID_HERE'</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>SPOTIFY_CLIENT_SECRET <span class="ot">=</span> <span class="st">'PUT_YOUR_SECRET_HERE'</span></span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>“.Renviron” 파일을 저장한 다음 R을 다시 시작합니다: “세션” <span class="math inline">\(\rightarrow\)</span> “R 다시 시작”. 이제 필요에 따라 “Spotify 클라이언트 ID”와 “클라이언트 시크릿”을 사용할 수 있습니다. 그리고 해당 세부 정보를 인수로 요구하는 함수는 명시적으로 다시 지정할 필요 없이 작동할 것입니다.</p>
<p>이를 시도하기 위해 <code>spotifyr</code>를 설치하고 로드합니다. <code>get_artist_audio_features()</code>를 사용하여 영국 록 밴드 라디오헤드에 대한 정보를 가져와 저장할 것입니다. 필요한 인수 중 하나는 <code>authorization</code>이지만, 기본적으로 “.Renviron” 파일을 찾도록 설정되어 있으므로 여기서는 지정할 필요가 없습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>radiohead <span class="ot">&lt;-</span> <span class="fu">get_artist_audio_features</span>(<span class="st">"radiohead"</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(radiohead, <span class="st">"radiohead.rds"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>radiohead <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"radiohead.rds"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>노래를 기반으로 다양한 정보를 사용할 수 있습니다. 시간이 지남에 따라 노래가 길어지는지 여부에 관심이 있을 수 있습니다(<a href="#fig-readioovertime" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-readioovertime</span></a>). <a href="#sec-static-communication의" class="quarto-xref"><span class="quarto-unresolved-ref">sec-static-communication의</span></a> 지침에 따라 이것은 앨범별 요약 통계를 동시에 전달하기 위해 상자 그림을 추가로 사용할 수 있는 좋은 기회입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>radiohead <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(radiohead)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>radiohead <span class="sc">|&gt;</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">album_release_date =</span> <span class="fu">ymd</span>(album_release_date)) <span class="sc">|&gt;</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> album_release_date,</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> duration_ms,</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">group =</span> album_release_date</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">+</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">width =</span> <span class="fl">0.3</span>, <span class="at">height =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"앨범 발매일"</span>,</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"노래 길이 (ms)"</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-readioovertime" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-readioovertime-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="07-gather_ko_files/figure-html/fig-readioovertime-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-readioovertime-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;7.5: Spotify에서 수집한 라디오헤드 각 노래의 길이, 시간 경과에 따라
</figcaption>
</figure>
</div>
</div>
</div>
<p>Spotify에서 각 노래에 대해 제공하는 흥미로운 변수 중 하나는 “valence”입니다. Spotify <a href="https://developer.spotify.com/documentation/web-api/reference/#/operations/get-audio-features">문서</a>는 이를 0과 1 사이의 척도로 설명하며, 높은 값일수록 더 긍정적인 “음악적 긍정성”을 나타냅니다. 예를 들어, 라디오헤드, 미국 록 밴드 더 내셔널, 미국 가수 테일러 스위프트와 같은 몇몇 아티스트 간의 시간 경과에 따른 valence를 비교하는 데 관심이 있을 수 있습니다.</p>
<p>먼저 데이터를 수집해야 합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>taylor_swift <span class="ot">&lt;-</span> <span class="fu">get_artist_audio_features</span>(<span class="st">"taylor swift"</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>the_national <span class="ot">&lt;-</span> <span class="fu">get_artist_audio_features</span>(<span class="st">"the national"</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(taylor_swift, <span class="st">"taylor_swift.rds"</span>)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(the_national, <span class="st">"the_national.rds"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>그런 다음 그것들을 함께 가져와 그래프를 만들 수 있습니다(<a href="#fig-swiftyvsnationalvsradiohead" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-swiftyvsnationalvsradiohead</span></a>). 이것은 테일러 스위프트와 라디오헤드는 시간이 지남에 따라 valence 수준을 대체로 유지했지만, 더 내셔널은 감소했음을 보여주는 것으로 보입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(taylor_swift, the_national, radiohead) <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(artist_name, album_release_date, valence) <span class="sc">|&gt;</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">album_release_date =</span> <span class="fu">ymd</span>(album_release_date)) <span class="sc">|&gt;</span> </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>( <span class="at">x =</span> album_release_date, <span class="at">y =</span> valence, <span class="at">color =</span> artist_name)) <span class="sc">+</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="at">facets =</span> <span class="fu">vars</span>(artist_name), <span class="at">dir =</span> <span class="st">"v"</span>) <span class="sc">+</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"앨범 발매일"</span>,</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Valence"</span>,</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"아티스트"</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>) <span class="sc">+</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-swiftyvsnationalvsradiohead" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-swiftyvsnationalvsradiohead-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="07-gather_ko_files/figure-html/fig-swiftyvsnationalvsradiohead-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-swiftyvsnationalvsradiohead-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;7.6: 라디오헤드, 테일러 스위프트, 더 내셔널의 시간 경과에 따른 valence 비교
</figcaption>
</figure>
</div>
</div>
</div>
<p>이 모든 정보가 아주 적은 노력과 비용으로 제공되는 세상에 살고 있다는 것이 얼마나 놀라운 일입니까! 그리고 데이터를 수집한 후에는 할 수 있는 일이 많습니다. 예를 들어, <span class="citation" data-cites="kaylinpavlik는">(<a href="#ref-kaylinpavlik는" role="doc-biblioref"><strong>kaylinpavlik는?</strong></a>)</span> 확장된 데이터셋을 사용하여 음악 장르를 분류하고 <span class="citation" data-cites="theeconomistonspotify는">(<a href="#ref-theeconomistonspotify는" role="doc-biblioref"><strong>theeconomistonspotify는?</strong></a>)</span> 언어가 Spotify에서 음악 스트리밍과 어떻게 관련되어 있는지 살펴봅니다. 이러한 데이터를 수집할 수 있는 능력은 과거에는 실험적으로 고려해야 했던 질문에 답할 수 있게 해줍니다. 예를 들어, <span class="citation" data-cites="salganik2006experimental은">(<a href="#ref-salganik2006experimental은" role="doc-biblioref"><strong>salganik2006experimental은?</strong></a>)</span> 이제 접근할 수 있는 관찰 데이터 대신 실험 데이터를 사용하여 히트곡을 만드는 사회적 측면을 분석해야 했습니다.</p>
<p>그렇긴 하지만, valence가 측정하려는 것이 무엇인지 생각해 볼 가치가 있습니다. Spotify 문서에는 그것이 어떻게 생성되었는지에 대한 정보가 거의 없습니다. 하나의 숫자가 노래의 긍정성을 완전히 나타낼 수 있다는 것은 의심스럽습니다. 그리고 Spotify에 없거나 공개되지 않은 이 아티스트들의 노래는 어떻습니까? 이것은 측정과 표본 추출이 데이터로 이야기를 하는 모든 측면에 어떻게 스며드는지를 보여주는 좋은 예입니다.</p>
</section>
</section>
<section id="웹-스크래핑" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="웹-스크래핑"><span class="header-section-number">7.3</span> 웹 스크래핑</h2>
<section id="원칙" class="level3" data-number="7.3.1">
<h3 data-number="7.3.1" class="anchored" data-anchor-id="원칙"><span class="header-section-number">7.3.1</span> 원칙</h3>
<p>웹 스크래핑은 웹사이트에서 데이터를 가져오는 방법입니다. 브라우저를 사용하여 웹사이트로 이동한 다음 사본을 저장하는 대신, 우리는 우리를 위해 이 작업을 수행하는 코드를 작성합니다. 이것은 우리에게 상당한 데이터를 열어주지만, 다른 한편으로는 일반적으로 이러한 목적으로 제공되는 데이터가 아닙니다. 이는 존중하는 태도를 갖는 것이 특히 중요하다는 것을 의미합니다. 일반적으로 불법은 아니지만, 웹 스크래핑의 합법성에 대한 구체적인 내용은 관할권과 우리가 무엇을 하는지에 따라 다르므로 주의하는 것이 중요합니다. 우리의 사용이 상업적으로 경쟁적이지 않더라도, 특히 우려되는 것은 우리의 작업이 재현 가능해야 한다는 필요성과 데이터 재게시를 허용하지 않을 수 있는 서비스 약관을 존중해야 한다는 필요성 사이의 갈등입니다<span class="citation" data-cites="luscombe2021algorithmic">(<a href="#ref-luscombe2021algorithmic" role="doc-biblioref">Luscombe, Dick, 와/과 Walby 2021</a>)</span>.</p>
<p>개인 정보 보호는 종종 재현성보다 우선합니다. 웹사이트에서 공개적으로 사용 가능한 데이터와 스크래핑, 정리 및 데이터셋으로 준비된 다음 공개적으로 출시되는 데이터 사이에는 상당한 차이가 있습니다. 예를 들어, <span class="citation" data-cites="kirkegaard2016okcupid는">(<a href="#ref-kirkegaard2016okcupid는" role="doc-biblioref"><strong>kirkegaard2016okcupid는?</strong></a>)</span> 공개적으로 사용 가능한 OKCupid 프로필을 스크래핑한 다음 결과 데이터셋을 쉽게 사용할 수 있도록 했습니다<span class="citation" data-cites="hackett2016researchers">(<a href="#ref-hackett2016researchers" role="doc-biblioref">Hackett 2016</a>)</span>. <span class="citation" data-cites="zimmer2018addressing은">(<a href="#ref-zimmer2018addressing은" role="doc-biblioref"><strong>zimmer2018addressing은?</strong></a>)</span> “피해 최소화”, “정보에 입각한 동의”, 그리고 데이터셋에 있는 사람들이 “개인 정보 및 기밀 유지”를 유지하도록 보장하는 것을 포함하여 간과된 몇 가지 중요한 고려 사항을 자세히 설명합니다. OKCupid가 데이터를 공개했다고 말하는 것이 옳지만, 그들은 특정 맥락에서 그렇게 했고, 그들의 데이터가 스크래핑되었을 때 그 맥락이 변경되었습니다.</p>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
아, 그것에 대해 좋은 데이터가 있다고 생각하는군요!
</div>
</div>
<div class="callout-body-container callout-body">
<p>경찰 폭력은 경찰과 사회 간의 신뢰가 필요하기 때문에 특히 우려됩니다. 좋은 데이터 없이는 경찰 부서에 책임을 묻거나 문제가 있는지 알기 어렵지만, 데이터를 얻는 것은 어렵습니다<span class="citation" data-cites="bronnerpolicenordata">(<a href="#ref-bronnerpolicenordata" role="doc-biblioref">Thomson-DeVeaux, Bronner, 와/과 Sharma 2021</a>)</span>. 근본적인 문제는 폭력으로 이어지는 만남을 데이터셋으로 쉽게 단순화할 방법이 없다는 것입니다. 두 가지 인기 있는 데이터셋은 웹 스크래핑을 기반으로 합니다.</p>
<ol type="1">
<li>“경찰 폭력 매핑”; 그리고</li>
<li>“치명적인 무력 데이터베이스”.</li>
</ol>
<p><span class="citation" data-cites="Bor2018은">(<a href="#ref-Bor2018은" role="doc-biblioref"><strong>Bor2018은?</strong></a>)</span> “경찰 폭력 매핑”을 사용하여 비무장 흑인 미국인에 대한 경찰 살해를 조사하고 흑인 미국인의 정신 건강에 상당한 영향을 미친다는 것을 발견했습니다. <span class="citation" data-cites="Nix2020과">(<a href="#ref-Nix2020과" role="doc-biblioref"><strong>Nix2020과?</strong></a>)</span> 같은 논문에 대한 응답은 데이터셋의 코딩에 특별한 우려를 표명하고 재코딩 후 다른 결론을 도출합니다. 코딩 차이의 예는 맥락과 사용법에 따라 달라지기 때문에 답할 수 없는 질문입니다. 즉, 장난감 총기로 살해된 개인을 “무장”으로 코딩해야 할까요, 아니면 “비무장”으로 코딩해야 할까요? 우리는 별도의 범주를 원할 수 있지만, 정량적 데이터셋을 구성하려면 어느 정도의 단순화가 필요합니다. <em>워싱턴 포스트</em>는 “치명적인 무력 데이터베이스”를 사용하여 많은 기사를 작성합니다<span class="citation" data-cites="washpostfatalforce">(<a href="#ref-washpostfatalforce" role="doc-biblioref">The Washington Post 2023</a>)</span>. <span class="citation" data-cites="washpostfatalforcemethods는">(<a href="#ref-washpostfatalforcemethods는" role="doc-biblioref"><strong>washpostfatalforcemethods는?</strong></a>)</span> 그들의 방법론과 표준화의 어려움을 설명합니다. <span class="citation" data-cites="Comer2022는">(<a href="#ref-Comer2022는" role="doc-biblioref"><strong>Comer2022는?</strong></a>)</span> 데이터셋을 비교하고 유사점을 찾지만, 데이터셋이 다른 방식을 문서화합니다.</p>
</div>
</div>
<p>웹 스크래핑은 귀중한 데이터 소스입니다. 그러나 일반적으로 다른 목표를 달성하려는 시도의 부산물로 생성될 수 있는 데이터셋입니다. 그리고 웹 스크래핑은 웹사이트 호스트에 비용을 부과하므로 가능한 한 이를 줄여야 합니다. 예를 들어, 소매업체는 제품과 가격이 있는 웹사이트를 가질 수 있습니다. 이것은 의도적으로 데이터 소스로 생성된 것이 아니지만, 우리는 그것을 스크래핑하여 데이터셋을 만들 수 있습니다. 다음 원칙은 웹 스크래핑을 안내하는 데 유용할 수 있습니다.</p>
<ol type="1">
<li>피하십시오. 가능한 한 API를 사용하십시오.</li>
<li>그들의 요구를 따르십시오. 일부 웹사이트에는 스크래퍼가 무엇을 하는 것을 편안하게 생각하는지에 대한 정보가 포함된 “robots.txt” 파일이 있습니다. 일반적으로 “robots.txt” 파일은 기본 URL에 “robots.txt”를 추가하여 접근할 수 있습니다. 예를 들어, https://www.google.com의 “robots.txt” 파일은 https://www.google.com/robots.txt에서 접근할 수 있습니다. “Disallow:”에 나열된 폴더가 있는지 확인하십시오. 이들은 웹사이트가 스크래핑되기를 원하지 않는 폴더입니다. 그리고 “Crawl-delay:”의 모든 인스턴스를 확인하십시오. 이것은 웹사이트가 방문 사이에 기다리기를 원하는 초 수입니다.</li>
<li>영향을 줄이십시오.
<ol type="1">
<li>스크래퍼 속도를 늦추십시오. 예를 들어, 웹사이트를 매초 방문하게 하는 대신 <code>sys.sleep()</code>을 사용하여 속도를 늦추십시오. 몇 백 개의 파일만 필요하다면 밤새 백그라운드에서 분당 몇 번만 웹사이트를 방문하게 하는 것은 어떻습니까?</li>
<li>스크래퍼를 실행하는 시기를 고려하십시오. 예를 들어, 소매업체를 스크래핑하는 경우 고객이 사이트를 덜 사용하는 밤 10시부터 아침까지 스크립트를 실행하도록 설정할 수 있습니다. 마찬가지로, 정부 웹사이트이고 정기적인 월별 출시가 있다면 그 날을 피하는 것이 예의일 수 있습니다.</li>
</ol></li>
<li>필요한 것만 가져가십시오. 예를 들어, 크로아티아의 10대 도시 이름만 필요하다면 위키피디아 전체를 스크래핑할 필요는 없습니다. 이것은 웹사이트에 미치는 영향을 줄이고, 우리의 행동을 더 쉽게 정당화할 수 있게 해줍니다.</li>
<li>한 번만 스크래핑하십시오. 즉, 스크래퍼가 언젠가 실패할 경우 데이터를 다시 수집할 필요가 없도록 모든 것을 진행하면서 저장해야 합니다. 예를 들어, 일반적으로 한 페이지에서 스크래퍼를 작동시키는 데 상당한 시간을 소비하지만, 일반적으로 페이지 구조가 언젠가 변경되고 스크래퍼를 업데이트해야 할 것입니다. 데이터를 얻은 후에는 원본, 편집되지 않은 데이터를 수정된 데이터와 별도로 저장해야 합니다. 시간이 지남에 따라 데이터가 필요하다면 다시 돌아가야 하지만, 이것은 불필요하게 페이지를 다시 스크래핑하는 것과는 다릅니다.</li>
<li>스크래핑된 페이지를 재게시하지 마십시오(이것은 생성한 데이터셋과 대조됩니다).</li>
<li>소유권을 가지고 가능하면 허락을 구하십시오. 최소한 모든 스크립트에는 연락처 정보가 포함되어야 합니다. 상황에 따라 스크래핑하기 전에 허락을 구하는 것이 가치가 있을 수 있습니다.</li>
</ol>
</section>
<section id="htmlcss-필수-사항" class="level3" data-number="7.3.2">
<h3 data-number="7.3.2" class="anchored" data-anchor-id="htmlcss-필수-사항"><span class="header-section-number">7.3.2</span> HTML/CSS 필수 사항</h3>
<p>웹 스크래핑은 웹페이지의 기본 구조를 활용하여 가능합니다. 우리는 HTML/CSS의 패턴을 사용하여 원하는 데이터를 가져옵니다. 기본 HTML/CSS를 보려면 다음을 수행할 수 있습니다.</p>
<ol type="1">
<li>브라우저를 열고 마우스 오른쪽 버튼을 클릭한 다음 “검사”와 같은 것을 선택합니다. 또는</li>
<li>웹사이트를 저장한 다음 브라우저 대신 텍스트 편집기로 엽니다.</li>
</ol>
<p>HTML/CSS는 일치하는 태그를 기반으로 하는 마크업 언어입니다. 텍스트를 굵게 표시하려면 다음과 같이 사용합니다.</p>
<pre class="text"><code>&lt;b&gt;내 굵은 텍스트&lt;/b&gt;</code></pre>
<p>마찬가지로, 목록을 원하면 목록을 시작하고 끝내고 각 항목을 나타냅니다.</p>
<pre class="text"><code>&lt;ul&gt;
  &lt;li&gt;웹 스크래핑 배우기&lt;/li&gt;
  &lt;li&gt;데이터 과학하기&lt;/li&gt;
  &lt;li&gt;수익 창출하기&lt;/li&gt;
&lt;/ul&gt;</code></pre>
<p>스크래핑할 때 이러한 태그를 검색할 것입니다.</p>
<p>시작하려면 웹사이트에서 HTML을 얻었다고 가정하고, 거기서 이름을 가져오고 싶다고 가정해 봅시다. 이름이 굵게 표시되어 있으므로 해당 기능을 중심으로 추출하고 싶습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>website_extract <span class="ot">&lt;-</span> <span class="st">"&lt;p&gt;안녕하세요, 저는 &lt;b&gt;로한&lt;/b&gt; 알렉산더입니다.&lt;/p&gt;"</span></span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>rvest</code>는 <code>tidyverse</code>의 일부이므로 설치할 필요는 없지만, 핵심 부분은 아니므로 로드해야 합니다. 그 후 <code>read_html()</code>을 사용하여 데이터를 읽어들입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>rohans_data <span class="ot">&lt;-</span> <span class="fu">read_html</span>(website_extract)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>rohans_data</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{html_document}
&lt;html&gt;
[1] &lt;body&gt;&lt;p&gt;안녕하세요, 저는 &lt;b&gt;로한&lt;/b&gt; 알렉산더입니다.&lt;/p&gt;&lt;/body&gt;</code></pre>
</div>
</div>
<p><code>rvest</code>가 태그를 찾는 데 사용하는 언어는 “node”이므로 굵은 노드에 집중합니다. 기본적으로 <code>html_elements()</code>는 태그도 반환합니다. <code>html_text()</code>로 텍스트를 추출합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>rohans_data <span class="sc">|&gt;</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_elements</span>(<span class="st">"b"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{xml_nodeset (1)}
[1] &lt;b&gt;로한&lt;/b&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>rohans_data <span class="sc">|&gt;</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_elements</span>(<span class="st">"b"</span>) <span class="sc">|&gt;</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "로한"</code></pre>
</div>
</div>
<p>웹 스크래핑은 흥미로운 데이터 소스이며, 이제 몇 가지 예시를 살펴보겠습니다. 그러나 이러한 예시와 달리 정보는 일반적으로 한 페이지에 모두 있지 않습니다. 웹 스크래핑은 연습이 필요한 어려운 예술 형식으로 빠르게 변합니다. 예를 들어, 인덱스 스크래핑과 콘텐츠 스크래핑을 구별합니다. 전자는 원하는 콘텐츠가 있는 URL 목록을 구축하기 위한 스크래핑이고, 후자는 해당 URL에서 콘텐츠를 가져오기 위한 스크래핑입니다. <span class="citation" data-cites="luscombe2022jumpstarting에서">(<a href="#ref-luscombe2022jumpstarting에서" role="doc-biblioref"><strong>luscombe2022jumpstarting에서?</strong></a>)</span> 예시를 제공합니다. 웹 스크래핑을 많이 하게 된다면 <code>polite</code><span class="citation" data-cites="polite">(<a href="#ref-polite" role="doc-biblioref">Perepolkin 2022</a>)</span>가 워크플로를 더 잘 최적화하는 데 도움이 될 수 있습니다. 그리고 GitHub Actions를 사용하여 시간이 지남에 따라 더 크고 느린 스크래핑을 허용할 수 있습니다.</p>
</section>
<section id="도서-정보" class="level3" data-number="7.3.3">
<h3 data-number="7.3.3" class="anchored" data-anchor-id="도서-정보"><span class="header-section-number">7.3.3</span> 도서 정보</h3>
<p>이 사례 연구에서는 <a href="https://rohansbooks.com">여기</a>에서 사용 가능한 도서 목록을 스크래핑할 것입니다. 그런 다음 데이터를 정리하고 저자 성의 첫 글자 분포를 살펴볼 것입니다. 위 예시보다 약간 더 복잡하지만, 기본 워크플로는 동일합니다. 웹사이트를 다운로드하고, 관심 있는 노드를 찾고, 정보를 추출하고, 정리합니다.</p>
<p><code>rvest</code>를 사용하여 웹사이트를 다운로드하고, HTML을 탐색하여 관심 있는 측면을 찾습니다. 그리고 <code>tidyverse</code>를 사용하여 데이터셋을 정리합니다. 먼저 웹사이트로 이동한 다음 로컬 사본을 저장해야 합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>books_data <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">"https://rohansbooks.com"</span>)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write_html</span>(books_data, <span class="st">"raw_data.html"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>원하는 측면을 얻기 위해 HTML을 탐색해야 합니다. 그리고 가능한 한 빨리 데이터를 티블로 가져오려고 노력해야 합니다. 이렇게 하면 <code>dplyr</code> 동사 및 <code>tidyverse</code>의 다른 함수를 더 쉽게 사용할 수 있습니다.</p>
<p>익숙하지 않다면 <a href="#sec-r-essentials" class="quarto-xref">온라인 부록&nbsp;<span class="quarto-unresolved-ref ref-noprefix">sec-r-essentials</span></a>을 참조하십시오.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>books_data <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">"raw_data.html"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>books_data</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{html_document}
&lt;html&gt;
[1] &lt;head&gt;\n&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8 ...
[2] &lt;body&gt;\n    &lt;h1&gt;Books&lt;/h1&gt;\n\n    &lt;p&gt;\n      This is a list of books that ...</code></pre>
</div>
</div>
<p>데이터를 티블로 가져오려면 먼저 HTML 태그를 사용하여 관심 있는 데이터를 식별해야 합니다. 웹사이트를 보면 목록 항목에 집중해야 한다는 것을 알 수 있습니다(<a href="#fig-rohansbooks-display" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-rohansbooks-display</span></a>). 그리고 소스를 보면 특히 목록을 찾을 수 있습니다(<a href="#fig-rohansbooks-html" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-rohansbooks-html</span></a>).</p>
<div id="fig-rohansbooks" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-rohansbooks-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-rohansbooks" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-rohansbooks-display" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-rohansbooks-display-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/books_display.png" class="img-fluid figure-img" style="width:50.0%" data-ref-parent="fig-rohansbooks">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-rohansbooks-display-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) 표시된 도서 웹사이트
</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-rohansbooks" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-rohansbooks-html" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-rohansbooks-html-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/books_source.png" class="img-fluid figure-img" style="width:50.0%" data-ref-parent="fig-rohansbooks">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-rohansbooks-html-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) 2022년 6월 16일 기준 도서 웹사이트 상단 및 도서 목록의 HTML
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-rohansbooks-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;7.7: 2022년 6월 16일 기준 도서 웹사이트의 화면 캡처
</figcaption>
</figure>
</div>
<p>목록 항목의 태그는 “li”이므로 이를 사용하여 목록에 집중할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>text_data <span class="ot">&lt;-</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  books_data <span class="sc">|&gt;</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_elements</span>(<span class="st">"li"</span>) <span class="sc">|&gt;</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_text</span>()</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>all_books <span class="ot">&lt;-</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">books =</span> text_data)</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(all_books)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 1
  books                                                                         
  &lt;chr&gt;                                                                         
1 "\n        Agassi, Andre, 2009, Open\n      "                                 
2 "\n        Cramer, Richard Ben, 1992, What It Takes: The Way to the White Hou…
3 "\n        DeWitt, Helen, 2000, The Last Samurai\n      "                     
4 "\n        Gelman, Andrew and Jennifer Hill, 2007, Data Analysis Using Regres…
5 "\n        Halberstam, David, 1972, The Best and the Brightest\n      "       
6 "\n        Ignatieff, Michael, 2013, Fire and Ashes: Success and Failure in P…</code></pre>
</div>
</div>
<p>이제 데이터를 정리해야 합니다. 먼저 <code>separate()</code>를 사용하여 제목과 저자를 분리한 다음 저자 및 제목 열을 정리합니다. 연도가 존재한다는 사실을 활용하여 연도를 기준으로 분리할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>all_books <span class="ot">&lt;-</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  all_books <span class="sc">|&gt;</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">books =</span> <span class="fu">str_squish</span>(books)) <span class="sc">|&gt;</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(books, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"author"</span>, <span class="st">"title"</span>), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">, [[:digit:]]{4}</span><span class="sc">\\</span><span class="st">, "</span>)</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(all_books)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  author                           title                                        
  &lt;chr&gt;                            &lt;chr&gt;                                        
1 Agassi, Andre                    Open                                         
2 Cramer, Richard Ben              What It Takes: The Way to the White House    
3 DeWitt, Helen                    The Last Samurai                             
4 Gelman, Andrew and Jennifer Hill Data Analysis Using Regression and Multileve…
5 Halberstam, David                The Best and the Brightest                   
6 Ignatieff, Michael               Fire and Ashes: Success and Failure in Polit…</code></pre>
</div>
</div>
<p>마지막으로, 예를 들어 이름의 첫 글자 분포에 대한 표를 만들 수 있습니다(<a href="#tbl-lettersofbooks" class="quarto-xref">표&nbsp;<span class="quarto-unresolved-ref">tbl-lettersofbooks</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>all_books <span class="sc">|&gt;</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">first_letter =</span> <span class="fu">str_sub</span>(author, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(<span class="at">.by =</span> first_letter) <span class="sc">|&gt;</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">style_tt</span>(<span class="at">j =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">align =</span> <span class="st">"lr"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_tt</span>(<span class="at">digits =</span> <span class="dv">0</span>, <span class="at">num_mark_big =</span> <span class="st">","</span>, <span class="at">num_fmt =</span> <span class="st">"decimal"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">"첫 글자"</span>, <span class="st">"횟수"</span>))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-lettersofbooks" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-lettersofbooks-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;7.1: 도서 컬렉션에서 저자 이름의 첫 글자 분포
</figcaption>
<div aria-describedby="tbl-lettersofbooks-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_mr4ix5xg5447268adj6x(i, j, css_id) {
          var table = document.getElementById("tinytable_mr4ix5xg5447268adj6x");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_mr4ix5xg5447268adj6x');
        // Find the row with data-row attribute matching i
        var targetRow = table.querySelector(`tr [data-row="${i}"]`).closest('tr');
        var newRow = table.insertRow(targetRow.rowIndex);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        newCell.setAttribute("data-col", "0");
        newCell.setAttribute("data-row", i - 1);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_mr4ix5xg5447268adj6x(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_mr4ix5xg5447268adj6x");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '13', j: 1 },  ], css_id: 'tinytable_css_drmwa6y65vg8963v4a4q',}, 
          { positions: [ { i: '1', j: 1 }, { i: '2', j: 1 }, { i: '3', j: 1 }, { i: '4', j: 1 }, { i: '5', j: 1 }, { i: '6', j: 1 }, { i: '7', j: 1 }, { i: '8', j: 1 }, { i: '9', j: 1 }, { i: '10', j: 1 }, { i: '11', j: 1 }, { i: '12', j: 1 },  ], css_id: 'tinytable_css_xk4bv59i22eyhnupitcp',}, 
          { positions: [ { i: '0', j: 1 },  ], css_id: 'tinytable_css_ook69u72dk25rms5kn3b',}, 
          { positions: [ { i: '13', j: 0 },  ], css_id: 'tinytable_css_vfgfffdsseehtebq3rjt',}, 
          { positions: [ { i: '1', j: 0 }, { i: '2', j: 0 }, { i: '3', j: 0 }, { i: '4', j: 0 }, { i: '5', j: 0 }, { i: '6', j: 0 }, { i: '7', j: 0 }, { i: '8', j: 0 }, { i: '9', j: 0 }, { i: '10', j: 0 }, { i: '11', j: 0 }, { i: '12', j: 0 },  ], css_id: 'tinytable_css_3zih6tvqyvjjy5h1tszj',}, 
          { positions: [ { i: '0', j: 0 },  ], css_id: 'tinytable_css_ms3cvdnxeluao0fswigx',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_mr4ix5xg5447268adj6x(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_drmwa6y65vg8963v4a4q, .table th.tinytable_css_drmwa6y65vg8963v4a4q { text-align: right; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_xk4bv59i22eyhnupitcp, .table th.tinytable_css_xk4bv59i22eyhnupitcp { text-align: right; }
      .table td.tinytable_css_ook69u72dk25rms5kn3b, .table th.tinytable_css_ook69u72dk25rms5kn3b { text-align: right; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_vfgfffdsseehtebq3rjt, .table th.tinytable_css_vfgfffdsseehtebq3rjt { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_3zih6tvqyvjjy5h1tszj, .table th.tinytable_css_3zih6tvqyvjjy5h1tszj { text-align: left; }
      .table td.tinytable_css_ms3cvdnxeluao0fswigx, .table th.tinytable_css_ms3cvdnxeluao0fswigx { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_mr4ix5xg5447268adj6x" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">첫 글자</th>
                <th scope="col" data-row="0" data-col="1">횟수</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">A</td>
                  <td data-row="1" data-col="1">1</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">C</td>
                  <td data-row="2" data-col="1">1</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">D</td>
                  <td data-row="3" data-col="1">1</td>
                </tr>
                <tr>
                  <td data-row="4" data-col="0">G</td>
                  <td data-row="4" data-col="1">1</td>
                </tr>
                <tr>
                  <td data-row="5" data-col="0">H</td>
                  <td data-row="5" data-col="1">1</td>
                </tr>
                <tr>
                  <td data-row="6" data-col="0">I</td>
                  <td data-row="6" data-col="1">1</td>
                </tr>
                <tr>
                  <td data-row="7" data-col="0">L</td>
                  <td data-row="7" data-col="1">1</td>
                </tr>
                <tr>
                  <td data-row="8" data-col="0">M</td>
                  <td data-row="8" data-col="1">1</td>
                </tr>
                <tr>
                  <td data-row="9" data-col="0">P</td>
                  <td data-row="9" data-col="1">3</td>
                </tr>
                <tr>
                  <td data-row="10" data-col="0">R</td>
                  <td data-row="10" data-col="1">1</td>
                </tr>
                <tr>
                  <td data-row="11" data-col="0">V</td>
                  <td data-row="11" data-col="1">2</td>
                </tr>
                <tr>
                  <td data-row="12" data-col="0">W</td>
                  <td data-row="12" data-col="1">4</td>
                </tr>
                <tr>
                  <td data-row="13" data-col="0">Y</td>
                  <td data-row="13" data-col="1">1</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="영국-총리" class="level3" data-number="7.3.4">
<h3 data-number="7.3.4" class="anchored" data-anchor-id="영국-총리"><span class="header-section-number">7.3.4</span> 영국 총리</h3>
<p>이 사례 연구에서는 영국 총리가 태어난 해를 기준으로 얼마나 오래 살았는지에 관심이 있습니다. <code>rvest</code>를 사용하여 위키피디아에서 데이터를 스크래핑하고, 정리한 다음 그래프를 만들 것입니다. 때때로 웹사이트가 변경됩니다. 이로 인해 많은 스크래핑이 대부분 맞춤형이 되지만, 이전 프로젝트의 일부 코드를 빌릴 수는 있습니다. 때때로 좌절감을 느끼는 것은 정상입니다. 끝을 염두에 두고 시작하는 것이 도움이 됩니다.</p>
<p>이를 위해 먼저 시뮬레이션된 데이터를 생성할 수 있습니다. 이상적으로는 각 총리에 대한 행, 이름에 대한 열, 출생 및 사망 연도에 대한 열이 있는 표를 원합니다. 아직 살아 있다면 사망 연도는 비어 있을 수 있습니다. 출생 및 사망 연도는 1700년에서 1990년 사이여야 하며, 사망 연도는 출생 연도보다 커야 한다는 것을 알고 있습니다. 마지막으로, 연도는 정수여야 하고 이름은 문자여야 한다는 것도 알고 있습니다. 대략 다음과 같이 생긴 것을 원합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">853</span>)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>simulated_dataset <span class="ot">&lt;-</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">prime_minister =</span> babynames <span class="sc">|&gt;</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(prop <span class="sc">&gt;</span> <span class="fl">0.01</span>) <span class="sc">|&gt;</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">distinct</span>(name) <span class="sc">|&gt;</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">unlist</span>() <span class="sc">|&gt;</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">sample</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="at">replace =</span> <span class="cn">FALSE</span>),</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">birth_year =</span> <span class="fu">sample</span>(<span class="dv">1700</span><span class="sc">:</span><span class="dv">1990</span>, <span class="at">size =</span> <span class="dv">10</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">years_lived =</span> <span class="fu">sample</span>(<span class="dv">50</span><span class="sc">:</span><span class="dv">100</span>, <span class="at">size =</span> <span class="dv">10</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>),</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">death_year =</span> birth_year <span class="sc">+</span> years_lived</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(prime_minister, birth_year, death_year, years_lived) <span class="sc">|&gt;</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(birth_year)</span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>simulated_dataset</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 4
   prime_minister birth_year death_year years_lived
   &lt;chr&gt;               &lt;int&gt;      &lt;int&gt;       &lt;int&gt;
 1 Kevin                1813       1908          95
 2 Karen                1832       1896          64
 3 Robert               1839       1899          60
 4 Bertha               1846       1915          69
 5 Jennifer             1867       1943          76
 6 Arthur               1892       1984          92
 7 Donna                1907       2006          99
 8 Emma                 1957       2031          74
 9 Ryan                 1959       2053          94
10 Tyler                1990       2062          72</code></pre>
</div>
</div>
<p>시뮬레이션된 데이터셋을 생성하는 장점 중 하나는 그룹으로 작업하는 경우 한 사람이 시뮬레이션된 데이터셋을 사용하여 그래프를 만들기 시작할 수 있고, 다른 사람은 데이터를 수집할 수 있다는 것입니다. 그래프 측면에서 우리는 <a href="#fig-pmsgraphexample과" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-pmsgraphexample과</span></a> 같은 것을 목표로 합니다.</p>
<div id="fig-pmsgraphexample" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-pmsgraphexample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/pms_graph_plan.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-pmsgraphexample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;7.8: 영국 총리가 얼마나 오래 살았는지 보여주는 계획된 그래프 스케치
</figcaption>
</figure>
</div>
<p>우리는 영국 총리가 얼마나 오래 살았는지에 대한 흥미로운 질문으로 시작합니다. 따라서 데이터 소스를 식별해야 합니다. 각 총리의 출생 및 사망 정보를 가진 데이터 소스는 많지만, 우리는 신뢰할 수 있는 것을 원하며, 스크래핑할 것이므로 어느 정도 구조가 있는 것을 원합니다. <a href="https://en.wikipedia.org/wiki/List_of_prime_ministers_of_the_United_Kingdom">영국 총리에 대한 위키피디아 페이지</a>는 이 두 가지 기준을 모두 충족합니다. 인기 있는 페이지이므로 정보가 정확할 가능성이 높고, 데이터는 표 형식으로 제공됩니다.</p>
<p><code>rvest</code>를 로드한 다음 <code>read_html()</code>을 사용하여 페이지를 다운로드합니다. 로컬에 저장하면 웹사이트가 변경될 경우 재현성을 위해 필요한 사본을 제공하고, 웹사이트를 계속 방문할 필요가 없습니다. 그러나 우리의 것이 아니므로 일반적으로 공개적으로 재배포해서는 안 됩니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="ot">&lt;-</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_html</span>(</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://en.wikipedia.org/wiki/List_of_prime_ministers_of_the_United_Kingdom"</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_html</span>(raw_data, <span class="st">"pms.html"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이전 사례 연구와 마찬가지로, 우리는 원하는 데이터에 더 가까이 다가가는 데 도움이 될 수 있는 HTML의 패턴을 찾고 있습니다. 이것은 반복적인 과정이며 시행착오를 포함합니다. 간단한 예시조차도 시간이 걸릴 것입니다.</p>
<p>도움이 될 수 있는 도구 중 하나는 <a href="https://rvest.tidyverse.org/articles/articles/selectorgadget.html">SelectorGadget</a>입니다. 이를 통해 원하는 요소를 선택하고 <code>html_element()</code>에 대한 입력을 제공할 수 있습니다(<a href="#fig-selectorgadget" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-selectorgadget</span></a>). 기본적으로 SelectorGadget은 CSS 선택자를 사용합니다. 이것이 원하는 정보의 위치를 지정하는 유일한 방법은 아니며, XPath와 같은 대안을 사용하는 것도 고려할 수 있는 유용한 옵션입니다.</p>
<div id="fig-selectorgadget" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-selectorgadget-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/07-wikipedia_selectorgadget_screenshot.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-selectorgadget-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;7.9: 2023년 2월 12일 기준 태그를 식별하기 위한 Selector Gadget 사용
</figcaption>
</figure>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>raw_data <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">"pms.html"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>parse_data_selector_gadget <span class="ot">&lt;-</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  raw_data <span class="sc">|&gt;</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_element</span>(<span class="st">".wikitable"</span>) <span class="sc">|&gt;</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">html_table</span>()</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(parse_data_selector_gadget)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 11
  Portrait Portrait   Prime ministerOffice(L…¹ `Term of office` `Term of office`
  &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;                    &lt;chr&gt;            &lt;chr&gt;           
1 Portrait "Portrait" Prime ministerOffice(Li… start            end             
2 ​         ""         Robert Walpole[27]MP fo… 3 April1721      11 February1742 
3 ​         ""         Robert Walpole[27]MP fo… 3 April1721      11 February1742 
4 ​         ""         Robert Walpole[27]MP fo… 3 April1721      11 February1742 
5 ​         ""         Robert Walpole[27]MP fo… 3 April1721      11 February1742 
6 ​         ""         Spencer Compton[28]1st … 16 February1742  2 July1743      
# ℹ abbreviated name: ¹​`Prime ministerOffice(Lifespan)`
# ℹ 6 more variables: `Term of office` &lt;chr&gt;, `Mandate[a]` &lt;chr&gt;,
#   `Ministerial offices held as prime minister` &lt;chr&gt;, Party &lt;chr&gt;,
#   Government &lt;chr&gt;, MonarchReign &lt;chr&gt;</code></pre>
</div>
</div>
<p>이 경우 필요 없는 열이 많고 중복된 행도 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>parsed_data <span class="ot">&lt;-</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  parse_data_selector_gadget <span class="sc">|&gt;</span> </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span> </span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">raw_text =</span> prime_minister_office_lifespan) <span class="sc">|&gt;</span> </span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(raw_text) <span class="sc">|&gt;</span> </span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(raw_text <span class="sc">!=</span> <span class="st">"Prime ministerOffice(Lifespan)"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() </span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(parsed_data)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 1
  raw_text                                                
  &lt;chr&gt;                                                   
1 Robert Walpole[27]MP for King's Lynn(1676–1745)         
2 Spencer Compton[28]1st Earl of Wilmington(1673–1743)    
3 Henry Pelham[29]MP for Sussex(1694–1754)                
4 Thomas Pelham-Holles[30]1st Duke of Newcastle(1693–1768)
5 William Cavendish[31]4th Duke of Devonshire(1720–1764)  
6 Thomas Pelham-Holles[32]1st Duke of Newcastle(1693–1768)</code></pre>
</div>
</div>
<p>이제 파싱된 데이터를 원하는 대로 정리해야 합니다. 이름 열과 출생 연도 및 사망 연도 열을 원합니다. 괄호로 이름과 날짜가 구분되어 있다는 사실을 활용하기 위해 <code>separate()</code>를 사용합니다. <code>str_extract()</code>의 인수는 정규 표현식입니다. 이는 네 자리 숫자, 대시, 다시 네 자리 숫자를 찾습니다. 아직 살아 있는 총리의 경우 약간 다른 정규 표현식을 사용합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>initial_clean <span class="ot">&lt;-</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  parsed_data <span class="sc">|&gt;</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    raw_text, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"name"</span>, <span class="st">"not_name"</span>), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">["</span>, <span class="at">extra =</span> <span class="st">"merge"</span>,</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">str_extract</span>(not_name, <span class="st">"[[:digit:]]{4}–[[:digit:]]{4}"</span>),</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">born =</span> <span class="fu">str_extract</span>(not_name, <span class="st">"born[[:space:]][[:digit:]]{4}"</span>)</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, date, born)</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(initial_clean)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  name                 date      born 
  &lt;chr&gt;                &lt;chr&gt;     &lt;chr&gt;
1 Robert Walpole       1676–1745 &lt;NA&gt; 
2 Spencer Compton      1673–1743 &lt;NA&gt; 
3 Henry Pelham         1694–1754 &lt;NA&gt; 
4 Thomas Pelham-Holles 1693–1768 &lt;NA&gt; 
5 William Cavendish    1720–1764 &lt;NA&gt; 
6 Thomas Pelham-Holles 1693–1768 &lt;NA&gt; </code></pre>
</div>
</div>
<p>마지막으로 열을 정리해야 합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>cleaned_data <span class="ot">&lt;-</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  initial_clean <span class="sc">|&gt;</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(date, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"birth"</span>, <span class="st">"died"</span>), </span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">sep =</span> <span class="st">"–"</span>) <span class="sc">|&gt;</span>   <span class="co"># 사망한 총리는 출생 및 사망 연도가 하이픈으로 구분되지만, 하이픈이 약간 이상한 유형이므로 복사/붙여넣기해야 합니다.</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">born =</span> <span class="fu">str_remove_all</span>(born, <span class="st">"born[[:space:]]"</span>),</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">birth =</span> <span class="fu">if_else</span>(<span class="sc">!</span><span class="fu">is.na</span>(born), born, birth)</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> <span class="co"># 살아있는 총리는 형식이 약간 다릅니다.</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>born) <span class="sc">|&gt;</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">born =</span> birth) <span class="sc">|&gt;</span> </span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(born, died), as.integer)) <span class="sc">|&gt;</span> </span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Age_at_Death =</span> died <span class="sc">-</span> born) <span class="sc">|&gt;</span> </span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="co"># 일부 총리는 두 번 시도했습니다.</span></span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(cleaned_data)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  name                  born  died Age_at_Death
  &lt;chr&gt;                &lt;int&gt; &lt;int&gt;        &lt;int&gt;
1 Robert Walpole        1676  1745           69
2 Spencer Compton       1673  1743           70
3 Henry Pelham          1694  1754           60
4 Thomas Pelham-Holles  1693  1768           75
5 William Cavendish     1720  1764           44
6 John Stuart           1713  1792           79</code></pre>
</div>
</div>
<p>우리의 데이터셋은 처음에 원했던 것과 비슷하게 보입니다(<a href="#tbl-canadianpmscleanddata" class="quarto-xref">표&nbsp;<span class="quarto-unresolved-ref">tbl-canadianpmscleanddata</span></a>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>cleaned_data <span class="sc">|&gt;</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">|&gt;</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">style_tt</span>(<span class="at">j =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">align =</span> <span class="st">"lrrr"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">"총리"</span>, <span class="st">"출생 연도"</span>, <span class="st">"사망 연도"</span>, <span class="st">"사망 시 나이"</span>))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-canadianpmscleanddata" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-canadianpmscleanddata-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;7.2: 영국 총리, 사망 시 나이별
</figcaption>
<div aria-describedby="tbl-canadianpmscleanddata-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_7w3qwg4i5s5l3roann6u(i, j, css_id) {
          var table = document.getElementById("tinytable_7w3qwg4i5s5l3roann6u");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_7w3qwg4i5s5l3roann6u');
        // Find the row with data-row attribute matching i
        var targetRow = table.querySelector(`tr [data-row="${i}"]`).closest('tr');
        var newRow = table.insertRow(targetRow.rowIndex);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        newCell.setAttribute("data-col", "0");
        newCell.setAttribute("data-row", i - 1);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_7w3qwg4i5s5l3roann6u(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_7w3qwg4i5s5l3roann6u");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '6', j: 2 }, { i: '6', j: 1 }, { i: '6', j: 3 },  ], css_id: 'tinytable_css_yosed4z6rk9e74m6bdrh',}, 
          { positions: [ { i: '1', j: 1 }, { i: '4', j: 1 }, { i: '5', j: 1 }, { i: '2', j: 1 }, { i: '3', j: 1 }, { i: '1', j: 2 }, { i: '2', j: 2 }, { i: '3', j: 2 }, { i: '4', j: 2 }, { i: '5', j: 2 }, { i: '3', j: 3 }, { i: '4', j: 3 }, { i: '1', j: 3 }, { i: '2', j: 3 }, { i: '5', j: 3 },  ], css_id: 'tinytable_css_10qitabohvodxc0dwfmn',}, 
          { positions: [ { i: '0', j: 1 }, { i: '0', j: 3 }, { i: '0', j: 2 },  ], css_id: 'tinytable_css_hvrn2ou2jcla8w83v8k8',}, 
          { positions: [ { i: '6', j: 0 },  ], css_id: 'tinytable_css_fi7d650yijyavy5pczq9',}, 
          { positions: [ { i: '1', j: 0 }, { i: '2', j: 0 }, { i: '3', j: 0 }, { i: '4', j: 0 }, { i: '5', j: 0 },  ], css_id: 'tinytable_css_gp6bq6or7rlh2w1sx2ll',}, 
          { positions: [ { i: '0', j: 0 },  ], css_id: 'tinytable_css_st74e9l6bggwk0lnfrms',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_7w3qwg4i5s5l3roann6u(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_yosed4z6rk9e74m6bdrh, .table th.tinytable_css_yosed4z6rk9e74m6bdrh { text-align: right; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_10qitabohvodxc0dwfmn, .table th.tinytable_css_10qitabohvodxc0dwfmn { text-align: right; }
      .table td.tinytable_css_hvrn2ou2jcla8w83v8k8, .table th.tinytable_css_hvrn2ou2jcla8w83v8k8 { text-align: right; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_fi7d650yijyavy5pczq9, .table th.tinytable_css_fi7d650yijyavy5pczq9 { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_gp6bq6or7rlh2w1sx2ll, .table th.tinytable_css_gp6bq6or7rlh2w1sx2ll { text-align: left; }
      .table td.tinytable_css_st74e9l6bggwk0lnfrms, .table th.tinytable_css_st74e9l6bggwk0lnfrms { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_7w3qwg4i5s5l3roann6u" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">총리</th>
                <th scope="col" data-row="0" data-col="1">출생 연도</th>
                <th scope="col" data-row="0" data-col="2">사망 연도</th>
                <th scope="col" data-row="0" data-col="3">사망 시 나이</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">Robert Walpole</td>
                  <td data-row="1" data-col="1">1676</td>
                  <td data-row="1" data-col="2">1745</td>
                  <td data-row="1" data-col="3">69</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">Spencer Compton</td>
                  <td data-row="2" data-col="1">1673</td>
                  <td data-row="2" data-col="2">1743</td>
                  <td data-row="2" data-col="3">70</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">Henry Pelham</td>
                  <td data-row="3" data-col="1">1694</td>
                  <td data-row="3" data-col="2">1754</td>
                  <td data-row="3" data-col="3">60</td>
                </tr>
                <tr>
                  <td data-row="4" data-col="0">Thomas Pelham-Holles</td>
                  <td data-row="4" data-col="1">1693</td>
                  <td data-row="4" data-col="2">1768</td>
                  <td data-row="4" data-col="3">75</td>
                </tr>
                <tr>
                  <td data-row="5" data-col="0">William Cavendish</td>
                  <td data-row="5" data-col="1">1720</td>
                  <td data-row="5" data-col="2">1764</td>
                  <td data-row="5" data-col="3">44</td>
                </tr>
                <tr>
                  <td data-row="6" data-col="0">John Stuart</td>
                  <td data-row="6" data-col="1">1713</td>
                  <td data-row="6" data-col="2">1792</td>
                  <td data-row="6" data-col="3">79</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
<p>이 시점에서 우리는 각 총리가 얼마나 오래 살았는지 보여주는 그래프를 만들고 싶습니다(<a href="#fig-pmslives" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-pmslives</span></a>). 아직 살아 있다면 끝까지 표시하고 싶지만, 색깔을 다르게 하고 싶습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>cleaned_data <span class="sc">|&gt;</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">still_alive =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(died), <span class="st">"Yes"</span>, <span class="st">"No"</span>),</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">died =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(died), <span class="fu">as.integer</span>(<span class="dv">2023</span>), died)</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">name =</span> <span class="fu">as_factor</span>(name)) <span class="sc">|&gt;</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> born, <span class="at">xend =</span> died, <span class="at">y =</span> name, <span class="at">yend =</span> name, <span class="at">color =</span> still_alive)</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>() <span class="sc">+</span></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"출생 연도"</span>, <span class="at">y =</span> <span class="st">"총리"</span>, <span class="at">color =</span> <span class="st">"총리는 현재 살아있음"</span></span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>) <span class="sc">+</span></span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-pmslives" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-pmslives-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="07-gather_ko_files/figure-html/fig-pmslives-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-pmslives-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;7.10: 영국 총리가 얼마나 오래 살았는지
</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="반복" class="level3" data-number="7.3.5">
<h3 data-number="7.3.5" class="anchored" data-anchor-id="반복"><span class="header-section-number">7.3.5</span> 반복</h3>
<p>텍스트를 데이터로 간주하는 것은 흥미롭고 다양한 연구 질문을 탐색할 수 있게 해줍니다. <a href="#sec-text-as-data에서" class="quarto-xref"><span class="quarto-unresolved-ref">sec-text-as-data에서</span></a> 이를 활용할 것입니다. 많은 가이드에서는 이미 잘 형식화된 텍스트 데이터셋이 있다고 가정하지만, 실제로는 거의 그렇지 않습니다. 이 사례 연구에서는 몇 개의 다른 페이지에서 파일을 다운로드할 것입니다. 웹 스크래핑의 두 가지 예시를 이미 보았지만, 그것들은 한 페이지에만 초점을 맞추었지만, 우리는 종종 많은 페이지가 필요합니다. 여기서는 이 반복에 초점을 맞출 것입니다. <code>download.file()</code>를 사용하여 다운로드를 수행하고, <code>purrr</code>를 사용하여 여러 사이트에 이 함수를 적용할 것입니다. <code>purrr</code>는 핵심 <code>tidyverse</code>의 일부이므로 설치하거나 로드할 필요가 없습니다. <code>tidyverse</code>를 로드하면 로드됩니다.</p>
<p>호주 중앙은행(RBA)은 호주의 중앙은행입니다. 현금 금리를 설정할 책임이 있으며, 이는 은행 간 대출에 사용되는 이자율입니다. 이 이자율은 특히 중요하며 경제의 다른 이자율에 큰 영향을 미칩니다. RBA는 1년에 네 번(2월, 5월, 8월, 11월) 통화 정책 성명을 발표하며, 이들은 PDF로 제공됩니다. 이 예시에서는 2023년에 발표된 두 가지 성명을 다운로드할 것입니다.</p>
<p>먼저 필요한 정보가 있는 티블을 설정합니다. URL 구조의 공통점을 활용할 것입니다. 각 상태에 대해 URL과 로컬 파일 이름을 모두 지정해야 합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>first_bit <span class="ot">&lt;-</span> <span class="st">"https://www.rba.gov.au/publications/smp/2023/"</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>last_bit <span class="ot">&lt;-</span> <span class="st">"/pdf/overview.pdf"</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>statements_of_interest <span class="ot">&lt;-</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">address =</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">paste0</span>(first_bit, <span class="st">"feb"</span>, last_bit),</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">paste0</span>(first_bit, <span class="st">"may"</span>, last_bit)</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">local_save_name =</span> <span class="fu">c</span>(<span class="st">"2023-02.pdf"</span>, <span class="st">"2023-05.pdf"</span>)</span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>statements_of_interest</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  address                                                        local_save_name
  &lt;chr&gt;                                                          &lt;chr&gt;          
1 https://www.rba.gov.au/publications/smp/2023/feb/pdf/overview… 2023-02.pdf    
2 https://www.rba.gov.au/publications/smp/2023/may/pdf/overview… 2023-05.pdf    </code></pre>
</div>
</div>
<p>이 두 성명에 <code>download.files()</code> 함수를 적용하고 싶습니다. 이를 위해 파일을 다운로드하고, 다운로드되었음을 알려주고, 정중하게 잠시 기다린 다음 다음 파일을 가져오는 함수를 작성합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>visit_download_and_wait <span class="ot">&lt;-</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(address_to_visit,</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>           where_to_save_it_locally) {</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">download.file</span>(<span class="at">url =</span> address_to_visit,</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">destfile =</span> where_to_save_it_locally)</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"완료:"</span>, address_to_visit, <span class="st">"시간:"</span>, <span class="fu">Sys.time</span>()))</span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">Sys.sleep</span>(<span class="fu">sample</span>(<span class="dv">5</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">1</span>))</span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>  }</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>이제 <code>walk2()</code> 함수를 사용하여 URL 및 저장 이름 티블에 해당 함수를 적용합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">walk2</span>(</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  statements_of_interest<span class="sc">$</span>address,</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  statements_of_interest<span class="sc">$</span>local_save_name,</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span> <span class="fu">visit_download_and_wait</span>(.x, .y)</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>그 결과, 이 PDF들을 다운로드하여 컴퓨터에 저장했습니다. 이러한 함수를 직접 작성하는 대신 <code>heapsofpapers</code><span class="citation" data-cites="heapsofpapers">(<a href="#ref-heapsofpapers" role="doc-biblioref">Alexander 와/과 Mahfouz 2021</a>)</span>를 사용할 수도 있습니다. 여기에는 특히 PDF, CSV, txt 파일과 같은 파일 목록을 다운로드하는 데 유용한 다양한 옵션이 포함되어 있습니다. 예를 들어, <span class="citation" data-cites="collinsalexander는">(<a href="#ref-collinsalexander는" role="doc-biblioref"><strong>collinsalexander는?</strong></a>)</span> 이를 사용하여 수천 개의 PDF를 얻고 COVID-19 연구가 재현 가능한 정도를 추정합니다. 다음 섹션에서는 이를 기반으로 PDF에서 정보를 가져오는 것에 대해 논의할 것입니다.</p>
</section>
</section>
<section id="pdf" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="pdf"><span class="header-section-number">7.4</span> PDF</h2>
<p>PDF 파일은 1990년대에 기술 회사 Adobe에 의해 개발되었습니다. 문서에 유용합니다. 왜냐하면 그것들을 생성한 환경이나 보고 있는 환경에 관계없이 일관된 방식으로 표시되도록 의도되었기 때문입니다. iPhone에서 보는 PDF는 Android 폰에서 보는 것과 동일하게 보여야 하며, Linux 데스크톱에서도 마찬가지입니다. PDF의 한 가지 특징은 텍스트, 사진, 그림 등 다양한 개체를 포함할 수 있다는 것입니다. 그러나 이러한 다양성은 PDF가 데이터로 직접 사용될 수 있는 능력을 제한할 수 있습니다. 데이터는 먼저 PDF에서 추출되어야 합니다.</p>
<p>PDF에서 데이터를 복사하여 붙여넣는 것이 종종 가능합니다. 이는 PDF에 텍스트 또는 일반 테이블만 포함된 경우 더 가능성이 높습니다. 특히, PDF가 Microsoft Word와 같은 응용 프로그램 또는 다른 문서 또는 양식 생성 시스템에 의해 생성된 경우, 텍스트 데이터는 PDF 내에 실제로 텍스트로 저장되어 있기 때문에 종종 이러한 방식으로 추출될 수 있습니다. 우리는 그 경우부터 시작합니다. 그러나 텍스트가 이미지로 저장되어 PDF의 일부인 경우에는 쉽지 않습니다. 이는 실제 문서의 스캔 또는 사진을 통해 생성된 PDF 및 일부 오래된 문서 준비 소프트웨어의 경우일 수 있습니다. 우리는 나중에 그 경우를 살펴봅니다.</p>
<p>API와 달리 PDF는 일반적으로 컴퓨터 소비가 아닌 인간 소비를 위해 생산됩니다. PDF의 좋은 점은 정적이고 일정하다는 것입니다. 그리고 데이터가 사용 가능하다는 것은 훌륭합니다. 그러나 절충안은 다음과 같습니다.</p>
<ul>
<li>대규모 데이터 작업을 하는 데는 그다지 유용하지 않습니다.</li>
<li>PDF가 어떻게 구성되었는지 알 수 없으므로 신뢰할 수 있는지 알 수 없습니다.</li>
<li>데이터를 조작하여 관심 있는 결과를 얻을 수 없습니다.</li>
</ul>
<p>PDF에서 데이터를 추출할 때 명심해야 할 두 가지 중요한 측면은 다음과 같습니다.</p>
<ol type="1">
<li>끝을 염두에 두고 시작하십시오. 시간 낭비를 줄이기 위해 최종 데이터셋/그래프/논문에서 원하는 것을 계획하고 스케치하십시오.</li>
<li>작게 시작한 다음 반복하십시오. 복잡해야 하는 것을 만드는 가장 빠른 방법은 종종 먼저 간단한 버전을 만든 다음 추가하는 것입니다. PDF의 한 페이지 또는 한 줄만 작동하도록 시도하는 것으로 시작하십시오. 그런 다음 거기서부터 반복하십시오.</li>
</ol>
<p>몇 가지 예시를 살펴본 다음, 미국 총 출산율(TFR)에 대한 데이터를 수집하는 사례 연구를 살펴볼 것입니다.</p>
<section id="제인-에어" class="level3" data-number="7.4.1">
<h3 data-number="7.4.1" class="anchored" data-anchor-id="제인-에어"><span class="header-section-number">7.4.1</span> <em>제인 에어</em></h3>
<p><a href="#fig-firstpdfexample는" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-firstpdfexample는</span></a> 샬럿 브론테의 소설 <em>제인 에어</em>의 첫 문장만으로 구성된 PDF입니다. 프로젝트 구텐베르크에서 가져왔습니다<span class="citation" data-cites="janeeyre">(<a href="#ref-janeeyre" role="doc-biblioref">Brontë 1847</a>)</span>. <a href="https://github.com/RohanAlexander/telling_stories/blob/aa6e2d76c80eba7bd31ca68161f0065344449ed8/inputs/pdfs/first_example.pdf">여기</a>에서 얻을 수 있습니다. “first_example.pdf”로 저장되었다고 가정하면, <code>pdftools</code>를 설치하고 로드한 후 이 한 페이지 PDF에서 텍스트를 R로 가져올 수 있습니다.</p>
<div id="fig-firstpdfexample" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-firstpdfexample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="inputs/pdfs/first_example.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-firstpdfexample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;7.11: 제인 에어의 첫 문장
</figcaption>
</figure>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>first_example <span class="ot">&lt;-</span> <span class="fu">pdf_text</span>(<span class="st">"first_example.pdf"</span>)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>first_example</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(first_example)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "There was no possibility of taking a walk that day.\n"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<p>PDF가 문자 벡터로 올바르게 읽혔음을 알 수 있습니다.</p>
<p>이제 <em>제인 에어</em>의 처음 몇 단락으로 구성된 약간 더 복잡한 예시를 시도할 것입니다(<a href="#fig-secondpdfexample" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-secondpdfexample</span></a>). 이제 장 제목도 있습니다.</p>
<div id="fig-secondpdfexample" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-secondpdfexample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="inputs/pdfs/second_example.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-secondpdfexample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;7.12: 제인 에어의 처음 몇 단락
</figcaption>
</figure>
</div>
<p>이전과 동일한 함수를 사용합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>second_example <span class="ot">&lt;-</span> <span class="fu">pdf_text</span>(<span class="st">"second_example.pdf"</span>)</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(second_example)</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>second_example</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "CHAPTER I\nThere was no possibility of taking a walk that day. We had been wandering, indeed, in the\nleafless shrubbery an hour in the morning; but since dinner (Mrs. Reed, when there was no\ncompany, dined early) the cold winter wind had brought with it clouds so sombre, and a rain so\npenetrating, that further out-door exercise was now out of the question.\n\nI was glad of it: I never liked long walks, especially on chilly afternoons: dreadful to me was the\ncoming home in the raw twilight, with nipped fingers and toes, and a heart saddened by the\nchidings of Bessie, the nurse, and humbled by the consciousness of my physical inferiority to\nEliza, John, and Georgiana Reed.\n\nThe said Eliza, John, and Georgiana were now clustered round their mama in the drawing-room:\nshe lay reclined on a sofa by the fireside, and with her darlings about her (for the time neither\nquarrelling nor crying) looked perfectly happy. Me, she had dispensed from joining the group;\nsaying, “She regretted to be under the necessity of keeping me at a distance; but that until she\nheard from Bessie, and could discover by her own observation, that I was endeavouring in good\nearnest to acquire a more sociable and childlike disposition, a more attractive and sprightly\nmanner—something lighter, franker, more natural, as it were—she really must exclude me from\nprivileges intended only for contented, happy, little children.”\n\n“What does Bessie say I have done?” I asked.\n\n“Jane, I don’t like cavillers or questioners; besides, there is something truly forbidding in a child\ntaking up her elders in that manner. Be seated somewhere; and until you can speak pleasantly,\nremain silent.”\n\nA breakfast-room adjoined the drawing-room, I slipped in there. It contained a bookcase: I soon\npossessed myself of a volume, taking care that it should be one stored with pictures. I mounted\ninto the window-seat: gathering up my feet, I sat cross-legged, like a Turk; and, having drawn the\nred moreen curtain nearly close, I was shrined in double retirement.\n\nFolds of scarlet drapery shut in my view to the right hand; to the left were the clear panes of\nglass, protecting, but not separating me from the drear November day. At intervals, while\nturning over the leaves of my book, I studied the aspect of that winter afternoon. Afar, it offered\na pale blank of mist and cloud; near a scene of wet lawn and storm-beat shrub, with ceaseless\nrain sweeping away wildly before a long and lamentable blast.\n"</code></pre>
</div>
</div>
<p>다시, 우리는 문자 벡터를 가지고 있습니다. 각 줄의 끝은 “\n”으로 표시되지만, 그 외에는 꽤 좋아 보입니다. 마지막으로, 처음 두 페이지를 고려합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>third_example <span class="ot">&lt;-</span> <span class="fu">pdf_text</span>(<span class="st">"third_example.pdf"</span>)</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(third_example)</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>third_example</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "CHAPTER I\nThere was no possibility of taking a walk that day. We had been wandering, indeed, in the\nleafless shrubbery an hour in the morning; but since dinner (Mrs. Reed, when there was no\ncompany, dined early) the cold winter wind had brought with it clouds so sombre, and a rain so\npenetrating, that further out-door exercise was now out of the question.\n\nI was glad of it: I never liked long walks, especially on chilly afternoons: dreadful to me was the\ncoming home in the raw twilight, with nipped fingers and toes, and a heart saddened by the\nchidings of Bessie, the nurse, and humbled by the consciousness of my physical inferiority to\nEliza, John, and Georgiana Reed.\n\nThe said Eliza, John, and Georgiana were now clustered round their mama in the drawing-room:\nshe lay reclined on a sofa by the fireside, and with her darlings about her (for the time neither\nquarrelling nor crying) looked perfectly happy. Me, she had dispensed from joining the group;\nsaying, “She regretted to be under the necessity of keeping me at a distance; but that until she\nheard from Bessie, and could discover by her own observation, that I was endeavouring in good\nearnest to acquire a more sociable and childlike disposition, a more attractive and sprightly\nmanner—something lighter, franker, more natural, as it were—she really must exclude me from\nprivileges intended only for contented, happy, little children.”\n\n“What does Bessie say I have done?” I asked.\n\n“Jane, I don’t like cavillers or questioners; besides, there is something truly forbidding in a child\ntaking up her elders in that manner. Be seated somewhere; and until you can speak pleasantly,\nremain silent.”\n\nA breakfast-room adjoined the drawing-room, I slipped in there. It contained a bookcase: I soon\npossessed myself of a volume, taking care that it should be one stored with pictures. I mounted\ninto the window-seat: gathering up my feet, I sat cross-legged, like a Turk; and, having drawn the\nred moreen curtain nearly close, I was shrined in double retirement.\n\nFolds of scarlet drapery shut in my view to the right hand; to the left were the clear panes of\nglass, protecting, but not separating me from the drear November day. At intervals, while\nturning over the leaves of my book, I studied the aspect of that winter afternoon. Afar, it offered\na pale blank of mist and cloud; near a scene of wet lawn and storm-beat shrub, with ceaseless\nrain sweeping away wildly before a long and lamentable blast.\n\nI returned to my book—Bewick’s History of British Birds: the letterpress thereof I cared little\nfor, generally speaking; and yet there were certain introductory pages that, child as I was, I could\nnot pass quite as a blank. They were those which treat of the haunts of sea-fowl; of “the solitary\nrocks and promontories” by them only inhabited; of the coast of Norway, studded with isles from\nits southern extremity, the Lindeness, or Naze, to the North Cape—\n\n“Where the Northern Ocean, in vast whirls,\nBoils round the naked, melancholy isles\n"
[2] "Of farthest Thule; and the Atlantic surge\nPours in among the stormy Hebrides.”\n\nNor could I pass unnoticed the suggestion of the bleak shores of Lapland, Siberia, Spitzbergen,\nNova Zembla, Iceland, Greenland, with “the vast sweep of the Arctic Zone, and those forlorn\nregions of dreary space,—that reservoir of frost and snow, where firm fields of ice, the\naccumulation of centuries of winters, glazed in Alpine heights above heights, surround the pole,\nand concentre the multiplied rigours of extreme cold.” Of these death-white realms I formed an\nidea of my own: shadowy, like all the half-comprehended notions that float dim through\nchildren’s brains, but strangely impressive. The words in these introductory pages connected\nthemselves with the succeeding vignettes, and gave significance to the rock standing up alone in\na sea of billow and spray; to the broken boat stranded on a desolate coast; to the cold and ghastly\nmoon glancing through bars of cloud at a wreck just sinking.\n\nI cannot tell what sentiment haunted the quite solitary churchyard, with its inscribed headstone;\nits gate, its two trees, its low horizon, girdled by a broken wall, and its newly-risen crescent,\nattesting the hour of eventide.\n\nThe two ships becalmed on a torpid sea, I believed to be marine phantoms.\n\nThe fiend pinning down the thief’s pack behind him, I passed over quickly: it was an object of\nterror.\n\nSo was the black horned thing seated aloof on a rock, surveying a distant crowd surrounding a\ngallows.\n\nEach picture told a story; mysterious often to my undeveloped understanding and imperfect\nfeelings, yet ever profoundly interesting: as interesting as the tales Bessie sometimes narrated on\nwinter evenings, when she chanced to be in good humour; and when, having brought her ironing-\ntable to the nursery hearth, she allowed us to sit about it, and while she got up Mrs. Reed’s lace\nfrills, and crimped her nightcap borders, fed our eager attention with passages of love and\nadventure taken from old fairy tales and other ballads; or (as at a later period I discovered) from\nthe pages of Pamela, and Henry, Earl of Moreland.\n\nWith Bewick on my knee, I was then happy: happy at least in my way. I feared nothing but\ninterruption, and that came too soon. The breakfast-room door opened.\n\n“Boh! Madam Mope!” cried the voice of John Reed; then he paused: he found the room\napparently empty.\n\n“Where the dickens is she!” he continued. “Lizzy! Georgy! (calling to his sisters) Joan is not\nhere: tell mama she is run out into the rain—bad animal!”\n\n“It is well I drew the curtain,” thought I; and I wished fervently he might not discover my hiding-\nplace: nor would John Reed have found it out himself; he was not quick either of vision or\nconception; but Eliza just put her head in at the door, and said at once—\n"                                                                                                                                                                                                            </code></pre>
</div>
</div>
<p>첫 페이지는 문자 벡터의 첫 번째 요소이고, 두 번째 페이지는 두 번째 요소입니다. 우리는 직사각형 데이터에 가장 익숙하므로 가능한 한 빨리 그 형식으로 가져오려고 노력할 것입니다. 그런 다음 <code>tidyverse</code>의 함수를 사용하여 처리할 수 있습니다.</p>
<p>먼저 문자 벡터를 티블로 변환해야 합니다. 이 시점에서 페이지 번호도 추가하고 싶을 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>jane_eyre <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">raw_text =</span> third_example,</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">page_number =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>그런 다음 각 줄이 관측치가 되도록 줄을 분리하고 싶습니다. 특수 문자이므로 백슬래시를 이스케이프해야 한다는 점을 기억하면서 “\n”을 찾아 그렇게 할 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>jane_eyre <span class="ot">&lt;-</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(jane_eyre, raw_text, <span class="at">sep =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">n"</span>, <span class="at">convert =</span> <span class="cn">FALSE</span>)</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>jane_eyre</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 93 × 2
   raw_text                                                          page_number
   &lt;chr&gt;                                                                   &lt;int&gt;
 1 "CHAPTER I"                                                                 1
 2 "There was no possibility of taking a walk that day. We had been…           1
 3 "leafless shrubbery an hour in the morning; but since dinner (Mr…           1
 4 "company, dined early) the cold winter wind had brought with it …           1
 5 "penetrating, that further out-door exercise was now out of the …           1
 6 ""                                                                          1
 7 "I was glad of it: I never liked long walks, especially on chill…           1
 8 "coming home in the raw twilight, with nipped fingers and toes, …           1
 9 "chidings of Bessie, the nurse, and humbled by the consciousness…           1
10 "Eliza, John, and Georgiana Reed."                                          1
# ℹ 83 more rows</code></pre>
</div>
</div>
</section>
<section id="미국-총-출산율" class="level3" data-number="7.4.2">
<h3 data-number="7.4.2" class="anchored" data-anchor-id="미국-총-출산율"><span class="header-section-number">7.4.2</span> 미국 총 출산율</h3>
<p>미국 보건복지부 생명 통계 보고서는 각 주의 총 출산율(TFR)에 대한 정보를 제공합니다. 이는 여성이 생식 연령 동안 현재 연령별 출산율을 경험할 경우 여성 1인당 평균 출생아 수입니다. 데이터는 PDF로 제공됩니다. 위에서 설명한 접근 방식을 사용하여 데이터를 데이터셋으로 가져올 수 있습니다.</p>
<p>우리가 관심 있는 표는 <a href="https://www.cdc.gov/nchs/data/nvsr/nvsr50/nvsr50_05.pdf">여기</a> 또는 <a href="https://github.com/RohanAlexander/telling_stories/blob/main/inputs/pdfs/dhs/year_2000.pdf">여기</a>에서 사용 가능한 PDF의 40페이지에 있습니다. 관심 있는 열은 “총 출산율”로 표시되어 있습니다(<a href="#fig-dhsexample" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-dhsexample</span></a>).</p>
<div id="fig-dhsexample" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-dhsexample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/dhs_example.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-dhsexample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;7.13: 2000년의 생명 통계 보고서 예시
</figcaption>
</figure>
</div>
<p>PDF에서 데이터를 가져올 때 첫 번째 단계는 결국 원하는 것을 스케치하는 것입니다. PDF는 일반적으로 상당한 양의 정보를 포함하므로 필요한 것이 무엇인지 명확히 해야 합니다. 이것은 집중력을 유지하고 범위 확장을 방지하는 데 도움이 되지만, 데이터 검사를 생각할 때도 유용합니다. 우리는 말 그대로 종이에 우리가 생각하는 것을 적습니다. 이 경우, 필요한 것은 주, 연도 및 총 출산율(TFR)에 대한 열이 있는 표입니다(<a href="#fig-tfrdesired" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-tfrdesired</span></a>).</p>
<div id="fig-tfrdesired" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-tfrdesired-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/07-tfr_dataset_sketch.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:40.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-tfrdesired-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;7.14: 각 미국 주에 대한 TFR의 계획된 데이터셋
</figcaption>
</figure>
</div>
<p>우리는 이 PDF의 특정 표에 있는 특정 열에 관심이 있습니다. 불행히도, 들어오는 것에 대해 마법 같은 것은 없습니다. 이 첫 번째 단계는 온라인에서 PDF를 찾고, 각 링크를 파악하고, 관심 있는 페이지와 열 이름을 검색하는 것을 요구합니다. 우리는 필요한 세부 정보가 포함된 CSV를 구축했으며 이를 읽어들일 수 있습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>summary_tfr_dataset <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(<span class="st">"https://raw.githubusercontent.com/RohanAlexander/"</span>,</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>         <span class="st">"telling_stories/main/inputs/tfr_tables_info.csv"</span>)</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div id="tbl-dhslinks" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-dhslinks-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;7.3: TFR 표에 대한 연도 및 관련 데이터
</figcaption>
<div aria-describedby="tbl-dhslinks-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_etkc3sn9mmxbhkoe6nqh(i, j, css_id) {
          var table = document.getElementById("tinytable_etkc3sn9mmxbhkoe6nqh");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_etkc3sn9mmxbhkoe6nqh');
        // Find the row with data-row attribute matching i
        var targetRow = table.querySelector(`tr [data-row="${i}"]`).closest('tr');
        var newRow = table.insertRow(targetRow.rowIndex);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        newCell.setAttribute("data-col", "0");
        newCell.setAttribute("data-row", i - 1);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_etkc3sn9mmxbhkoe6nqh(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_etkc3sn9mmxbhkoe6nqh");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '1', j: 1 }, { i: '1', j: 2 }, { i: '1', j: 3 }, { i: '1', j: 4 },  ], css_id: 'tinytable_css_twcexblr5kh83mftron9',}, 
          { positions: [ { i: '0', j: 1 }, { i: '0', j: 2 }, { i: '0', j: 3 }, { i: '0', j: 4 },  ], css_id: 'tinytable_css_egt7cwh0e8mamt4qtldr',}, 
          { positions: [ { i: '1', j: 0 },  ], css_id: 'tinytable_css_a5oox9xjka7hcthh504q',}, 
          { positions: [ { i: '0', j: 0 },  ], css_id: 'tinytable_css_3zkuxct4hx4p78snl4y1',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_etkc3sn9mmxbhkoe6nqh(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_twcexblr5kh83mftron9, .table th.tinytable_css_twcexblr5kh83mftron9 { text-align: right; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_egt7cwh0e8mamt4qtldr, .table th.tinytable_css_egt7cwh0e8mamt4qtldr { text-align: right; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_a5oox9xjka7hcthh504q, .table th.tinytable_css_a5oox9xjka7hcthh504q { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_3zkuxct4hx4p78snl4y1, .table th.tinytable_css_3zkuxct4hx4p78snl4y1 { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_etkc3sn9mmxbhkoe6nqh" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">연도</th>
                <th scope="col" data-row="0" data-col="1">페이지</th>
                <th scope="col" data-row="0" data-col="2">표</th>
                <th scope="col" data-row="0" data-col="3">열</th>
                <th scope="col" data-row="0" data-col="4">URL</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">2000</td>
                  <td data-row="1" data-col="1">40</td>
                  <td data-row="1" data-col="2">10</td>
                  <td data-row="1" data-col="3">Total fertility rate</td>
                  <td data-row="1" data-col="4">https://www.cdc.gov/nchs/data/nvsr/nvsr50/nvsr50_05.pdf</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
<p>먼저 <code>download.file()</code>를 사용하여 PDF를 다운로드하고 저장합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">url =</span> summary_tfr_dataset<span class="sc">$</span>url[<span class="dv">1</span>],</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">destfile =</span> <span class="st">"year_2000.pdf"</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>그런 다음 <code>pdftools</code>의 <code>pdf_text()</code>를 사용하여 PDF를 문자 벡터로 읽어들입니다. 그리고 익숙한 동사를 사용할 수 있도록 티블로 변환합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>dhs_2000 <span class="ot">&lt;-</span> <span class="fu">pdf_text</span>(<span class="st">"year_2000.pdf"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>dhs_2000_tibble <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">raw_data =</span> dhs_2000)</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dhs_2000_tibble)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 1
  raw_data                                                                      
  &lt;chr&gt;                                                                         
1 "Volume 50, Number 5                                                         …
2 "2   National Vital Statistics Report, Vol. 50, No. 5, February 12, 2002\n\n\…
3 "                                                                            …
4 "4   National Vital Statistics Report, Vol. 50, No. 5, February 12, 2002\n\n\…
5 "                                                                            …
6 "6   National Vital Statistics Report, Vol. 50, No. 5, February 12, 2002\n\n …</code></pre>
</div>
</div>
<p>관심 있는 페이지를 가져옵니다(각 페이지는 문자 벡터의 요소이므로 티블의 행입니다).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>dhs_2000_relevant_page <span class="ot">&lt;-</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  dhs_2000_tibble <span class="sc">|&gt;</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(summary_tfr_dataset<span class="sc">$</span>page[<span class="dv">1</span>])</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dhs_2000_relevant_page)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  raw_data                                                                      
  &lt;chr&gt;                                                                         
1 "40 National Vital Statistics Report, Vol. 50, No. 5, Revised May 15, 20022\n…</code></pre>
</div>
</div>
<p>행을 분리하고 <code>tidyr</code>의 <code>separate_rows()</code>를 사용하고 싶습니다. 이는 핵심 tidyverse의 일부입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>dhs_2000_separate_rows <span class="ot">&lt;-</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  dhs_2000_relevant_page <span class="sc">|&gt;</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(raw_data, <span class="at">sep =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">n"</span>, <span class="at">convert =</span> <span class="cn">FALSE</span>)</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dhs_2000_separate_rows)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 1
  raw_data                                                                      
  &lt;chr&gt;                                                                         
1 "40 National Vital Statistics Report, Vol. 50, No. 5, Revised May 15, 20022"  
2 ""                                                                            
3 "Table 10. Number of births, birth rates, fertility rates, total fertility ra…
4 "United States, each State and territory, 2000"                               
5 "[By place of residence. Birth rates are live births per 1,000 estimated popu…
6 "estimated in each area; total fertility rates are sums of birth rates for 5-…</code></pre>
</div>
</div>
<p>사용할 수 있는 패턴을 검색하고 있습니다. 내용의 처음 10줄을 살펴보겠습니다(페이지 상단의 제목 및 페이지 번호와 같은 측면은 무시합니다).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>dhs_2000_separate_rows[<span class="dv">13</span><span class="sc">:</span><span class="dv">22</span>, ] <span class="sc">|&gt;</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">raw_data =</span> <span class="fu">str_remove</span>(raw_data, <span class="st">"</span><span class="sc">\\</span><span class="st">.{40}"</span>))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 1
   raw_data                                                                     
   &lt;chr&gt;                                                                        
 1 "                                  State                                    …
 2 "                                                                           …
 3 "                                                                           …
 4 ""                                                                           
 5 ""                                                                           
 6 "United States 1 ..............          4,058,814   14.7      67.5      2,1…
 7 ""                                                                           
 8 "Alabama .......................           63,299    14.4      65.0      2,0…
 9 "Alaska ...........................         9,974    16.0      74.6      2,4…
10 "Arizona .........................         85,273    17.5      84.4      2,6…</code></pre>
</div>
</div>
<p>이제 한 줄만 살펴보겠습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>dhs_2000_separate_rows[<span class="dv">20</span>, ] <span class="sc">|&gt;</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">raw_data =</span> <span class="fu">str_remove</span>(raw_data, <span class="st">"</span><span class="sc">\\</span><span class="st">.{40}"</span>))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  raw_data                                                                      
  &lt;chr&gt;                                                                         
1 Alabama .......................           63,299    14.4      65.0      2,021…</code></pre>
</div>
</div>
<p>이것보다 더 좋을 수는 없습니다.</p>
<ol type="1">
<li>주와 데이터를 구분하는 점이 있습니다.</li>
<li>각 열 사이에 공백이 있습니다.</li>
</ol>
<p>이제 이것을 열로 분리할 수 있습니다. 먼저, 적어도 두 개의 점이 있는 경우에 일치시키고 싶습니다(점이 특수 문자이므로 이스케이프해야 한다는 점을 기억하십시오).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>dhs_2000_separate_columns <span class="ot">&lt;-</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  dhs_2000_separate_rows <span class="sc">|&gt;</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> raw_data,</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"state"</span>, <span class="st">"data"</span>),</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.{2,}"</span>,</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove =</span> <span class="cn">FALSE</span>,</span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"right"</span></span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a>dhs_2000_separate_columns[<span class="dv">18</span><span class="sc">:</span><span class="dv">28</span>, ] <span class="sc">|&gt;</span></span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state, data)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 2
   state                   data                                                 
   &lt;chr&gt;                   &lt;chr&gt;                                                
 1 "United States 1 "      "          4,058,814   14.7      67.5      2,130.0  …
 2 ""                       &lt;NA&gt;                                                
 3 "Alabama "              "           63,299    14.4      65.0      2,021.0   …
 4 "Alaska "               "         9,974    16.0      74.6      2,437.0      …
 5 "Arizona "              "         85,273    17.5      84.4      2,652.5     …
 6 "Arkansas "             "          37,783    14.7      69.1      2,140.0    …
 7 "California "           "        531,959    15.8      70.7      2,186.0     …
 8 "Colorado "             "          65,438    15.8      73.1      2,356.5    …
 9 "Connecticut "          "           43,026    13.0      61.2      1,931.5   …
10 "Delaware "             "           11,051    14.5      63.5      2,014.0   …
11 "District of Columbia " "                7,666    14.8      63.0      1,975.…</code></pre>
</div>
</div>
<p>그런 다음 공백을 기준으로 데이터를 분리합니다. 공백 수가 일치하지 않으므로 먼저 <code>stringr</code>의 <code>str_squish()</code>를 사용하여 두 개 이상의 공백을 하나로 압축합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>dhs_2000_separate_data <span class="ot">&lt;-</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  dhs_2000_separate_columns <span class="sc">|&gt;</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">str_squish</span>(data)) <span class="sc">|&gt;</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">col =</span> data,</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">into =</span> <span class="fu">c</span>(</span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>      <span class="st">"number_of_births"</span>,</span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>      <span class="st">"birth_rate"</span>,</span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>      <span class="st">"fertility_rate"</span>,</span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a>      <span class="st">"TFR"</span>,</span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a>      <span class="st">"teen_births_all"</span>,</span>
<span id="cb88-12"><a href="#cb88-12" aria-hidden="true" tabindex="-1"></a>      <span class="st">"teen_births_15_17"</span>,</span>
<span id="cb88-13"><a href="#cb88-13" aria-hidden="true" tabindex="-1"></a>      <span class="st">"teen_births_18_19"</span></span>
<span id="cb88-14"><a href="#cb88-14" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb88-15"><a href="#cb88-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">s"</span>,</span>
<span id="cb88-16"><a href="#cb88-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove =</span> <span class="cn">FALSE</span></span>
<span id="cb88-17"><a href="#cb88-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb88-18"><a href="#cb88-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-19"><a href="#cb88-19" aria-hidden="true" tabindex="-1"></a>dhs_2000_separate_data[<span class="dv">18</span><span class="sc">:</span><span class="dv">28</span>, ] <span class="sc">|&gt;</span></span>
<span id="cb88-20"><a href="#cb88-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>raw_data, <span class="sc">-</span>data)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 × 8
   state        number_of_births birth_rate fertility_rate TFR   teen_births_all
   &lt;chr&gt;        &lt;chr&gt;            &lt;chr&gt;      &lt;chr&gt;          &lt;chr&gt; &lt;chr&gt;          
 1 "United Sta… 4,058,814        14.7       67.5           2,13… 48.5           
 2 ""           &lt;NA&gt;             &lt;NA&gt;       &lt;NA&gt;           &lt;NA&gt;  &lt;NA&gt;           
 3 "Alabama "   63,299           14.4       65.0           2,02… 62.9           
 4 "Alaska "    9,974            16.0       74.6           2,43… 42.4           
 5 "Arizona "   85,273           17.5       84.4           2,65… 69.1           
 6 "Arkansas "  37,783           14.7       69.1           2,14… 68.5           
 7 "California… 531,959          15.8       70.7           2,18… 48.5           
 8 "Colorado "  65,438           15.8       73.1           2,35… 49.2           
 9 "Connecticu… 43,026           13.0       61.2           1,93… 31.9           
10 "Delaware "  11,051           14.5       63.5           2,01… 51.6           
11 "District o… 7,666            14.8       63.0           1,97… 80.7           
# ℹ 2 more variables: teen_births_15_17 &lt;chr&gt;, teen_births_18_19 &lt;chr&gt;</code></pre>
</div>
</div>
<p>이 모든 것이 꽤 좋아 보입니다. 남은 것은 정리하는 것뿐입니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>dhs_2000_cleaned <span class="ot">&lt;-</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>  dhs_2000_separate_data <span class="sc">|&gt;</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state, TFR) <span class="sc">|&gt;</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">18</span><span class="sc">:</span><span class="dv">74</span>) <span class="sc">|&gt;</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">|&gt;</span> </span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">TFR =</span> <span class="fu">str_remove_all</span>(TFR, <span class="st">","</span>),</span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">TFR =</span> <span class="fu">as.numeric</span>(TFR),</span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">state =</span> <span class="fu">str_trim</span>(state),</span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">state =</span> <span class="fu">if_else</span>(state <span class="sc">==</span> <span class="st">"United States 1"</span>, <span class="st">"Total"</span>, state)</span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>그리고 모든 주가 포함되었는지와 같은 몇 가지 검사를 실행합니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(state.name <span class="sc">%in%</span> dhs_2000_cleaned<span class="sc">$</span>state)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>그리고 완료되었습니다(<a href="#tbl-tfrforthewin" class="quarto-xref">표&nbsp;<span class="quarto-unresolved-ref">tbl-tfrforthewin</span></a>). TFR이 미국 주별로 상당히 넓은 분포를 보임을 알 수 있습니다(<a href="#fig-smalldhsexample" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-smalldhsexample</span></a>). 유타가 가장 높고 버몬트가 가장 낮습니다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>dhs_2000_cleaned <span class="sc">|&gt;</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">style_tt</span>(<span class="at">j =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">align =</span> <span class="st">"lr"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">format_tt</span>(<span class="at">digits =</span> <span class="dv">0</span>, <span class="at">num_mark_big =</span> <span class="st">","</span>, <span class="at">num_fmt =</span> <span class="st">"decimal"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">"주"</span>, <span class="st">"TFR"</span>))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-tfrforthewin" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-tfrforthewin-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;7.4: 미국 주별 TFR 데이터셋의 처음 10행, 2000-2019
</figcaption>
<div aria-describedby="tbl-tfrforthewin-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<!-- preamble start -->

    <script>

      function styleCell_9ckwgu3qqvr4k8idxuuj(i, j, css_id) {
          var table = document.getElementById("tinytable_9ckwgu3qqvr4k8idxuuj");
          var cell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
          if (cell) {
              console.log(`Styling cell at (${i}, ${j}) with class ${css_id}`);
              cell.classList.add(css_id);
          } else {
              console.warn(`Cell at (${i}, ${j}) not found.`);
          }
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_9ckwgu3qqvr4k8idxuuj');
        // Find the row with data-row attribute matching i
        var targetRow = table.querySelector(`tr [data-row="${i}"]`).closest('tr');
        var newRow = table.insertRow(targetRow.rowIndex);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        newCell.setAttribute("data-col", "0");
        newCell.setAttribute("data-row", i - 1);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_9ckwgu3qqvr4k8idxuuj(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_9ckwgu3qqvr4k8idxuuj");
        const targetCell = table.querySelector(`[data-row="${i}"][data-col="${j}"]`);
        if (!targetCell) {
          console.warn(`Cell at (${i}, ${j}) not found.`);
        }

        // Get all cells that need to be removed
        const cellsToRemove = [];
        for (let r = 0; r < rowspan; r++) {
          for (let c = 0; c < colspan; c++) {
            if (r === 0 && c === 0) continue; // Skip the target cell
            const cell = table.querySelector(`[data-row="${i + r}"][data-col="${j + c}"]`);
            if (cell) {
              cellsToRemove.push(cell);
            }
          }
        }

        // Remove all cells
        cellsToRemove.forEach(cell => cell.remove());

        // Set rowspan and colspan of the target cell if it exists
        if (targetCell) {
          targetCell.rowSpan = rowspan;
          targetCell.colSpan = colspan;
        }
      }
      // tinytable span after
      window.addEventListener('load', function () {
          var cellsToStyle = [
            // tinytable style arrays after
          { positions: [ { i: '10', j: 1 },  ], css_id: 'tinytable_css_gldtuwqyafzeeqdrl3sz',}, 
          { positions: [ { i: '1', j: 1 }, { i: '2', j: 1 }, { i: '3', j: 1 }, { i: '4', j: 1 }, { i: '5', j: 1 }, { i: '6', j: 1 }, { i: '7', j: 1 }, { i: '8', j: 1 }, { i: '9', j: 1 },  ], css_id: 'tinytable_css_8tfdvw05k105qmr18jcj',}, 
          { positions: [ { i: '0', j: 1 },  ], css_id: 'tinytable_css_0qn0d1c4i9czx755tguu',}, 
          { positions: [ { i: '10', j: 0 },  ], css_id: 'tinytable_css_i6ie0prez4z1y2by8oso',}, 
          { positions: [ { i: '1', j: 0 }, { i: '2', j: 0 }, { i: '3', j: 0 }, { i: '4', j: 0 }, { i: '5', j: 0 }, { i: '6', j: 0 }, { i: '7', j: 0 }, { i: '8', j: 0 }, { i: '9', j: 0 },  ], css_id: 'tinytable_css_r7jxpv4gp8iuoskmaqzf',}, 
          { positions: [ { i: '0', j: 0 },  ], css_id: 'tinytable_css_y2f6ztuy01lpoyat56ys',}, 
          ];

          // Loop over the arrays to style the cells
          cellsToStyle.forEach(function (group) {
              group.positions.forEach(function (cell) {
                  styleCell_9ckwgu3qqvr4k8idxuuj(cell.i, cell.j, group.css_id);
              });
          });
      });
    </script>

    <style>
      /* tinytable css entries after */
      .table td.tinytable_css_gldtuwqyafzeeqdrl3sz, .table th.tinytable_css_gldtuwqyafzeeqdrl3sz { text-align: right; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_8tfdvw05k105qmr18jcj, .table th.tinytable_css_8tfdvw05k105qmr18jcj { text-align: right; }
      .table td.tinytable_css_0qn0d1c4i9czx755tguu, .table th.tinytable_css_0qn0d1c4i9czx755tguu { text-align: right; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
      .table td.tinytable_css_i6ie0prez4z1y2by8oso, .table th.tinytable_css_i6ie0prez4z1y2by8oso { text-align: left; border-bottom: solid #d3d8dc 0.1em; }
      .table td.tinytable_css_r7jxpv4gp8iuoskmaqzf, .table th.tinytable_css_r7jxpv4gp8iuoskmaqzf { text-align: left; }
      .table td.tinytable_css_y2f6ztuy01lpoyat56ys, .table th.tinytable_css_y2f6ztuy01lpoyat56ys { text-align: left; border-top: solid #d3d8dc 0.1em; border-bottom: solid #d3d8dc 0.05em; }
    </style>
    <div class="container">
      <table class="table table-borderless" id="tinytable_9ckwgu3qqvr4k8idxuuj" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col" data-row="0" data-col="0">주</th>
                <th scope="col" data-row="0" data-col="1">TFR</th>
              </tr>
        </thead>
        
        <tbody>
                <tr>
                  <td data-row="1" data-col="0">Total</td>
                  <td data-row="1" data-col="1">2,130</td>
                </tr>
                <tr>
                  <td data-row="2" data-col="0">Alabama</td>
                  <td data-row="2" data-col="1">2,021</td>
                </tr>
                <tr>
                  <td data-row="3" data-col="0">Alaska</td>
                  <td data-row="3" data-col="1">2,437</td>
                </tr>
                <tr>
                  <td data-row="4" data-col="0">Arizona</td>
                  <td data-row="4" data-col="1">2,652</td>
                </tr>
                <tr>
                  <td data-row="5" data-col="0">Arkansas</td>
                  <td data-row="5" data-col="1">2,140</td>
                </tr>
                <tr>
                  <td data-row="6" data-col="0">California</td>
                  <td data-row="6" data-col="1">2,186</td>
                </tr>
                <tr>
                  <td data-row="7" data-col="0">Colorado</td>
                  <td data-row="7" data-col="1">2,356</td>
                </tr>
                <tr>
                  <td data-row="8" data-col="0">Connecticut</td>
                  <td data-row="8" data-col="1">1,932</td>
                </tr>
                <tr>
                  <td data-row="9" data-col="0">Delaware</td>
                  <td data-row="9" data-col="1">2,014</td>
                </tr>
                <tr>
                  <td data-row="10" data-col="0">District of Columbia</td>
                  <td data-row="10" data-col="1">1,976</td>
                </tr>
        </tbody>
      </table>
    </div>
<!-- hack to avoid NA insertion in last line -->
</div>
</div>
</figure>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>dhs_2000_cleaned <span class="sc">|&gt;</span> </span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(state <span class="sc">!=</span> <span class="st">"Total"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> TFR, <span class="at">y =</span> <span class="fu">fct_reorder</span>(state, TFR))) <span class="sc">+</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"주"</span>, <span class="at">x =</span> <span class="st">"총 출산율"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-smalldhsexample" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-smalldhsexample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="07-gather_ko_files/figure-html/fig-smalldhsexample-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-smalldhsexample-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;7.15: 2000년 미국 주별 TFR 분포
</figcaption>
</figure>
</div>
</div>
</div>
<p><span class="citation" data-cites="kieransparsing은">(<a href="#ref-kieransparsing은" role="doc-biblioref"><strong>kieransparsing은?</strong></a>)</span> 다른 맥락에서 이 접근 방식을 사용하는 또 다른 예를 제공합니다.</p>
</section>
<section id="광학-문자-인식" class="level3" data-number="7.4.3">
<h3 data-number="7.4.3" class="anchored" data-anchor-id="광학-문자-인식"><span class="header-section-number">7.4.3</span> 광학 문자 인식</h3>
<p>위의 모든 내용은 이미 “디지털화된” PDF를 가지고 있다는 전제하에 이루어졌습니다. 그러나 스캔 결과와 같이 이미지로 구성된 경우는 어떻습니까? 이러한 PDF는 종종 비정형 데이터를 포함합니다. 즉, 데이터가 태그가 지정되지 않거나 정규적인 방식으로 구성되지 않습니다. 광학 문자 인식(OCR)은 텍스트 이미지를 실제 텍스트로 변환하는 프로세스입니다. OCR 전후의 PDF를 인간이 읽는 데 큰 차이가 없을 수 있지만, PDF는 기계가 읽을 수 있게 되어 스크립트를 사용할 수 있게 됩니다<span class="citation" data-cites="Cheriet2007">(<a href="#ref-Cheriet2007" role="doc-biblioref">Cheriet 기타 2007</a>)</span>. OCR은 1950년대부터 문자 이미지를 파싱하는 데 사용되었으며, 처음에는 수동 접근 방식을 사용했습니다. 수동 접근 방식이 여전히 골드 스탠다드이지만, 비용 효율성 때문에 통계 모델로 대체되었습니다.</p>
<p>이 예시에서는 <code>tesseract</code>를 사용하여 문서를 OCR할 것입니다. 이것은 Tesseract 오픈 소스 OCR 엔진을 감싸는 <code>R</code> 래퍼입니다. Tesseract는 원래 1980년대 HP에서 개발되었으며, 현재는 주로 Google에서 개발하고 있습니다. <code>tesseract</code>를 설치하고 로드한 후 <code>ocr()</code>을 사용할 수 있습니다.</p>
<p><em>제인 에어</em>의 첫 페이지 스캔으로 예시를 살펴보겠습니다(<a href="#fig-janescan" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-janescan</span></a>).</p>
<div id="fig-janescan" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-janescan-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/jane_scan.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-janescan-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;7.16: 제인 에어 첫 페이지 스캔
</figcaption>
</figure>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="fu">ocr</span>(</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">here</span>(<span class="st">"jane_scan.png"</span>),</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">engine =</span> <span class="fu">tesseract</span>(<span class="st">"eng"</span>)</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(text)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>일반적으로 결과는 나쁘지 않습니다. OCR은 유용한 도구이지만 완벽하지 않으며 결과 데이터는 정리 측면에서 추가적인 주의가 필요할 수 있습니다. 예를 들어, <a href="#fig-janescan의" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-janescan의</span></a> OCR 결과에서 수정해야 할 불규칙성을 볼 수 있습니다. 관심 있는 특정 데이터에 초점을 맞추고 대비를 높이는 것과 같은 다양한 옵션이 도움이 될 수 있습니다. 다른 인기 있는 OCR 엔진으로는 Amazon Textract, Google Vision API 및 ABBYY가 있습니다.</p>
</section>
</section>
<section id="연습-문제" class="level2" data-number="7.5">
<h2 data-number="7.5" class="anchored" data-anchor-id="연습-문제"><span class="header-section-number">7.5</span> 연습 문제</h2>
<section id="연습" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="연습">연습</h3>
<ol type="1">
<li><em>(계획)</em> 다음 시나리오를 고려하십시오: <em>다섯 명의 학부생(매트, 애쉬, 재키, 롤, 마이크)이 100일 동안 매일 책에서 일정 페이지 수를 읽습니다. 두 명의 학부생은 커플이므로 그들의 페이지 수는 양의 상관 관계를 가지지만, 다른 모든 학부생은 독립적입니다.</em> 데이터셋이 어떻게 생겼을지 스케치한 다음, 모든 관측치를 보여주기 위해 만들 수 있는 그래프를 스케치하십시오.</li>
<li><em>(시뮬레이션)</em> 설명된 시나리오를 더 고려하고 상황을 시뮬레이션하십시오(일부 변수 간의 관계에 유의하십시오). 그런 다음 시뮬레이션된 데이터를 기반으로 5개의 테스트를 작성하십시오.</li>
<li><em>(수집)</em> 시나리오와 유사한 실제 데이터를 얻고 시뮬레이션된 테스트를 이 실제 데이터로 업데이트하는 스크립트를 추가하십시오.</li>
<li><em>(탐색)</em> 실제 데이터를 사용하여 그래프와 표를 만드십시오.</li>
<li><em>(소통)</em> 그래프와 표를 동반할 텍스트를 작성하십시오. 코드를 <code>R</code> 파일과 Quarto 문서로 적절하게 분리하십시오. 고품질 GitHub 리포지토리 링크를 제출하십시오.</li>
</ol>
</section>
<section id="퀴즈" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="퀴즈">퀴즈</h3>
<ol type="1">
<li>데이터 수집 맥락에서 API란 무엇입니까 (하나 선택)?
<ol type="a">
<li>데이터를 로컬에서 처리하기 위한 표준화된 함수 집합.</li>
<li>데이터 구조화를 위한 마크업 언어.</li>
<li>웹 브라우저가 HTML 콘텐츠를 렌더링하기 위한 프로토콜.</li>
<li>다른 사람이 코드를 사용하여 데이터를 요청할 수 있도록 서버에서 제공하는 인터페이스.</li>
</ol></li>
<li>데이터 수집을 위해 API를 사용할 때, 다음 중 인증에 사용할 수 있는 것은 무엇입니까 (하나 선택)?
<ol type="a">
<li>요청에 API 키 또는 토큰 제공.</li>
<li>브라우저에 저장된 쿠키 사용.</li>
<li>SSL 확인 비활성화.</li>
<li>클라이언트 머신의 hosts 파일 수정.</li>
</ol></li>
<li><code>gh</code>를 사용하여 GitHub API에 접근하는 다음 코드를 고려하십시오. <code>heapsofpapers</code> 리포지토리는 언제 생성되었습니까 (하나 선택)?
<ol type="a">
<li>2021-02-23</li>
<li>2021-03-06</li>
<li>2021-05-25</li>
<li>2021-04-27</li>
</ol></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tyler Bradley와 Monica Alexander 기반</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>repos <span class="ot">&lt;-</span> <span class="fu">gh</span>(<span class="st">"/users/RohanAlexander/repos"</span>, <span class="at">per_page =</span> <span class="dv">100</span>)</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>repo_info <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">map_chr</span>(repos, <span class="st">"name"</span>),</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">created =</span> <span class="fu">map_chr</span>(repos, <span class="st">"created_at"</span>),</span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">full_name =</span> <span class="fu">map_chr</span>(repos, <span class="st">"full_name"</span>),</span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="4" type="1">
<li>UN의 <a href="https://population.un.org/dataportal/about/dataapi">데이터 API</a>와 <span class="citation" data-cites="schmertmannunapi의">(<a href="#ref-schmertmannunapi의" role="doc-biblioref"><strong>schmertmannunapi의?</strong></a>)</span> 사용법 소개를 고려하십시오. 아르헨티나의 위치 코드는 32입니다. 다음 코드를 수정하여 1995년 20세 아르헨티나의 단일 연령 출산율이 얼마였는지 확인하십시오 (하나 선택)?
<ol type="a">
<li>147.679</li>
<li>172.988</li>
<li>204.124</li>
<li>128.665</li>
</ol></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>my_indicator <span class="ot">&lt;-</span> <span class="dv">68</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>my_location <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>my_startyr <span class="ot">&lt;-</span> <span class="dv">1996</span></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>my_endyr <span class="ot">&lt;-</span> <span class="dv">1999</span></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(</span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://population.un.org/dataportalapi/api/v1"</span>,</span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"/data/indicators/"</span>, my_indicator, <span class="st">"/locations/"</span>,</span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>  my_location, <span class="st">"/start/"</span>, my_startyr, <span class="st">"/end/"</span>,</span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a>  my_endyr, <span class="st">"/?format=csv"</span></span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb97-12"><a href="#cb97-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-13"><a href="#cb97-13" aria-hidden="true" tabindex="-1"></a>un_data <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="at">file =</span> url, <span class="at">delim =</span> <span class="st">"|"</span>, <span class="at">skip =</span> <span class="dv">1</span>)</span>
<span id="cb97-14"><a href="#cb97-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-15"><a href="#cb97-15" aria-hidden="true" tabindex="-1"></a>un_data <span class="sc">|&gt;</span></span>
<span id="cb97-16"><a href="#cb97-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(AgeLabel <span class="sc">==</span> <span class="dv">25</span> <span class="sc">&amp;</span> TimeLabel <span class="sc">==</span> <span class="dv">1996</span>) <span class="sc">|&gt;</span></span>
<span id="cb97-17"><a href="#cb97-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Value)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="5" type="1">
<li><code>httr</code>의 <code>GET()</code>에 대한 주요 인수는 무엇입니까 (하나 선택)?
<ol type="a">
<li>“url”</li>
<li>“website”</li>
<li>“domain”</li>
<li>“location”</li>
</ol></li>
<li>웹 스크래핑에서 <code>robots.txt</code>를 존중하는 목적은 무엇입니까 (하나 선택)?
<ol type="a">
<li>스크래핑된 데이터가 정확한지 확인하기 위해.</li>
<li>사이트의 크롤링 지침을 따라 웹사이트의 서비스 약관을 위반하지 않기 위해.</li>
<li>스크래핑 프로세스 속도를 높이기 위해.</li>
<li>인증 자격 증명을 얻기 위해.</li>
</ol></li>
<li>코드를 파싱할 때 일반적으로 웹사이트의 어떤 기능을 활용합니까 (하나 선택)?
<ol type="a">
<li>HTML/CSS 마크업.</li>
<li>쿠키.</li>
<li>페이스북 비콘.</li>
<li>코드 주석.</li>
</ol></li>
<li>스크래핑을 수행할 때 따라야 할 원칙은 무엇입니까 (모두 선택하십시오)?
<ol type="a">
<li>가능하면 피하십시오.</li>
<li>사이트의 지침을 따르십시오.</li>
<li>속도를 늦추십시오.</li>
<li>도끼가 아닌 메스를 사용하십시오.</li>
</ol></li>
<li>다음 중 웹 스크래핑을 수행할 때 권장되지 않는 원칙은 무엇입니까 (하나 선택)?
<ol type="a">
<li>웹사이트의 서비스 약관을 준수하십시오.</li>
<li>요청 속도를 늦춰 웹사이트 서버에 미치는 영향을 줄이십시오.</li>
<li>필요 여부에 관계없이 모든 데이터를 스크래핑하십시오.</li>
<li>스크래핑된 페이지를 재게시하지 마십시오.</li>
</ol></li>
<li>다음 중 정규 표현식의 일부로 사용될 때 마침표와 일치하는 것은 무엇입니까 (힌트: “문자열” 치트 시트 참조) (하나 선택)?
<ol type="a">
<li>“.”</li>
<li>“\.”</li>
<li>“\\\.”</li>
</ol></li>
<li>특정 연도에 한 국가의 출생아 수와 같은 인구 통계 데이터에 대해 사용하고 싶은 세 가지 검사는 무엇입니까?</li>
<li>다음 중 <code>purrr</code> 패키지의 함수는 무엇입니까 (모두 선택하십시오)?
<ol type="a">
<li><code>map()</code></li>
<li><code>walk()</code></li>
<li><code>run()</code></li>
<li><code>safely()</code></li>
</ol></li>
<li>목록의 항목에 대한 HTML 태그는 무엇입니까 (하나 선택)?
<ol type="a">
<li><code>li</code></li>
<li><code>body</code></li>
<li><code>b</code></li>
<li><code>em</code></li>
</ol></li>
<li>“names”라는 열에 “rohan_alexander”라는 텍스트가 있고 밑줄을 기준으로 이름과 성으로 분리하고 싶을 때 어떤 함수를 사용해야 합니까 (하나 선택)?
<ol type="a">
<li><code>spacing()</code></li>
<li><code>slice()</code></li>
<li><code>separate()</code></li>
<li><code>text_to_columns()</code></li>
</ol></li>
<li>OCR(광학 문자 인식)이란 무엇입니까 (하나 선택)?
<ol type="a">
<li>손글씨 노트를 타이핑된 텍스트로 변환하는 프로세스.</li>
<li>텍스트 이미지를 기계가 읽을 수 있는 텍스트로 번역하는 방법.</li>
<li>API에서 구조화된 데이터를 파싱하는 기술.</li>
<li>더 빠른 실행을 위해 코드를 최적화하는 방법.</li>
</ol></li>
<li><code>R</code>에서 웹 스크래핑 중 속도 제한을 존중하는 데 유용한, 지정된 시간 동안 실행을 일시 중지하는 데 사용할 수 있는 함수는 무엇입니까 (하나 선택)?
<ol type="a">
<li><code>sleep()</code></li>
<li><code>pause()</code></li>
<li><code>sys.sleep()</code></li>
<li><code>wait()</code></li>
</ol></li>
<li>다음 중 PDF에서 데이터를 추출할 때의 어려움은 무엇입니까 (하나 선택)?
<ol type="a">
<li>PDF는 어떤 프로그래밍 언어로도 읽을 수 없습니다.</li>
<li>PDF는 일관된 인간의 읽기를 위해 설계되었으며, 데이터 추출을 위한 것이 아닙니다.</li>
<li>PDF는 항상 처리할 수 없는 비정형 데이터를 포함합니다.</li>
<li>PDF는 암호화되어 있으며 암호 없이는 접근할 수 없습니다.</li>
</ol></li>
<li>스캔한 문서에 OCR을 수행할 때 텍스트 인식의 정확도에 영향을 미칠 수 있는 일반적인 문제는 무엇입니까 (하나 선택)?
<ol type="a">
<li>이미지의 파일 크기.</li>
<li>사용된 프로그래밍 언어.</li>
<li>스캔한 이미지의 품질 및 해상도.</li>
<li>문서의 페이지 수.</li>
</ol></li>
<li><span class="citation" data-cites="cirone에">(<a href="#ref-cirone에" role="doc-biblioref"><strong>cirone에?</strong></a>)</span> 따르면, 다음 중 역사적 데이터로 작업할 때 추론에 대한 일반적인 위협이 아닌 것은 무엇입니까 (하나 선택)?
<ol type="a">
<li>선택 편향.</li>
<li>확증 편향.</li>
<li>시간 경과.</li>
<li>소외된 그룹의 과대 대표.</li>
</ol></li>
<li><span class="citation" data-cites="cirone에">(<a href="#ref-cirone에" role="doc-biblioref"><strong>cirone에?</strong></a>)</span> 따르면, 역사적 정치 경제학(및 더 일반적으로)에서 술꾼의 검색 문제란 무엇입니까 (하나 선택)?
<ol type="a">
<li>대표성을 고려하지 않고 가장 쉽게 접근할 수 있는 데이터를 선택하는 것.</li>
<li>엘리트 출처에서만 데이터를 검색하는 것.</li>
<li>연구를 위해 디지털 아카이브에 과도하게 의존하는 것.</li>
<li>현대적 편향으로 인해 역사적 텍스트를 오해하는 것.</li>
</ol></li>
<li><span class="citation" data-cites="cirone에">(<a href="#ref-cirone에" role="doc-biblioref"><strong>cirone에?</strong></a>)</span> 따르면, DAG는 어떤 역할을 합니까 (하나 선택)?
<ol type="a">
<li>역사적 데이터에 대한 OCR의 정확도를 향상시킵니다.</li>
<li>역사적 출처에서 기계가 읽을 수 있는 텍스트를 생성합니다.</li>
<li>연구자들이 인과 관계를 시각화하고 해결하는 데 도움이 됩니다.</li>
<li>역사적 아카이브를 구성하기 위한 메타데이터 역할을 합니다.</li>
</ol></li>
<li><span class="citation" data-cites="Johnson2021Two에">(<a href="#ref-Johnson2021Two에" role="doc-biblioref"><strong>Johnson2021Two에?</strong></a>)</span> 따르면, 미국 인구 조사국의 초기 교도소 데이터 수집의 초점은 무엇이었습니까 (하나 선택)?
<ol type="a">
<li>건강 상태 문서화.</li>
<li>선고에서 인종적 차이 조사.</li>
<li>사회경제적 배경 및 고용 기록.</li>
<li>수감자 수 및 인구 통계 집계.</li>
</ol></li>
<li><span class="citation" data-cites="Johnson2021Two에">(<a href="#ref-Johnson2021Two에" role="doc-biblioref"><strong>Johnson2021Two에?</strong></a>)</span> 따르면, 지역 사회에서 수집된 교도소 데이터는 주에서 수집된 교도소 데이터와 어떻게 다릅니까 (하나 선택)?
<ol type="a">
<li>지역 사회 데이터는 정부 공무원이 수집합니다.</li>
<li>지역 사회 데이터는 경험과 교도소 조건을 강조합니다.</li>
<li>주 데이터는 지역 사회 데이터보다 신뢰성이 낮습니다.</li>
<li>주 데이터는 지역 사회 데이터보다 신뢰성이 높습니다.</li>
</ol></li>
<li><span class="citation" data-cites="Johnson2021Two에">(<a href="#ref-Johnson2021Two에" role="doc-biblioref"><strong>Johnson2021Two에?</strong></a>)</span> 따르면, 다음 중 주에서 수집된 데이터의 한계는 무엇입니까 (하나 선택)?
<ol type="a">
<li>주에서 수집된 데이터는 학술 연구보다 신뢰성이 낮습니다.</li>
<li>교도소 인구를 과소 대표합니다.</li>
<li>이전 데이터 수집의 편향과 가정을 재현할 수 있습니다.</li>
<li>비폭력 범죄자에게만 초점을 맞춥니다.</li>
</ol></li>
<li><span class="citation" data-cites="Johnson2021Two에">(<a href="#ref-Johnson2021Two에" role="doc-biblioref"><strong>Johnson2021Two에?</strong></a>)</span> 따르면, 교도소 데이터 수집을 볼 때 어떤 질문을 해야 합니까 (하나 선택)?
<ol type="a">
<li>“데이터 인프라를 누가 왜 구축했는가?”.</li>
<li>“경제적 요인이 교도소 관리에 어떻게 영향을 미치는가?”.</li>
<li>“데이터가 공공 정책을 만드는 데 사용되고 있는가?”.</li>
</ol></li>
</ol>
</section>
<section id="수업-활동" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="수업-활동">수업 활동</h3>
<ul>
<li><a href="https://github.com/RohanAlexander/starter_folder">시작 폴더</a>를 사용하고 새 리포지토리를 만드십시오. API를 사용하여 오늘 NASA APOD를 가져온 다음 리포지토리의 Quarto 문서에 추가하십시오.</li>
<li>Spotify API를 사용하여 비욘세 앨범 중 어떤 앨범이 평균 “춤추기 쉬움”이 가장 높은지 확인하십시오.</li>
<li>카밀라 카베요가 2016년 12월 피프스 하모니를 탈퇴한 것이 스튜디오 앨범 노래의 valence에 영향을 미쳤는지 여부에 답하기 위한 그래프를 만드십시오.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> 다음은 유용한 정리 코드입니다.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>fifth_harmony <span class="sc">|&gt;</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(album_name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Reflection"</span>, <span class="st">"7/27 (Deluxe)"</span>, <span class="st">"Fifth Harmony"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">album_release_date =</span> <span class="fu">ymd</span>(album_release_date)) <span class="sc">|&gt;</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(album_release_date <span class="sc">!=</span> <span class="st">"2017-10-29"</span>) <span class="co"># 본질적으로 중복되는 앨범이 있습니다.</span></span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><a href="#fig-pmslives와" class="quarto-xref">그림&nbsp;<span class="quarto-unresolved-ref">fig-pmslives와</span></a> 동등한 것을 캐나다에 대해 만드십시오.</li>
<li><em>논문 검토:</em> <span class="citation" data-cites="Kish1959를">(<a href="#ref-Kish1959를" role="doc-biblioref"><strong>Kish1959를?</strong></a>)</span> 읽고 익숙한 예를 들어 최소 한 페이지의 검토를 작성하십시오.</li>
</ul>
</section>
<section id="과제" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="과제">과제</h3>
<p>웹 스크래핑 예시를 다음 중 하나에 대해 다시 수행하십시오: <a href="https://en.wikipedia.org/wiki/List_of_prime_ministers_of_Australia">호주</a>, <a href="https://en.wikipedia.org/wiki/List_of_prime_ministers_of_Canada">캐나다</a>, <a href="https://en.wikipedia.org/wiki/List_of_prime_ministers_of_India">인도</a>, 또는 <a href="https://en.wikipedia.org/wiki/List_of_prime_ministers_of_New_Zealand">뉴질랜드</a>.</p>
<p>데이터를 계획하고, 수집하고, 정리한 다음, 이를 사용하여 위에서 만든 것과 유사한 표를 만드십시오. 발견한 내용에 대해 몇 단락을 작성하십시오. 그런 다음 데이터 소스, 수집한 내용, 그리고 어떻게 진행했는지에 대해 몇 단락을 작성하십시오. 예상보다 오래 걸린 것은 무엇입니까? 언제 재미있어졌습니까? 다음에 이 작업을 할 때 무엇을 다르게 하시겠습니까? 제출물은 최소 두 페이지 이상이어야 합니다.</p>
<p>Quarto를 사용하고, 적절한 제목, 저자, 날짜, GitHub 리포지토리 링크 및 인용을 포함하십시오. PDF를 제출하십시오.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-heapsofpapers" class="csl-entry" role="listitem">
Alexander, Rohan, 와/과 A Mahfouz. 2021. <em><span>heapsofpapers: Easily Download Heaps of PDF and CSV Files</span></em>. <a href="https://CRAN.R-project.org/package=heapsofpapers">https://CRAN.R-project.org/package=heapsofpapers</a>.
</div>
<div id="ref-tinytable" class="csl-entry" role="listitem">
Arel-Bundock, Vincent. 2024. <em><span>tinytable: Simple and Configurable Tables in <span>“HTML”</span>, <span>“LaTeX”</span>, <span>“Markdown”</span>, <span>“Word”</span>, <span>“PNG”</span>, <span>“PDF”</span>, and <span>“Typst”</span> Formats</span></em>. <a href="https://vincentarelbundock.github.io/tinytable/">https://vincentarelbundock.github.io/tinytable/</a>.
</div>
<div id="ref-bailey2008design" class="csl-entry" role="listitem">
Bailey, Rosemary. 2008. <em>Design of comparative experiments</em>. Cambridge: Cambridge University Press. <a href="https://doi.org/10.1017/CBO9780511611483">https://doi.org/10.1017/CBO9780511611483</a>.
</div>
<div id="ref-janeeyre" class="csl-entry" role="listitem">
Brontë, Charlotte. 1847. <em>Jane Eyre</em>. <a href="https://www.gutenberg.org/files/1260/1260-h/1260-h.htm">https://www.gutenberg.org/files/1260/1260-h/1260-h.htm</a>.
</div>
<div id="ref-gh" class="csl-entry" role="listitem">
Bryan, Jenny, 와/과 Hadley Wickham. 2021. <em><span>gh: GitHub API</span></em>. <a href="https://CRAN.R-project.org/package=gh">https://CRAN.R-project.org/package=gh</a>.
</div>
<div id="ref-Cheriet2007" class="csl-entry" role="listitem">
Cheriet, Mohamed, Nawwaf Kharma, Cheng-Lin Liu, 와/과 Ching Suen. 2007. <em>Character Recognition Systems: A Guide for Students and Practitioner</em>. Wiley.
</div>
<div id="ref-cirone" class="csl-entry" role="listitem">
Cirone, Alexandra, 와/과 Arthur Spirling. 2021. <span>“Turning History into Data: Data Collection, Measurement, and Inference in HPE”</span>. <em>Journal of Historical Political Economy</em> 1 (1): 127–54. <a href="https://doi.org/10.1561/115.00000005">https://doi.org/10.1561/115.00000005</a>.
</div>
<div id="ref-crawford" class="csl-entry" role="listitem">
Crawford, Kate. 2021. <em><span>Atlas of AI</span></em>. 1st ed. New Haven: Yale University Press.
</div>
<div id="ref-scrapecoviddata" class="csl-entry" role="listitem">
Eisenstein, Michael. 2022. <span>“Need web data? Here’s how to harvest them”</span>. <em>Nature</em> 607: 200–201. <a href="https://doi.org/10.1038/d41586-022-01830-9">https://doi.org/10.1038/d41586-022-01830-9</a>.
</div>
<div id="ref-janitor" class="csl-entry" role="listitem">
Firke, Sam. 2023. <em><span>janitor: Simple Tools for Examining and Cleaning Dirty Data</span></em>. <a href="https://CRAN.R-project.org/package=janitor">https://CRAN.R-project.org/package=janitor</a>.
</div>
<div id="ref-GrolemundWickham2011" class="csl-entry" role="listitem">
Grolemund, Garrett, 와/과 Hadley Wickham. 2011. <span>“Dates and Times Made Easy with <span>lubridate</span>”</span>. <em>Journal of Statistical Software</em> 40 (3): 1–25. <a href="https://doi.org/10.18637/jss.v040.i03">https://doi.org/10.18637/jss.v040.i03</a>.
</div>
<div id="ref-hackett2016researchers" class="csl-entry" role="listitem">
Hackett, Robert. 2016. <span>“<span>Researchers Caused an Uproar By Publishing Data From 70,000 OkCupid Users</span>”</span>. <em>Fortune</em>, 5월. <a href="https://fortune.com/2016/05/18/okcupid-data-research/">https://fortune.com/2016/05/18/okcupid-data-research/</a>.
</div>
<div id="ref-Johnson2021Two" class="csl-entry" role="listitem">
Johnson, Kaneesha. 2021. <span>“Two Regimes of Prison Data Collection”</span>. <em>Harvard Data Science Review</em> 3 (3). <a href="https://doi.org/10.1162/99608f92.72825001">https://doi.org/10.1162/99608f92.72825001</a>.
</div>
<div id="ref-luscombe2021algorithmic" class="csl-entry" role="listitem">
Luscombe, Alex, Kevin Dick, 와/과 Kevin Walby. 2021. <span>“Algorithmic thinking in the public interest: navigating technical, legal, and ethical hurdles to web scraping in the social sciences”</span>. <em>Quality &amp; Quantity</em> 56 (3): 1–22. <a href="https://doi.org/10.1007/s11135-021-01164-0">https://doi.org/10.1007/s11135-021-01164-0</a>.
</div>
<div id="ref-here" class="csl-entry" role="listitem">
Müller, Kirill. 2020. <em><span>here: A Simpler Way to Find Your Files</span></em>. <a href="https://CRAN.R-project.org/package=here">https://CRAN.R-project.org/package=here</a>.
</div>
<div id="ref-jsonlite" class="csl-entry" role="listitem">
Ooms, Jeroen. 2014. <span>“<span>The jsonlite Package: A Practical and Consistent Mapping Between JSON Data and R Objects</span>”</span>. <em>arXiv:1403.2805 [stat.CO]</em>. <a href="https://arxiv.org/abs/1403.2805">https://arxiv.org/abs/1403.2805</a>.
</div>
<div id="ref-pdftools" class="csl-entry" role="listitem">
———. 2022a. <em><span>pdftools: Text Extraction, Rendering and Converting of PDF Documents</span></em>. <a href="https://CRAN.R-project.org/package=pdftools">https://CRAN.R-project.org/package=pdftools</a>.
</div>
<div id="ref-citetesseract" class="csl-entry" role="listitem">
———. 2022b. <em><span>tesseract: Open Source OCR Engine</span></em>. <a href="https://CRAN.R-project.org/package=tesseract">https://CRAN.R-project.org/package=tesseract</a>.
</div>
<div id="ref-polite" class="csl-entry" role="listitem">
Perepolkin, Dmytro. 2022. <em><span>polite: Be Nice on the Web</span></em>. <a href="https://CRAN.R-project.org/package=polite">https://CRAN.R-project.org/package=polite</a>.
</div>
<div id="ref-citeR" class="csl-entry" role="listitem">
R Core Team. 2024. <em>R: A Language and Environment for Statistical Computing</em>. Vienna, Austria: R Foundation for Statistical Computing. <a href="https://www.R-project.org/">https://www.R-project.org/</a>.
</div>
<div id="ref-washpostfatalforce" class="csl-entry" role="listitem">
The Washington Post. 2023. <span>“Fatal Force Database”</span>. <a href="https://github.com/washingtonpost/data-police-shootings">https://github.com/washingtonpost/data-police-shootings</a>.
</div>
<div id="ref-spotifyr" class="csl-entry" role="listitem">
Thompson, Charlie, Daniel Antal, Josiah Parry, Donal Phipps, 와/과 Tom Wolff. 2022. <em><span>spotifyr: R Wrapper for the <span>“Spotify”</span> Web API</span></em>. <a href="https://CRAN.R-project.org/package=spotifyr">https://CRAN.R-project.org/package=spotifyr</a>.
</div>
<div id="ref-bronnerpolicenordata" class="csl-entry" role="listitem">
Thomson-DeVeaux, Amelia, Laura Bronner, 와/과 Damini Sharma. 2021. <span>“<span>Cities Spend Millions On Police Misconduct Every Year. Here’s Why It’s So Difficult to Hold Departments Accountable</span>”</span>. <em>FiveThirtyEight</em>, 2월. <a href="https://fivethirtyeight.com/features/police-misconduct-costs-cities-millions-every-year-but-thats-where-the-accountability-ends/">https://fivethirtyeight.com/features/police-misconduct-costs-cities-millions-every-year-but-thats-where-the-accountability-ends/</a>.
</div>
<div id="ref-citebabynames" class="csl-entry" role="listitem">
Wickham, Hadley. 2021. <em><span>babynames: US Baby Names 1880-2017</span></em>. <a href="https://CRAN.R-project.org/package=babynames">https://CRAN.R-project.org/package=babynames</a>.
</div>
<div id="ref-citervest" class="csl-entry" role="listitem">
———. 2022. <em><span>rvest: Easily Harvest (Scrape) Web Pages</span></em>. <a href="https://CRAN.R-project.org/package=rvest">https://CRAN.R-project.org/package=rvest</a>.
</div>
<div id="ref-citehttr" class="csl-entry" role="listitem">
———. 2023. <em><span>httr: Tools for Working with URLs and HTTP</span></em>. <a href="https://CRAN.R-project.org/package=httr">https://CRAN.R-project.org/package=httr</a>.
</div>
<div id="ref-tidyverse" class="csl-entry" role="listitem">
Wickham, Hadley, Mara Averick, Jenny Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, 기타. 2019. <span>“<span>Welcome to the Tidyverse</span>”</span>. <em>Journal of Open Source Software</em> 4 (43): 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>.
</div>
<div id="ref-usethis" class="csl-entry" role="listitem">
Wickham, Hadley, Jennifer Bryan, 와/과 Malcolm Barrett. 2022. <em><span>usethis: Automate Package and Project Setup</span></em>. <a href="https://CRAN.R-project.org/package=usethis">https://CRAN.R-project.org/package=usethis</a>.
</div>
<div id="ref-citepurrr" class="csl-entry" role="listitem">
Wickham, Hadley, 와/과 Lionel Henry. 2022. <em><span>purrr: Functional Programming Tools</span></em>. <a href="https://CRAN.R-project.org/package=purrr">https://CRAN.R-project.org/package=purrr</a>.
</div>
<div id="ref-xml2" class="csl-entry" role="listitem">
Wickham, Hadley, Jim Hester, 와/과 Jeroen Ooms. 2021. <em><span>xml2: Parse XML</span></em>. <a href="https://CRAN.R-project.org/package=xml2">https://CRAN.R-project.org/package=xml2</a>.
</div>
</div>
</section>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>빨리 끝내는 학생들은 제시카가 2014년 9월 소녀시대를 탈퇴한 것도 비슷하게 살펴보고, 두 상황을 비교해 보십시오.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "복사완료!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "복사완료!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/tellingstorieswithdata\.com\/mybook");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./06-farm_ko.html" class="pagination-link" aria-label="측정, 인구 조사, 표본 추출">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">측정, 인구 조사, 표본 추출</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./08-hunt_ko.html" class="pagination-link" aria-label="실험 및 설문 조사">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">실험 및 설문 조사</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/RohanAlexander/telling_stories/edit/main/07-gather_ko.qmd" class="toc-action"><i class="bi bi-github"></i>편집</a></li></ul></div></div></div></footer></body></html>